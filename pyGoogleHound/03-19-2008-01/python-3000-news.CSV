"Subject","Body","From: (Name)","From: (Address)","From: (Type)","To: (Name)","To: (Address)","To: (Type)","CC: (Name)","CC: (Address)","CC: (Type)","BCC: (Name)","BCC: (Address)","BCC: (Type)","Billing Information","Categories","Importance","Mileage","Sensitivity"
"Python-3000 Digest, Vol 25, Issue 44","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: binascii.crc32 vs zlib.crc32 (Guido van Rossum)
   2. PyLong_Check() behaviour clarification (test_getargs2 failing
      on Windows x64) (Trent Nelson)
   3. u'text' as an alias for 'text'? (Lennart Regebro)
   4. Re: [Python-Dev] 2.6 and 3.0 project management
      (Anand Balachandran Pillai)
   5. Re: from .foo import * (Nick Coghlan)
   6. Re: u'text' as an alias for 'text'? (Nick Coghlan)
   7. Re: u'text' as an alias for 'text'? (Lennart Regebro)


----------------------------------------------------------------------

Message: 1
Date: Thu, 20 Mar 2008 00:02:32 -0700
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] binascii.crc32 vs zlib.crc32
To: ""Gregory P. Smith"" <greg@krypto.org>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803200002y840c081if3191f50f280ba1e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hm.  zlib is an odd place to find this API (unless you know way more
about gzip than healthy :-).  Though binascii isn't much better.  I'd
rather expect this in the vicinity of md5 and sha... Is it possible to
tweak that C code to use the zlib version if present and the old C
code otherwise?

On Tue, Mar 18, 2008 at 3:21 PM, Gregory P. Smith <greg@krypto.org> wrote:
> Both modules have a crc32 function.  The zlib version is faster when zlib
> has been compiled optimally or about the same when zlib is old or uses its C
> code.
>
> Should we ditch the binascii.crc32 version in py3k?
>
>  64bit Linux (CentOS 5.1):
>
> $ python2.4 -m timeit 'foo=""abcdefghijklmnop""*10' 'import binascii as mod'
> 'f = mod.crc32' 'for x in xrange(100000): f(foo)'
>  10 loops, best of 3: 108 msec per loop
> $ python2.4 -m timeit 'foo=""abcdefghijklmnop""*10' 'import zlib as mod' 'f =
> mod.crc32' 'for x in xrange(100000): f(foo)'
>  10 loops, best of 3: 40.5 msec per loop
>
> 32bit MacOS X 10.4:
>
> % python2.3 /usr/lib/python2.3/timeit.py 'foo=""abcdefghijklmnop""*10' 'import
> binascii as mod' 'f = mod.crc32' 'for x in xrange(100000): f(foo)'
>  10 loops, best of 3: 7.37e+04 usec per loop
> % python2.3 /usr/lib/python2.3/timeit.py 'foo=""abcdefghijklmnop""*10' 'import
> zlib as mod' 'f = mod.crc32' 'for x in xrange(100000): f(foo)'
>  10 loops, best of 3: 4.62e+04 usec per loop
>
> Removal from binascii would break things for platforms or embedded systems
> wanting crc32 that don't want to include zlib.  Anyone care?
>
> What about 2.x?  if we remove the redundancy in py3k i guess we deprecate
> binascii.crc32 and remove in 2.7?
>
> -gps
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/guido%40python.org
>
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Thu, 20 Mar 2008 00:13:00 -0700
From: Trent Nelson <tnelson@onresolve.com>
Subject: [Python-3000] PyLong_Check() behaviour clarification
	(test_getargs2 failing on Windows x64)
To: ""python-3000@python.org"" <python-3000@python.org>
Message-ID:
	<87D3F9C72FBF214DB39FA4E3FE618CDC6E160CEE32@EXMBX04.exchhosting.com>
Content-Type: text/plain; charset=""us-ascii""

test_getargs2 is failing on Windows x64:
test test_getargs2 failed -- Traceback (most recent call last):
  File ""S:\buildbots\python.x64\3.0.nelson-win64\build\lib\test\test_getargs2.py"", line 190, in test_n
    self.failUnlessEqual(99, getargs_n(Long()))
TypeError: 'Long' object cannot be interpreted as an integer

Drilling down into the source, this code arrives at Python/getargs.c:convertsimple().  On Windows x64, SIZEOF_SIZE_T != SIZEOF_LONG, so there's a case 'n' statement that is defined that does the following:

    iobj = PyNumber_Index(arg);

I'm a little confused.  At this point, arg is a PyObject *, and arg->obj_type->tp_as_number->nb_int has a non-zero value.  However, PyNumber_Index(arg) performs two checks, and this object fails both, which results in the TypeError being raised.

The first check is PyLong_Check(arg), which is handled via PyType_FastSubclass, which ends up doing the following:

    ((arg->obj_type->tp_flags & Py_TPFLAGS_LONG_SUBCLASS) != 0)

tp_flags is 284160 at this point.  Py_TPFLAGS_LONG_SUBCLASS is 16777216 and Py_TPFLAGS_INT_SUBCLASS is 8388608, so this check fails.  Why doesn't tp_flags have either one of these values here?  obj_type->nb_int has a value, so shouldn't flags reflect the type?

I've just checked a 32-bit build and PyNumber_Index for a PyObject * representing a literal 99 also exhibits the same behaviour as above.

Also, if we're a 32-bit build, the 'n' code path visits PyLong_AsLong(), which calls PyLong_AsLongAndOverflow() -- the test cases calling getargs_n() test for the overflow being raised correctly.  Notionally, on x64 Windows where ((size_t == long long) > long), shouldn't we have a PyLong_AsLongLongAndOverflow() method?

    Trent.


------------------------------

Message: 3
Date: Thu, 20 Mar 2008 08:48:11 +0100
From: ""Lennart Regebro"" <regebro@gmail.com>
Subject: [Python-3000] u'text' as an alias for 'text'?
To: python-3000@python.org
Message-ID:
	<319e029f0803200048s768262d1g3805873e4e646e0c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hiya all, I've googled for this issue but I couldn't find it so I hope
this hasn't been beaten to death already.

I've been doing some compatibility tests with 3.0a3, 2.6a1 and 2.5, to
see exactly what breaks and how and if you can get around it,
basically to see if it is possible to write code that runs under both
2.6 and 3.0 without too much pain. It's looking rather encouraging,
most differences have easy workarounds. Some of them need try/except
clauses which could be collected in a small compatibility module
installable as an egg for those who want it.

There is one big problem though, and it's unicode. I'm happy to see
that 2.6 has the b'data' syntax as an alias for 'data', to make it
easier to port code from 2.6 to 3.0. But 3.0 doesn't support the
u''syntax, and that means that it gets very hard to use unicode in an
application and run it under 2.6 and 3.0. You can get around it with
this workaround:

    try:
        u = unicode
    except NameError:
        u = str
    text = u(""This is unicode"")

But this is still not perfect, as this means you only can have
ascii-texts in the unicode strings. That's OK for people like me that
use Zope, because we'll use i18n tools to localize texts anyway, but I
suspect it's not going to be OK for others. Also, it's ugly. :-)


I would really like to see u'text' support in Python 3.0, as an alias
for 'text'. If we can have that, it means that 90% of all code I have
written will just straight of in Python 3.0 (yeah, really), and most
of the remaining code can be fixed with conditional imports of the
renamed standard modules.

Admittedly, this is because I rarely use xrange or iterkeys. Also, I
rarely print, I use the logging module, and so on. But I don't think
that is so unusual, is it?


So, please allow u'' in Python 3.0! With that change, my
porting/compatibility worried would be gone, and  you would be able to
choose between the three porting strategies dependningon how your code
base and user base looks: 1. Clean break. 2. Syncing with 2to3, 3.
Supporting both 2.6 and 3.0.

-- 
Lennart Regebro: Zope and Plone consulting.
http://www.colliberty.com/
+33 661 58 14 64


------------------------------

Message: 4
Date: Thu, 20 Mar 2008 14:56:12 +0530
From: ""Anand Balachandran Pillai"" <abpillai@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<8548c5f30803200226w1c41ce3btb6ef7d21ac7fe7cb@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

Hi,

  Sorry for the late reply. Looked into the bug list, the following bugs
looked interesting.

http://bugs.python.org/issue2122
http://bugs.python.org/issue2188
http://bugs.python.org/issue2320
http://bugs.python.org/issue2325
http://bugs.python.org/issue2355
http://bugs.python.org/issue2389

There are also many bugs filed for Py3k which are patterned
like ""deprecated feature <oldfeature> should raise a warning in py3k"".
Are they in any priority ?

I would like looking into any or some of the above bugs or perhaps
the warning bugs. How do I go about doing it ?

Thanks

--Anand

On Mon, Mar 17, 2008 at 7:08 PM, Guido van Rossum <guido@python.org> wrote:
> Glad you want to help!
>
>  You can find plenty of things to do in the bug tracker at
>  bugs.python.org. Note that 2.6 needs as much (or more!) love as 3.0 at
>  this point. (2.6 is being developed in the svn trunk.) Feel free to
>  tentatively pick a project and send mail here asking if that's
>  something we'd like to have fixed.
>
>  Again, thanks!
>
>  --Guido
>
>
>
>  On Mon, Mar 17, 2008 at 2:48 AM, Anand Balachandran Pillai
>  <abpillai@gmail.com> wrote:
>  > Hi py3k,
>  >
>  >      First of all, excuse me for taking your time. I am new to the list
>  >  so, not familiar with the processes specific to the list, if any.
>  >
>  >      I am new to the list (joined a week back) but not new to Python having
>  >  coded in it for a fair bit of time and contributed open source code in Python,
>  >  but not yet to the Python project.
>  >
>  >     I have been reading the py3k archives and some recent mails. I
>  >  would like to help out in some way. I am familiar with the Python
>  >  development process and has read most of the PEPs related to
>  >  Py3k. Perhaps there are some bugs to fix, some documentation to
>  >  be done, testing ... ?
>  >
>  >     Excuse me if I sound naive, but I am not sure where to start.
>  >  I checked out py3k branch, built it and have it running on my Fedora box.
>  >  Is there a URL showing a list of tasks to start with so I can start on
>  >  something ?
>  >
>  >  Did not want to start a new thread for my post, so replying to a thread
>  >  which seemed relevant.
>  >
>  >  Thanks a lot for your patience.
>  >
>  >  Best Regards
>  >
>  >  --Anand
>  >
>  >  http://harvestmanontheweb.com
>  >
>  >
>  >
>  >
>  >  On Mon, Mar 17, 2008 at 5:18 AM, Barry Warsaw <barry@python.org> wrote:
>  >  > -----BEGIN PGP SIGNED MESSAGE-----
>  >  >  Hash: SHA1
>  >  >
>  >  >
>  >  > On Mar 16, 2008, at 5:02 PM, Martin v. L?wis wrote:
>  >  >
>  >  >  >> How about using the ""critical"" Severity for show stoppers?
>  >  >  >
>  >  >  > Alternatively, Priority ""immediate"" could be used.
>  >  >  >
>  >  >  > The intended use of Severity is that it is assigned by the
>  >  >  > submitter, whereas Priority is assigned by triage/developers.
>  >  >  >
>  >  >  > We should really decide whether we want to use it that way.
>  >  >
>  >  >  That would certainly work for me.  Could we add some description of
>  >  >  this separation to the Roundup pages?  And/or is there a way that only
>  >  >  developers or the triage specialists are allowed to change the priority?
>  >  >
>  >  >
>  >  >  - -Barry
>  >  >
>  >  >  -----BEGIN PGP SIGNATURE-----
>  >  >  Version: GnuPG v1.4.8 (Darwin)
>  >  >
>  >  >  iQCVAwUBR92x4HEjvBPtnXfVAQLAAAP9FIS+Z3OI4CK+KVSrqkuZkwTl2cs0Rk3Q
>  >  >  6RQNNuReyLIGPXqvXoFcOO2zZcZdWVcSwkw7DJhzV1yPI9z2/KY5ve298Mg75afG
>  >  >  eFJO+TVH24LsWyOqXe9Aodoaf+OUpJcAhRy6q1YVtTlxoY/VuiOUtNjhNsJ7DKWP
>  >  >  WwlDBlduW0g=
>  >  >  =/42B
>  >  >  -----END PGP SIGNATURE-----
>  >  >
>  >  >
>  >
>  > > _______________________________________________
>  >  >  Python-3000 mailing list
>  >  >  Python-3000@python.org
>  >  >  http://mail.python.org/mailman/listinfo/python-3000
>  >  >  Unsubscribe: http://mail.python.org/mailman/options/python-3000/abpillai%40gmail.com
>  >  >
>  >
>  >
>  >
>  >  --
>  >  -Anand
>  >
>  >
>  > _______________________________________________
>  >  Python-3000 mailing list
>  >  Python-3000@python.org
>  >  http://mail.python.org/mailman/listinfo/python-3000
>  >  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>
>
> >
>
>
>
>  --
>  --Guido van Rossum (home page: http://www.python.org/~guido/)
>



-- 
-Anand

------------------------------

Message: 5
Date: Thu, 20 Mar 2008 20:23:21 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] from .foo import *
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <47E23B19.5000004@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Wed, Mar 19, 2008 at 2:57 AM, Nick Coghlan <ncoghlan@gmail.com> wrote:
>>  However, PEP 3100 (the general Py3k TO-DO list) includes a line item to
>>  get rid of ""from ... import *"" at function level because of the merry
>>  hell it plays with the local variable optimisations. It's possible the
>>  module level version also got clobbered when this was implemented.
> 
> That sounds like completely separate from relative import though, and
> unrelated. I think outside functions ""from .foo import *"" should be
> allowed.
> 

Oh, I agree (it's an invaluable trick for things like ""from 
._hidden_module import *""). I was just speculating on how the module 
level variant may have come to be broken in the first place, not 
suggesting that the breakage was intentional or a good idea. My 
curiousity isn't strong enough to get me to trawl through the svn 
history to find out the actual cause though ;)

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 6
Date: Thu, 20 Mar 2008 20:28:48 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] u'text' as an alias for 'text'?
To: Lennart Regebro <regebro@gmail.com>
Cc: python-3000@python.org
Message-ID: <47E23C60.6030306@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Lennart Regebro wrote:
> So, please allow u'' in Python 3.0! With that change, my
> porting/compatibility worried would be gone, and  you would be able to
> choose between the three porting strategies dependningon how your code
> base and user base looks: 1. Clean break. 2. Syncing with 2to3, 3.
> Supporting both 2.6 and 3.0.

3 is not an option, and isn't going to be an option. The intended 
approach for string compatibility is to use u'' and b'' in 2.6, and let 
2to3 take care of converting the u'' to '' in the 3.0 version.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 7
Date: Thu, 20 Mar 2008 11:45:41 +0100
From: ""Lennart Regebro"" <regebro@gmail.com>
Subject: Re: [Python-3000] u'text' as an alias for 'text'?
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<319e029f0803200345k128b0613x20694792a9de283f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Mar 20, 2008 at 11:28 AM, Nick Coghlan <ncoghlan@gmail.com> wrote:
>  3 is not an option, and isn't going to be an option.

I know the Python 3000 project started with the attitude of not having
any backwards compatibility to be able to start at a blank slate. But
since then the compatibility set has increased so far that 3 now could
be an option with very little effort.

3 *should* be an option, as well. Loads of software, in particular the
whole Plone community, which is a significant part of the Python user
base, will struggle very hard if 3 is not an option. But this
discussion *has* been beaten to death. 3 should be an option, and it
is an option, if u'' gets supported.

-- 
Lennart Regebro: Zope and Plone consulting.
http://www.colliberty.com/
+33 661 58 14 64


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 44
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 43","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. zlib.crc32 - signed or unsigned? (Christian Heimes)
   2. Re: Strategy for porting to 3.0? (Christian Heimes)
   3. Re: Using *a for packing in lists and other places
      (Charles Merriam)
   4. Re: Strategy for porting to 3.0? (Martin v. L?wis)
   5. Re: zlib.crc32 - signed or unsigned? (Martin v. L?wis)
   6. Re: Strategy for porting to 3.0? (skip@pobox.com)
   7. Re: Strategy for porting to 3.0? (Martin v. L?wis)
   8. Re: zlib.crc32 - signed or unsigned? (Gregory P. Smith)
   9. Re: zlib.crc32 - signed or unsigned? (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Wed, 19 Mar 2008 22:54:48 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: [Python-3000] zlib.crc32 - signed or unsigned?
To: python-3000@python.org
Message-ID: <47E18BA8.6050602@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

In Python 3.0 the unit test for zlib is broken because in 3.0 
zlib.crc32() returns an unsigned long. But in Python 2.x it's a signed int.

How should the issue be solved? I think the unsigned long is wrong.

Christian


------------------------------

Message: 2
Date: Wed, 19 Mar 2008 22:59:08 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: python-3000@python.org
Message-ID: <frs219$24l$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Eric Smith schrieb:
> For example, say that 2to3 changes all instances of has_key to an ""in"" 
> expression (I'm not saying it does this or not, I really don't know). 
> If you have a Locksmith class that has a has_key method unrelated to 
> dicts, then 2to3 would break it.  But it's certainly possible that you 
> could change the method name in your 2.6 code and avoid the problem. 
> You'd have 2.6 code that could automatically run in 3.0.

IIRC Collin is working on a system to skip those with a comment like

  #2to3: skip fixer_haskey
  if egg.has_key(spam):

Christian




------------------------------

Message: 3
Date: Wed, 19 Mar 2008 15:31:37 -0700
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Terry Reedy"" <tjreedy@udel.edu>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40803191531i132664edk711a053dbe112f11@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Mar 17, 2008 at 3:37 PM, Terry Reedy <tjreedy@udel.edu> wrote:
>  ...
>  Can you give another rule that you prefer and that I can comprehend and
>  that I can explain to Python newcomers?  The OP only gave a few examples of
>  * usage and (initially) no rule that I saw.

Really, it is as clear as is the summer sun.   Maybe we should add it
to the tutorial to be clear:

'*':  Python expansion operator expands things to bigger things.  For
example, ""3*5"" expands 3 by multiplying by five while ""3**5"" expands
it twice resulting in exponentiation.  In exactly the same vein
'import * from mod"" expands the implicit namespace by the symboles in
mod, unless mod has __all__ in which case by not all the symbols.  *a
expands a into a tuple, or into a the current tuple if inside a
function parameter list, so **a expands it twice, except at the end
where **a means it is a dictionary of names not used yet.  Which fits
well with the use of expanding in general expressions where *a,b,c =
expr expands a into a tuple to be big enough to hold the expression.
Be careful not to use **a,b,c = expr as this causes a to expand to far
and blow up the compiler.   Similarly the the * can be used on the
left hand side to expand things there.  * can't be used by itself as
you can't blow up nothing, and should be avoided on Sparc machines
because blowing up the sun is a nonrecoverable boo-boo.  See also
""diving where the is tuple while avoiding a really bad tan.""  Some
code might make this clear.

import * from animals;
rabbits = rabbits * rabbits ** rabbits  # they breed fast and will
double expand before the single expand.
mice = *mouse.blind()*3 # poor mice in a tuple
*cat = *mice  # blind mice which is three mouses get eaten by a cat,
of which there is only one.
dog1, *dog2 = cat, *cat, *mice  # which is a concise way of saying if
two dogs eat the cat and the cat has mice, then
# the second dog eats not only the cat and the mice but any other
blind mice around.
count(first_dog=dog1, *dog2)
# how many mice are in the second dog is left as an exercise in philosophy.
# unfortunately, this really isn't very Pythonic because dogs are not
snakes, as everyone knows.


Seriously, this proposed syntax is about as clear as silly proposals
for ""def foo(self, a,b,lamda c:self.d())""
creating an array of code to magically execute in a created context.
It's a useful special case, just not special enough.

Have a fun day!


------------------------------

Message: 4
Date: Wed, 19 Mar 2008 19:45:06 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <47E1B392.7080809@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>     Martin> One option that I envision is that you might keep all sources as
>     Martin> 2.x, and only convert to 3.x at installation time, 
> 
> How can this ever work?  Aren't there always going to be some
> incompatibilities which aren't covered by -3 or 2to3?  Those will require
> manual code changes which aren't 2.x compatible.

Like which incompatibilities specifically? I'm not aware of any.

There are certainly incompatibilities, but I am not aware of a case
where you can't write the code so that it works correctly in 2.x, and
then works also correctly after 2to3 has done its thing. Most likely,
this wouldn't work for SpamBayes as-is, but I can't see why it couldn't
work for SpamBayes when-changed.

> I view this mostly as an exercise to provide feedback to the greater Python
> community, not necessarily a straight-line path to 3.x support in
> SpamBayes.

Sure. As an exercise, I think it would be most useful if you actually
tried to implement some strategy for SpamBayes that you think other
projects could realistically also follow, and the report if and how
this strategy falls short.

Regards,
Martin




------------------------------

Message: 5
Date: Wed, 19 Mar 2008 20:30:25 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] zlib.crc32 - signed or unsigned?
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <47E1BE31.70602@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes schrieb:
> In Python 3.0 the unit test for zlib is broken because in 3.0 
> zlib.crc32() returns an unsigned long. But in Python 2.x it's a signed int.
> 
> How should the issue be solved? I think the unsigned long is wrong.

Here at the sprint people agreed that crc32 *obviously* gives
an unsigned number.

It's unfortunate that Python 2.6 can't really implement that
very well, hence we have to keep the 2.x behavior in 2.6.
In 3k, it should change.

Regards,
Martin


------------------------------

Message: 6
Date: Wed, 19 Mar 2008 21:00:38 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID: <18401.50502.497181.169511@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    >> How can this ever work?  Aren't there always going to be some
    >> incompatibilities which aren't covered by -3 or 2to3?  Those will
    >> require manual code changes which aren't 2.x compatible.

    Martin> Like which incompatibilities specifically? I'm not aware of any.

Nothing specifically.  I was simply under the impression that the conversion
couldn't be 100% from my reading, perhaps incorrectly, of the mailing list.

Skip


------------------------------

Message: 7
Date: Wed, 19 Mar 2008 22:11:32 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <47E1D5E4.9050306@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>     >> How can this ever work?  Aren't there always going to be some
>     >> incompatibilities which aren't covered by -3 or 2to3?  Those will
>     >> require manual code changes which aren't 2.x compatible.
> 
>     Martin> Like which incompatibilities specifically? I'm not aware of any.
> 
> Nothing specifically.  I was simply under the impression that the conversion
> couldn't be 100% from my reading, perhaps incorrectly, of the mailing list.

Depends on what you mean by ""100%"". The conversion is *always* 100% in
the sense that it converts the complete program to a complete (perhaps
inoperable) program. It will never ever drop pieces of source code, or
refuse to convert them. (David just found a case where it did refuse
processing, but these are bugs that can be fixed).

So it converts *all* source code. It some times does that correctly,
and sometimes incorrectly. It's difficult to talk about ratios here,
I rather see ""correct conversion"" as a binary property: it's either
correct, or it isn't.

Talking in fractions of all Python programs in existence, along
with all possible Python programs, conversion is certainly not correct
for 100% of all programs.

However, conversion is also not 0%, i.e, there are *some* programs
for which conversion is correct. A modified SpamBayes might be one of
them.

Regards,
Martin

P.S. In case you are interested in a formal definition of ""correct
conversion"", here is mine:
Given a specification of a program, and a Python 2.x application
conforming to that specification, the conversion is ""correct"" iff
the resulting 3.x application still conforms to the specification.


------------------------------

Message: 8
Date: Thu, 20 Mar 2008 01:26:47 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] zlib.crc32 - signed or unsigned?
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<52dc1c820803192326n2c6e167drb548055979888d92@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On 3/19/08, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
>
> Christian Heimes schrieb:
>
> > In Python 3.0 the unit test for zlib is broken because in 3.0
> > zlib.crc32() returns an unsigned long. But in Python 2.x it's a signed
> int.
> >
> > How should the issue be solved? I think the unsigned long is wrong.
>
>
> Here at the sprint people agreed that crc32 *obviously* gives
> an unsigned number.
>
> It's unfortunate that Python 2.6 can't really implement that
> very well, hence we have to keep the 2.x behavior in 2.6.
> In 3k, it should change.
>
> Regards,
>
> Martin


yes crcs should be unsigned; they're fixed size bit fields.  it could even
make sense to return them as a 4 byte bytes/str object but that'd be an API
change.  a sign requires you to assume you know the length of the underlying
integer holding it.  python ints and longs don't have a fixed size so that
is troublesome and leads to lots of zlib.crc32(foo) & 0xffffffff and
binascii.crc32(foo) & 0xffffffff or other ugly tricks to un-sign the value.

I could make 2.6 return unsigned but it would mean that it returns a long
half of the time rather than an int.  The informal consensus in the room
earlier this week was to leave 2.x returning a signed value for
compatibility (I made it consistent so that it -always- returns a signed
regardless of sizeof(long)).  i'd be happy either way.

My recent checkin should have fixed the py3k tests and got them returning
unsigned again.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080320/4bc66f4d/attachment-0001.htm 

------------------------------

Message: 9
Date: Wed, 19 Mar 2008 23:39:45 -0700
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] zlib.crc32 - signed or unsigned?
To: ""Gregory P. Smith"" <greg@krypto.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<ca471dc20803192339n178e3598t8a7ca0ecea7ee35a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I say stick to what we have now: 2.6 signed, 3.0 unsigned. The 2.6
behavior is 100% compatible with 2.5 on 32bit boxes. It is 50%
incompatible with 2.5 on 64bit boxes, but it adds 100% compatibility
in 2.6 between 32bit and 64bit boxes (and also in 3.0 of course).

On Wed, Mar 19, 2008 at 11:26 PM, Gregory P. Smith <greg@krypto.org> wrote:
>
>
>
> On 3/19/08, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > Christian Heimes schrieb:
> >
> > > In Python 3.0 the unit test for zlib is broken because in 3.0
> > > zlib.crc32() returns an unsigned long. But in Python 2.x it's a signed
> int.
> > >
> > > How should the issue be solved? I think the unsigned long is wrong.
> >
> >
> > Here at the sprint people agreed that crc32 *obviously* gives
> > an unsigned number.
> >
> > It's unfortunate that Python 2.6 can't really implement that
> > very well, hence we have to keep the 2.x behavior in 2.6.
> > In 3k, it should change.
> >
> > Regards,
> >
> > Martin
>
> yes crcs should be unsigned; they're fixed size bit fields.  it could even
> make sense to return them as a 4 byte bytes/str object but that'd be an API
> change.  a sign requires you to assume you know the length of the underlying
> integer holding it.  python ints and longs don't have a fixed size so that
> is troublesome and leads to lots of zlib.crc32(foo) & 0xffffffff and
> binascii.crc32(foo) & 0xffffffff or other ugly tricks to un-sign the value.
>
> I could make 2.6 return unsigned but it would mean that it returns a long
> half of the time rather than an int.  The informal consensus in the room
> earlier this week was to leave 2.x returning a signed value for
> compatibility (I made it consistent so that it -always- returns a signed
> regardless of sizeof(long)).  i'd be happy either way.
>
> My recent checkin should have fixed the py3k tests and got them returning
> unsigned again.
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/guido%40python.org
>
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 43
*******************************************
??????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 42","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Strategy for porting to 3.0? (skip@pobox.com)
   2. Re: Strategy for porting to 3.0? (Martin v. L?wis)
   3. Re: Strategy for porting to 3.0? (skip@pobox.com)
   4. Re: Strategy for porting to 3.0? (Eric Smith)
   5. Re: [Python-Dev] PEP 361: Python 2.6/3.0 release	schedule
      (Jeroen Ruigrok van der Werven)
   6. Re: [Python-Dev] PEP 361: Python 2.6/3.0 release	schedule
      (John Millikin)
   7. Re: Strategy for porting to 3.0? (skip@pobox.com)
   8. csv.Sniffer - delete in Python 3.0? (skip@pobox.com)
   9. Re: csv.Sniffer - delete in Python 3.0? (Robin Becker)
  10. Re: from .foo import * (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Wed, 19 Mar 2008 06:29:55 -0500
From: skip@pobox.com
Subject: [Python-3000] Strategy for porting to 3.0?
To: python-3000@python.org 
Message-ID: <18400.63795.52233.902170@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


After the next SpamBayes release I plan to branch the code and work on
porting it to Python 3.0, mostly as an experiment in porting code from
Python 2.x to 3.x whose results I can feed back to the larger Python
community.  I'm curious about how best to approach the problem.  My first
thought is to run as many SpamBayes apps and tests as I can with the -3 flag
and resolve as many problems as it finds.  How soon before the set of
warnings it emits stabilizes?  Next would be to run 2to3 to do as much other
automatic conversion as possible.  Now run it under Python 3.x and resolve
any other issues.  Should I feed the problems I discover here back to the
community in hopes either -3 or 2to3 can be enhanced?

Then what?

Skip



------------------------------

Message: 2
Date: Wed, 19 Mar 2008 08:45:24 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <47E118F4.6000608@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> After the next SpamBayes release I plan to branch the code and work on
> porting it to Python 3.0, mostly as an experiment in porting code from
> Python 2.x to 3.x whose results I can feed back to the larger Python
> community.  I'm curious about how best to approach the problem.  My first
> thought is to run as many SpamBayes apps and tests as I can with the -3 flag
> and resolve as many problems as it finds.  How soon before the set of
> warnings it emits stabilizes?

Define ""stabilize"". In the sense that existing warnings will not be 
revoked anymore? That should be now already.

In the sense that no significant number of warnings will be added 
anymore? Not this year, I suppose. I would expect that 2.7 still adds
new -3 warnings, to cover cases where people report porting problems
that could have been warned about.

This is particularly the case when users won't start using -3 until
it stabilizes.

> Next would be to run 2to3 to do as much other
> automatic conversion as possible.  Now run it under Python 3.x and resolve
> any other issues.  Should I feed the problems I discover here back to the
> community in hopes either -3 or 2to3 can be enhanced?

Most definitely.

> Then what?

Hard to tell at the moment. Assuming you want to continue to support 2.x
and 3.x concurrently, you should come up with some strategy on how to do
that.

One option that I envision is that you might keep all sources as 2.x,
and only convert to 3.x at installation time, or perhaps at packaging
time. I don't know whether that would work for you, or would be
attractive. If not, you either need to come up with a different
strategy, or just continue to support only 2.x, and defer switching to
3.x to the future (say, 2010).

Regards,
Martin


------------------------------

Message: 3
Date: Wed, 19 Mar 2008 08:59:11 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID: <18401.7215.718758.363559@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    >> How soon before the set of warnings it emits stabilizes?

    Martin> Define ""stabilize"". In the sense that existing warnings will not
    Martin> be revoked anymore? That should be now already.

Maybe I should have written ""stops growing significantly"" or ""plateaus""
instead of ""stabilizes"".  It seems to me that if people will be adding many
more -3 warnings in the next couple months I should wait until most/all
those warnings are added to the code.  I guess I was really asking if we've
passed the ""knee"" in the growth of the number of warnings -3 will emit.

    >> Then what?

    Martin> Hard to tell at the moment. Assuming you want to continue to
    Martin> support 2.x and 3.x concurrently, you should come up with some
    Martin> strategy on how to do that.

That's not a big problem.  I don't mind creating source distributions for
both for awhile (a couple years anyway).  

    Martin> One option that I envision is that you might keep all sources as
    Martin> 2.x, and only convert to 3.x at installation time, 

How can this ever work?  Aren't there always going to be some
incompatibilities which aren't covered by -3 or 2to3?  Those will require
manual code changes which aren't 2.x compatible.

I view this mostly as an exercise to provide feedback to the greater Python
community, not necessarily a straight-line path to 3.x support in
SpamBayes.

Skip


------------------------------

Message: 4
Date: Wed, 19 Mar 2008 10:25:50 -0400
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <47E1226E.6070005@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

skip@pobox.com wrote:
>     Martin> One option that I envision is that you might keep all sources as
>     Martin> 2.x, and only convert to 3.x at installation time, 
> 
> How can this ever work?  Aren't there always going to be some
> incompatibilities which aren't covered by -3 or 2to3?  Those will require
> manual code changes which aren't 2.x compatible.

I've always thought that yes, there will some things that 2to3 doesn't 
(or can't) fix, but it should be possible to modify your 2.x code so 
that you don't trigger these issues.  Then you'll end up with code that 
can in fact fun in 2.x and in 3.x by way of 2to3.

For example, say that 2to3 changes all instances of has_key to an ""in"" 
expression (I'm not saying it does this or not, I really don't know). 
If you have a Locksmith class that has a has_key method unrelated to 
dicts, then 2to3 would break it.  But it's certainly possible that you 
could change the method name in your 2.6 code and avoid the problem. 
You'd have 2.6 code that could automatically run in 3.0.

This won't work with public API's that can't be changed, but I think 
it's a valid strategy for most code.

The proposed 3to2 also might be a way out.

Eric.


------------------------------

Message: 5
Date: Tue, 18 Mar 2008 09:16:57 +0100
From: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Subject: Re: [Python-3000] [Python-Dev] PEP 361: Python 2.6/3.0
	release	schedule
To: PyDev Dev <python-dev@python.org>, Python 3000
	<python-3000@python.org>
Message-ID: <20080318081657.GQ60713@nexus.in-nomine.org>
Content-Type: text/plain; charset=utf-8

-On [20080318 01:52], Barry Warsaw (barry@python.org) wrote:
>This schedule gives everybody plenty of advanced notice, so you should be 
>able to get your code in on time.

In particular the memory related fixes over the last weeks, please. :)

-- 
Jeroen Ruigrok van der Werven <asmodai(-at-)in-nomine.org> / asmodai
????? ?????? ??? ?? ??????
http://www.in-nomine.org/ | http://www.rangaku.org/
To love someone deeply gives you strength. Being loved by someone deeply
gives you courage...


------------------------------

Message: 6
Date: Tue, 18 Mar 2008 11:17:32 -0500
From: ""John Millikin"" <jmillikin@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] PEP 361: Python 2.6/3.0
	release	schedule
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev Dev
	<python-dev@python.org>
Message-ID:
	<3283f7fe0803180917o459f52d5x32691b1d6d87a8ef@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

> Possible features for 2.6
>     New modules in the standard library:
>         - JSON implementation
>
Have there been any plans made for which one? All of the
implementations I'm aware of (cjson, simplejson, jsonlib, demjson,
python-json) have serious issues that in my opinion should be fixed
before inclusion in the standard library[1]. I am the author of
jsonlib, and am willing to write patches for whichever implementation
becomes the standard, but it would be very nice to know what to focus
on.

Apologies if this has been discussed already, but there was no link to
a PEP in 361 and a search of python-dev and c.l.p returned no relevant
results.


[1]
* cjson and python-json have almost complete absense of Unicode support.
* simplejson is slow and writes incorrect unicode escapes.
* demjson is far too forgiving when parsing and accepts all sorts of
invalid input.
* jsonlib is not PEP 8-compliant and has terrible error handling.
* python-json is abandoned, slow, and lacks Unicode support.


------------------------------

Message: 7
Date: Wed, 19 Mar 2008 10:31:03 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] Strategy for porting to 3.0?
To: Eric Smith <eric+python-dev@trueblade.com>
Cc: python-3000@python.org
Message-ID: <18401.12727.276330.892436@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Eric> The proposed 3to2 also might be a way out.

Will be interesting to see how the round-trip code compares to the original.

Skip



------------------------------

Message: 8
Date: Wed, 19 Mar 2008 10:44:05 -0500
From: skip@pobox.com
Subject: [Python-3000] csv.Sniffer - delete in Python 3.0?
To: python-3000@python.org, python-list@python.org 
Message-ID: <18401.13509.344107.988906@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


The csv module contains a Sniffer class which is supposed to deduce the
delimiter and quote character as well as the presence or absence of a header
in a sample taken from the start of a purported CSV file.  I no longer
remember who wrote it, and I've never been a big fan of it.  It determines
the delimiter based almost solely on character frequencies.  It doesn't
consider what the actual structure of a CSV file is or that delimiters and
quote characters are almost always taken from the set of punctuation or
whitespace characters.  Consequently, it can cause some occasional
head-scratching:

    >>> sample = """"""\
    ... abc8def
    ... def8ghi
    ... ghi8jkl
    ... """"""
    >>> import csv
    >>> d = csv.Sniffer().sniff(sample)
    >>> d.delimiter
    '8'
    >>> sample = """"""\
    ... a8bcdef
    ... ab8cdef
    ... abc8def
    ... abcd8ef
    ... """"""
    >>> d = csv.Sniffer().sniff(sample)
    >>> d.delimiter
    'f'

It's not clear to me that people use letters or digits very often as
delimiters.  Both samples above probably represent data from single-column
files, not double-column files with '8' or 'f' as the delimiter.

I would be happy to get rid of it in 3.0, but I'm also aware that some
people use it.  I'd like feedback from the Python community about this.  If
I removed it is there someone out there who wants it badly enough to
maintain it in PyPI?

Thanks,

-- 
Skip Montanaro - skip@pobox.com - http://www.webfast.com/~skip/


------------------------------

Message: 9
Date: Wed, 19 Mar 2008 16:24:46 +0000
From: Robin Becker <robin@reportlab.com>
Subject: Re: [Python-3000] csv.Sniffer - delete in Python 3.0?
To: python-3000@python.org
Cc: python-list@python.org
Message-ID: <47E13E4E.5030306@chamonix.reportlab.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

skip@pobox.com wrote:
........
> 
> I would be happy to get rid of it in 3.0, but I'm also aware that some
> people use it.  I'd like feedback from the Python community about this.  If
> I removed it is there someone out there who wants it badly enough to
> maintain it in PyPI?
......
sounds like we really need

import ai

info = ai.guess_what_this_is('crummy.csv')

but I suspect that won't arrive before py5000

I use csv, but almost always with tab or comma separation and \r\n line terminators.
-- 
Robin Becker



------------------------------

Message: 10
Date: Wed, 19 Mar 2008 12:08:06 -0700
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] from .foo import *
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803191208s1e45de0l861d24d8b790f8ee@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 19, 2008 at 2:57 AM, Nick Coghlan <ncoghlan@gmail.com> wrote:
>  However, PEP 3100 (the general Py3k TO-DO list) includes a line item to
>  get rid of ""from ... import *"" at function level because of the merry
>  hell it plays with the local variable optimisations. It's possible the
>  module level version also got clobbered when this was implemented.

That sounds like completely separate from relative import though, and
unrelated. I think outside functions ""from .foo import *"" should be
allowed.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 42
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 41","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: python-safethread project status (Adam Olsen)
   2. JSON nit (skip@pobox.com)
   3. Re: JSON nit (Bob Ippolito)
   4. Re: python-safethread project status (Jeffrey Yasskin)
   5. Re: from .foo import * (Nick Coghlan)


----------------------------------------------------------------------

Message: 1
Date: Tue, 18 Mar 2008 19:41:17 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181841u37c594can7891a479d1d309c1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 6:47 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Adam Olsen wrote:
>  > I'd tend to assume only *purely* functional languages should have
>  > asynchronous interrupts.  Any imperative language with them is
>  > suspect.
>
>  Yet there are situations where *not* having any such thing
>  can be extremely inconvenient.
>
>  If I'm performing some background calculation that only
>  munges on its own data, and doesn't touch anything shared,
>  it's quite safe to kill it at any point and throw away
>  everything it was working on.
>
>  Being unable to do that from outside means that I have
>  to sprinkle explicit tests through it for an abort flag,
>  which is a horrible thing to have to do from a software
>  engineering standpoint for many reasons.
>
>  In the consenting-adults environment of Python, I don't
>  like having a useful facility withheld from me just
>  because it's possible to misuse it.

Sorry, I wasn't clear.  I'm only opposed to using it as the default.
There certainly are cases that demand it and I do wish to provide it
for them.

I suspect it'll be more practical to keep usage to a bare minimum
where you can't sprinkle checks for the cancellation flag, but that
doesn't matter much at this point.


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 2
Date: Tue, 18 Mar 2008 22:32:55 -0500
From: skip@pobox.com
Subject: [Python-3000] JSON nit
To: python-3000@python.org 
Message-ID: <18400.35175.953074.951901@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii

Regarding putting some JSON implementation in the standard library...

I suppose anyone who uses JSON is aware of its limitations, but this was a
bit disconcerting:

    >>> simplejson.loads(simplejson.dumps({1: 2}))
    {u'1': 2}

Silent type conversion is a Perl thing.  I would prefer it if it raised a
TypeError if I tried to encode something other than a string as a dictionary
key.

Skip




------------------------------

Message: 3
Date: Wed, 19 Mar 2008 00:42:39 -0700
From: ""Bob Ippolito"" <bob@redivi.com>
Subject: Re: [Python-3000] JSON nit
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<6a36e7290803190042u13d973fan272eea9a7049aa7b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Tue, Mar 18, 2008 at 8:32 PM,  <skip@pobox.com> wrote:
> Regarding putting some JSON implementation in the standard library...
>
>  I suppose anyone who uses JSON is aware of its limitations, but this was a
>  bit disconcerting:
>
>     >>> simplejson.loads(simplejson.dumps({1: 2}))
>     {u'1': 2}
>
>  Silent type conversion is a Perl thing.  I would prefer it if it raised a
>  TypeError if I tried to encode something other than a string as a dictionary
>  key.

It's also a JavaScript thing, which is why that behavior was chosen.
Yes it's silly, but no it has never caused anyone any (reported)
problems in practice.

-bob


------------------------------

Message: 4
Date: Wed, 19 Mar 2008 03:06:55 -0500
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<5d44f72f0803190106m1df58730vc6793c7dc7b6dcf7@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

FWIW, I think thread interruption/cancellation deserves a PEP. There
are a bunch of subtle issues like this, several other languages that
we can imitate, and a lot of places in the implementation that will
need to change to support it. I was planning to write the PEP a month
or two from now, but if someone else gets there first, I'll be happy
to help.

On Tue, Mar 18, 2008 at 7:47 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Adam Olsen wrote:
>  > I'd tend to assume only *purely* functional languages should have
>  > asynchronous interrupts.  Any imperative language with them is
>  > suspect.
>
>  Yet there are situations where *not* having any such thing
>  can be extremely inconvenient.
>
>  If I'm performing some background calculation that only
>  munges on its own data, and doesn't touch anything shared,
>  it's quite safe to kill it at any point and throw away
>  everything it was working on.
>
>  Being unable to do that from outside means that I have
>  to sprinkle explicit tests through it for an abort flag,
>  which is a horrible thing to have to do from a software
>  engineering standpoint for many reasons.
>
>  In the consenting-adults environment of Python, I don't
>  like having a useful facility withheld from me just
>  because it's possible to misuse it.
>
>  --
>  Greg
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/jyasskin%40gmail.com
>



-- 
Namast?,
Jeffrey Yasskin
http://jeffrey.yasskin.info/

------------------------------

Message: 5
Date: Wed, 19 Mar 2008 19:57:28 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] from .foo import *
To: Aahz <aahz@pythoncraft.com>
Cc: python-3000@python.org
Message-ID: <47E0E388.50707@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Aahz wrote:
> 
> It was part of PEP 328 (Relative Imports) [*] -- and actually, taking a
> quick look at the PEP, it appears that the links within it point to some
> discussion about the ""import *"" issue.

I found a question from Jack Jansen about it in one of the threads, but 
no real answer that I saw.

However, PEP 3100 (the general Py3k TO-DO list) includes a line item to 
get rid of ""from ... import *"" at function level because of the merry 
hell it plays with the local variable optimisations. It's possible the 
module level version also got clobbered when this was implemented.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 41
*******************************************
?","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 40","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. changing regrtest to handle import errors (Neal Norwitz)
   2. Re: python-safethread project status (Marcin ?Qrczak? Kowalczyk)
   3. binascii.crc32 vs zlib.crc32 (Gregory P. Smith)
   4. Re: python-safethread project status (Adam Olsen)
   5. Re: python-safethread project status (Marcin ?Qrczak? Kowalczyk)
   6. Re: python-safethread project status (Adam Olsen)
   7. Auto PEP titling? (Re: from .foo import *) (Greg Ewing)
   8. Re: python-safethread project status (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Tue, 18 Mar 2008 16:23:33 -0500
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: [Python-3000] changing regrtest to handle import errors
To: PyDev <python-dev@python.org>, ""Python 3000""
	<python-3000@python.org>
Message-ID:
	<ee2a432c0803181423t40a44f75n969162751c99fed5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

[changing to: and subject: ]

On Tue, Mar 18, 2008 at 4:09 PM, Guido van Rossum <guido@python.org> wrote:
> On Tue, Mar 18, 2008 at 3:58 PM, neal.norwitz
>  <python-3000-checkins@python.org> wrote:
>  >  Get this test to pass (UserList/UserDict no longer exist and caused a skip).
>
>  I think the automatic skip on ImportError is harmful.
>
>  We should add a helper function to test_support so that you can write
>
>  foobar = test_support.import_optional('foobar')
>
>  and it will skip the test if foobar cannot be imported; all other
>  failing imports should cause the test to *fail*.
>
>  Any takers? This should be an easy two-part task.

This would be a great starter project for a new developer.
http://bugs.python.org/issue2409
Let me know if you could use some help.  Feel free to contact me on or off list.

n


------------------------------

Message: 2
Date: Tue, 18 Mar 2008 23:04:32 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <1205877872.10732.28.camel@qrnik>
Content-Type: text/plain

Dnia 18-03-2008, Wt o godzinie 14:32 -0600, Adam Olsen pisze:

> The finalizer thread blocks until something's been deleted.

Ok. If this is the only use case, I feel quite safe not having this,
because my finalizers are implemented independently (and a finalizer
thread is created on demand, which is cheap there).

> I think deferred is a vastly better default.  To translate for
> everybody else, deferred in this context means ""set a flag that I/O
> functions can check"".  It means you'll only get a Cancelled exception
> at documented points.

Well, if ^C uses the same mechanism, which is the case in my language,
then this means that ^C can only interrupt I/O, or synchronization with
other threads, or sleep, but not a long pure computation.

The choice of the default blocking state depends on the programming
style. The more shared data is mutated, the more tempting is to default
to deferred interrupts. The more functional style is, the safer are
asynchronous interrupts. Also defaulting to asynchronous interrupts
needs various language functions and constructs to block interrupts
implicitly, so code does not have to deal with interrupts all the time.
I agree that defaulting to asynchronous interrupts is risky, and might
be too demanding from library authors.

In reality whether a particular interrupt is safe to be processed
could depend on the kind of interrupt (e.g. even if a locally handled
interrupt should be blocked to avoid corrupting a data structure,
an interrupt which exits the whole program would be safe since the data
structure is dead then anyway). I have not considered such design in a
programming language. Looks too complex for its benefits.

> In contrast, asynchronous may raise an exception at totally arbitrary
> points.  Maybe in the finally portion of a try/finally block,

No, because my language blocks interrupts automatically there :-)

They are also blocked e.g. when a mutex is locked, or when a module is
being imported.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 3
Date: Tue, 18 Mar 2008 17:21:49 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: [Python-3000] binascii.crc32 vs zlib.crc32
To: python-3000@python.org
Message-ID:
	<52dc1c820803181521s5cd7e01ia29fac02740fe739@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

Both modules have a crc32 function.  The zlib version is faster when zlib
has been compiled optimally or about the same when zlib is old or uses its C
code.

Should we ditch the binascii.crc32 version in py3k?

64bit Linux (CentOS 5.1):

$ python2.4 -m timeit 'foo=""abcdefghijklmnop""*10' 'import binascii as mod'
'f = mod.crc32' 'for x in xrange(100000): f(foo)'
10 loops, best of 3: 108 msec per loop
$ python2.4 -m timeit 'foo=""abcdefghijklmnop""*10' 'import zlib as mod' 'f =
mod.crc32' 'for x in xrange(100000): f(foo)'
10 loops, best of 3: 40.5 msec per loop

32bit MacOS X 10.4:

% python2.3 /usr/lib/python2.3/timeit.py 'foo=""abcdefghijklmnop""*10' 'import
binascii as mod' 'f = mod.crc32' 'for x in xrange(100000): f(foo)'
10 loops, best of 3: 7.37e+04 usec per loop
% python2.3 /usr/lib/python2.3/timeit.py 'foo=""abcdefghijklmnop""*10' 'import
zlib as mod' 'f = mod.crc32' 'for x in xrange(100000): f(foo)'
10 loops, best of 3: 4.62e+04 usec per loop

Removal from binascii would break things for platforms or embedded systems
wanting crc32 that don't want to include zlib.  Anyone care?

What about 2.x?  if we remove the redundancy in py3k i guess we deprecate
binascii.crc32 and remove in 2.7?

-gps
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080318/8e712cce/attachment-0001.htm 

------------------------------

Message: 4
Date: Tue, 18 Mar 2008 16:22:36 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: "" Marcin ?Qrczak? Kowalczyk "" <qrczak@knm.org.pl>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181522h107493b7i3747959c01dc2ce8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 4:04 PM, Marcin 'Qrczak' Kowalczyk
<qrczak@knm.org.pl> wrote:
> Dnia 18-03-2008, Wt o godzinie 14:32 -0600, Adam Olsen pisze:
>
>
>  > The finalizer thread blocks until something's been deleted.
>
>  Ok. If this is the only use case, I feel quite safe not having this,
>  because my finalizers are implemented independently (and a finalizer
>  thread is created on demand, which is cheap there).

Essentially, your ""spawn a thread to handle this task"" function serves
the same purpose.  As I said, I'd likely need to redesign if I had a
thread pool.  The details here aren't too important.


>  > I think deferred is a vastly better default.  To translate for
>  > everybody else, deferred in this context means ""set a flag that I/O
>  > functions can check"".  It means you'll only get a Cancelled exception
>  > at documented points.
>
>  Well, if ^C uses the same mechanism, which is the case in my language,
>  then this means that ^C can only interrupt I/O, or synchronization with
>  other threads, or sleep, but not a long pure computation.
>
>  The choice of the default blocking state depends on the programming
>  style. The more shared data is mutated, the more tempting is to default
>  to deferred interrupts. The more functional style is, the safer are
>  asynchronous interrupts. Also defaulting to asynchronous interrupts
>  needs various language functions and constructs to block interrupts
>  implicitly, so code does not have to deal with interrupts all the time.
>  I agree that defaulting to asynchronous interrupts is risky, and might
>  be too demanding from library authors.

I'd tend to assume only *purely* functional languages should have
asynchronous interrupts.  Any imperative language with them is
suspect.

Search for info on java's deprecated Thread.stop() if you're not
already familiar with the problems it has.


>  In reality whether a particular interrupt is safe to be processed
>  could depend on the kind of interrupt (e.g. even if a locally handled
>  interrupt should be blocked to avoid corrupting a data structure,
>  an interrupt which exits the whole program would be safe since the data
>  structure is dead then anyway). I have not considered such design in a
>  programming language. Looks too complex for its benefits.

In my case interrupt/cancellation raises an exception.  Doing so
asynchronously could have any manor of bad effects, effectively
eliminating the ability shut down gracefully.  If I wanted that I'd
just kill it from C (_exit(), abort(), SIGKILL, etc.)


>  > In contrast, asynchronous may raise an exception at totally arbitrary
>  > points.  Maybe in the finally portion of a try/finally block,
>
>  No, because my language blocks interrupts automatically there :-)
>
>  They are also blocked e.g. when a mutex is locked, or when a module is
>  being imported.

You mean the *entire* time a mutex is held?  That wouldn't work for
monitors, as they expect to hold their lock for extended periods of
time.

In fact, there's some implicit MonitorSpace's who's locks are very
likely to be held for the entire run of the program.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 5
Date: Tue, 18 Mar 2008 23:52:54 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <1205880774.10732.58.camel@qrnik>
Content-Type: text/plain

Dnia 18-03-2008, Wt o godzinie 16:22 -0600, Adam Olsen pisze:

> Search for info on java's deprecated Thread.stop() if you're not
> already familiar with the problems it has.

The problem with Java's Thread.stop() is that it is not possible to
block it in a given region, and that it is not possible to install
a different handler than throwing an exception. The first issue is
critical. If interrupts can't be blocked, it is impossible to declare
that a given operation is to be performed in whole or not at all, and
this is indeed unsafe.

If interrupts can be blocked, things are quite different, and I believe
that obtaining safe code is practical enough to make defaulting to
asynchronous interrupts a viable option.

> You mean the *entire* time a mutex is held?  That wouldn't work for
> monitors, as they expect to hold their lock for extended periods of
> time.

Aren't you including the time when a thread issues Monitor.wait()?
The mutex is unlocked there.

The coding style I am familiar with advises to not block while having
a lock. Also note that pthread_mutex_lock is not a cancellation point,
even though it can suspend the current thread.

In any case, in my language you can explicitly unblock interrupts
under a mutex, and of course waiting on a condition variable is normally
interruptible (the associated mutex is unlocked).

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 6
Date: Tue, 18 Mar 2008 17:07:34 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: "" Marcin ?Qrczak? Kowalczyk "" <qrczak@knm.org.pl>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181607n54ef9dc1tce2a45a149932868@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 4:52 PM, Marcin 'Qrczak' Kowalczyk
<qrczak@knm.org.pl> wrote:
> Dnia 18-03-2008, Wt o godzinie 16:22 -0600, Adam Olsen pisze:
>
>
>  > Search for info on java's deprecated Thread.stop() if you're not
>  > already familiar with the problems it has.
>
>  The problem with Java's Thread.stop() is that it is not possible to
>  block it in a given region, and that it is not possible to install
>  a different handler than throwing an exception. The first issue is
>  critical. If interrupts can't be blocked, it is impossible to declare
>  that a given operation is to be performed in whole or not at all, and
>  this is indeed unsafe.
>
>  If interrupts can be blocked, things are quite different, and I believe
>  that obtaining safe code is practical enough to make defaulting to
>  asynchronous interrupts a viable option.

I disagree.  In theory you could block things extensively enough that
you'd be okay, but eventually you become equivalent to deferred - only
with a great deal more boilerplate.  The maintenance and testing
issues make it impractical.

Handlers are irrelevant.  Use those for signal handling, not thread
cancellation.


>  > You mean the *entire* time a mutex is held?  That wouldn't work for
>  > monitors, as they expect to hold their lock for extended periods of
>  > time.
>
>  Aren't you including the time when a thread issues Monitor.wait()?
>  The mutex is unlocked there.
>
>  The coding style I am familiar with advises to not block while having
>  a lock. Also note that pthread_mutex_lock is not a cancellation point,
>  even though it can suspend the current thread.

Keeping your critical sections tiny may be ""good practise"", but it's
not possible to do all the time.  In some cases you don't intend
another thread to modify your datastructures for a long period of
time.  In C you might skip locking altogether, but with safethread
you'll likely stick them in a monitor and never release the monitor.

Also, although conceptually related to posix cancellation points, by
aware that my implementation is totally independent.


>  In any case, in my language you can explicitly unblock interrupts
>  under a mutex, and of course waiting on a condition variable is normally
>  interruptible (the associated mutex is unlocked).


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 7
Date: Wed, 19 Mar 2008 12:17:23 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: [Python-3000] Auto PEP titling? (Re: from .foo import *)
To: python-3000@python.org
Message-ID: <47E05B93.6050700@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Aahz wrote:
> [*] General note to the list: see how I'm using both the PEP number and
> the title.

Maybe the Python-Dev list server could pass everything
through a filter that looks for ""PEP xxxx"" references
and inserts the PEP title after them? :-)

-- 
Greg


------------------------------

Message: 8
Date: Wed, 19 Mar 2008 12:47:31 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <47E062A3.4030702@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Adam Olsen wrote:
> I'd tend to assume only *purely* functional languages should have
> asynchronous interrupts.  Any imperative language with them is
> suspect.

Yet there are situations where *not* having any such thing
can be extremely inconvenient.

If I'm performing some background calculation that only
munges on its own data, and doesn't touch anything shared,
it's quite safe to kill it at any point and throw away
everything it was working on.

Being unable to do that from outside means that I have
to sprinkle explicit tests through it for an abort flag,
which is a horrible thing to have to do from a software
engineering standpoint for many reasons.

In the consenting-adults environment of Python, I don't
like having a useful facility withheld from me just
because it's possible to misuse it.

-- 
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 40
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 39","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: python-safethread project status (Adam Olsen)
   2. Re: from .foo import * (Benjamin Peterson)
   3. Re: python-safethread project status (Marcin ?Qrczak? Kowalczyk)
   4. Re: python-safethread project status (Adam Olsen)
   5. Re: from .foo import * (Aahz)
   6. Re: python-safethread project status (Marcin ?Qrczak? Kowalczyk)
   7. Re: python-safethread project status (Adam Olsen)
   8. Re: [Python-Dev] adding json to stdlib (was: Re: PEP	361:
      Python 2.6/3.0 release schedule) (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Tue, 18 Mar 2008 11:24:21 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: ""Thomas Heller"" <theller@ctypes.org>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181024kb4cc139k7ba12061390de82b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 10:15 AM, Thomas Heller <theller@ctypes.org> wrote:
> Adam Olsen schrieb:
>
>
> > On Tue, Mar 18, 2008 at 9:21 AM, Steven Bethard
>  > <steven.bethard@gmail.com> wrote:
>  >> On Tue, Mar 18, 2008 at 6:39 AM, Marcin 'Qrczak' Kowalczyk
>  >>  <qrczak@knm.org.pl> wrote:
>  >>  > Dnia 17-03-2008, Pn o godzinie 11:56 -0600, Adam Olsen pisze:
>  >>  >
>  >>  >  > I've replaced __del__ API (which resurrected objects) with a
>  >>  >  > __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>  >>  >  > in __finalizeattrs__ are proxied into a core object, a finalizer
>  >>  >  > thread is given a reference to the core, and when the main object is
>  >>  >  > deleted the GC asynchronously notifies the finalizer thread so that it
>  >>  >  > can call core.__finalize__().  The net result is an API very similar
>  >>  >  > to __del__ (you need to list attributes it might use), but it's now
>  >>  >  > impossible for the GC to run arbitrary code (I even enforce this).
>  >>  >
>  >>  >  Ah! Irrespective of other issues, I like this very much. This design
>  >>  >  agrees with my understanding of how finalization should behave, except
>  >>  >  that I haven't had details in mind which would fit Python. My abstract
>  >>  >  design needs the finalization function to somehow access parts of the
>  >>  >  dying object, but not the object itself, and this design shows how to
>  >>  >  actually do it in a convenient way.
>  >>
>  >>  Note that you can use something very much like this right now::
>  >>
>  >>     http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/519635
>  >
>  > Yeah.  That's missing the finalizer thread, but that could be add.
>  >
>  > Note, you need to use a finalizer thread in order to use locks to
>  > protect your datastructures.  Without it, if you simply preempt the
>  > current thread like is done today, you can only do operations the
>  > memory model provides as atomic.
>  >
>
>  Hm, I could imagine objects that need to be finalized in the thread that created them.
>  How could that be handled?

If they need access to containing objects the only option is to use
the underlying tool, deathqueues.  WeakKeyDictionary and friends do
this.  This gives you notification that an object was deleted, but
without the core/__finalize__ machinery.

This can be wrapped up to give you back the core/__finalize__
machinery, but with you explicitly checking the deathqueue so you can
call __finalize__.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 2
Date: Tue, 18 Mar 2008 12:47:47 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] from .foo import *
To: ""Neal Norwitz"" <nnorwitz@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<1afaf6160803181047o3201e1bq50f8594ab54518fc@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Tue, Mar 18, 2008 at 12:21 PM, Neal Norwitz <nnorwitz@gmail.com> wrote:

> On Tue, Mar 18, 2008 at 11:59 AM, Benjamin Peterson
> <musiccomposition@gmail.com> wrote:
> >
> >
> >
> > On Tue, Mar 18, 2008 at 10:49 AM, Aahz <aahz@pythoncraft.com> wrote:
> > >
> > > On Tue, Mar 18, 2008, ""Martin v. L?wis"" wrote:
> > > >
> > > > When I do a relative star import, I current get
> > > >
> > > > SyntaxError: 'import *' not allowed with 'from .'
> > > >
> > > > What's the reason for this restriction?
> > >
> > > It was the first step in removing the ability to use ""from *"" at all.
>  I
> > > don't have time right now to find the discussion, but I can do that
> later
> > > if you want.
> > I suppose issue 2400 should be closed, then.
>
> The reason that 2400 was opened was to remove the restriction. :-)  If
> I worded it wrong, feel free to add a comment to it.  The point of
> adding the issue was that the SyntaxError should not be generated and
> the import should do the right thing.

Okay. Sorry, I misread that.

>
>
> n
>
> n
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080318/4c4e015a/attachment-0001.htm 

------------------------------

Message: 3
Date: Tue, 18 Mar 2008 20:13:26 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <1205867606.31138.11.camel@qrnik>
Content-Type: text/plain

Dnia 18-03-2008, Wt o godzinie 11:24 -0600, Adam Olsen pisze:

> If they need access to containing objects the only option is to use
> the underlying tool, deathqueues.

Deathqueues are a part of python-safethread, right?

Interesting, but just like the finalization design, the design with
weakrefs being added to deathqueues instead of using weakref callbacks
is exactly what I consider the right design of weakrefs (or actually
it's a superset of my design which does not include a blocking wait).

I see that you are implementing thread interrupts, which might be the
third thing that you are doing my way, and I am beginning to worry about
these coincidences. The interrupts seem to be unfinished in the patch
available to download, and the anonymous SVN is empty...

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 4
Date: Tue, 18 Mar 2008 13:37:41 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: "" Marcin ?Qrczak? Kowalczyk "" <qrczak@knm.org.pl>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181237w7bfb0829re376f67c11a5585e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 1:13 PM, Marcin 'Qrczak' Kowalczyk
<qrczak@knm.org.pl> wrote:
> Dnia 18-03-2008, Wt o godzinie 11:24 -0600, Adam Olsen pisze:
>
>
>  > If they need access to containing objects the only option is to use
>  > the underlying tool, deathqueues.
>
>  Deathqueues are a part of python-safethread, right?

Yup


>  Interesting, but just like the finalization design, the design with
>  weakrefs being added to deathqueues instead of using weakref callbacks
>  is exactly what I consider the right design of weakrefs (or actually
>  it's a superset of my design which does not include a blocking wait).

What sort of blocking wait do you use?  Or did you mean you don't have one?


>  I see that you are implementing thread interrupts, which might be the
>  third thing that you are doing my way, and I am beginning to worry about
>  these coincidences. The interrupts seem to be unfinished in the patch
>  available to download, and the anonymous SVN is empty...

The interrupt code is pretty rough and only implemented for a couple
cases.  If you look in test.test_sharedmodule, all the calls to
sharedmodule.readloop() use it.

All the interruption stuff will get renamed to ""cancellation"" at some
point, as well as getting fleshed out a little more.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 5
Date: Tue, 18 Mar 2008 12:59:56 -0700
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] from .foo import *
To: python-3000@python.org
Message-ID: <20080318195956.GB11591@panix.com>
Content-Type: text/plain; charset=us-ascii

On Tue, Mar 18, 2008, Ronald Oussoren wrote:
> On 18 Mar, 2008, at 16:49, Aahz wrote:
>>On Tue, Mar 18, 2008, ""Martin v. L?wis"" wrote:
>>>
>>>When I do a relative star import, I current get
>>>
>>>SyntaxError: 'import *' not allowed with 'from .'
>>>
>>>What's the reason for this restriction?
>>
>>It was the first step in removing the ability to use ""from *"" at all.
>>I don't have time right now to find the discussion, but I can do that
>>later if you want.
>
> Do you remember approximately when and where this was discussed? I
> don't like the idea, but don't want to restart the discussion without
> reading the previous discussion.

It was part of PEP 328 (Relative Imports) [*] -- and actually, taking a
quick look at the PEP, it appears that the links within it point to some
discussion about the ""import *"" issue.

[*] General note to the list: see how I'm using both the PEP number and
the title.  For those of us who don't live and breath PEPs it is really
helpful to have both.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""It is easier to optimize correct code than to correct optimized code.""
--Bill Harlan


------------------------------

Message: 6
Date: Tue, 18 Mar 2008 21:04:12 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <1205870652.31138.38.camel@qrnik>
Content-Type: text/plain

Dnia 18-03-2008, Wt o godzinie 13:37 -0600, Adam Olsen pisze:

> What sort of blocking wait do you use?  Or did you mean you don't have one?

I meant that I don't have one, I only have iteration over the whole
queue, which is equivalent to having trypop. Which prompts the question:
what are use cases of pop & wait, i.e. of blocking until the queue is
not empty?

I used to have weakref callbacks. They must be synchronized with the
rest of the program (unless their operations on shared data are already
atomic). Then I realized that a design with deathqueues suffices for
cases like WeakKeyDictionary, and it is not less convenient because
the queue can be checked in exactly those places where the design with
callbacks would lock the shared data.

Regarding interrupts, I have a more involved scheme with threads
blocking and unblocking interrupts, with a counter of the number of
blocks, with a special synchronous mode for being interruptible at
blocking operations only (similar to PTHREAD_CANCEL_DEFERRED, but the
default is PTHREAD_CANCEL_ASYNCHRONOUS), and with signals which don't
necessarily cause an exception but they execute a signal handler which
often throws an exception.

I've seen a simpler interrupt blocking scheme being proposed for Python,
based on the design in Haskell:
   http://www.cs.williams.edu/~freund/papers/python.pdf
but it seems to have been abandoned (the paper is from 2002 and I
haven't heard of anything newer).

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 7
Date: Tue, 18 Mar 2008 14:32:55 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: "" Marcin ?Qrczak? Kowalczyk "" <qrczak@knm.org.pl>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0803181332q2b935b45j5cd59b8487c79139@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 2:04 PM, Marcin 'Qrczak' Kowalczyk
<qrczak@knm.org.pl> wrote:
> Dnia 18-03-2008, Wt o godzinie 13:37 -0600, Adam Olsen pisze:
>
>
>  > What sort of blocking wait do you use?  Or did you mean you don't have one?
>
>  I meant that I don't have one, I only have iteration over the whole
>  queue, which is equivalent to having trypop. Which prompts the question:
>  what are use cases of pop & wait, i.e. of blocking until the queue is
>  not empty?

The finalizer thread blocks until something's been deleted.  I may
need a better API if I (eventually) switch to a threadpool for
finalizers though.


>  I used to have weakref callbacks. They must be synchronized with the
>  rest of the program (unless their operations on shared data are already
>  atomic). Then I realized that a design with deathqueues suffices for
>  cases like WeakKeyDictionary, and it is not less convenient because
>  the queue can be checked in exactly those places where the design with
>  callbacks would lock the shared data.
>
>  Regarding interrupts, I have a more involved scheme with threads
>  blocking and unblocking interrupts, with a counter of the number of
>  blocks, with a special synchronous mode for being interruptible at
>  blocking operations only (similar to PTHREAD_CANCEL_DEFERRED, but the
>  default is PTHREAD_CANCEL_ASYNCHRONOUS), and with signals which don't
>  necessarily cause an exception but they execute a signal handler which
>  often throws an exception.
>
>  I've seen a simpler interrupt blocking scheme being proposed for Python,
>  based on the design in Haskell:
>    http://www.cs.williams.edu/~freund/papers/python.pdf
>  but it seems to have been abandoned (the paper is from 2002 and I
>  haven't heard of anything newer).

I think deferred is a vastly better default.  To translate for
everybody else, deferred in this context means ""set a flag that I/O
functions can check"".  It means you'll only get a Cancelled exception
at documented points.

In contrast, asynchronous may raise an exception at totally arbitrary
points.  Maybe in the finally portion of a try/finally block, maybe
when you were about to call os.close().  It's not something you can
rely on.

Note though, my cancellation is *not* a signal handler mechanism!
There's a dedicated signal handler thread in which to process signals.
 Cancellation is only the last ditch, ""abandon all hope - start
tearing down the program (or at least part of it)"" option.

Incidentally, although I currently only support ""deferred""
cancellation, I'd eventually like to add some sort of option for
""asynchronous"" (what I tend to call ""forced"") cancellation.  It could
be used in what you know is a simple CPU bound math loop
(10**10**10?), or as a backup in the interactive interpreter.  The
interactive interpreter needs to be modified to use this all properly
anyway though, so I'm in no hurry.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 8
Date: Tue, 18 Mar 2008 16:04:40 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] adding json to stdlib (was:
	Re: PEP	361: Python 2.6/3.0 release schedule)
To: ""Neal Norwitz"" <nnorwitz@gmail.com>
Cc: Python 3000 <python-3000@python.org>, John Millikin
	<jmillikin@gmail.com>,	PyDev Dev <python-dev@python.org>
Message-ID:
	<ca471dc20803181404xb2c6549xd5df19cb26e6976c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 11:43 AM, Neal Norwitz <nnorwitz@gmail.com> wrote:
> On Tue, Mar 18, 2008 at 11:17 AM, John Millikin <jmillikin@gmail.com> wrote:
>  > > Possible features for 2.6
>  >  >     New modules in the standard library:
>  >  >         - JSON implementation
>  >  >
>  >  Have there been any plans made for which one? All of the
>
>  No.  This was something I added as a nice to have for 2.6.

I'd like to tentatively elevate it to a must have. There has been
overwhelming support for this on web-sig.

>  >  implementations I'm aware of (cjson, simplejson, jsonlib, demjson,
>  >  python-json) have serious issues that in my opinion should be fixed
>  >  before inclusion in the standard library[1]. I am the author of
>  >  jsonlib, and am willing to write patches for whichever implementation
>  >  becomes the standard, but it would be very nice to know what to focus
>  >  on.
>
>  I'm not familiar enough with any of the libraries to comment.  If it's
>  premature to add a particular implementation, that's fine, we can
>  wait.

On web-sig, the overwhelming majority wants simplejson, since that's
the API they already use. (All current web frameworks use it.)

>  >  Apologies if this has been discussed already, but there was no link to
>  >  a PEP in 361 and a search of python-dev and c.l.p returned no relevant
>  >  results.
>
>  I don't believe it has been discussed before.  I've changed the
>  subject and would like to discuss this now.
>
>  It would be great if you could pull together and get the community
>  behind a single solution that is robust enough to include in the
>  stdlib.  If that an be finished for 2.6, great.  If it waits for 2.7,
>  that would still be fine.

This is happening on web-sig as we speak.

--Guido

>  n
>
>  >
>  >  [1]
>  >  * cjson and python-json have almost complete absense of Unicode support.
>  >  * simplejson is slow and writes incorrect unicode escapes.
>  >  * demjson is far too forgiving when parsing and accepts all sorts of
>  >  invalid input.
>  >  * jsonlib is not PEP 8-compliant and has terrible error handling.
>  >  * python-json is abandoned, slow, and lacks Unicode support.
>  >
>  >
>  > _______________________________________________
>  >  Python-Dev mailing list
>  >  Python-Dev@python.org
>  >  http://mail.python.org/mailman/listinfo/python-dev
>  >  Unsubscribe: http://mail.python.org/mailman/options/python-dev/nnorwitz%40gmail.com
>  >
>  _______________________________________________
>  Python-Dev mailing list
>  Python-Dev@python.org
>  http://mail.python.org/mailman/listinfo/python-dev
>  Unsubscribe: http://mail.python.org/mailman/options/python-dev/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 39
*******************************************
?","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 38","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: from .foo import * (Aahz)
   2. Re: python-safethread project status (Adam Olsen)
   3. Re: python-safethread project status (Thomas Heller)
   4. Re: PEP 361: Python 2.6/3.0 release   schedule (Thomas Heller)
   5. Re: [Python-Dev] PEP 361: Python 2.6/3.0 release	schedule
      (Douglas Mayle)
   6. adding json to stdlib (was: Re: [Python-Dev] PEP 361:	Python
      2.6/3.0 release schedule) (Neal Norwitz)
   7. Re: from .foo import * (Martin v. L?wis)
   8. Re: from .foo import * (Benjamin Peterson)
   9. Re: from .foo import * (Neal Norwitz)


----------------------------------------------------------------------

Message: 1
Date: Tue, 18 Mar 2008 08:49:45 -0700
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] from .foo import *
To: Python 3000 <python-3000@python.org>
Message-ID: <20080318154945.GA9803@panix.com>
Content-Type: text/plain; charset=us-ascii

On Tue, Mar 18, 2008, ""Martin v. L?wis"" wrote:
>
> When I do a relative star import, I current get
> 
> SyntaxError: 'import *' not allowed with 'from .'
> 
> What's the reason for this restriction?

It was the first step in removing the ability to use ""from *"" at all.  I
don't have time right now to find the discussion, but I can do that later
if you want.

> Is it ok to remove it?

As always, that's up to Guido.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""It is easier to optimize correct code than to correct optimized code.""
--Bill Harlan


------------------------------

Message: 2
Date: Tue, 18 Mar 2008 09:55:16 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<aac2c7cb0803180855n2f8bf3c3wbb67b5e34769fd62@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 9:21 AM, Steven Bethard
<steven.bethard@gmail.com> wrote:
> On Tue, Mar 18, 2008 at 6:39 AM, Marcin 'Qrczak' Kowalczyk
>  <qrczak@knm.org.pl> wrote:
>  > Dnia 17-03-2008, Pn o godzinie 11:56 -0600, Adam Olsen pisze:
>  >
>  >  > I've replaced __del__ API (which resurrected objects) with a
>  >  > __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>  >  > in __finalizeattrs__ are proxied into a core object, a finalizer
>  >  > thread is given a reference to the core, and when the main object is
>  >  > deleted the GC asynchronously notifies the finalizer thread so that it
>  >  > can call core.__finalize__().  The net result is an API very similar
>  >  > to __del__ (you need to list attributes it might use), but it's now
>  >  > impossible for the GC to run arbitrary code (I even enforce this).
>  >
>  >  Ah! Irrespective of other issues, I like this very much. This design
>  >  agrees with my understanding of how finalization should behave, except
>  >  that I haven't had details in mind which would fit Python. My abstract
>  >  design needs the finalization function to somehow access parts of the
>  >  dying object, but not the object itself, and this design shows how to
>  >  actually do it in a convenient way.
>
>  Note that you can use something very much like this right now::
>
>     http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/519635

Yeah.  That's missing the finalizer thread, but that could be add.

Note, you need to use a finalizer thread in order to use locks to
protect your datastructures.  Without it, if you simply preempt the
current thread like is done today, you can only do operations the
memory model provides as atomic.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 3
Date: Tue, 18 Mar 2008 17:15:03 +0100
From: Thomas Heller <theller@ctypes.org>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <fropq7$h45$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-15

Adam Olsen schrieb:
> On Tue, Mar 18, 2008 at 9:21 AM, Steven Bethard
> <steven.bethard@gmail.com> wrote:
>> On Tue, Mar 18, 2008 at 6:39 AM, Marcin 'Qrczak' Kowalczyk
>>  <qrczak@knm.org.pl> wrote:
>>  > Dnia 17-03-2008, Pn o godzinie 11:56 -0600, Adam Olsen pisze:
>>  >
>>  >  > I've replaced __del__ API (which resurrected objects) with a
>>  >  > __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>>  >  > in __finalizeattrs__ are proxied into a core object, a finalizer
>>  >  > thread is given a reference to the core, and when the main object is
>>  >  > deleted the GC asynchronously notifies the finalizer thread so that it
>>  >  > can call core.__finalize__().  The net result is an API very similar
>>  >  > to __del__ (you need to list attributes it might use), but it's now
>>  >  > impossible for the GC to run arbitrary code (I even enforce this).
>>  >
>>  >  Ah! Irrespective of other issues, I like this very much. This design
>>  >  agrees with my understanding of how finalization should behave, except
>>  >  that I haven't had details in mind which would fit Python. My abstract
>>  >  design needs the finalization function to somehow access parts of the
>>  >  dying object, but not the object itself, and this design shows how to
>>  >  actually do it in a convenient way.
>>
>>  Note that you can use something very much like this right now::
>>
>>     http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/519635
> 
> Yeah.  That's missing the finalizer thread, but that could be add.
> 
> Note, you need to use a finalizer thread in order to use locks to
> protect your datastructures.  Without it, if you simply preempt the
> current thread like is done today, you can only do operations the
> memory model provides as atomic.
> 

Hm, I could imagine objects that need to be finalized in the thread that created them.
How could that be handled?

Thomas



------------------------------

Message: 4
Date: Tue, 18 Mar 2008 17:17:54 +0100
From: Thomas Heller <theller@ctypes.org>
Subject: Re: [Python-3000] PEP 361: Python 2.6/3.0 release   schedule
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fropvi$h45$2@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-15

Barry Warsaw schrieb:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> On Mar 18, 2008, at 2:04 AM, Travis Oliphant wrote:
>>
>> Hey Barry,
>>
>> Thanks for putting this PEP together.  This is really helpful.
> 
> Hi Travis... thanks!
> 
>> I didn't see discussion of PEP 3118 and it's features back-ported to
>> Python 2.6.  I've already back-ported the new buffer API as an  
>> addition
>> to the old buffer protocol.
>>
>> In addition, I've planned to back-port the improvements to the struct
>> module and the addition of the memoryview object (both in PEP 3118).
>>
>> If you have questions, we can talk tomorrow.
> 
> Let's do that.  Neal has put together a list of things that he thinks  
> needs to be backported.  We should formalize that list (as best we can  
> given we're still in alpha), and add it to the PEP.  I think we should  
> also make sure we have open issues in the tracker for each backporting  
> task.
> 

I think that
  [issue1971] ctypes exposing the pep 3118 buffer interface
should / could also be backported to 2.6 (once it is merged into py3k).

Thomas



------------------------------

Message: 5
Date: Tue, 18 Mar 2008 12:35:36 -0400
From: Douglas Mayle <douglas@openplans.org>
Subject: Re: [Python-3000] [Python-Dev] PEP 361: Python 2.6/3.0
	release	schedule
To: John Millikin <jmillikin@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev Dev
	<python-dev@python.org>
Message-ID: <F921B572-750C-4C94-88E9-5C78552545E0@openplans.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

I keep forgetting to reply to the list:

This is great news.  I was getting ready to submit a patch to fix the  
Unicode handling in simplejson (which I will probably do anyway), but  
I'm interested in making sure whichever lib will hit the standard  
library has a correct implementation.

Doug

On Mar 18, 2008, at 12:17 PM, John Millikin wrote:

>> Possible features for 2.6
>>    New modules in the standard library:
>>        - JSON implementation
>>
> Have there been any plans made for which one? All of the
> implementations I'm aware of (cjson, simplejson, jsonlib, demjson,
> python-json) have serious issues that in my opinion should be fixed
> before inclusion in the standard library[1]. I am the author of
> jsonlib, and am willing to write patches for whichever implementation
> becomes the standard, but it would be very nice to know what to focus
> on.
>
> Apologies if this has been discussed already, but there was no link to
> a PEP in 361 and a search of python-dev and c.l.p returned no relevant
> results.
>
>
> [1]
> * cjson and python-json have almost complete absense of Unicode  
> support.
> * simplejson is slow and writes incorrect unicode escapes.
> * demjson is far too forgiving when parsing and accepts all sorts of
> invalid input.
> * jsonlib is not PEP 8-compliant and has terrible error handling.
> * python-json is abandoned, slow, and lacks Unicode support.
> _______________________________________________
> Python-Dev mailing list
> Python-Dev@python.org
> http://mail.python.org/mailman/listinfo/python-dev
> Unsubscribe: http://mail.python.org/mailman/options/python-dev/douglas%40openplans.org
>
> !DSPAM:4037,47dfeb7b286095409313003!
>



------------------------------

Message: 6
Date: Tue, 18 Mar 2008 11:43:25 -0500
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: [Python-3000] adding json to stdlib (was: Re: [Python-Dev]
	PEP 361:	Python 2.6/3.0 release schedule)
To: ""John Millikin"" <jmillikin@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev Dev
	<python-dev@python.org>
Message-ID:
	<ee2a432c0803180943t7e1589b6ye87d5523f51dcd27@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 11:17 AM, John Millikin <jmillikin@gmail.com> wrote:
> > Possible features for 2.6
>  >     New modules in the standard library:
>  >         - JSON implementation
>  >
>  Have there been any plans made for which one? All of the

No.  This was something I added as a nice to have for 2.6.

>  implementations I'm aware of (cjson, simplejson, jsonlib, demjson,
>  python-json) have serious issues that in my opinion should be fixed
>  before inclusion in the standard library[1]. I am the author of
>  jsonlib, and am willing to write patches for whichever implementation
>  becomes the standard, but it would be very nice to know what to focus
>  on.

I'm not familiar enough with any of the libraries to comment.  If it's
premature to add a particular implementation, that's fine, we can
wait.

>  Apologies if this has been discussed already, but there was no link to
>  a PEP in 361 and a search of python-dev and c.l.p returned no relevant
>  results.

I don't believe it has been discussed before.  I've changed the
subject and would like to discuss this now.

It would be great if you could pull together and get the community
behind a single solution that is robust enough to include in the
stdlib.  If that an be finished for 2.6, great.  If it waits for 2.7,
that would still be fine.

n

>
>  [1]
>  * cjson and python-json have almost complete absense of Unicode support.
>  * simplejson is slow and writes incorrect unicode escapes.
>  * demjson is far too forgiving when parsing and accepts all sorts of
>  invalid input.
>  * jsonlib is not PEP 8-compliant and has terrible error handling.
>  * python-json is abandoned, slow, and lacks Unicode support.
>
>
> _______________________________________________
>  Python-Dev mailing list
>  Python-Dev@python.org
>  http://mail.python.org/mailman/listinfo/python-dev
>  Unsubscribe: http://mail.python.org/mailman/options/python-dev/nnorwitz%40gmail.com
>


------------------------------

Message: 7
Date: Tue, 18 Mar 2008 11:55:46 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] from .foo import *
To: Aahz <aahz@pythoncraft.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DFF412.4030607@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> It was the first step in removing the ability to use ""from *"" at all.  I
> don't have time right now to find the discussion, but I can do that later
> if you want.

Thanks - that's what I expected; no need to dig out further details.

Regards,
Martin


------------------------------

Message: 8
Date: Tue, 18 Mar 2008 11:59:54 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] from .foo import *
To: Aahz <aahz@pythoncraft.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<1afaf6160803180959h35e186bdr327acb48ee8bb714@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Tue, Mar 18, 2008 at 10:49 AM, Aahz <aahz@pythoncraft.com> wrote:

> On Tue, Mar 18, 2008, ""Martin v. L?wis"" wrote:
> >
> > When I do a relative star import, I current get
> >
> > SyntaxError: 'import *' not allowed with 'from .'
> >
> > What's the reason for this restriction?
>
> It was the first step in removing the ability to use ""from *"" at all.  I
> don't have time right now to find the discussion, but I can do that later
> if you want.

I suppose issue 2400 should be closed, then.

>
>
> > Is it ok to remove it?
>
> As always, that's up to Guido.
> --
> Aahz (aahz@pythoncraft.com)           <*>
> http://www.pythoncraft.com/
>
> ""It is easier to optimize correct code than to correct optimized code.""
> --Bill Harlan
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/musiccomposition%40gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080318/34a96e38/attachment-0001.htm 

------------------------------

Message: 9
Date: Tue, 18 Mar 2008 12:21:54 -0500
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: Re: [Python-3000] from .foo import *
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ee2a432c0803181021g1deb970bs2e5ed460c809bda0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Mar 18, 2008 at 11:59 AM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
>
>
>
> On Tue, Mar 18, 2008 at 10:49 AM, Aahz <aahz@pythoncraft.com> wrote:
> >
> > On Tue, Mar 18, 2008, ""Martin v. L?wis"" wrote:
> > >
> > > When I do a relative star import, I current get
> > >
> > > SyntaxError: 'import *' not allowed with 'from .'
> > >
> > > What's the reason for this restriction?
> >
> > It was the first step in removing the ability to use ""from *"" at all.  I
> > don't have time right now to find the discussion, but I can do that later
> > if you want.
> I suppose issue 2400 should be closed, then.

The reason that 2400 was opened was to remove the restriction. :-)  If
I worded it wrong, feel free to add a comment to it.  The point of
adding the issue was that the SyntaxError should not be generated and
the import should do the right thing.

n

n


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 38
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 37","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: python-safethread project status (Marcin ?Qrczak? Kowalczyk)
   2. Re: A question about Py3K migration (Martin v. L?wis)
   3. Re: A question about Py3K migration (Paul Moore)
   4. Re: PEP 361: Python 2.6/3.0 release schedule (Barry Warsaw)
   5. Re: python-safethread project status (Steven Bethard)
   6. from .foo import * (Martin v. L?wis)
   7. Re: from .foo import * (Guido van Rossum)
   8. Re: from .foo import * (Thomas Wouters)


----------------------------------------------------------------------

Message: 1
Date: Tue, 18 Mar 2008 13:39:28 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] python-safethread project status
To: python-3000@python.org
Message-ID: <1205843968.23745.9.camel@qrnik>
Content-Type: text/plain

Dnia 17-03-2008, Pn o godzinie 11:56 -0600, Adam Olsen pisze:

> I've replaced __del__ API (which resurrected objects) with a
> __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
> in __finalizeattrs__ are proxied into a core object, a finalizer
> thread is given a reference to the core, and when the main object is
> deleted the GC asynchronously notifies the finalizer thread so that it
> can call core.__finalize__().  The net result is an API very similar
> to __del__ (you need to list attributes it might use), but it's now
> impossible for the GC to run arbitrary code (I even enforce this).

Ah! Irrespective of other issues, I like this very much. This design
agrees with my understanding of how finalization should behave, except
that I haven't had details in mind which would fit Python. My abstract
design needs the finalization function to somehow access parts of the
dying object, but not the object itself, and this design shows how to
actually do it in a convenient way.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 2
Date: Tue, 18 Mar 2008 08:51:30 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] A question about Py3K migration
To: Paul Moore <p.f.moore@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DFC8E2.2080009@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> This is something that I've been pondering over for a while now, but I
> haven't been able to come to any strong conclusions. I'd appreciate
> some comment, and possibly a bit of clarification in the documentation
> for migrating to 3.0.

As Nick says: Don't worry at all about migrating to 3.0. It's very 
reasonable to not even start thinking about Python 3 before 3.2 is
released, which may happen in 2010.

Regards,
Martin



------------------------------

Message: 3
Date: Tue, 18 Mar 2008 14:12:18 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] A question about Py3K migration
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<79990c6b0803180712j1b8a750alfb15627a08bb6ef9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 18/03/2008, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > This is something that I've been pondering over for a while now, but I
> > haven't been able to come to any strong conclusions. I'd appreciate
> > some comment, and possibly a bit of clarification in the documentation
> > for migrating to 3.0.
>
> As Nick says: Don't worry at all about migrating to 3.0. It's very
> reasonable to not even start thinking about Python 3 before 3.2 is
> released, which may happen in 2010.

OK, that's a fair comment. It might be worth stating this
recommendation somewhere. There's a risk of discouraging people from
moving past 2.6 by doing this, but on the other hand it stops people
leaping in too soon and finding that ""it's broken"". (It's not, of
course, but that's how it may get publicised).

Paul


------------------------------

Message: 4
Date: Tue, 18 Mar 2008 09:47:51 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] PEP 361: Python 2.6/3.0 release schedule
To: Travis Oliphant <oliphant.travis@ieee.org>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <5F2A88CA-5C89-49C6-9226-B989C46D9D04@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 18, 2008, at 2:04 AM, Travis Oliphant wrote:
>
> Hey Barry,
>
> Thanks for putting this PEP together.  This is really helpful.

Hi Travis... thanks!

> I didn't see discussion of PEP 3118 and it's features back-ported to
> Python 2.6.  I've already back-ported the new buffer API as an  
> addition
> to the old buffer protocol.
>
> In addition, I've planned to back-port the improvements to the struct
> module and the addition of the memoryview object (both in PEP 3118).
>
> If you have questions, we can talk tomorrow.

Let's do that.  Neal has put together a list of things that he thinks  
needs to be backported.  We should formalize that list (as best we can  
given we're still in alpha), and add it to the PEP.  I think we should  
also make sure we have open issues in the tracker for each backporting  
task.

Neal and I talked about this yesterday too and came up with some  
general guidelines. The view we have is that through conservative use  
of future imports and backports, we want to start closing the gap  
between 2.6 and 3.0.  It'll still be fairly wide though, so we'll use  
2.7/3.1 to close it even further by doing things like backporting more  
stuff, de-futurizing features in 2.6, etc.  It may be that we should  
take a very conservative approach to new features in the next few  
major release (in both families), concentrating instead on stabilizing  
what we've got and helping make the transition less and less painful.   
So you could imagine that 2.8/3.2 would close the gap far enough that  
it wouldn't be much more work to move from 2.8 to 3.2 than it would be  
to move from 2.5 to 2.6.

Some other thoughts: we might want to shorten our post 2.6/3.0 release  
cycles, say to 1 year or less so that we can help speed this  
transition.  If we try hard to keep new features to a minimum, this  
might be possible, but we also have to avoid churn.  Quite a few  
people expressed to me that it might be 5 years before they switch  
fully to 3.0.  That seems fine to me, given that some big Python shops  
are still on 2.2 or <gasp> 1.5 and 1.6.  So 3 years from 2.6/3.0 to  
2.8/3.2 doesn't seem to wildly outrageous to me.

Given this longer view of the transition, we can be more conservative  
about what we backport to 2.6.  A general principle would be anything  
that is brand new syntax in 3.0 can be backported, because there won't  
be any existing code in 2.6 that could break.  Anything that can be  
enabled through a future-import might be a candidate, but you have to  
be careful about tricky semantic differences.  For example, changing  
the meaning of dict.keys() via a future-import is not a good idea.

One thing I would like to see is ""from __future__ import  
unicode_strings"" or some such.  The only thing this would do is allow  
you to write unicode string literals in Python 2.6 without the u''  
prefix.  That's a fairly localized change (affecting just the file the  
literals appear in), but it would go a long way toward closing that gap.

One question that came up was whether we have enough bitfields to  
handle all the future statements we might have, and whether you even  
want to see Python 2.6 code sprinkled with lots of future statements.   
Does it make sense to have a ""from __future__ import python3""  
umbrella?  Will we really have that many future statements?

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR9/WGHEjvBPtnXfVAQLP1AP+OpSuXHDgE1uxifKA6FEKxS1Zms1Pe0ww
OimG2kw3afzL5+o1mdrRBUDy/rETpNhlxBTgx+fgI7VJc+Vs+uBi0sQwemCqOZ1I
9qlBFCo8YrmXlCZTdL9E0nEpiBSuanLKJcdNP8VU3QjbOX0EKqNTfK1asSckxvgT
H1o5wGqnX5M=
=wiJQ
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Tue, 18 Mar 2008 09:21:22 -0600
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: "" Marcin ?Qrczak? Kowalczyk ""	<qrczak@knm.org.pl>, ""Python 3000""
	<python-3000@python.org>
Message-ID:
	<d11dcfba0803180821v5b49176bi6bb7fe23e4599e2c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Tue, Mar 18, 2008 at 6:39 AM, Marcin 'Qrczak' Kowalczyk
<qrczak@knm.org.pl> wrote:
> Dnia 17-03-2008, Pn o godzinie 11:56 -0600, Adam Olsen pisze:
>
>  > I've replaced __del__ API (which resurrected objects) with a
>  > __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>  > in __finalizeattrs__ are proxied into a core object, a finalizer
>  > thread is given a reference to the core, and when the main object is
>  > deleted the GC asynchronously notifies the finalizer thread so that it
>  > can call core.__finalize__().  The net result is an API very similar
>  > to __del__ (you need to list attributes it might use), but it's now
>  > impossible for the GC to run arbitrary code (I even enforce this).
>
>  Ah! Irrespective of other issues, I like this very much. This design
>  agrees with my understanding of how finalization should behave, except
>  that I haven't had details in mind which would fit Python. My abstract
>  design needs the finalization function to somehow access parts of the
>  dying object, but not the object itself, and this design shows how to
>  actually do it in a convenient way.

Note that you can use something very much like this right now::

    http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/519635

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
 --- Bucky Katt, Get Fuzzy


------------------------------

Message: 6
Date: Tue, 18 Mar 2008 10:23:41 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: [Python-3000] from .foo import *
To: Python 3000 <python-3000@python.org>
Message-ID: <47DFDE7D.407@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

When I do a relative star import, I current get

SyntaxError: 'import *' not allowed with 'from .'

What's the reason for this restriction?

Is it ok to remove it?

I encountered the issue while porting Django. In
django/newforms/__init__.py, they do

from widgets import *
from fields import *
from forms import *
from models import *

In 3k, that needs to change to

from .widgets import *
from .fields import *
from .forms import *
from .models import *

but that still won't work because of the syntax
error. One solution would be to make the import
explicit, but that is tedious and unmaintainable.
E.g. for the widgets line, it would be

from .widgets import (Widget, TextInput, PasswordInput,
     HiddenInput, MultipleHiddenInput,
     FileInput, DateTimeInput, Textarea, CheckboxInput,
     Select, NullBooleanSelect, SelectMultiple, RadioSelect,
     CheckboxSelectMultiple, MultiWidget, SplitDateTimeWidget)

Regards,
Martin


------------------------------

Message: 7
Date: Tue, 18 Mar 2008 10:32:33 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] from .foo import *
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803180832g76e0830fo31562897d16206f6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I don't recall the reason; it may simply be due to the complexity, or
possibly it would have made the _import__ API even uglier.

I'm fine with removing the restriction; your use case is compelling.

On Tue, Mar 18, 2008 at 10:23 AM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> When I do a relative star import, I current get
>
>  SyntaxError: 'import *' not allowed with 'from .'
>
>  What's the reason for this restriction?
>
>  Is it ok to remove it?
>
>  I encountered the issue while porting Django. In
>  django/newforms/__init__.py, they do
>
>  from widgets import *
>  from fields import *
>  from forms import *
>  from models import *
>
>  In 3k, that needs to change to
>
>  from .widgets import *
>  from .fields import *
>  from .forms import *
>  from .models import *
>
>  but that still won't work because of the syntax
>  error. One solution would be to make the import
>  explicit, but that is tedious and unmaintainable.
>  E.g. for the widgets line, it would be
>
>  from .widgets import (Widget, TextInput, PasswordInput,
>      HiddenInput, MultipleHiddenInput,
>      FileInput, DateTimeInput, Textarea, CheckboxInput,
>      Select, NullBooleanSelect, SelectMultiple, RadioSelect,
>      CheckboxSelectMultiple, MultiWidget, SplitDateTimeWidget)
>
>  Regards,
>  Martin
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Tue, 18 Mar 2008 08:38:08 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] from .foo import *
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803180838q4f7040d9x8f6c33b7a11f7f1d@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Tue, Mar 18, 2008 at 8:32 AM, Guido van Rossum <guido@python.org> wrote:

> I don't recall the reason; it may simply be due to the complexity, or
> possibly it would have made the _import__ API even uglier.
>

I don't recall any such issues, and I can't imagine them now. The '.' is
resolved before the fromlist is even considered, and is just a way to find
the right package to import from. Importing '*' instead of a set of names
should not be a problem.


>
> I'm fine with removing the restriction; your use case is compelling.
>
> On Tue, Mar 18, 2008 at 10:23 AM, ""Martin v. L?wis"" <martin@v.loewis.de>
> wrote:
> > When I do a relative star import, I current get
> >
> >  SyntaxError: 'import *' not allowed with 'from .'
> >
> >  What's the reason for this restriction?
> >
> >  Is it ok to remove it?
> >
> >  I encountered the issue while porting Django. In
> >  django/newforms/__init__.py, they do
> >
> >  from widgets import *
> >  from fields import *
> >  from forms import *
> >  from models import *
> >
> >  In 3k, that needs to change to
> >
> >  from .widgets import *
> >  from .fields import *
> >  from .forms import *
> >  from .models import *
> >
> >  but that still won't work because of the syntax
> >  error. One solution would be to make the import
> >  explicit, but that is tedious and unmaintainable.
> >  E.g. for the widgets line, it would be
> >
> >  from .widgets import (Widget, TextInput, PasswordInput,
> >      HiddenInput, MultipleHiddenInput,
> >      FileInput, DateTimeInput, Textarea, CheckboxInput,
> >      Select, NullBooleanSelect, SelectMultiple, RadioSelect,
> >      CheckboxSelectMultiple, MultiWidget, SplitDateTimeWidget)
> >
> >  Regards,
> >  Martin
> >  _______________________________________________
> >  Python-3000 mailing list
> >  Python-3000@python.org
> >  http://mail.python.org/mailman/listinfo/python-3000
> >  Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/guido%40python.org
> >
>
>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/thomas%40python.org
>



-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080318/ecd16f8d/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 37
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 36","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] 3rd party developers: don't change	your APIs
      when porting to Py3k! (Bill Janssen)
   2. Re: [Python-Dev] 3rd party developers: don't change	your APIs
      when porting to Py3k! (but consider using ctypes) (zooko)
   3. Re: PEP 361: Python 2.6/3.0 release schedule (Travis Oliphant)
   4. A question about Py3K migration (Paul Moore)
   5. Re: A question about Py3K migration (Nick Coghlan)


----------------------------------------------------------------------

Message: 1
Date: Mon, 17 Mar 2008 18:41:22 PDT
From: Bill Janssen <janssen@parc.com>
Subject: Re: [Python-3000] [Python-Dev] 3rd party developers: don't
	change	your APIs when porting to Py3k!
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <08Mar17.184131pdt.""58696""@synergy1.parc.xerox.com>

Now I apparently need an email reader that understands reStructuredText :-).

Bill


------------------------------

Message: 2
Date: Mon, 17 Mar 2008 19:40:25 -0600
From: zooko <zooko@zooko.com>
Subject: Re: [Python-3000] [Python-Dev] 3rd party developers: don't
	change	your APIs when porting to Py3k! (but consider using ctypes)
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <CCBB6D55-E435-4993-BE6C-7A4450641111@zooko.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

I'm the maintainer of a few Python packages which wrap native C or C+ 
+ code.

At Pycon, I learned that PyPy and Jython support ctypes or have plans  
to do so in the near future.  I don't know about IronPython.

However, having CPython, PyPy, and Jython all supporting ctypes makes  
it the obvious choice for interfacing to native code in the future.

Regards,

Zooko O'Whielacronx


------------------------------

Message: 3
Date: Tue, 18 Mar 2008 02:04:41 -0500
From: Travis Oliphant <oliphant.travis@ieee.org>
Subject: Re: [Python-3000] PEP 361: Python 2.6/3.0 release schedule
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <47DF6989.1010808@ieee.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
> Greetings from Pycon 2008!
> 
> Neal Norwitz and I have worked out the schedule for Python 2.6 and 3.0, 
> which will be released in lockstep.  We will be following a monthly 
> release schedule, with releases to occur on the first Wednesday of the 
> month.  We'll move to a 2 week schedule for the release candidates.
> 

Hey Barry,

Thanks for putting this PEP together.  This is really helpful.

I didn't see discussion of PEP 3118 and it's features back-ported to 
Python 2.6.  I've already back-ported the new buffer API as an addition 
to the old buffer protocol.

In addition, I've planned to back-port the improvements to the struct 
module and the addition of the memoryview object (both in PEP 3118).

If you have questions, we can talk tomorrow.

Best regards,

-Travis Oliphant



------------------------------

Message: 4
Date: Tue, 18 Mar 2008 10:14:11 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: [Python-3000] A question about Py3K migration
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<79990c6b0803180314j655affaauc158e0aa142ccbab@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

This is something that I've been pondering over for a while now, but I
haven't been able to come to any strong conclusions. I'd appreciate
some comment, and possibly a bit of clarification in the documentation
for migrating to 3.0.

I'm basically an end user of Python. I don't write libraries or
frameworks, but I do depend on a number of 3rd party libraries. As a
Windows user, I'm probably more dependent on binary installers than
the average Unix/MacOS user.

As far as my own code is concerned, I am able to follow the standard
migration path (move to 2.6, fix issues in 3.0-warning mode, use 2to3
and test, repeat as needed). As my code is generally not complex, I
don't expect this to be a particularly lengthy process. But I'm going
to be stuck until 3.0-compatible installers are available for the
extensions I use. And that's even true for pure-Python packages, as
they will need to do the 2to3 dance as well.

So there's a bottleneck in 3.0 adoption, with end users not being able
to move to 3.0 until package maintainers have done their bit. In the
long run, this will happen, but it could slow down adoption of 3.0. I
see this already - as 99.9% of my code depends on either pywin32 or
cx_Oracle, and with neither having 3.0 compatible binaries yet, I
can't make any practical use of the 3.0 alphas.

As I said at the start, I don't have any good answers. But would it be
worth maintaining something like a wiki page of key libraries and
their expectations for moving to 3.0? It might at least make people
aware of reasonable timescales, and set some expectations for chronic
early adopters like me :-)

Paul.


------------------------------

Message: 5
Date: Tue, 18 Mar 2008 20:32:50 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] A question about Py3K migration
To: Paul Moore <p.f.moore@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DF9A52.5080507@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Paul Moore wrote:
> As I said at the start, I don't have any good answers. But would it be
> worth maintaining something like a wiki page of key libraries and
> their expectations for moving to 3.0? It might at least make people
> aware of reasonable timescales, and set some expectations for chronic
> early adopters like me :-)

My personal expectation is that 3.0 will serve mainly to provide the 
developers of those 3rd-party frameworks and libraries with a solid 
target to aim for, and that the more likely adoption point for end-user 
production usage would be around the 3.1 timeframe. I might be 
pleasantly surprised by the actual rate of adoption, but I wouldn't put 
any money on that prospect ;)

Even with 2.x releases it usually takes a few months after the 
python.org release for all the 3rd parties to get their binary 
installers up to date and released (some of the bigger projects that 
have the resources to closely track the alpha/beta releases may get 
something out quickly, but I'm other projects will wait for at least the 
release candidates before looking at what needs to be done)

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 36
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 35","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. I/O stuff (Benjamin Peterson)
   2. Re: I/O stuff (Guido van Rossum)
   3. python-safethread project status (Adam Olsen)
   4. Re: python-safethread project status (Guido van Rossum)
   5. Re: python-safethread project status (Adam Olsen)
   6. Re: Using *a for packing in lists and other places (Terry Reedy)
   7. 3rd party developers: don't change your APIs when	porting to
      Py3k! (Guido van Rossum)
   8. PEP 361: Python 2.6/3.0 release schedule (Barry Warsaw)


----------------------------------------------------------------------

Message: 1
Date: Mon, 17 Mar 2008 12:21:17 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: [Python-3000] I/O stuff
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<1afaf6160803171021p4b234ff9kb36a439ce32ddc8c@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

Hi,
What's the current status of I/O in Py3k?
Are plans there to implement some if not all of io.py in C. (If not, I can
work on this.)
Also, is I/O going to be backported to 2.6?

Thanks,
Benjamin Peterson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080317/9f6ea166/attachment-0001.htm 

------------------------------

Message: 2
Date: Mon, 17 Mar 2008 12:25:47 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] I/O stuff
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803171025y21d68531we6f1da2ecafdc69@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Mar 17, 2008 at 12:21 PM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
> What's the current status of I/O in Py3k?

Ping is looking at it. There are quite a few things broken in the
handling of seek/tell on text files.

> Are plans there to implement some if not all of io.py in C. (If not, I can
> work on this.)

IMO the text decoding (and perhaps encoding) should be redone in C,
it's way too slow. I'm not sure if Ping is planning to attack this
too.

> Also, is I/O going to be backported to 2.6?

Yes, but it's probably better to wait until the 3.0 version has stabilized.

PS. Are you at PyCon?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Mon, 17 Mar 2008 11:56:36 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: [Python-3000] python-safethread project status
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<aac2c7cb0803171056l7db4eb5at19d2bcbd8ccd77b9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Guido's asked me to give a quick status report, so here I go..

The critical parts of the design and implementation are basically
done.  I've implemented monitors to contain objects without an
explicit thread-safe API, which then let me remove the GIL.  I've
created a synchronous/asynchronous refcounting scheme that reuses our
existing INCREF/DECREF API, but also minimizes contention when used by
more than one thread.  The net result is that although there's a
significant amount of overhead, I can demonstrate scalability to more
than one thread (I've only been able to test with two cores though.)

I've replaced __del__ API (which resurrected objects) with a
__finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
in __finalizeattrs__ are proxied into a core object, a finalizer
thread is given a reference to the core, and when the main object is
deleted the GC asynchronously notifies the finalizer thread so that it
can call core.__finalize__().  The net result is an API very similar
to __del__ (you need to list attributes it might use), but it's now
impossible for the GC to run arbitrary code (I even enforce this).

Missing there is generator cleanup.  I don't allow the GC to run a
generator long enough to raise GeneratorExit, so an alternative will
be needed.

I'm currently working on flushing out the design.  I recently rewrote
and reenabled the tracing GC, next up is the automatic deadlock
detection/breaking.

As for merging back into CPython, I could build smaller patches, but
the design can't be completely separated.  For example, __finalize__
is called from another thread, so Monitor's @monitormethod should be
applied.  I don't specifically require Monitor, just that the object
(and therefor its methods) be shareable, and Monitor is the easiest
way to provide that.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 4
Date: Mon, 17 Mar 2008 14:02:26 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] python-safethread project status
To: ""Adam Olsen"" <rhamph@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803171202g2e0a0187o76f98c9915e7c137@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thanks! Would you care to give us a hint on how a typical
multi-threaded application would be written using this approach? How
much pre-existing code would break do you expect?

On Mon, Mar 17, 2008 at 12:56 PM, Adam Olsen <rhamph@gmail.com> wrote:
> Guido's asked me to give a quick status report, so here I go..
>
>  The critical parts of the design and implementation are basically
>  done.  I've implemented monitors to contain objects without an
>  explicit thread-safe API, which then let me remove the GIL.  I've
>  created a synchronous/asynchronous refcounting scheme that reuses our
>  existing INCREF/DECREF API, but also minimizes contention when used by
>  more than one thread.  The net result is that although there's a
>  significant amount of overhead, I can demonstrate scalability to more
>  than one thread (I've only been able to test with two cores though.)
>
>  I've replaced __del__ API (which resurrected objects) with a
>  __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>  in __finalizeattrs__ are proxied into a core object, a finalizer
>  thread is given a reference to the core, and when the main object is
>  deleted the GC asynchronously notifies the finalizer thread so that it
>  can call core.__finalize__().  The net result is an API very similar
>  to __del__ (you need to list attributes it might use), but it's now
>  impossible for the GC to run arbitrary code (I even enforce this).
>
>  Missing there is generator cleanup.  I don't allow the GC to run a
>  generator long enough to raise GeneratorExit, so an alternative will
>  be needed.
>
>  I'm currently working on flushing out the design.  I recently rewrote
>  and reenabled the tracing GC, next up is the automatic deadlock
>  detection/breaking.
>
>  As for merging back into CPython, I could build smaller patches, but
>  the design can't be completely separated.  For example, __finalize__
>  is called from another thread, so Monitor's @monitormethod should be
>  applied.  I don't specifically require Monitor, just that the object
>  (and therefor its methods) be shareable, and Monitor is the easiest
>  way to provide that.
>
>  --
>  Adam Olsen, aka Rhamphoryncus
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Mon, 17 Mar 2008 13:42:42 -0600
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] python-safethread project status
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<aac2c7cb0803171242s16f2bd47j7f1872a839fc8b68@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Mar 17, 2008 at 1:02 PM, Guido van Rossum <guido@python.org> wrote:
>  On Mon, Mar 17, 2008 at 12:56 PM, Adam Olsen <rhamph@gmail.com> wrote:
>  > Guido's asked me to give a quick status report, so here I go..
>  >
>  >  The critical parts of the design and implementation are basically
>  >  done.  I've implemented monitors to contain objects without an
>  >  explicit thread-safe API, which then let me remove the GIL.  I've
>  >  created a synchronous/asynchronous refcounting scheme that reuses our
>  >  existing INCREF/DECREF API, but also minimizes contention when used by
>  >  more than one thread.  The net result is that although there's a
>  >  significant amount of overhead, I can demonstrate scalability to more
>  >  than one thread (I've only been able to test with two cores though.)
>  >
>  >  I've replaced __del__ API (which resurrected objects) with a
>  >  __finalize__/__finalizeattrs__ API (which doesn't).  Attributes listed
>  >  in __finalizeattrs__ are proxied into a core object, a finalizer
>  >  thread is given a reference to the core, and when the main object is
>  >  deleted the GC asynchronously notifies the finalizer thread so that it
>  >  can call core.__finalize__().  The net result is an API very similar
>  >  to __del__ (you need to list attributes it might use), but it's now
>  >  impossible for the GC to run arbitrary code (I even enforce this).
>  >
>  >  Missing there is generator cleanup.  I don't allow the GC to run a
>  >  generator long enough to raise GeneratorExit, so an alternative will
>  >  be needed.
>  >
>  >  I'm currently working on flushing out the design.  I recently rewrote
>  >  and reenabled the tracing GC, next up is the automatic deadlock
>  >  detection/breaking.
>  >
>  >  As for merging back into CPython, I could build smaller patches, but
>  >  the design can't be completely separated.  For example, __finalize__
>  >  is called from another thread, so Monitor's @monitormethod should be
>  >  applied.  I don't specifically require Monitor, just that the object
>  >  (and therefor its methods) be shareable, and Monitor is the easiest
>  >  way to provide that.
>
> Thanks! Would you care to give us a hint on how a typical
>  multi-threaded application would be written using this approach? How
>  much pre-existing code would break do you expect?

Since I forgot it in my original post, here's my project site:

http://code.google.com/p/python-safethread/

A key advantage of using Monitors, rather than actors or some other
event-driven scheme, is that you retain the traditional style of
blocking function calls.  Most stdlib modules should remain basically
the same.

The first conflict will be in importing.  To be accessible to another
thread a module object must be shareable, which means everything it
references must also be shareable.  This is enabled on a per-module
basis using ""from __future__ import shared_module"".  It shouldn't
affect users of that module though, unless they modify its globals or
class attributes, so I expect we can apply it to most of the stdlib.

Module globals and class dicts use a shareddict, which is still
mutable, but requires its keys and values to be shareable.  Once you
stop modifying it it will switch to an unlocked mode, allowing
uncontended reads.  Writes at this point still work, but the first one
will be expensive, so such behaviour should be discouraged.

The bigger problem is having something like a list in the module
globals or class dict.  list isn't thread-safe and isn't shareable, so
it will be rejected.  If you're just using it as a constant you can
probably replace with a tuple (or frozenset?), but if you are
modifying it you'll need to wrap it with a Monitor or the like.

Another big problem is that I've scrapped the existing
thread/threading modules.  Getting their semantics right would require
I retain the GIL (at least for the main MonitorSpace), they wouldn't
get deadlock detection, I wouldn't support daemon threads, etc.  I can
do it, but only grudgingly. ;)

*****

Now, a simple example of how to spawn threads is given here:
http://code.google.com/p/python-safethread/wiki/Branching

    with branch() as children:
        children.add(func1, 42, name='bob')
        children.add(func2, *args, **kwargs)
        some_io_func()

Basically you use ""with branch() as children:"" to create a branching
point, then ""children.add(func, *args, **kwargs)"" to create a child
thread.  It automatically joins the threads when you try to leave the
context.  If one raises an exception, all others (including the base
thread) are cancelled, encouraging them to stop.  Once they have all
stopped the exceptions are bundled together (using
PyException_SetCause() and possibly MultipleError), then propagated up
to their caller.

If you want to collect their results you can use
""children.addresult(func)"" instead, then follow with ""data =
children.getresults()"" after you leave the context.  This must be done
explicitly to avoid unintentionally keeping results alive in a
long-running server.

If you're operating only on immutable data and returning an immutable
result then that's sufficient.  However, to build a shared mutable
object you need to turn to Monitors:
http://code.google.com/p/python-safethread/wiki/Monitors

class Counter(Monitor):
    # implicit @monitormethod for __init__ (and __new__)
    def __init__(self):
        self.count = 0

    @monitormethod
    def tick(self):
        self.count += 1

    @monitormethod
    def value(self):
        return self.count

The basic idea here is that it acquires the Monitor's lock when a
monitormethod is called.  What you don't see in this example is that
it checks if all the arguments are shareable too, as well as the
return value.  You can still write staticmethods or classmethods -
only self.__dict__ is inaccessible if you're not in the Monitor.

Also not seen is a .wait(func) (to leave the Monitor), the
.enter(func) used internally by monitormethod, or other options to
give explicit control over recursive-locking situations.  Much of that
hasn't been implemented and still needs a final design.  Likewise, I
haven't added conditions yet.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 6
Date: Mon, 17 Mar 2008 18:37:05 -0400
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <frmrqf$9bl$1@ger.gmane.org>


""Marcin 'Qrczak' Kowalczyk"" <qrczak@knm.org.pl> wrote in message 
news:1205751413.13377.11.camel@qrnik...
| Dnia 16-03-2008, N o godzinie 18:20 -0400, Terry Reedy pisze:
|
| > The rule I suggested is 'execute the statement the same *as if*  the
| > iterable items had been written in the code as a comma sequence'.
|
| One reason I don't like this rule is that it works on the level of the
| token sequence

The tokenization of Python code is part of the language spec

| rather than the AST.

Whereas no particular AST is, that I know of.

| It's too low-level, relying on
| peculiarities of the syntax rather than the meaning (does a=*b really
| convert b to a tuple only because the tuple syntax uses lone commas?).
| And it doesn't directly work for 0 or 1 items, in which case the
| behavior must be extrapolated from the behavior for more items.

Can you give another rule that you prefer and that I can comprehend and 
that I can explain to Python newcomers?  The OP only gave a few examples of 
* usage and (initially) no rule that I saw.








------------------------------

Message: 7
Date: Mon, 17 Mar 2008 19:30:20 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] 3rd party developers: don't change your APIs
	when	porting to Py3k!
To: PyDev <python-dev@python.org>, ""Python 3000""
	<python-3000@python.org>
Message-ID:
	<ca471dc20803171730p569580f4x12c0bd1ac967d46f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

For those who don't read blogs, I just blogged the slides for my
keynote, and added an important admonishment to 3rd party developers.
Here's the full text of the blog:

The slides of my `keynote`_ are now up on python.org.  There's both a
`PowerPoint`_ and a `PDF`_ file.

.. _keynote: http://www.python.org/doc/essays/ppt/
.. _PowerPoint: http://www.python.org/doc/essays/ppt/pycon2008/Py3kAndYou.ppt
.. _PDF: http://www.python.org/doc/essays/ppt/pycon2008/Py3kAndYou.pdf

I'd like to take this opportunity to remind you of a really important
issue that I neglected to mention in the talk: **Don't change your
APIs incompatibly when porting to Py3k.**

Yes, you heard that right: even though Python 3.0 is changing
incompatibly, I implore you (especially if you're maintaining a
library that's used by others) *not* to make incompatible changes to
your API.  If you *have* make API changes, do them *before* you port
to 3.0 -- release a version with the new API for Python 2.5, or 2.6 if
you must.  (Or do it later, *after* you've released a port to 3.0
without adding new features.)

Why?  Think of your users.  Suppose Ima Lumberjack has implemented a
web 2.0 app for managing his sawmill.  Ima is a happy user of your
most excellent web 2.0 framework.  Now Ima wants to upgrade his app to
Py3k.  He waits until you have ported your framework to Py3k.  He does
everything by the books, runs his source code through the 2to3 tool,
and starts testing.  Imagine his despair when the tests fail: how is
he going to tell whether the breakage is due to your API changes or
due to his own code not being Py3k-ready?

On the other hand, if port your web 2.0 framework to Py3k *without*
making API changes, Ima's task is much more focused: the bugs he is
left with after running 2to3 are definitely in his own code, which
(presumably :-) he knows how to debug and fix.

The same recommendation applies even more strongly if your library is
a dependency for other libraries -- due to the fan-out the pain caused
to others multiplies.  If one of those packages gives up (even
temporarily) its Py3k porting effort, this may prevent many other
libraries and apps from being ported at all!

So, once more for emphasis: **Don't change your APIs at the same time
as porting to Py3k!**

*PS.* The 3.0final release is now scheduled for September 3, 2008.
See `PEP 361`_.

.. _PEP 361: http://python.org/dev/peps/pep-0361/

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Mon, 17 Mar 2008 19:49:43 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] PEP 361: Python 2.6/3.0 release schedule
To: PyDev Dev <python-dev@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <AA3F9CF8-0245-43CA-8FD9-02A1291EB661@python.org>
Content-Type: text/plain; charset=""us-ascii""

Greetings from Pycon 2008!

Neal Norwitz and I have worked out the schedule for Python 2.6 and  
3.0, which will be released in lockstep.  We will be following a  
monthly release schedule, with releases to occur on the first  
Wednesday of the month.  We'll move to a 2 week schedule for the  
release candidates.

Executive summary: Python 2.6 and 3.0 finals are planned for September  
3, 2008.

PEP 361 contains all the gory details; from the PEP:

         Feb 29 2008: Python 2.6a1 and 3.0a3 are released
         Apr 02 2008: Python 2.6a2 and 3.0a4 planned
         May 07 2008: Python 2.6a3 and 3.0a5 planned
         Jun 04 2008: Python 2.6b1 and 3.0b1 planned
         Jul 02 2008: Python 2.6b2 and 3.0b2 planned
         Aug 06 2008: Python 2.6rc1 and 3.0rc1 planned
         Aug 20 2008: Python 2.6rc2 and 3.0rc2 planned
         Sep 03 2008: Python 2.6 and 3.0 final

http://www.python.org/dev/peps/pep-0361/

This schedule gives everybody plenty of advanced notice, so you should  
be able to get  your code in on time.  Please be very careful about  
not breaking the branches.  Neal and I will be cracking the whip of  
public shame when your commit turns the buildbots red.  Embarrassing  
Pycon pictures of you will be posted if such broken revisions cause us  
to slip a release, and remember, we know how to use GIMP.

On behalf of everyone, here's to an awesome release!

-Barry
Python 2.6/3.0 release manager

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: pep-0361.txt
Url: http://mail.python.org/pipermail/python-3000/attachments/20080317/c34e843c/attachment.txt 
-------------- next part --------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 304 bytes
Desc: This is a digitally signed message part
Url : http://mail.python.org/pipermail/python-3000/attachments/20080317/c34e843c/attachment.pgp 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 35
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 34","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Using *a for packing in lists and other places
      (Marcin ?Qrczak? Kowalczyk)
   2. New to Python-dev (was Re: [Python-Dev] 2.6 and 3.0	project
      management) (Benjamin Peterson)
   3. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   4. Re: [Python-Dev] 2.6 and 3.0 project management (Barry Warsaw)
   5. Re: New to Python-dev (was Re: [Python-Dev] 2.6 and	3.0
      project management) (Douglas Mayle)


----------------------------------------------------------------------

Message: 1
Date: Mon, 17 Mar 2008 11:56:52 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <1205751413.13377.11.camel@qrnik>
Content-Type: text/plain

Dnia 16-03-2008, N o godzinie 18:20 -0400, Terry Reedy pisze:

> The rule I suggested is 'execute the statement the same *as if*  the 
> iterable items had been written in the code as a comma sequence'.

One reason I don't like this rule is that it works on the level of the
token sequence rather than the AST. It's too low-level, relying on
peculiarities of the syntax rather than the meaning (does a=*b really
convert b to a tuple only because the tuple syntax uses lone commas?).
And it doesn't directly work for 0 or 1 items, in which case the
behavior must be extrapolated from the behavior for more items.

In my view the expression-level *a should be allowed in explicitly
listed contexts, mostly where there is already a sequence of expressions
to splice into: lists, tuples, sets, argument lists. And also in yield
and comprehensions, where it would be something new, allowing to
actually create the sequence which always had a single element before.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 2
Date: Mon, 17 Mar 2008 07:52:29 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: [Python-3000] New to Python-dev (was Re: [Python-Dev] 2.6 and
	3.0	project management)
To: ""Anand Balachandran Pillai"" <abpillai@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<1afaf6160803170552g6583d548m2641e8afbf1b10d8@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Mon, Mar 17, 2008 at 2:48 AM, Anand Balachandran Pillai <
abpillai@gmail.com> wrote:

> Hi py3k,
>
>     First of all, excuse me for taking your time. I am new to the list
> so, not familiar with the processes specific to the list, if any.



>
>
>     I am new to the list (joined a week back) but not new to Python having
> coded in it for a fair bit of time and contributed open source code in
> Python,
> but not yet to the Python project.

Welcome

>
>
>    I have been reading the py3k archives and some recent mails. I
> would like to help out in some way. I am familiar with the Python
> development process and has read most of the PEPs related to
> Py3k. Perhaps there are some bugs to fix, some documentation to
> be done, testing ... ?
>
>    Excuse me if I sound naive, but I am not sure where to start.
> I checked out py3k branch, built it and have it running on my Fedora box.
> Is there a URL showing a list of tasks to start with so I can start on
> something ?

Have you read all the information at http://python.org/dev/?
Have you looked at the bug tracker, http://bugs.python.org?

>
>
> Did not want to start a new thread for my post, so replying to a thread
> which seemed relevant.

It would have been fine to start a new thread as I just did. It helps keep
the conversation organized.

>
>
> Thanks a lot for your patience.
>
> Best Regards
>
> --Anand
>
> http://harvestmanontheweb.com
>
>
> On Mon, Mar 17, 2008 at 5:18 AM, Barry Warsaw <barry@python.org> wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> >  Hash: SHA1
> >
> >
> > On Mar 16, 2008, at 5:02 PM, Martin v. L?wis wrote:
> >
> >  >> How about using the ""critical"" Severity for show stoppers?
> >  >
> >  > Alternatively, Priority ""immediate"" could be used.
> >  >
> >  > The intended use of Severity is that it is assigned by the
> >  > submitter, whereas Priority is assigned by triage/developers.
> >  >
> >  > We should really decide whether we want to use it that way.
> >
> >  That would certainly work for me.  Could we add some description of
> >  this separation to the Roundup pages?  And/or is there a way that only
> >  developers or the triage specialists are allowed to change the
> priority?
> >
> >
> >  - -Barry
> >
> >  -----BEGIN PGP SIGNATURE-----
> >  Version: GnuPG v1.4.8 (Darwin)
> >
> >  iQCVAwUBR92x4HEjvBPtnXfVAQLAAAP9FIS+Z3OI4CK+KVSrqkuZkwTl2cs0Rk3Q
> >  6RQNNuReyLIGPXqvXoFcOO2zZcZdWVcSwkw7DJhzV1yPI9z2/KY5ve298Mg75afG
> >  eFJO+TVH24LsWyOqXe9Aodoaf+OUpJcAhRy6q1YVtTlxoY/VuiOUtNjhNsJ7DKWP
> >  WwlDBlduW0g=
> >  =/42B
> >  -----END PGP SIGNATURE-----
> >
> >
> > _______________________________________________
> >  Python-3000 mailing list
> >  Python-3000@python.org
> >  http://mail.python.org/mailman/listinfo/python-3000
> >  Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/abpillai%40gmail.com
> >
>
>
>
> --
> -Anand
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/musiccomposition%40gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080317/5d73a611/attachment-0001.htm 

------------------------------

Message: 3
Date: Mon, 17 Mar 2008 08:38:23 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Anand Balachandran Pillai"" <abpillai@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803170638v4704ab63g2539d9c1f0d9d6fe@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Glad you want to help!

You can find plenty of things to do in the bug tracker at
bugs.python.org. Note that 2.6 needs as much (or more!) love as 3.0 at
this point. (2.6 is being developed in the svn trunk.) Feel free to
tentatively pick a project and send mail here asking if that's
something we'd like to have fixed.

Again, thanks!

--Guido

On Mon, Mar 17, 2008 at 2:48 AM, Anand Balachandran Pillai
<abpillai@gmail.com> wrote:
> Hi py3k,
>
>      First of all, excuse me for taking your time. I am new to the list
>  so, not familiar with the processes specific to the list, if any.
>
>      I am new to the list (joined a week back) but not new to Python having
>  coded in it for a fair bit of time and contributed open source code in Python,
>  but not yet to the Python project.
>
>     I have been reading the py3k archives and some recent mails. I
>  would like to help out in some way. I am familiar with the Python
>  development process and has read most of the PEPs related to
>  Py3k. Perhaps there are some bugs to fix, some documentation to
>  be done, testing ... ?
>
>     Excuse me if I sound naive, but I am not sure where to start.
>  I checked out py3k branch, built it and have it running on my Fedora box.
>  Is there a URL showing a list of tasks to start with so I can start on
>  something ?
>
>  Did not want to start a new thread for my post, so replying to a thread
>  which seemed relevant.
>
>  Thanks a lot for your patience.
>
>  Best Regards
>
>  --Anand
>
>  http://harvestmanontheweb.com
>
>
>
>
>  On Mon, Mar 17, 2008 at 5:18 AM, Barry Warsaw <barry@python.org> wrote:
>  > -----BEGIN PGP SIGNED MESSAGE-----
>  >  Hash: SHA1
>  >
>  >
>  > On Mar 16, 2008, at 5:02 PM, Martin v. L?wis wrote:
>  >
>  >  >> How about using the ""critical"" Severity for show stoppers?
>  >  >
>  >  > Alternatively, Priority ""immediate"" could be used.
>  >  >
>  >  > The intended use of Severity is that it is assigned by the
>  >  > submitter, whereas Priority is assigned by triage/developers.
>  >  >
>  >  > We should really decide whether we want to use it that way.
>  >
>  >  That would certainly work for me.  Could we add some description of
>  >  this separation to the Roundup pages?  And/or is there a way that only
>  >  developers or the triage specialists are allowed to change the priority?
>  >
>  >
>  >  - -Barry
>  >
>  >  -----BEGIN PGP SIGNATURE-----
>  >  Version: GnuPG v1.4.8 (Darwin)
>  >
>  >  iQCVAwUBR92x4HEjvBPtnXfVAQLAAAP9FIS+Z3OI4CK+KVSrqkuZkwTl2cs0Rk3Q
>  >  6RQNNuReyLIGPXqvXoFcOO2zZcZdWVcSwkw7DJhzV1yPI9z2/KY5ve298Mg75afG
>  >  eFJO+TVH24LsWyOqXe9Aodoaf+OUpJcAhRy6q1YVtTlxoY/VuiOUtNjhNsJ7DKWP
>  >  WwlDBlduW0g=
>  >  =/42B
>  >  -----END PGP SIGNATURE-----
>  >
>  >
>
> > _______________________________________________
>  >  Python-3000 mailing list
>  >  Python-3000@python.org
>  >  http://mail.python.org/mailman/listinfo/python-3000
>  >  Unsubscribe: http://mail.python.org/mailman/options/python-3000/abpillai%40gmail.com
>  >
>
>
>
>  --
>  -Anand
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Mon, 17 Mar 2008 09:27:23 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <81BCED86-19FC-4BDC-9A2D-136FE484B3A6@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 16, 2008, at 6:46 PM, Barry Warsaw wrote:
>
> 'critical' is fine (or 'immediate').  My problem before was that I
> couldn't do one query that gave me all the critical issues for both
> 2.6 and 3.0.  That certainly could have been pebkac though.  Neal
> mentioned that that kind of query should be possible, if it's not
> already there.

So, I just looked again and that wasn't quite my problem.  When you  
search, it seems like you have a choice of version ""don't care"" or you  
can pick a single version.  But it looks like once you're on the  
search results you can further refine the version filter via the list  
box.  It's a little clunky, but it'll work.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR95/y3EjvBPtnXfVAQKlmgQAg+1azln0Ljb32iyoreALUwepHwrN0XLp
Fg6OVPp70iYIhctFhT3QYAN+59wzqy8x2PKsuZV/k48ebsJWwLsbU1yHH0WImHoo
56Dso3sfbsj2GzK7i3cF903RiIVE4geQRbnttDnrQVmI9U3jrs9iyWMjw/5Znohz
DtLTEEf2fQs=
=mQXt
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Mon, 17 Mar 2008 10:54:06 -0400
From: Douglas Mayle <douglas@openplans.org>
Subject: Re: [Python-3000] New to Python-dev (was Re: [Python-Dev] 2.6
	and	3.0 project management)
To: Benjamin Peterson <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <22E35BF0-4E34-47A9-B4CB-2DFE6A1F5A48@openplans.org>
Content-Type: text/plain; charset=""iso-8859-1""

I accidentally sent this reply to Benjamin, sorry for the two copies:

I'm brand new on this list as well, so take what I say with a grain of  
salt, but a group of us here at PyCon are about to start sprinting,  
and they've given us some very good resources to help us get started.   
Brett Cannon is leading us, and he's put up some good info meant for  
the sprinters, but that should just apply anyway.  You can find the  
slides from his talk at:
http://www.cs.ubc.ca/~drifty/pycon/sprint_tutorial.pdf

Some important information that I took away from the slides is that  
there is a view into the python bug list where you have more control  
over display at:
http://www.taniquetil.com.ar/cgi-bin/pytickets.py

If you don't know what bugs to tackle, the python developers slap the  
'easy' keyword on the low hanging fruit, which should help you to pick  
something out.

Aside from that, they stressed that we should test test test before  
submitting patches to the bugtracker...

Douglas Mayle
The Open Planning Project

On Mar 17, 2008, at 8:52 AM, Benjamin Peterson wrote:

>
>
> On Mon, Mar 17, 2008 at 2:48 AM, Anand Balachandran Pillai <abpillai@gmail.com 
> > wrote:
> Hi py3k,
>
>     First of all, excuse me for taking your time. I am new to the list
> so, not familiar with the processes specific to the list, if any.
>
>
>
>     I am new to the list (joined a week back) but not new to Python  
> having
> coded in it for a fair bit of time and contributed open source code  
> in Python,
> but not yet to the Python project.
> Welcome
>
>
>    I have been reading the py3k archives and some recent mails. I
> would like to help out in some way. I am familiar with the Python
> development process and has read most of the PEPs related to
> Py3k. Perhaps there are some bugs to fix, some documentation to
> be done, testing ... ?
>
>    Excuse me if I sound naive, but I am not sure where to start.
> I checked out py3k branch, built it and have it running on my Fedora  
> box.
> Is there a URL showing a list of tasks to start with so I can start on
> something ?
> Have you read all the information at http://python.org/dev/?
> Have you looked at the bug tracker, http://bugs.python.org?
>
>
> Did not want to start a new thread for my post, so replying to a  
> thread
> which seemed relevant.
> It would have been fine to start a new thread as I just did. It  
> helps keep the conversation organized.
>
>
> Thanks a lot for your patience.
>
> Best Regards
>
> --Anand
>
> http://harvestmanontheweb.com
>
>
> On Mon, Mar 17, 2008 at 5:18 AM, Barry Warsaw <barry@python.org>  
> wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> >  Hash: SHA1
> >
> >
> > On Mar 16, 2008, at 5:02 PM, Martin v. L?wis wrote:
> >
> >  >> How about using the ""critical"" Severity for show stoppers?
> >  >
> >  > Alternatively, Priority ""immediate"" could be used.
> >  >
> >  > The intended use of Severity is that it is assigned by the
> >  > submitter, whereas Priority is assigned by triage/developers.
> >  >
> >  > We should really decide whether we want to use it that way.
> >
> >  That would certainly work for me.  Could we add some description of
> >  this separation to the Roundup pages?  And/or is there a way that  
> only
> >  developers or the triage specialists are allowed to change the  
> priority?
> >
> >
> >  - -Barry
> >
> >  -----BEGIN PGP SIGNATURE-----
> >  Version: GnuPG v1.4.8 (Darwin)
> >
> >  iQCVAwUBR92x4HEjvBPtnXfVAQLAAAP9FIS+Z3OI4CK+KVSrqkuZkwTl2cs0Rk3Q
> >  6RQNNuReyLIGPXqvXoFcOO2zZcZdWVcSwkw7DJhzV1yPI9z2/KY5ve298Mg75afG
> >  eFJO+TVH24LsWyOqXe9Aodoaf+OUpJcAhRy6q1YVtTlxoY/VuiOUtNjhNsJ7DKWP
> >  WwlDBlduW0g=
> >  =/42B
> >  -----END PGP SIGNATURE-----
> >
> >
> > _______________________________________________
> >  Python-3000 mailing list
> >  Python-3000@python.org
> >  http://mail.python.org/mailman/listinfo/python-3000
> >  Unsubscribe: http://mail.python.org/mailman/options/python-3000/abpillai%40gmail.com
> >
>
>
>
> --
> -Anand
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/musiccomposition%40gmail.com
>
> !DSPAM:4037,47de69a142047082231907!  
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/douglas%40openplans.org
>
>
> !DSPAM:4037,47de69a142047082231907!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080317/1f386b38/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 34
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 32","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Making 2to3 installable (Guido van Rossum)
   2. Re: [Python-Dev] 2.6 and 3.0 project management (Martin v. L?wis)
   3. Re: Using *a for packing in lists and other places (Greg Ewing)
   4. Re: Using *a for packing in lists and other  places
      (Phillip J. Eby)
   5. Re: [Python-Dev] 2.6 and 3.0 project management (Barry Warsaw)
   6. Re: [Python-Dev] 2.6 and 3.0 project management (Barry Warsaw)
   7. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   8. Re: Making 2to3 installable (Greg Ewing)
   9. Re: Using *a for packing in lists and other places (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 18:20:59 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: ""Gregory P. Smith"" <greg@krypto.org>
Cc: Python 3000 <python-3000@python.org>, Nick Coghlan
	<ncoghlan@gmail.com>
Message-ID:
	<ca471dc20803161620j4ed950f1ja94f9de83d716bdb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 6:12 PM, Gregory P. Smith <greg@krypto.org> wrote:
> On 3/16/08, Nick Coghlan <ncoghlan@gmail.com> wrote:
> > Guido van Rossum wrote:
> > > On Sun, Mar 16, 2008 at 4:22 PM, ""Martin v. L?wis"" <martin@v.loewis.de>
> wrote:
> >
> > >>  People would try the process on their development machines, and change
> > >>  the code until it actually runs under both versions.
> > >>
> > >>  I'll be using my sprinting time to find out whether that approach
> > >>  can actually work.
> > >
> > > That would be good. I agree with the ideal process, but I doubt that
> > > it will realistically work exactly like that, so I expect that calling
> > > 2to3 upon install is just going to cost a lot of CPU time and then
> > > produce a non-working install.
> >
> >
> > I was thinking that a comment based ""directives"" approach ala doctest
> > might help with some of the trickier 2->3 migrations. For example,
> > allowing someone to write an explicit conversion for a particular line:
> >
> >    for x, y, in my_izip(s1, s2): # 2to3: for x, y, in zip(s1, s2):
> >
> > (Dodgy example I know, but it gives the general idea)
>
> thats a good idea.  do we want a comment to contain the alternate code or
> should the comment just indicate which way a particular predefined set of
> known 2to3 difficult things should be interpreted during conversion?
>
> parallel code is nice.  but long lines will become annoying.  this should
> allow for the comment to be on the line below as well maybe?

I think the parallel code idea is too complex. 2to3 doesn't really
think in terms of lines anyway. I think we should just have a
directive to prevent 2to3 from applying a certain fixer to the line
containing the directive.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 18:25:09 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DDAC55.7030206@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Thinking it over, I actually believe that we should use the highest
> priority to indicate show-stoppers that hold up a release. So that is
> indeed ""immediate"".

We just decided to eliminate the Severity from the tracker; it wasn't
much used and always confused people. It's still in the database, just
not displayed anymore.

Regards,
Martin



------------------------------

Message: 3
Date: Mon, 17 Mar 2008 11:33:11 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Python 3000 <python-3000@python.org>
Message-ID: <47DDAE37.7070702@canterbury.ac.nz>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
> 
> [Guido] asked for 'f(*a, b, c)' to be valid, but it only makes sense 
> to allow, say, 'f(*a, b, *c)' too, and he hasn't said 'no' to that.

And then, of course, people are going to want
to have multiple ** arguments, too...

-- 
Greg


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 19:43:36 -0400
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080316234347.5018C3A409D@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 02:49 PM 3/16/2008 -0500, Guido van Rossum wrote:
>On Sun, Mar 16, 2008 at 1:31 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> >  Btw, would you mind pronouncing (or at least commenting) on PEP 365,
> >  so that I can proceed with the work -- or not.
>
>Can you point me to past discussions? ISTR that this is controversial.

The original discussion thread is here...

http://mail.python.org/pipermail/python-dev/2007-May/thread.html#72891

It mainly discusses why MAL's counterproposals to revamp the API, 
split into multiple modules, etc.,  did not address any of the PEP's 
goals or rationale.

And here is the second thread, which is mostly support/encouragement 
for adding setuptools to the stdlib, or at least pkg_resources:

http://mail.python.org/pipermail/python-dev/2008-January/thread.html#76379

The thread subject is ""PEP: per-user site-packages directory"", but 
beginning with that message from Steve Holden, the entire thread is 
about PEP 365.

As far as I can tell, the proposal has seen much more Usenet Nod 
Syndrome than controversy.  None, actually, outside of MAL's 
objections.  Even MvL voiced support for actually expanding the 
proposal to include an 'easy_install' stub:

http://mail.python.org/pipermail/python-dev/2008-January/076391.html

Oh, and there is one additional discussion here, sort of...

http://mail.python.org/pipermail/python-dev/2008-January/075922.html

but despite the subject line, it wasn't really about the PEP at 
all!  The entire discussion ended up being about whether namespace 
packages should be used in the stdlib, and the consensus was ""no"", 
because (among other things) the real benefit of namespace packages 
is to allow an *organization* to claim a package space (e.g. zope.*), 
not to ""make all the doctors in town live on the same street"", as you 
put it.  :)  Here's a good summary:

http://mail.python.org/pipermail/python-dev/2008-January/075952.html



------------------------------

Message: 5
Date: Sun, 16 Mar 2008 18:46:50 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <5E86F9D7-4421-4C57-8294-B0EC6A4EE03C@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 16, 2008, at 3:56 PM, Guido van Rossum wrote:

> On Sun, Mar 16, 2008 at 12:24 PM, Barry Warsaw <barry@python.org>  
> wrote:
>> I mentioned this to Guido and got a positive response, so let me  
>> state
>> my preference for your feedback.  I plan on holding up the final
>> releases until both versions are ready to go.  I think this will help
>> motivate us to give Python 2.6 the love it needs if it's lagging
>> behind 3.0, and I completely agree with Guido that this let's our
>> community know that both versions are equally important to us.
>
> It's a deal.

Excellent.

>> The other thing is that I'd really like is a ""show stoppers"" Roundup
>> search.  The idea is that if our core buildbots look good and the
>> ""show stoppers"" search turns up no items, then I know I can cut a
>> release (at least for alphas, betas, and rcs).  If there are ""show
>> stoppers"" then I have something that I can triage (and maybe re- 
>> assign
>> severity) or start publicly harassing people into fixing.
>
> How about using the ""critical"" Severity for show stoppers?

'critical' is fine (or 'immediate').  My problem before was that I  
couldn't do one query that gave me all the critical issues for both  
2.6 and 3.0.  That certainly could have been pebkac though.  Neal  
mentioned that that kind of query should be possible, if it's not  
already there.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR92xb3EjvBPtnXfVAQLZGQP+O+FQwlXDXAT5lz+DKPer7+5n9ivy/YmD
94RYUnHEsVLA5aWpZB0O23/wVavS5FdUfJxuCvMOwHhZ6i58GHF4i6gfrtWDefX7
BWSfm82rIOAw/UX10JiUpkPp7vRlqfPdPOteqzFq0yo0vM49HOqFOL5fIU02MbRj
unVdo8uYJ5c=
=SB9I
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 18:48:48 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <4A9CB229-815A-4C81-A469-BC391CEAB66F@python.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 16, 2008, at 5:02 PM, Martin v. L?wis wrote:

>> How about using the ""critical"" Severity for show stoppers?
>
> Alternatively, Priority ""immediate"" could be used.
>
> The intended use of Severity is that it is assigned by the
> submitter, whereas Priority is assigned by triage/developers.
>
> We should really decide whether we want to use it that way.

That would certainly work for me.  Could we add some description of  
this separation to the Roundup pages?  And/or is there a way that only  
developers or the triage specialists are allowed to change the priority?

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR92x4HEjvBPtnXfVAQLAAAP9FIS+Z3OI4CK+KVSrqkuZkwTl2cs0Rk3Q
6RQNNuReyLIGPXqvXoFcOO2zZcZdWVcSwkw7DJhzV1yPI9z2/KY5ve298Mg75afG
eFJO+TVH24LsWyOqXe9Aodoaf+OUpJcAhRy6q1YVtTlxoY/VuiOUtNjhNsJ7DKWP
WwlDBlduW0g=
=/42B
-----END PGP SIGNATURE-----


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 17:15:55 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803161715x245a89b1y701b4fb4b3ab0ea4@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 4:33 PM, Greg Ewing <greg.ewing@canterbury.ac.nz>
wrote:

> Thomas Wouters wrote:
> >
> > [Guido] asked for 'f(*a, b, c)' to be valid, but it only makes sense
> > to allow, say, 'f(*a, b, *c)' too, and he hasn't said 'no' to that.
>
> And then, of course, people are going to want
> to have multiple ** arguments, too...
>

Of course. Anything worth doing is worth doing right. The grammar changes
are done (and it turns out much simpler without these restrictions), if it
weren't for this horrible cold I would have a patch for it up already.

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/ac3f2d97/attachment-0001.htm 

------------------------------

Message: 8
Date: Mon, 17 Mar 2008 12:35:58 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Making 2to3 installable
To: Python 3000 <python-3000@python.org>
Message-ID: <47DDBCEE.3050807@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis wrote:
> When people requested that 2to3 is a library, I think they
> have exactly that use case in mind: programmatically convert
> a source code base at deployment/build time.

For importability as a library, would it be better
to call it two2three?

-- 
Greg


------------------------------

Message: 9
Date: Mon, 17 Mar 2008 12:39:15 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <47DDBDB3.40703@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Terry Reedy wrote:
> The fact that the '*' would be redundant in some contexts and therefore 
> useless should not necessarily make it syntax error in that context.

It does allow a lone *exp to be given a special
meaning in some contexts, such as yield *exp.
Although I'm still not sure that's a good idea.

-- 
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 32
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 31","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Making 2to3 installable (Martin v. L?wis)
   2. Re: [Python-Dev] 2.6 and 3.0 project management (Gregory P. Smith)
   3. Re: Making 2to3 installable (Guido van Rossum)
   4. Re: [Python-Dev] 2.6 and 3.0 project management (Martin v. L?wis)
   5. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   6. Re: Using *a for packing in lists and other places (Terry Reedy)
   7. Re: [Python-Dev] 2.6 and 3.0 project management
      (Stephen J. Turnbull)
   8. Re: Making 2to3 installable (Nick Coghlan)
   9. Re: Making 2to3 installable (Gregory P. Smith)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 16:22:37 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Making 2to3 installable
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DD8F9D.2000609@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>>  Wrt. invoking it from distutils: Why not?
> 
> Because it's far from perfect. I'd expect the success rate of running
> 2to3 over a 2.x package to be close to zero. I think this is one case
> where it's better to let the developer run 2to3 and tweak the app
> until it actually works.

Ah. I still dream of people being able to use a single source for both
2.x and 3.x. They would maintain their source as 2.x, and convert to
3.0 at deployment time.

Of course, they have to change their source to make that actual work.
Most distutils projects probably won't work when all you do is run
2to3. However, if a project has prepared its source in a proper way
(for some definition of ""proper""), it *should* be possible that all
remaining changes are done by 2to3.

People would try the process on their development machines, and change
the code until it actually runs under both versions.

I'll be using my sprinting time to find out whether that approach
can actually work.

>>  Wrt. this covering all uses: Surely the ones that people
>>  would use the library for, no?
> 
> I not understand. :-(

When people requested that 2to3 is a library, I think they
have exactly that use case in mind: programmatically convert
a source code base at deployment/build time. In those cases,
they can achieve the same thing with the command line tool.

Of course, on Windows, it is probably still better to use
the library, since Python will find the library, but may
not find the command line tool.

Regards,
Martin



------------------------------

Message: 2
Date: Sun, 16 Mar 2008 16:38:48 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>,
	python-dev@python.org
Message-ID:
	<52dc1c820803161438wcb14acfw7e5fb2e6b482233d@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On 3/16/08, Guido van Rossum <guido@python.org> wrote:
>
> I don't see a lot of objections left against using the bug tracker. I
> just talked to Neal and he's going to transfer all tasks from the 2.6
> spreadsheet to the bug tracker.
>
> I'll also be adding various other tasks., as I think of them.


yay, thanks Neal!

We'll have to think about which keywords to use. We'll probably pick
> the initial set of keywords at the sprint tomorrow morning.
>
> --
>
> --Guido van Rossum (home page: http://www.python.org/~guido/)
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/greg%40krypto.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/c176eeeb/attachment-0001.htm 

------------------------------

Message: 3
Date: Sun, 16 Mar 2008 16:43:03 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803161443y273958cctf032fc22f9c23e9e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 4:22 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> >>  Wrt. invoking it from distutils: Why not?
>  >
>  > Because it's far from perfect. I'd expect the success rate of running
>  > 2to3 over a 2.x package to be close to zero. I think this is one case
>  > where it's better to let the developer run 2to3 and tweak the app
>  > until it actually works.
>
>  Ah. I still dream of people being able to use a single source for both
>  2.x and 3.x. They would maintain their source as 2.x, and convert to
>  3.0 at deployment time.
>
>  Of course, they have to change their source to make that actual work.
>  Most distutils projects probably won't work when all you do is run
>  2to3. However, if a project has prepared its source in a proper way
>  (for some definition of ""proper""), it *should* be possible that all
>  remaining changes are done by 2to3.
>
>  People would try the process on their development machines, and change
>  the code until it actually runs under both versions.
>
>  I'll be using my sprinting time to find out whether that approach
>  can actually work.

That would be good. I agree with the ideal process, but I doubt that
it will realistically work exactly like that, so I expect that calling
2to3 upon install is just going to cost a lot of CPU time and then
produce a non-working install.

>  >>  Wrt. this covering all uses: Surely the ones that people
>  >>  would use the library for, no?
>  >
>  > I not understand. :-(
>
>  When people requested that 2to3 is a library, I think they
>  have exactly that use case in mind: programmatically convert
>  a source code base at deployment/build time. In those cases,
>  they can achieve the same thing with the command line tool.

I don't recall what the person who asked about this after my keynote
had in mind, but it sounds to me like converting code at install time
a minority use case -- especially while 2to3 is as slow as it is.

>  Of course, on Windows, it is probably still better to use
>  the library, since Python will find the library, but may
>  not find the command line tool.

Good point.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 17:02:38 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DD98FE.2040705@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed


> How about using the ""critical"" Severity for show stoppers?

Alternatively, Priority ""immediate"" could be used.

The intended use of Severity is that it is assigned by the
submitter, whereas Priority is assigned by triage/developers.

We should really decide whether we want to use it that way.

Regards,
Martin


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 17:13:04 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803161513m4694246axc9eb0cb555e2b5bd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 5:02 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
>
>  > How about using the ""critical"" Severity for show stoppers?
>
>  Alternatively, Priority ""immediate"" could be used.
>
>  The intended use of Severity is that it is assigned by the
>  submitter, whereas Priority is assigned by triage/developers.

Yeah, well, that's the theory. I've never met anyone who understoon
the distinction between priority and severity (you may be the
exception :-). The subjective severity as perceived by the reporter is
not all that useful, and it is probably better expressed in English.
Personally, if we were to ""grade"" bugs on a second scale besides
priority, I'd much rather have a scale to indicate the expected amount
of work, from ""one-char fix"" at one end of the scale to ""requires
complete rewrite of the universe"" at the other end.

>  We should really decide whether we want to use it that way.

Thinking it over, I actually believe that we should use the highest
priority to indicate show-stoppers that hold up a release. So that is
indeed ""immediate"".

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 18:20:56 -0400
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <frk6g8$dpt$1@ger.gmane.org>


""Thomas Wouters"" <thomas@python.org> wrote in message 
news:9e804ac0803151513j495be5d8h22bba219148cf491@mail.gmail.com...
| On Sat, Mar 15, 2008 at 2:58 PM, Terry Reedy <tjreedy@udel.edu> wrote:
|
| >
| > | Also, yielding everything from an iterator:
| > |
| > | >>> def flatten(iterables):
| > | ...     for it in iterables:
| > | ...         yield *it
| >
| > Following the general rule above for *exp, that would be the same as 
yield
| > tuple(it).
|
|
| No. *exp by itself is not valid syntax:

That may be a fact for your patch but not for all possible patches ;-)

| >>> a, b = *c
|  File ""<stdin>"", line 1
| SyntaxError: can use starred expression only as assignment target
|
| It needs something to unpack *into*, in the immediate context.

Ditto.

My main desire is that *iterable have a simple (easily learnable) 
consistent meaning.  (Part of consistency is having it work the same both 
in and out of function calls).

The rule I suggested is 'execute the statement the same *as if*  the 
iterable items had been written in the code as a comma sequence'.  In the 
above, the result would be a tuple.  (For targets, the meaning is similar: 
*x means, in effect, x[0], x[1], etc, with x sized as needed at runtime.)

The fact that the '*' would be redundant in some contexts and therefore 
useless should not necessarily make it syntax error in that context.

if bool(e): pass # and
if bool(e) is True: pass

are both allowed even thought equivalent to 'if e: pass'.





------------------------------

Message: 7
Date: Mon, 17 Mar 2008 07:52:56 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <87myoyi8mv.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Benjamin Peterson writes:

 > It's just depends on how you see the tracker. It's not just to ""bug"" tracker
 > anymore, is it? On other projects I've worked with, we had separate areas
 > for bugs, features, and tasks. (yes, it's SourceForge.) I found it easier to
 > keep organized. However, if this is Python's way, I'm not going to stand in
 > it.

You (as an ordinary user) can have it both ways in the same instance.

If Martin adds a ""task"" issue type (which is easy to do in Roundup),
then you personally can create and save queries for ""task"", ""bug"",
""feature"", etc.  Your view of the database will then be more like
sourceforge.

On the other hand, cross-referencing and creating dependencies across
issue types becomes a lot easier if they're in the same database.
That's important for some issues.

 > > > We could change the statuses around to ""Work in progress"", ""Completed"",
 > > > ""Incomplete"", and such. It'd be easy to search for tasks that have to be
 > > > accomplished for a given release.

I've done this for XEmacs's tracker.  It's definitely feasible.  I'm
subscribed to tracker-discuss, so I'll not go into detail here.



------------------------------

Message: 8
Date: Mon, 17 Mar 2008 08:57:55 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Making 2to3 installable
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DDA5F3.8090207@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Sun, Mar 16, 2008 at 4:22 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
>>  People would try the process on their development machines, and change
>>  the code until it actually runs under both versions.
>>
>>  I'll be using my sprinting time to find out whether that approach
>>  can actually work.
> 
> That would be good. I agree with the ideal process, but I doubt that
> it will realistically work exactly like that, so I expect that calling
> 2to3 upon install is just going to cost a lot of CPU time and then
> produce a non-working install.

I was thinking that a comment based ""directives"" approach ala doctest 
might help with some of the trickier 2->3 migrations. For example, 
allowing someone to write an explicit conversion for a particular line:

   for x, y, in my_izip(s1, s2): # 2to3: for x, y, in zip(s1, s2):

(Dodgy example I know, but it gives the general idea)

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 9
Date: Sun, 16 Mar 2008 18:12:34 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<52dc1c820803161612u244dc42bq35dcadf5475c21d2@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On 3/16/08, Nick Coghlan <ncoghlan@gmail.com> wrote:
>
> Guido van Rossum wrote:
> > On Sun, Mar 16, 2008 at 4:22 PM, ""Martin v. L?wis"" <martin@v.loewis.de>
> wrote:
>
> >>  People would try the process on their development machines, and change
> >>  the code until it actually runs under both versions.
> >>
> >>  I'll be using my sprinting time to find out whether that approach
> >>  can actually work.
> >
> > That would be good. I agree with the ideal process, but I doubt that
> > it will realistically work exactly like that, so I expect that calling
> > 2to3 upon install is just going to cost a lot of CPU time and then
> > produce a non-working install.
>
>
> I was thinking that a comment based ""directives"" approach ala doctest
> might help with some of the trickier 2->3 migrations. For example,
> allowing someone to write an explicit conversion for a particular line:
>
>    for x, y, in my_izip(s1, s2): # 2to3: for x, y, in zip(s1, s2):
>
> (Dodgy example I know, but it gives the general idea)


thats a good idea.  do we want a comment to contain the alternate code or
should the comment just indicate which way a particular predefined set of
known 2to3 difficult things should be interpreted during conversion?

parallel code is nice.  but long lines will become annoying.  this should
allow for the comment to be on the line below as well maybe?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/87754f0d/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 31
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 30","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] 2.6 and 3.0 tasks (Trent Nelson)
   2. Re: [Python-Dev] 2.6 and 3.0 tasks (Collin Winter)
   3. Re: Making 2to3 installable (Martin v. L?wis)
   4. Re: [Python-Dev] 2.6 and 3.0 tasks (Gregory P. Smith)
   5. Re: Making 2to3 installable (Georg Brandl)
   6. Re: Making 2to3 installable (Guido van Rossum)
   7. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   8. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   9. Re: Making 2to3 installable (Martin v. L?wis)
  10. Re: Making 2to3 installable (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 08:33:49 -0700
From: Trent Nelson <tnelson@onresolve.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: Guido van Rossum <guido@python.org>, Christian Heimes
	<lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<87D3F9C72FBF214DB39FA4E3FE618CDC6E168AD176@EXMBX04.exchhosting.com>
Content-Type: text/plain; charset=""us-ascii""

> >  * Replace Windows API calls with wide versions to support unicode
> >    for file names, environment etc.
>
> +1. This should be broken into separate tasks for each API.

What are we referring to here?  Calling the W versions explicitly and using wchar_t for everything, or using the TCHAR/TEXT() approach and keeping the API calls the same, letting the #define UNICODE do the work behind the scenes?

        Trent.


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 13:08:02 -0700
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<43aa6ff70803161308u10f97081vf3244927f165ab75@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 10:17 AM, Christian Heimes <lists@cheimes.de> wrote:
> Collin Winter wrote:
>  > The biggest win in terms of performance would be to reimplement the
>  > pattern matching engine used by the fixers.: it by far dominates the
>  > running time, taking 99+% of the runtime when I ran 2to3 over Twisted,
>  > for example. The current design is a heavily-recursive system, and as
>  > such bombs out when it encounters, e.g., files with a thousand
>  > assignment statements in a row. I'd also like something more
>  > expressive: the current DSL can't express recursive patterns.
>
>  Do you have time to mentor a GSoC project? Or can you mentor a mentor
>  ...? :)

I think I'd have time to mentor a GSoC project. Let's talk off-list about that.


------------------------------

Message: 3
Date: Sun, 16 Mar 2008 15:11:11 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Making 2to3 installable
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DD7EDF.2070608@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?

Next, I want to have distutils (build_py) to invoke 2to3 as a 
command-line tool. I think this will already cover most uses
that people may have.

Moving lib2to3 into the standard library would mean that the
trunk and 3k copies diverge, right?

There is also the question how then pgen2 should be in
the standard library; it could either be a top-level
package, or a subpackage of lib2to3.

Regards,
Martin


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 15:22:08 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Travis Oliphant"" <oliphant.travis@ieee.org>
Cc: python-3000@python.org, python-dev@python.org
Message-ID:
	<52dc1c820803161322r4ed68f30lfc59519b35de47a8@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On 3/16/08, Travis Oliphant <oliphant.travis@ieee.org> wrote:
>
> Guido van Rossum wrote:
> > Moving this to a new subject to keep the discussion of tasks and the
> > discussion of task tracking tools separate.
> >
> > On Sun, Mar 16, 2008 at 9:42 AM, Christian Heimes <lists@cheimes.de>
> wrote:
> >>  I did a quick brainstorming with me, myself and I. I came up with a
> list
> >>  of (IMHO) important tasks.
> >>
> >>  * Stabilize the C API of Python 3.0. I like to rename several prefixes
> >>  to reduce the confusing: PyBytes -> PyByteArray,
> >
> > +1 (also +1 to backporting this to 2.6)
> >
> >> PyString -> PyBytes ...
> >
> > -1. This will make merging code from 2.6 harder, and causes more work
> > for porting C extensions.
> >
> >>  * Backport the new buffer protocol to 2.6. I spoke to Travis yesterday
> >>  and he said he is trying to get it done during the PyCon sprint. Maybe
> >>  somebody can assist him?
> >
> > Does he need assistance?
>
>
> I don't really need help with back-porting the protocol.   However, I do
> need help with the struct module changes.  This is a standard-library
> that I'm hoping to get help with.
>
> -Travis


I'm happy to help with this stuff during the sprint.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/8e2bb33d/attachment-0001.htm 

------------------------------

Message: 5
Date: Sun, 16 Mar 2008 21:34:49 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Making 2to3 installable
To: python-3000@python.org
Message-ID: <frk048$q87$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis schrieb:
> After talking to Collin, I just committed a change to
> 2to3 to make it installable as an executable script
> called ""2to3"".
> 
> To do so, I had to wrap all the top-level modules
> into a package, and move the fixes and tests into
> that package. Lacking a better name, I called the
> library lib2to3. I also install pgen2 as a separate
> package.

Cool! With that in the 3k stdlib, the auto2to3 hook [1] will
work out of the box...

(It seems you missed a few old-style relative imports
in refactor.py, patcomp.py and pygram.py...)

cheers,
Georg

[1] http://dev.pocoo.org/hg/sandbox/file/tip/auto2to3.py



------------------------------

Message: 6
Date: Sun, 16 Mar 2008 15:42:00 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803161342l733022cer36b1357840843311@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 3:11 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?
>
>  Next, I want to have distutils (build_py) to invoke 2to3 as a
>  command-line tool. I think this will already cover most uses
>  that people may have.

Are you serious?

>  Moving lib2to3 into the standard library would mean that the
>  trunk and 3k copies diverge, right?

Not necessarily. If you check it into 2.6 first, then merge and apply
it to its merged self, afterwards most changes would merge into 3.0
just fine.

>  There is also the question how then pgen2 should be in
>  the standard library; it could either be a top-level
>  package, or a subpackage of lib2to3.

I'd like to clean it up and make it a toplevel package. But I may not
have the time, so until I do (or someone else does) it's best to keep
it inside lib2to3.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 15:54:51 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org, python-dev@python.org
Message-ID:
	<ca471dc20803161354j61e36aaetdb71b1b350240ac5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I don't see a lot of objections left against using the bug tracker. I
just talked to Neal and he's going to transfer all tasks from the 2.6
spreadsheet to the bug tracker.

I'll also be adding various other tasks., as I think of them.

We'll have to think about which keywords to use. We'll probably pick
the initial set of keywords at the sprint tomorrow morning.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sun, 16 Mar 2008 15:56:52 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803161356r4473eb6bocf7dd034af7f2349@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 12:24 PM, Barry Warsaw <barry@python.org> wrote:
>  I mentioned this to Guido and got a positive response, so let me state
>  my preference for your feedback.  I plan on holding up the final
>  releases until both versions are ready to go.  I think this will help
>  motivate us to give Python 2.6 the love it needs if it's lagging
>  behind 3.0, and I completely agree with Guido that this let's our
>  community know that both versions are equally important to us.

It's a deal.

>  The other thing is that I'd really like is a ""show stoppers"" Roundup
>  search.  The idea is that if our core buildbots look good and the
>  ""show stoppers"" search turns up no items, then I know I can cut a
>  release (at least for alphas, betas, and rcs).  If there are ""show
>  stoppers"" then I have something that I can triage (and maybe re-assign
>  severity) or start publicly harassing people into fixing.

How about using the ""critical"" Severity for show stoppers?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Sun, 16 Mar 2008 16:07:06 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Making 2to3 installable
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DD8BFA.1020108@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>>> Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?
>>  Next, I want to have distutils (build_py) to invoke 2to3 as a
>>  command-line tool. I think this will already cover most uses
>>  that people may have.
> 
> Are you serious?

Wrt. invoking it from distutils: Why not?

Wrt. this covering all uses: Surely the ones that people
would use the library for, no?

>>  Moving lib2to3 into the standard library would mean that the
>>  trunk and 3k copies diverge, right?
> 
> Not necessarily. If you check it into 2.6 first, then merge and apply
> it to its merged self, afterwards most changes would merge into 3.0
> just fine.

Ok, I'll do that.

We should decide which of the copies remains the master, and
which copies use merge-tracking. I would propose the sandbox
copy remains the one where we check in stuff, so that 2to3
can still get distributed as a stand-alone application.

> I'd like to clean it up and make it a toplevel package. But I may not
> have the time, so until I do (or someone else does) it's best to keep
> it inside lib2to3.

Ok, I'll move it into lib2to3 then also.

Regards,
Martin



------------------------------

Message: 10
Date: Sun, 16 Mar 2008 16:11:15 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803161411y7997dbb5rafc3e559620e84d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 4:07 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> >>> Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?
>  >>  Next, I want to have distutils (build_py) to invoke 2to3 as a
>  >>  command-line tool. I think this will already cover most uses
>  >>  that people may have.
>  >
>  > Are you serious?
>
>  Wrt. invoking it from distutils: Why not?

Because it's far from perfect. I'd expect the success rate of running
2to3 over a 2.x package to be close to zero. I think this is one case
where it's better to let the developer run 2to3 and tweak the app
until it actually works.

>  Wrt. this covering all uses: Surely the ones that people
>  would use the library for, no?

I not understand. :-(

>  >>  Moving lib2to3 into the standard library would mean that the
>  >>  trunk and 3k copies diverge, right?
>  >
>  > Not necessarily. If you check it into 2.6 first, then merge and apply
>  > it to its merged self, afterwards most changes would merge into 3.0
>  > just fine.
>
>  Ok, I'll do that.
>
>  We should decide which of the copies remains the master, and
>  which copies use merge-tracking. I would propose the sandbox
>  copy remains the one where we check in stuff, so that 2to3
>  can still get distributed as a stand-alone application.

That makes sense.

>  > I'd like to clean it up and make it a toplevel package. But I may not
>  > have the time, so until I do (or someone else does) it's best to keep
>  > it inside lib2to3.
>
>  Ok, I'll move it into lib2to3 then also.

Great!

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 30
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 29","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: 2.6 and 3.0 tasks (Christian Heimes)
   2. Re: 2.6 and 3.0 tasks (Benjamin Peterson)
   3. Re: Using *a for packing in lists and other  places
      (Phillip J. Eby)
   4. Re: 2.6 and 3.0 tasks (Guido van Rossum)
   5. Making 2to3 installable (Martin v. L?wis)
   6. Re: Using *a for packing in lists and other places
      (Guido van Rossum)
   7. Re: Making 2to3 installable (Guido van Rossum)
   8. Re: Making 2to3 installable (Collin Winter)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 19:04:46 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD613E.6090007@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
 > So this doesn't address merges at all. Suppose we have some C code
> that's shared between 2.6 and 3.0 and manipulates binary data (e.g.
> the gzip codec). It currently uses PyString on both branches, so any
> changes to the trunk merge smoothly into the py3k branch. But if you
> change PyString -> PyBytes in the py3k branch, every change you make
> in the 2.6 code will cause a merge conflict. Is that really what you
> want? I worry that it will effectively separate the trunk and the py3k
> branch, losing the advantage of doing development that effects both at
> once.

I'm fully aware of the extra burden. The removal of the PyInt_*
functions is already causing merge conflicts and compile errors. Nearly
every C code merge contains at least one place that requires manual
intervention. The PyInt merge conflicts are trivial to fix - so would
errors caused PyString -> PyBytes rename.

I'm not worried about the extra work since it's usually trivial and fast
to fix. I'm more worried about the API names. Do you *really* want to
drag down dead bodies along the road for the next ten years? The dead
bodies are going to rot and stink sooner than later. By Python 3.2
everybody surely regrets the confusing names. ;)

Christian


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 13:06:18 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<1afaf6160803161106o5c06ce6dx7839e0d5decd2cc0@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 1:01 PM, Benjamin Peterson <
musiccomposition@gmail.com> wrote:

>
>
> On Sun, Mar 16, 2008 at 12:32 PM, Guido van Rossum <guido@python.org>
> wrote:
>
> > On Sun, Mar 16, 2008 at 11:57 AM, Benjamin Peterson
> > <musiccomposition@gmail.com> wrote:
> > [Guido]
> > > > That's a rather long thread. Was any conclusion reached? I'm not
> > sure
> > > > how introducing a set of aliases will help merging 2.6 code to 3.0.
> > > > Can you or Christian describe the proposed approach in more detail?
> >
> > > As far as I can see, no objections were raised in that thread.
> >
> > Hm. I had wanted to register a complaint, but I guess I was too busy.
> >
> > > Christian explained the probable approach:
> > > http://mail.python.org/pipermail/python-dev/2008-March/077362.html
> >
> > That's not much of a plan. It doesn't discuss any of the effects of
> > the proposed change on merging code from the 2.6 trunk to the py3k
> > branch.
> >
> > On Sun, Mar 16, 2008 at 12:09 PM, Christian Heimes <lists@cheimes.de>
> > wrote:
> > > Guido van Rossum wrote:
> > >  > -1. This will make merging code from 2.6 harder, and causes more
> > work
> > >  > for porting C extensions.
> > >
> > >  I'm happy to pay the price for the sake of a clean and easy-to-recall
> > C
> > >  API.
> > >
> > >  The for the C extension problem I already proposed a solution in the
> > >  thread Benjamin mentioned before.
> > >
> > >  #include ""Python.h""
> > >  #if PY_VERSION_HEX > 0x03000000
> > >   #include ""python2_compat.h""
> > >  #endif
> > >
> > >  Where python2_compat provides aliases for PyInt and PyString:
> > >
> > >  #define PyInt_Spam PyLong_Spam
> > >  ...
> > >  #define PyString_Egg PyBytes_Egg
> >
> > So this doesn't address merges at all. Suppose we have some C code
> > that's shared between 2.6 and 3.0 and manipulates binary data (e.g.
> > the gzip codec). It currently uses PyString on both branches, so any
> > changes to the trunk merge smoothly into the py3k branch. But if you
> > change PyString -> PyBytes in the py3k branch, every change you make
> > in the 2.6 code will cause a merge conflict. Is that really what you
> > want? I worry that it will effectively separate the trunk and the py3k
> > branch, losing the advantage of doing development that effects both at
> > once.
>
> We could backport the python2_compact header.
>
Sorry, that needs some explanation. We could do the opposite that we do for
Py3K: Add a header file aliasing PyBytes to PyString.

>
>
> >
> > --
> > --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> > )
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/5cd56eed/attachment-0001.htm 

------------------------------

Message: 3
Date: Sun, 16 Mar 2008 14:31:53 -0400
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, Terry Reedy <tjreedy@udel.edu>
Message-ID: <20080316183200.E63CA3A409D@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 12:55 PM 3/16/2008 -0500, Guido van Rossum wrote:
>On Sun, Mar 16, 2008 at 12:48 PM, Phillip J. Eby 
><pje@telecommunity.com> wrote:
> > At 10:00 AM 3/16/2008 -0500, Guido van Rossum wrote:
> >  >(a) *if* we're going to do this, it should also be done for function
> >  >calls (though not for function defs). I'd like all of these to be
> >  >legal (and their interpretation is obvious):
> >  >
> >  >   f(a, b, *x, k=val)
> >  >   f(a, *x, b, k=val)
> >  >   f(*x, a, b, k=val, **kw=stuff)
> >
> >  What does **kw=stuff do?
>
>Sorry, typo. It's been a long conference. ;-) I meant **kw, not **kw=stuff.
>
>PS too bad you're not here!

I will be, next year.  I'll have plenty to present, if the things I'm 
working on haven't already become big enough by then that other 
people are doing presentations on them, instead.  :)

Btw, would you mind pronouncing (or at least commenting) on PEP 365, 
so that I can proceed with the work -- or not.



------------------------------

Message: 4
Date: Sun, 16 Mar 2008 14:46:26 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803161246x2873657ex60e7e5aed95aa883@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 1:04 PM, Christian Heimes <lists@cheimes.de> wrote:
> Guido van Rossum wrote:
>   > So this doesn't address merges at all. Suppose we have some C code
>  > that's shared between 2.6 and 3.0 and manipulates binary data (e.g.
>  > the gzip codec). It currently uses PyString on both branches, so any
>  > changes to the trunk merge smoothly into the py3k branch. But if you
>  > change PyString -> PyBytes in the py3k branch, every change you make
>  > in the 2.6 code will cause a merge conflict. Is that really what you
>  > want? I worry that it will effectively separate the trunk and the py3k
>  > branch, losing the advantage of doing development that effects both at
>  > once.
>
>  I'm fully aware of the extra burden. The removal of the PyInt_*
>  functions is already causing merge conflicts and compile errors.

Even though the more popular PyInt_ APIs are still available (even if
only as macros).

>  Nearly every C code merge contains at least one place that requires manual
>  intervention. The PyInt merge conflicts are trivial to fix - so would
>  errors caused PyString -> PyBytes rename.

I disagree. Bad merges are already a frequent cause of instability in
3.0. This could easily double the problems. And while I want to reduce
the instability (I really wish you would no commit until all unittests
pass), I also don't want the merges to cost more of your time!

>  I'm not worried about the extra work since it's usually trivial and fast
>  to fix. I'm more worried about the API names. Do you *really* want to
>  drag down dead bodies along the road for the next ten years? The dead
>  bodies are going to rot and stink sooner than later. By Python 3.2
>  everybody surely regrets the confusing names. ;)

It doesn't have to be so black and white. Using the macro approach you
propose we can fix the situation at any time later.

We could also make the changes in 2.6, so that the 2.6 code looks the
same as 3.0. (However for binary compatibility I think it would be
better if in 2.6 the linker sees PyString where in 3.0 it sees
PyBytes.)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 14:47:39 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: [Python-3000] Making 2to3 installable
To: Python 3000 <python-3000@python.org>
Message-ID: <47DD795B.20507@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

After talking to Collin, I just committed a change to
2to3 to make it installable as an executable script
called ""2to3"".

To do so, I had to wrap all the top-level modules
into a package, and move the fixes and tests into
that package. Lacking a better name, I called the
library lib2to3. I also install pgen2 as a separate
package.

In the process, I had to change all the imports,
and I did that by using relative imports. As
a consequence, 2to3 currently won't work on
Python 2.4.

Regards,
Martin


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 14:49:03 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803161249u65b1c0ffl4ddc0bbf09afed0a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 1:31 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
>  Btw, would you mind pronouncing (or at least commenting) on PEP 365,
>  so that I can proceed with the work -- or not.

Can you point me to past discussions? ISTR that this is controversial.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 14:51:58 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Making 2to3 installable
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803161251jcc9e7dft950df8ed5ea85dc3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?

On Sun, Mar 16, 2008 at 2:47 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> After talking to Collin, I just committed a change to
>  2to3 to make it installable as an executable script
>  called ""2to3"".
>
>  To do so, I had to wrap all the top-level modules
>  into a package, and move the fixes and tests into
>  that package. Lacking a better name, I called the
>  library lib2to3. I also install pgen2 as a separate
>  package.
>
>  In the process, I had to change all the imports,
>  and I did that by using relative imports. As
>  a consequence, 2to3 currently won't work on
>  Python 2.4.
>
>  Regards,
>  Martin
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sun, 16 Mar 2008 12:57:44 -0700
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] Making 2to3 installable
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<43aa6ff70803161257m295b9cd1rfc3a5bcc35c3d114@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 12:51 PM, Guido van Rossum <guido@python.org> wrote:
> Cool! Is the next plan to make lib2to3 part of the stdlib in 2.6 and 3.0?

That would be fine by me. I'll try to work up some better docs than
just a README.

>  On Sun, Mar 16, 2008 at 2:47 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
>  > After talking to Collin, I just committed a change to
>  >  2to3 to make it installable as an executable script
>  >  called ""2to3"".
>  >
>  >  To do so, I had to wrap all the top-level modules
>  >  into a package, and move the fixes and tests into
>  >  that package. Lacking a better name, I called the
>  >  library lib2to3. I also install pgen2 as a separate
>  >  package.
>  >
>  >  In the process, I had to change all the imports,
>  >  and I did that by using relative imports. As
>  >  a consequence, 2to3 currently won't work on
>  >  Python 2.4.
>  >
>  >  Regards,
>  >  Martin
>  >  _______________________________________________
>  >  Python-3000 mailing list
>  >  Python-3000@python.org
>  >  http://mail.python.org/mailman/listinfo/python-3000
>  >  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>  >
>
>
>
>  --
>  --Guido van Rossum (home page: http://www.python.org/~guido/)
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/collinw%40gmail.com
>


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 29
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 28","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] 2.6 and 3.0 tasks (Martin v. L?wis)
   2. Re: 2.6 and 3.0 tasks (Christian Heimes)
   3. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   4. Re: [Python-Dev] 2.6 and 3.0 tasks (Christian Heimes)
   5. Re: [Python-Dev] 2.6 and 3.0 project management (Barry Warsaw)
   6. Re: [Python-Dev] 2.6 and 3.0 project management (Barry Warsaw)
   7. Re: 2.6 and 3.0 tasks (Guido van Rossum)
   8. Re: Using *a for packing in lists and other  places
      (Phillip J. Eby)
   9. Re: Using *a for packing in lists and other places
      (Guido van Rossum)
  10. Re: 2.6 and 3.0 tasks (Benjamin Peterson)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 12:04:29 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: Trent Nelson <tnelson@onresolve.com>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID: <47DD531D.5030801@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

>>> * Replace Windows API calls with wide versions to support unicode
>>>  for file names, environment etc.
>> +1. This should be broken into separate tasks for each API.
> 
> What are we referring to here?  Calling the W versions explicitly and
> using wchar_t for everything, or using the TCHAR/TEXT() approach and
> keeping the API calls the same, letting the #define UNICODE do the
> work behind the scenes?

Not sure whose being attributed here, but I think ""breaking down""
should be done by ""information source"": command line, environment,
registry, file names, sys.path, module names, etc.

I have a patch on SF to resolve the command line issue.

I don't think we should use Microsoft's Unicode programming model
around TCHAR/TEXT. It would allow for two different builds, and
given that we don't need to support W9X anymore, an ""ANSI"" build
is pointless, IMO.

Regards,
Martin


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 18:09:49 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD545D.6070300@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> -1. This will make merging code from 2.6 harder, and causes more work
> for porting C extensions.

I'm happy to pay the price for the sake of a clean and easy-to-recall C
API.

The for the C extension problem I already proposed a solution in the
thread Benjamin mentioned before.

#include ""Python.h""
#if PY_VERSION_HEX > 0x03000000
  #include ""python2_compat.h""
#endif

Where python2_compat provides aliases for PyInt and PyString:

#define PyInt_Spam PyLong_Spam
...
#define PyString_Egg PyBytes_Egg

>>  * Backport the new buffer protocol to 2.6. I spoke to Travis yesterday
>>  and he said he is trying to get it done during the PyCon sprint. Maybe
>>  somebody can assist him?
> 
> Does he need assistance?

I don't know.
> 
>>  When the new buffer protocol is available in 2.6 we can start back
>>  porting bytesarray and the new IO framework.
> 
> Are these really so closely tied that they have to wait before they
> can be backported?

Bytesarray depends on the buffer protocol and the new io framework is
much easier to back port when both the buffer protocol and bytesarray is
available.

> While I know that some people are expecting to use a development model
> that invokes 2to3 very frequently, I think this is at best a
> nice-to-have. (I also don't see how it could be done, but maybe I'm
> blind for the obvious, as the original author.)

I'm not sure if and how 2to3 can be speed up. Maybe some profiling and
some C code can increase the speed. It's worth a shot.

Christian


------------------------------

Message: 3
Date: Sun, 16 Mar 2008 12:13:42 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803161013x7dfd5fd6k7da075e90852bbac@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 11:51 AM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
> It's just depends on how you see the tracker. It's not just to ""bug"" tracker
> anymore, is it? On other projects I've worked with, we had separate areas
> for bugs, features, and tasks. (yes, it's SourceForge.) I found it easier to
> keep organized. However, if this is Python's way, I'm not going to stand in
> it.

Ah, sourceforge. I am so glad we're not using that any more. The
random separation between patches and bugs was more a distraction
rather than a feature; often bugs turn into patches or patches turn
out to be useless except for the fact that they highlight a bug...

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 18:17:00 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: Collin Winter <collinw@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD560C.8090202@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Collin Winter wrote:
> The biggest win in terms of performance would be to reimplement the
> pattern matching engine used by the fixers.: it by far dominates the
> running time, taking 99+% of the runtime when I ran 2to3 over Twisted,
> for example. The current design is a heavily-recursive system, and as
> such bombs out when it encounters, e.g., files with a thousand
> assignment statements in a row. I'd also like something more
> expressive: the current DSL can't express recursive patterns.

Do you have time to mentor a GSoC project? Or can you mentor a mentor
...? :)

Christian


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 12:24:19 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <2C2D7EC7-51F2-4F4E-8127-87ACCC6F8413@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 16, 2008, at 8:51 AM, Guido van Rossum wrote:

> Python 3.0 and 2.6 are coming along really nice. I am optimistic that
> we can make the projected August date for the final releases of 2.6
> and 3.0. As you may remember, Barry (the new release manager for both)
> suggested that we synchronize releases of 2.6 and 3.0. Not only could
> this potentially save the release manager and his assistants some
> time, doing the final releases together sends a clear signal to the
> community that both versions will receive equal support.

I mentioned this to Guido and got a positive response, so let me state  
my preference for your feedback.  I plan on holding up the final  
releases until both versions are ready to go.  I think this will help  
motivate us to give Python 2.6 the love it needs if it's lagging  
behind 3.0, and I completely agree with Guido that this let's our  
community know that both versions are equally important to us.

The other thing is that I'd really like is a ""show stoppers"" Roundup  
search.  The idea is that if our core buildbots look good and the  
""show stoppers"" search turns up no items, then I know I can cut a  
release (at least for alphas, betas, and rcs).  If there are ""show  
stoppers"" then I have something that I can triage (and maybe re-assign  
severity) or start publicly harassing people into fixing.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR91XxHEjvBPtnXfVAQIINwQAsaJ8uWb0FXqD9wZV8AuE7CxG2RLEZl42
vz2EUbAs7n/txV/lWs3N4syZvfS7g0Q3rgd65LvpUCi4+r6M3MpKcl9VFxGfheUD
mHf5LajS/wEEXyFpxG9+dGfhPpD7JFx21PKyOpHKnq3LP0fCt3yenOi/nEF5zfHr
Ogc6JOapRiM=
=0f9G
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 12:25:27 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <65366C3B-A839-454E-A748-9CF24C39A980@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 16, 2008, at 8:51 AM, Guido van Rossum wrote:

> However, looking at the calendar, I think we need to do a little more
> planning and management than we've typically done for Python releases.
> A final release in August means that we should plan to release a first
> beta in June and a second one in July. That means we have time for
> only two more alpha releases (April and May). I'm thinking of 1-2
> release candidates 1-2 weeks ahead of the final release. Barry can
> make up a more detailed timetable. I'm fine with some slippage
> (especially if planned ahead) of individual releases due to
> availability of release personnel; but I don't want to be held up by
> features or bugs unless they are of absolutely dramatic show-stopping
> nature.

Oh yeah, I'd like to hash a more detailed timeline out at the sprint.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR91YCXEjvBPtnXfVAQJsxQP9FgyAn2JOl/+SShBNgTqlxWBwGAbrjSlS
ySbm/55PKs6bnjx1lkyvptzHFdsfh1LlBVrC5rxQzQIjSX00x8fAPAoseQZ/hDm0
cnVSvPhJhBLsZCmsSRfvDYPdZXnanDd5ff69uV3jd+NLasuJBNrQ5d+eQGiQOTZm
BTgsjt+YKpQ=
=L9yF
-----END PGP SIGNATURE-----


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 12:32:57 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: ""Christian Heimes"" <lists@cheimes.de>, 	""Benjamin Peterson""
	<musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803161032t5d81cfcdj2efef99559cac623@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 11:57 AM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
[Guido]
> > That's a rather long thread. Was any conclusion reached? I'm not sure
> > how introducing a set of aliases will help merging 2.6 code to 3.0.
> > Can you or Christian describe the proposed approach in more detail?

> As far as I can see, no objections were raised in that thread.

Hm. I had wanted to register a complaint, but I guess I was too busy.

> Christian explained the probable approach:
> http://mail.python.org/pipermail/python-dev/2008-March/077362.html

That's not much of a plan. It doesn't discuss any of the effects of
the proposed change on merging code from the 2.6 trunk to the py3k
branch.

On Sun, Mar 16, 2008 at 12:09 PM, Christian Heimes <lists@cheimes.de> wrote:
> Guido van Rossum wrote:
>  > -1. This will make merging code from 2.6 harder, and causes more work
>  > for porting C extensions.
>
>  I'm happy to pay the price for the sake of a clean and easy-to-recall C
>  API.
>
>  The for the C extension problem I already proposed a solution in the
>  thread Benjamin mentioned before.
>
>  #include ""Python.h""
>  #if PY_VERSION_HEX > 0x03000000
>   #include ""python2_compat.h""
>  #endif
>
>  Where python2_compat provides aliases for PyInt and PyString:
>
>  #define PyInt_Spam PyLong_Spam
>  ...
>  #define PyString_Egg PyBytes_Egg

So this doesn't address merges at all. Suppose we have some C code
that's shared between 2.6 and 3.0 and manipulates binary data (e.g.
the gzip codec). It currently uses PyString on both branches, so any
changes to the trunk merge smoothly into the py3k branch. But if you
change PyString -> PyBytes in the py3k branch, every change you make
in the 2.6 code will cause a merge conflict. Is that really what you
want? I worry that it will effectively separate the trunk and the py3k
branch, losing the advantage of doing development that effects both at
once.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sun, 16 Mar 2008 13:48:25 -0400
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>, ""Thomas Wouters""
	<thomas@python.org>
Cc: python-3000@python.org, Terry Reedy <tjreedy@udel.edu>
Message-ID: <20080316174832.7E4983A40FF@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 10:00 AM 3/16/2008 -0500, Guido van Rossum wrote:
>(a) *if* we're going to do this, it should also be done for function
>calls (though not for function defs). I'd like all of these to be
>legal (and their interpretation is obvious):
>
>   f(a, b, *x, k=val)
>   f(a, *x, b, k=val)
>   f(*x, a, b, k=val, **kw=stuff)

What does **kw=stuff do?



------------------------------

Message: 9
Date: Sun, 16 Mar 2008 12:55:46 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org, Terry Reedy <tjreedy@udel.edu>
Message-ID:
	<ca471dc20803161055k6051de0an61a59dd758b7e04d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 12:48 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 10:00 AM 3/16/2008 -0500, Guido van Rossum wrote:
>  >(a) *if* we're going to do this, it should also be done for function
>  >calls (though not for function defs). I'd like all of these to be
>  >legal (and their interpretation is obvious):
>  >
>  >   f(a, b, *x, k=val)
>  >   f(a, *x, b, k=val)
>  >   f(*x, a, b, k=val, **kw=stuff)
>
>  What does **kw=stuff do?

Sorry, typo. It's been a long conference. ;-) I meant **kw, not **kw=stuff.

PS too bad you're not here!

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 10
Date: Sun, 16 Mar 2008 13:01:29 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] 2.6 and 3.0 tasks
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<1afaf6160803161101jed4b63bl3ae599622bb56bfe@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 12:32 PM, Guido van Rossum <guido@python.org> wrote:

> On Sun, Mar 16, 2008 at 11:57 AM, Benjamin Peterson
> <musiccomposition@gmail.com> wrote:
> [Guido]
> > > That's a rather long thread. Was any conclusion reached? I'm not sure
> > > how introducing a set of aliases will help merging 2.6 code to 3.0.
> > > Can you or Christian describe the proposed approach in more detail?
>
> > As far as I can see, no objections were raised in that thread.
>
> Hm. I had wanted to register a complaint, but I guess I was too busy.
>
> > Christian explained the probable approach:
> > http://mail.python.org/pipermail/python-dev/2008-March/077362.html
>
> That's not much of a plan. It doesn't discuss any of the effects of
> the proposed change on merging code from the 2.6 trunk to the py3k
> branch.
>
> On Sun, Mar 16, 2008 at 12:09 PM, Christian Heimes <lists@cheimes.de>
> wrote:
> > Guido van Rossum wrote:
> >  > -1. This will make merging code from 2.6 harder, and causes more work
> >  > for porting C extensions.
> >
> >  I'm happy to pay the price for the sake of a clean and easy-to-recall C
> >  API.
> >
> >  The for the C extension problem I already proposed a solution in the
> >  thread Benjamin mentioned before.
> >
> >  #include ""Python.h""
> >  #if PY_VERSION_HEX > 0x03000000
> >   #include ""python2_compat.h""
> >  #endif
> >
> >  Where python2_compat provides aliases for PyInt and PyString:
> >
> >  #define PyInt_Spam PyLong_Spam
> >  ...
> >  #define PyString_Egg PyBytes_Egg
>
> So this doesn't address merges at all. Suppose we have some C code
> that's shared between 2.6 and 3.0 and manipulates binary data (e.g.
> the gzip codec). It currently uses PyString on both branches, so any
> changes to the trunk merge smoothly into the py3k branch. But if you
> change PyString -> PyBytes in the py3k branch, every change you make
> in the 2.6 code will cause a merge conflict. Is that really what you
> want? I worry that it will effectively separate the trunk and the py3k
> branch, losing the advantage of doing development that effects both at
> once.

We could backport the python2_compact header.

>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/99e23fbc/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 28
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 27","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] 2.6 and 3.0 project management (Martin v. L?wis)
   2. Re: [Python-Dev] 2.6 and 3.0 tasks (Collin Winter)
   3. Re: [Python-Dev] 2.6 and 3.0 project management (skip@pobox.com)
   4. Re: [Python-Dev] 2.6 and 3.0 project management
      (Benjamin Peterson)
   5. Re: Fwd: [Python-Dev] 2.6 and 3.0 project management
      (Martin v. L?wis)
   6. Re: [Python-Dev] 2.6 and 3.0 tasks (Benjamin Peterson)
   7. Re: [Python-Dev] 2.6 and 3.0 project management (Martin v. L?wis)
   8. Re: xturtle and 3.0 (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 11:46:00 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DD4EC8.4090600@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

> * Stabilize the C API of Python 3.0. I like to rename several prefixes
> to reduce the confusing: PyBytes -> PyByteArray, PyString -> PyBytes ...

I'd like to bring up PEP 3121 here as well. I have patches, but still
need to complete them.


Regards
Martin


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 09:50:16 -0700
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<43aa6ff70803160950l736a20ceg1acb4c17251d9a0d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 8:23 AM, Guido van Rossum <guido@python.org> wrote:
>  On Sun, Mar 16, 2008 at 9:42 AM, Christian Heimes <lists@cheimes.de> wrote:
......
>  > and add the fixers to 2to3
>
>  +1. I think quite a few changes have not had a fixer added. Again, I
>  think we should maintain a specific list of needed fixers; fixers can
>  easily be developed independently.

Neal and I are coming up with a list to feed tasks to interested PyCon
sprinters.

>  >  * Speed up 2to3. I suggested a GSoC task to improve and speed up 2to3
>  >  but it may be too late when we plan to ship out 3.0 in August.
>
>  While I know that some people are expecting to use a development model
>  that invokes 2to3 very frequently, I think this is at best a
>  nice-to-have. (I also don't see how it could be done, but maybe I'm
>  blind for the obvious, as the original author.)

The biggest win in terms of performance would be to reimplement the
pattern matching engine used by the fixers.: it by far dominates the
running time, taking 99+% of the runtime when I ran 2to3 over Twisted,
for example. The current design is a heavily-recursive system, and as
such bombs out when it encounters, e.g., files with a thousand
assignment statements in a row. I'd also like something more
expressive: the current DSL can't express recursive patterns.

Collin Winter


------------------------------

Message: 3
Date: Sun, 16 Mar 2008 11:49:45 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <18397.20393.103687.882317@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    >> I don't like the idea of task like items in the main bug tracker.

    Guido> Why not? Bugs are also tasks, and need to be managed and triaged
    Guido> in the same way.

Agreed.  Both bugs and tasks would be ""issues"" in Roundup parlance, along
with patches.

A further reason to keep this in Roundup if possible is that people like
Martin have already committed to help maintain the tracker.  We already have
a separate Trac instance for the website, which I would like to see folded
into the Roundup tracker, freeing up limited (human) resources used to
maintain that tracker so they can either spend more time with their families
or work on other things that need doing.

Skip


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 11:51:19 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<1afaf6160803160951l7a580ee8i796bcfe77d424cf8@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 11:37 AM, Guido van Rossum <guido@python.org> wrote:

> On Sun, Mar 16, 2008 at 11:19 AM, Benjamin Peterson
> <musiccomposition@gmail.com> wrote:
> > I don't like the idea of task like items in the main bug tracker.
>
> Why not? Bugs are also tasks, and need to be managed and triaged in
> the same way. It might be convenient to have everything in one
> tracker. What's your objection? It should be easy enough to search for
> tasks or bugs etc.

It's just depends on how you see the tracker. It's not just to ""bug"" tracker
anymore, is it? On other projects I've worked with, we had separate areas
for bugs, features, and tasks. (yes, it's SourceForge.) I found it easier to
keep organized. However, if this is Python's way, I'm not going to stand in
it.

>
>
> > I do, however, like the bug tracker interface for this sort of thing.
> Could we
> > start a new instance of the the tracker just for internal development
> tasks?
>
> I'm not sure how easy it would be to start a new instance, but I
> expect setting up the database, configuration etc. would require a
> fairly significant amount of work. I'd much rather use existing
> infrastructure.

I'm now fine with that.

>
>
> > We could change the statuses around to ""Work in progress"", ""Completed"",
> > ""Incomplete"", and such. It'd be easy to search for tasks that have to be
> > accomplished for a given release.
>
> That would be good for bugs too, actually.

Well, I'm glad to help somehow! :P

>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/cf09856b/attachment-0001.htm 

------------------------------

Message: 5
Date: Sun, 16 Mar 2008 11:54:26 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Fwd: [Python-Dev] 2.6 and 3.0 project
	management
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD50C2.1070701@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

>  Not quite. Items don't automatically end up on a hot list; they must
>  explicitly be put on one. I'm not sure how you'd simulate this via
>  saved searches. Maybe a combination of a custom keyword *and* a saved
>  search would help. However this doesn't scale so well, because
>  keywords show up in everybody's UI. Hot lists are only visible to
>  users who care to subscribe to them.

It would be relatively easy to implement this directly in roundup.
IIUC, there should be a hotlist object, and either
a) an issue has a multilink to multiple hotlists, or
b) a hotlist has a multilink to multiple issues.

I cannot envision the ""add to hotlist"" user interface, though.
It should be possible to add an issue to a hotlist from the issue's
page, right? So would a comma-separated list be reasonable? (with
a popup menu to checkmark hotlists)

Regards,
Martin


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 11:57:32 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<1afaf6160803160957v1e15a8c9s1e709a0d47bb52f@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 11:44 AM, Guido van Rossum <guido@python.org> wrote:

> On Sun, Mar 16, 2008 at 11:26 AM, Benjamin Peterson
> <musiccomposition@gmail.com> wrote:
> > On Sun, Mar 16, 2008 at 10:23 AM, Guido van Rossum <guido@python.org>
> wrote:
> > > > PyString -> PyBytes ...
> > >
> > > -1. This will make merging code from 2.6 harder, and causes more work
> > > for porting C extensions.
>
> > There was a thread about this a few weeks ago:
> > http://mail.python.org/pipermail/python-dev/2008-March/077339.html
> >  We can still do the renaming, but alias PyString to PyBytes.
>
> That's a rather long thread. Was any conclusion reached? I'm not sure
> how introducing a set of aliases will help merging 2.6 code to 3.0.
> Can you or Christian describe the proposed approach in more detail?

As far as I can see, no objections were raised in that thread.
Christian explained the probable approach:
http://mail.python.org/pipermail/python-dev/2008-March/077362.html

>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/d18e1550/attachment-0001.htm 

------------------------------

Message: 7
Date: Sun, 16 Mar 2008 11:58:00 -0500
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: Benjamin Peterson <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD5198.9090001@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

> It's just depends on how you see the tracker. It's not just to ""bug"" 
> tracker anymore, is it? On other projects I've worked with, we had 
> separate areas for bugs, features, and tasks. (yes, it's SourceForge.) I 
> found it easier to keep organized. However, if this is Python's way, I'm 
> not going to stand in it.

Actually, one of the main complaints about the SF tracker is that it
splits into several ones.

Something starts out as a bug, but then becomes a patch as soon as
somebody attaches a patch. So on SF, people had to open a *separate*
issue to provide a patch, and leave a message in the original bug
report pointing to the patch. They hated it, and insisted that
the new tracker should have a single list of issues.

Regards,
Martin



------------------------------

Message: 8
Date: Sun, 16 Mar 2008 12:00:01 -0500
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] xturtle and 3.0
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<bbaeab100803161000t4fc2e39dycfba5f2c03101ff1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Sun, Mar 16, 2008 at 10:32 AM, Guido van Rossum <guido@python.org> wrote:
> I'm changing the subject to keep this separate from the project
>  management tools discussion.
>
>
>  >  Of course I know that xturtle is only a side issue in the current
>  >  development efforts. Unfortunately I'm not familiar with the procedures
>  >  needed to get a new module into Python, so I kindly ask you for your
>  >  advice how to proceed, at the same time offering my cooperation.
>
>  I think that for a library module like this, an email like you've sent
>  is just fine. Maybe Brett has a suggestion on whether it would remain
>  a toplevel module or could be placed in some umbrella package (is
>  Tkinter being moved around?).

The current plan is to introduce a tk package and turtle was to become
tk.turtle. xturtle, if picked up, can just take the place of the
current turtle at that location.

-Brett


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 27
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 26","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] 2.6 and 3.0 project management
      (Benjamin Peterson)
   2. Re: [Python-Dev] 2.6 and 3.0 tasks (Benjamin Peterson)
   3. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   4. Fwd: [Python-Dev] 2.6 and 3.0 project management
      (Guido van Rossum)
   5. Re: [Python-Dev] 2.6 and 3.0 tasks (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 11:19:37 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<1afaf6160803160919qbf49800n584ea4f965ebc6b2@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 8:51 AM, Guido van Rossum <guido@python.org> wrote:

> Python 3.0 and 2.6 are coming along really nice. I am optimistic that
> we can make the projected August date for the final releases of 2.6
> and 3.0. As you may remember, Barry (the new release manager for both)
> suggested that we synchronize releases of 2.6 and 3.0. Not only could
> this potentially save the release manager and his assistants some
> time, doing the final releases together sends a clear signal to the
> community that both versions will receive equal support.
>
> However, looking at the calendar, I think we need to do a little more
> planning and management than we've typically done for Python releases.
> A final release in August means that we should plan to release a first
> beta in June and a second one in July. That means we have time for
> only two more alpha releases (April and May). I'm thinking of 1-2
> release candidates 1-2 weeks ahead of the final release. Barry can
> make up a more detailed timetable. I'm fine with some slippage
> (especially if planned ahead) of individual releases due to
> availability of release personnel; but I don't want to be held up by
> features or bugs unless they are of absolutely dramatic show-stopping
> nature.
>
> In order to make such a tight release schedule we should try to come
> up with a list of tasks that need to be done, and prioritize them.
> This should include documentation, and supporting tools like 2to3. It
> should include features, backports of features, cleanup, bugs, and
> whatever else needs to be done (e.g. bugbot maintenance).
>
> In the past we've used shared spreadsheets in Google for this purpose,
> but seeing that these haven't been updated in ages, I'm skeptical that
> they are a sufficient tool. In my day job at Google we've started to
> do all task management for our project in the bug tracker (but that
> tracker has some features that make it particularly easy). Does anyone
> have a suggestion for an online open shared task management system
> that we cold adopt? Or should we bite the bullet and put everything in
> the bug tracker? Other suggestions? Anything's better than just
> email...

I don't like the idea of task like items in the main bug tracker. I do,
however, like the bug tracker interface for this sort of thing. Could we
start a new instance of the the tracker just for internal development tasks?
We could change the statuses around to ""Work in progress"", ""Completed"",
""Incomplete"", and such. It'd be easy to search for tasks that have to be
accomplished for a given release.

>
>
> PS. I realize that I've been rather absent from the day to day
> activities in the Python 3000 world lately. This is a temporary
> condition due to an important impending launch in my day job; I expect
> to have much more time for Python again starting in April.
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
> _______________________________________________
> Python-Dev mailing list
> Python-Dev@python.org
> http://mail.python.org/mailman/listinfo/python-dev
> Unsubscribe:
> http://mail.python.org/mailman/options/python-dev/musiccomposition%40gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/ce742145/attachment-0001.htm 

------------------------------

Message: 2
Date: Sun, 16 Mar 2008 11:26:58 -0500
From: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<1afaf6160803160926i37d3f2b9l9bd23953e77f7101@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sun, Mar 16, 2008 at 10:23 AM, Guido van Rossum <guido@python.org> wrote:

> Moving this to a new subject to keep the discussion of tasks and the
> discussion of task tracking tools separate.
>
> On Sun, Mar 16, 2008 at 9:42 AM, Christian Heimes <lists@cheimes.de>
> wrote:
> >  I did a quick brainstorming with me, myself and I. I came up with a
> list
> >  of (IMHO) important tasks.
> >
> >  * Stabilize the C API of Python 3.0. I like to rename several prefixes
> >  to reduce the confusing: PyBytes -> PyByteArray,
>
> +1 (also +1 to backporting this to 2.6)
>
> > PyString -> PyBytes ...
>
> -1. This will make merging code from 2.6 harder, and causes more work
> for porting C extensions.

There was a thread about this a few weeks ago:
http://mail.python.org/pipermail/python-dev/2008-March/077339.html
We can still do the renaming, but alias PyString to PyBytes.

>
>
> >  * Backport the new buffer protocol to 2.6. I spoke to Travis yesterday
> >  and he said he is trying to get it done during the PyCon sprint. Maybe
> >  somebody can assist him?
>
> Does he need assistance?
>
> >  When the new buffer protocol is available in 2.6 we can start back
> >  porting bytesarray and the new IO framework.
>
> Are these really so closely tied that they have to wait before they
> can be backported?
>
> >  * Replace Windows API calls with wide versions to support unicode for
> >  file names, environment etc.
>
> +1. This should be broken into separate tasks for each API.
>
> >  * Get the stdlib reorg done
>
> +1. But again, I think this is many small tasks.
>
> > and add the fixers to 2to3
>
> +1. I think quite a few changes have not had a fixer added. Again, I
> think we should maintain a specific list of needed fixers; fixers can
> easily be developed independently.
>
> >  * Speed up 2to3. I suggested a GSoC task to improve and speed up 2to3
> >  but it may be too late when we plan to ship out 3.0 in August.
>
> While I know that some people are expecting to use a development model
> that invokes 2to3 very frequently, I think this is at best a
> nice-to-have. (I also don't see how it could be done, but maybe I'm
> blind for the obvious, as the original author.)
>
> I have some other tasks to add:
>
> - getargs.c (Georg posted about this; his post actually inspired my post.)
>
> - Tweak structseq to be more like namedtuple. Maybe they could have a
> common ABC. I also think we should get rid of the concept of ""hidden""
> fields (that are accessible by name but not through the tuple API).
>
> - Devise a way to handle str instances pickled in 2.6 and unpickled in
> 3.0, and also bytes instances pickled in 3.0 and unpickled in 2.6.
>
> - Someone should go over
>  https://spreadsheets.google.com/ccc?key=pCKY4oaXnT81FrGo3ShGHGg
> and extract more tasks.
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
> _______________________________________________
> Python-Dev mailing list
> Python-Dev@python.org
> http://mail.python.org/mailman/listinfo/python-dev
> Unsubscribe:
> http://mail.python.org/mailman/options/python-dev/musiccomposition%40gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/79f70334/attachment-0001.htm 

------------------------------

Message: 3
Date: Sun, 16 Mar 2008 11:37:45 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803160937r7678eab3p2e75ebd50d2ba6a9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 11:19 AM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
> I don't like the idea of task like items in the main bug tracker.

Why not? Bugs are also tasks, and need to be managed and triaged in
the same way. It might be convenient to have everything in one
tracker. What's your objection? It should be easy enough to search for
tasks or bugs etc.

> I do, however, like the bug tracker interface for this sort of thing. Could we
> start a new instance of the the tracker just for internal development tasks?

I'm not sure how easy it would be to start a new instance, but I
expect setting up the database, configuration etc. would require a
fairly significant amount of work. I'd much rather use existing
infrastructure.

> We could change the statuses around to ""Work in progress"", ""Completed"",
> ""Incomplete"", and such. It'd be easy to search for tasks that have to be
> accomplished for a given release.

That would be good for bugs too, actually.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 11:40:32 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] Fwd: [Python-Dev] 2.6 and 3.0 project
	management
To: PyDev <python-dev@python.org>, ""Python 3000""
	<python-3000@python.org>
Message-ID:
	<ca471dc20803160940h41ce6f57re5eb4274321ea0b9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Sorry, forgot to CC this to the list.

On Sun, Mar 16, 2008 at 9:31 AM,  <skip@pobox.com> wrote:
 >
 >     Guido> It has a much more detailed set of categories, organized as a
 >     Guido> tree.  Our project alone probably has 20-30 different bug
 >     Guido> categories. New bugs in those categories are automatically CC'ed
 >     Guido> to our group's mailing list (which isn't the same as
 >     Guido> auto-assignment).
 >
 >  Adding categories should be easy.  Organized in trees?  Not so sure.

 The tree is really useful because it means that end users can assign
 bugs to the top-level node for a project and the project members can
 move it to the correct subnode. This can even happen in two triage
 stages for large projects.


 >     Guido> There are also more ""bug states"" you can use to track progress of
 >     Guido> a bug through the system: unassigned, assigned, accepted (meaning
 >     Guido> the assignee is actually working on it). (There are also a whole
 >     Guido> bunch that I don't find so useful, and severam that roundup
 >     Guido> already supports.)
 >
 >  Again, I think this should be easy.

 It's also the least important one on my list.


 >     Guido> But perhaps the best feature is ""hot lists"" -- arbitrary,
 >     Guido> ordered, groupings of selected bugs. Each bug can be assigned to
 >     Guido> as many hot lists as you want. Seeing the list of all bugs in a
 >     Guido> particular hot list is one click away. We use this for overlaying
 >     Guido> project management categories and priorities, such as ""code"",
 >     Guido> ""documentation"", ""configuration"" as well as ""next internal
 >     Guido> release"", ""must have"", ""post launch"" etc.
 >
 >  A hot list sounds like a saved search, which Roundup already supports.  It
 >  also supports making these saved searches public.  I suspect you could
 >  define one or more saved public searches which correspond to desired hot
 >  lists.

 Not quite. Items don't automatically end up on a hot list; they must
 explicitly be put on one. I'm not sure how you'd simulate this via
 saved searches. Maybe a combination of a custom keyword *and* a saved
 search would help. However this doesn't scale so well, because
 keywords show up in everybody's UI. Hot lists are only visible to
 users who care to subscribe to them.

[Georg, in a later post]
> Doesn't this match Roundup's keywords?

See above answer.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 11:44:43 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 tasks
To: ""Benjamin Peterson"" <musiccomposition@gmail.com>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	PyDev <python-dev@python.org>
Message-ID:
	<ca471dc20803160944h5cc6333p8e55643c182854a6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 11:26 AM, Benjamin Peterson
<musiccomposition@gmail.com> wrote:
> On Sun, Mar 16, 2008 at 10:23 AM, Guido van Rossum <guido@python.org> wrote:
> > > PyString -> PyBytes ...
> >
> > -1. This will make merging code from 2.6 harder, and causes more work
> > for porting C extensions.

> There was a thread about this a few weeks ago:
> http://mail.python.org/pipermail/python-dev/2008-March/077339.html
>  We can still do the renaming, but alias PyString to PyBytes.

That's a rather long thread. Was any conclusion reached? I'm not sure
how introducing a set of aliases will help merging 2.6 code to 3.0.
Can you or Christian describe the proposed approach in more detail?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 26
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 25","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: 2.6 and 3.0 project management (Christian Heimes)
   2. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   3. Re: Using *a for packing in lists and other places
      (Guido van Rossum)
   4. Re: 2.6 and 3.0 project management (Gregor Lingl)
   5. 2.6 and 3.0 tasks (Guido van Rossum)
   6. xturtle and 3.0 (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 15:42:21 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] 2.6 and 3.0 project management
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <47DD31CD.9030008@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> In order to make such a tight release schedule we should try to come
> up with a list of tasks that need to be done, and prioritize them.
> This should include documentation, and supporting tools like 2to3. It
> should include features, backports of features, cleanup, bugs, and
> whatever else needs to be done (e.g. bugbot maintenance).

I did a quick brainstorming with me, myself and I. I came up with a list
of (IMHO) important tasks.

* Stabilize the C API of Python 3.0. I like to rename several prefixes
to reduce the confusing: PyBytes -> PyByteArray, PyString -> PyBytes ...

* Backport the new buffer protocol to 2.6. I spoke to Travis yesterday
and he said he is trying to get it done during the PyCon sprint. Maybe
somebody can assist him?
When the new buffer protocol is available in 2.6 we can start back
porting bytesarray and the new IO framework.

* Replace Windows API calls with wide versions to support unicode for
file names, environment etc.

* Get the stdlib reorg done and add the fixers to 2to3

* Speed up 2to3. I suggested a GSoC task to improve and speed up 2to3
but it may be too late when we plan to ship out 3.0 in August.

Christian


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 07:54:28 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Neil Toronto"" <ntoronto@cs.byu.edu>
Cc: python-3000@python.org
Message-ID:
	<9e804ac0803160754o56712fbejc67e097ed53dc5d0@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 9:51 PM, Neil Toronto <ntoronto@cs.byu.edu> wrote:

> Thomas Wouters wrote:
> >
> > On Sat, Mar 15, 2008 at 2:58 PM, Terry Reedy <tjreedy@udel.edu
> > <mailto:tjreedy@udel.edu>> wrote:
> >
> >     | Also, yielding everything from an iterator:
> >     |
> >     | >>> def flatten(iterables):
> >     | ...     for it in iterables:
> >     | ...         yield *it
> >
> >     Following the general rule above for *exp, that would be the same as
> >     yield
> >     tuple(it).
> >
> > No. *exp by itself is not valid syntax:
>
> Why isn't it? I'd rather have one meaning for the *-prefix operator with
> a single special case for assignment targets, than have a bunch of
> special cases scattered across the grammar.
>

Ehm, the only specialcases in the grammar are for *args and **kwargs in
functiondefinitions and functioncalls. There is no specialcase for *exp in
either store-context or load-context -- as a matter of fact, the patch to
add unpacking in load-context doesn't change the grammar at all.

That *exp by itself is not valid syntax is not new in this patch (PEP-3132
specifies it that way,) and it's easily explained: what the heck would it
mean? How does

t = a, b, c

differ from

*t = a, b, c

? In the exact same way, a lone '*exp' in load-context doesn't mean
anything. The 'unpacking' unpacks into the surrounding context, and without
context it's unclear what the result will be. To clarify,

{*a, b, c, *d} -> a set (dupes removed, order lost)
{*a} -> same
[*a, b, c, *d] -> a list (dupes intact, order intact)
[*a] -> same
(*a, b, c, *d) -> a tuple (dupes intact, order intact)
*a, b, c, *d -> same
(*a,) -> same
*a, -> same (but horrible style)
*a -> ?

The final reduction of (*a, b) is not *a, it's (*a,), just like is the case
for (a, b) and (a,). You can say '*exp by itself always unpacks into a
list', which Guido argued last night over beer, but that leave that

*a = z
a = *z

do the exact same thing (and the exact same thing as 'a = list(z)' but
something quite subtly but importantly different from 'a = z'), and

a, b, c = *z

differs in no way from

a, b, c = z

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/da1c598e/attachment-0001.htm 

------------------------------

Message: 3
Date: Sun, 16 Mar 2008 10:00:36 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Thomas Wouters"" <thomas@python.org>
Cc: python-3000@python.org, Terry Reedy <tjreedy@udel.edu>
Message-ID:
	<ca471dc20803160800w18d7abb4u8734c8c6e50adab4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Mar 15, 2008 at 6:01 PM, Thomas Wouters <thomas@python.org> wrote:
> On Sat, Mar 15, 2008 at 3:21 PM, Guido van Rossum <guido@python.org> wrote:
> > This post does point out an inconistency in Thomas's patch:
> >
> > def f():
> >  yield 1, 2, 3
> >
> > Yields a single three-tuple.
> >
> > But
> >
> > def f():
> >  yield *[1, 2], 3
> >
> > Yields three separate values.
>
> Uhm, what? It doesn't, and it shouldn't, and I'm not sure what makes you
> think it does.

Sorry, I misread the output. I *expected* it to do this based on an
incomplete understanding of what you've implemented. Since I made this
mistake, I expect others will too; I think *something* needs to
change.

A strict proposal would be to change the syntax of yield so that it
only accepts a single expression, optionally prefixed with a '*'. This
would render

  yield 1, 2, 3

illegal -- you'd have to rewrite this as

  yield (1, 2, 3)

That's a minor inconvenience and can be taken care of by 2to3 easily.

A less strict proposal would be to allow

  yield *expr

and

  yield expr, expr, ...

but not

  yield *expr, expr, ...

nor

  yield expr, *expr, ...  # etc.

While we discussed this over drinks last night, it also made me think
about the end-case of *expr in other contexts. We have the following
series of similar assignments:

  a, b, *c = x
  b, *c = x
  *c = x      # disallowed
  *c, = x      # use this instead

This is defensible by analogy to the following:

  a, b, c = x   # unpack 3-tuple
  b, c = x   # unpack 2-tuple
  c = x   # not a tuple unpacking!
  c, = x   # must unpack 1-tuple this way

However while in the latter case ""c = x"" there is no syntactic hint
that a tuple might be intended, one could say that in ""*c = x"" the
star is plenty enough of a hint.  (The semantics would be clear by
taking the limit of the first series of examples; ""*c = x"" is
equivalent to ""c = list(x)"".)

I don't think I actually *like* this; it would make ""yield *expr"" even
more of an exception, and it doesn't have any attractive use cases.
However I believe that the analogy between regular tuple unpacking and
extended tuple unpacking is a relatively weak argument to forbid ""*c =
x"", and I expect that this gray area is likely to cause users to trip
up in their understanding of this proposed new syntax; especially if
they think too hard about it. :)

Two other comments on Thomas's proposal:

(a) *if* we're going to do this, it should also be done for function
calls (though not for function defs). I'd like all of these to be
legal (and their interpretation is obvious):

  f(a, b, *x, k=val)
  f(a, *x, b, k=val)
  f(*x, a, b, k=val, **kw=stuff)

(b) I noticed that the following are equivalent:

  a, *b
  a, (*b)

I think the latter should not be allowed; the * should be present at
the same level as the commas to which it belongs. (This may be an
issue for the existing extended tuple unpacking as well?)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 16:13:03 +0100
From: Gregor Lingl <gregor.lingl@aon.at>
Subject: Re: [Python-3000] 2.6 and 3.0 project management
To: Python 3000 <python-3000@python.org>
Cc: PyDev <python-dev@python.org>
Message-ID: <47DD38FF.9010004@aon.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed


Hi everyone,

with this posting I refer to a paragraph in PEP 361, which says:

""""""Each non-trivial feature listed here that is not a PEP must be discussed on python-dev.  Other enhancements include:

   - ...
   - turtle.py replacement or enhancements
""""""

Some time ago I had offered my xturtle.py as a replacement of or 
supplement to turtle.py. The discussion that followed is here:

http://www.python.org/dev/summary/2006-06-16_2006-06-30/

At Europython 2006 I gave a talk on xturtle and there and since then I 
had quite positive feedback including encouragement to offer it again to 
include it in the python standard distribution by quite a few people 
including Guido van Rossum.

During the last few weeks I did some enhancements to xturtle and put the 
current version on the xturtle website for download in order to get same 
feedback about the API as well as possible bug reports. This version 
still needs some code polishing.

http://www.rg16.at/~python/xturtle/download.html

So I'm interested to know if this is still an issue for you. If so there 
should be initiated some procedure to decide that.

If this decision were negative, things were done (- and I'd continue to 
develop xturtle elsewhere.)

If the decision were positive, I'd be able to prepare two equivalent 
versions for Python2.6 and Python3000 within two or three weeks. (The 
port to Python3000 is nearly ready.) These could include say 85% of the 
documentation, albeit still not in the correct format.

I think these had to be examined my some reviewer(s) and also a 
discussion about features to include or not include would be useful. I'd 
like to intensivly take part in this discussion and development.

After a possible decision to include xturtle into Python, which 
certainly should take place before the first beta release, there would 
be enough time to polish the documentation and to fix bugs. For their 
discovery it would certainly be an advantage to put it in some 
prerelease as early as possible.

Of course I know that xturtle is only a side issue in the current 
development efforts. Unfortunately I'm not familiar with the procedures 
needed to get a new module into Python, so I kindly ask you for your 
advice how to proceed, at the same time offering my cooperation.

With best regards

Gregor Lingl

Guido van Rossum schrieb:
> Python 3.0 and 2.6 are coming along really nice. I am optimistic that
> we can make the projected August date for the final releases of 2.6
> and 3.0. As you may remember, Barry (the new release manager for both)
> suggested that we synchronize releases of 2.6 and 3.0. Not only could
> this potentially save the release manager and his assistants some
> time, doing the final releases together sends a clear signal to the
> community that both versions will receive equal support.
>
> However, looking at the calendar, I think we need to do a little more
> planning and management than we've typically done for Python releases.
> A final release in August means that we should plan to release a first
> beta in June and a second one in July. That means we have time for
> only two more alpha releases (April and May). I'm thinking of 1-2
> release candidates 1-2 weeks ahead of the final release. Barry can
> make up a more detailed timetable. I'm fine with some slippage
> (especially if planned ahead) of individual releases due to
> availability of release personnel; but I don't want to be held up by
> features or bugs unless they are of absolutely dramatic show-stopping
> nature.
>
> In order to make such a tight release schedule we should try to come
> up with a list of tasks that need to be done, and prioritize them.
> This should include documentation, and supporting tools like 2to3. It
> should include features, backports of features, cleanup, bugs, and
> whatever else needs to be done (e.g. bugbot maintenance).
>
> In the past we've used shared spreadsheets in Google for this purpose,
> but seeing that these haven't been updated in ages, I'm skeptical that
> they are a sufficient tool. In my day job at Google we've started to
> do all task management for our project in the bug tracker (but that
> tracker has some features that make it particularly easy). Does anyone
> have a suggestion for an online open shared task management system
> that we cold adopt? Or should we bite the bullet and put everything in
> the bug tracker? Other suggestions? Anything's better than just
> email...
>
> PS. I realize that I've been rather absent from the day to day
> activities in the Python 3000 world lately. This is a temporary
> condition due to an important impending launch in my day job; I expect
> to have much more time for Python again starting in April.
>
>   


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 10:23:56 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] 2.6 and 3.0 tasks
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803160823w2374407ev73d4e433ae64b579@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Moving this to a new subject to keep the discussion of tasks and the
discussion of task tracking tools separate.

On Sun, Mar 16, 2008 at 9:42 AM, Christian Heimes <lists@cheimes.de> wrote:
>  I did a quick brainstorming with me, myself and I. I came up with a list
>  of (IMHO) important tasks.
>
>  * Stabilize the C API of Python 3.0. I like to rename several prefixes
>  to reduce the confusing: PyBytes -> PyByteArray,

+1 (also +1 to backporting this to 2.6)

> PyString -> PyBytes ...

-1. This will make merging code from 2.6 harder, and causes more work
for porting C extensions.

>  * Backport the new buffer protocol to 2.6. I spoke to Travis yesterday
>  and he said he is trying to get it done during the PyCon sprint. Maybe
>  somebody can assist him?

Does he need assistance?

>  When the new buffer protocol is available in 2.6 we can start back
>  porting bytesarray and the new IO framework.

Are these really so closely tied that they have to wait before they
can be backported?

>  * Replace Windows API calls with wide versions to support unicode for
>  file names, environment etc.

+1. This should be broken into separate tasks for each API.

>  * Get the stdlib reorg done

+1. But again, I think this is many small tasks.

> and add the fixers to 2to3

+1. I think quite a few changes have not had a fixer added. Again, I
think we should maintain a specific list of needed fixers; fixers can
easily be developed independently.

>  * Speed up 2to3. I suggested a GSoC task to improve and speed up 2to3
>  but it may be too late when we plan to ship out 3.0 in August.

While I know that some people are expecting to use a development model
that invokes 2to3 very frequently, I think this is at best a
nice-to-have. (I also don't see how it could be done, but maybe I'm
blind for the obvious, as the original author.)

I have some other tasks to add:

- getargs.c (Georg posted about this; his post actually inspired my post.)

- Tweak structseq to be more like namedtuple. Maybe they could have a
common ABC. I also think we should get rid of the concept of ""hidden""
fields (that are accessible by name but not through the tuple API).

- Devise a way to handle str instances pickled in 2.6 and unpickled in
3.0, and also bytes instances pickled in 3.0 and unpickled in 2.6.

- Someone should go over
  https://spreadsheets.google.com/ccc?key=pCKY4oaXnT81FrGo3ShGHGg
and extract more tasks.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 10:32:17 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] xturtle and 3.0
To: ""Gregor Lingl"" <gregor.lingl@aon.at>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803160832j52879623x2a09da85f8b72bc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I'm changing the subject to keep this separate from the project
management tools discussion.

On Sun, Mar 16, 2008 at 10:13 AM, Gregor Lingl <gregor.lingl@aon.at> wrote:
>
>  Hi everyone,
>
>  with this posting I refer to a paragraph in PEP 361, which says:
>
>  """"""Each non-trivial feature listed here that is not a PEP must be discussed on python-dev.  Other enhancements include:
>
>    - ...
>    - turtle.py replacement or enhancements
>  """"""
>
>  Some time ago I had offered my xturtle.py as a replacement of or
>  supplement to turtle.py. The discussion that followed is here:
>
>  http://www.python.org/dev/summary/2006-06-16_2006-06-30/
>
>  At Europython 2006 I gave a talk on xturtle and there and since then I
>  had quite positive feedback including encouragement to offer it again to
>  include it in the python standard distribution by quite a few people
>  including Guido van Rossum.
>
>  During the last few weeks I did some enhancements to xturtle and put the
>  current version on the xturtle website for download in order to get same
>  feedback about the API as well as possible bug reports. This version
>  still needs some code polishing.
>
>  http://www.rg16.at/~python/xturtle/download.html
>
>  So I'm interested to know if this is still an issue for you. If so there
>  should be initiated some procedure to decide that.

I think that for 3.0, replacing turtle with xturtle is great, *IF*
xturtle doesn't add any additional dependencies *AND* it works well on
Mac OSX, Linux and Windows.

>  If this decision were negative, things were done (- and I'd continue to
>  develop xturtle elsewhere.)
>
>  If the decision were positive, I'd be able to prepare two equivalent
>  versions for Python2.6 and Python3000 within two or three weeks. (The
>  port to Python3000 is nearly ready.) These could include say 85% of the
>  documentation, albeit still not in the correct format.

That sounds cool. In 2.6 I'm reluctant to replace the existing turtle
module; xturtle can be added as xturtle.

>  I think these had to be examined my some reviewer(s) and also a
>  discussion about features to include or not include would be useful. I'd
>  like to intensivly take part in this discussion and development.
>
>  After a possible decision to include xturtle into Python, which
>  certainly should take place before the first beta release, there would
>  be enough time to polish the documentation and to fix bugs. For their
>  discovery it would certainly be an advantage to put it in some
>  prerelease as early as possible.
>
>  Of course I know that xturtle is only a side issue in the current
>  development efforts. Unfortunately I'm not familiar with the procedures
>  needed to get a new module into Python, so I kindly ask you for your
>  advice how to proceed, at the same time offering my cooperation.

I think that for a library module like this, an email like you've sent
is just fine. Maybe Brett has a suggestion on whether it would remain
a toplevel module or could be placed in some umbrella package (is
Tkinter being moved around?).

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 25
*******************************************
?","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 24","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. getargs.c (Georg Brandl)
   2. True Coroutines (was Re: Using *a for packing in lists and
      other places) (Phillip J. Eby)
   3. 2.6 and 3.0 project management (Guido van Rossum)
   4. Re: [Python-Dev] 2.6 and 3.0 project management (Facundo Batista)
   5. Re: [Python-Dev] 2.6 and 3.0 project management (Guido van Rossum)
   6. Re: [Python-Dev] 2.6 and 3.0 project management (skip@pobox.com)
   7. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   8. Re: Using *a for packing in lists and other places
      (Thomas Wouters)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 13:58:43 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: [Python-3000] getargs.c
To: python-3000@python.org
Message-ID: <frj5hm$91a$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

(See also Issue 2298)

String/Unicode/Bytes handling in getargs.c is in dire need of some
love; also the docs need to be made consistent with the implementation
w.r.t. where a string/unicode is needed, whether null bytes are allowed,
etc.

Perhaps something for the PyCon sprint?

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 2
Date: Sun, 16 Mar 2008 08:57:40 -0400
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: [Python-3000] True Coroutines (was Re: Using *a for packing
	in lists and other places)
To: Talin <talin@acm.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <20080316125942.5B3783A40C1@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 06:51 PM 3/15/2008 -0700, Talin wrote:
>Now, one final comment: PEP 342 promises that the new yield semantics
>can be used to implement true coroutines. But I don't see how to
>actually make that work. Has anyone actually done this?

http://peak.telecommunity.com/DevCenter/TrellisActivity#co-operative-multitasking

http://peak.telecommunity.com/DevCenter/TrellisActivity#invoking-subtasks


There are other packages in the Cheeseshop that do something like 
this too, I believe. 



------------------------------

Message: 3
Date: Sun, 16 Mar 2008 08:51:20 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] 2.6 and 3.0 project management
To: ""Python 3000"" <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803160651h567b6bcev4b21da47a5ec5ed3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Python 3.0 and 2.6 are coming along really nice. I am optimistic that
we can make the projected August date for the final releases of 2.6
and 3.0. As you may remember, Barry (the new release manager for both)
suggested that we synchronize releases of 2.6 and 3.0. Not only could
this potentially save the release manager and his assistants some
time, doing the final releases together sends a clear signal to the
community that both versions will receive equal support.

However, looking at the calendar, I think we need to do a little more
planning and management than we've typically done for Python releases.
A final release in August means that we should plan to release a first
beta in June and a second one in July. That means we have time for
only two more alpha releases (April and May). I'm thinking of 1-2
release candidates 1-2 weeks ahead of the final release. Barry can
make up a more detailed timetable. I'm fine with some slippage
(especially if planned ahead) of individual releases due to
availability of release personnel; but I don't want to be held up by
features or bugs unless they are of absolutely dramatic show-stopping
nature.

In order to make such a tight release schedule we should try to come
up with a list of tasks that need to be done, and prioritize them.
This should include documentation, and supporting tools like 2to3. It
should include features, backports of features, cleanup, bugs, and
whatever else needs to be done (e.g. bugbot maintenance).

In the past we've used shared spreadsheets in Google for this purpose,
but seeing that these haven't been updated in ages, I'm skeptical that
they are a sufficient tool. In my day job at Google we've started to
do all task management for our project in the bug tracker (but that
tracker has some features that make it particularly easy). Does anyone
have a suggestion for an online open shared task management system
that we cold adopt? Or should we bite the bullet and put everything in
the bug tracker? Other suggestions? Anything's better than just
email...

PS. I realize that I've been rather absent from the day to day
activities in the Python 3000 world lately. This is a temporary
condition due to an important impending launch in my day job; I expect
to have much more time for Python again starting in April.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 16 Mar 2008 09:01:27 -0500
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<e04bdf310803160701v2bbce76q7f957b9682c8f1a7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/3/16, Guido van Rossum <guido@python.org>:

>  they are a sufficient tool. In my day job at Google we've started to
>  do all task management for our project in the bug tracker (but that
>  tracker has some features that make it particularly easy). Does anyone

Like which? Something that could be added to our tracker in a short time?

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 09:18:27 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Facundo Batista"" <facundobatista@gmail.com>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID:
	<ca471dc20803160718k4255a73eg68238da2570c056b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 16, 2008 at 9:01 AM, Facundo Batista
<facundobatista@gmail.com> wrote:
> 2008/3/16, Guido van Rossum <guido@python.org>:
>  >  they are a sufficient tool. In my day job at Google we've started to
>  >  do all task management for our project in the bug tracker (but that
>  >  tracker has some features that make it particularly easy). Does anyone
>
>  Like which? Something that could be added to our tracker in a short time?

It has a much more detailed set of categories, organized as a tree.
Our project alone probably has 20-30 different bug categories. New
bugs in those categories are automatically CC'ed to our group's
mailing list (which isn't the same as auto-assignment).

There are also more ""bug states"" you can use to track progress of a
bug through the system: unassigned, assigned, accepted (meaning the
assignee is actually working on it). (There are also a whole bunch
that I don't find so useful, and severam that roundup already
supports.)

But perhaps the best feature is ""hot lists"" -- arbitrary, ordered,
groupings of selected bugs. Each bug can be assigned to as many hot
lists as you want. Seeing the list of all bugs in a particular hot
list is one click away. We use this for overlaying project management
categories and priorities, such as ""code"", ""documentation"",
""configuration"" as well as ""next internal release"", ""must have"", ""post
launch"" etc.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 09:31:25 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-Dev] 2.6 and 3.0 project management
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, PyDev
	<python-dev@python.org>
Message-ID: <18397.12093.765076.737023@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Guido> It has a much more detailed set of categories, organized as a
    Guido> tree.  Our project alone probably has 20-30 different bug
    Guido> categories. New bugs in those categories are automatically CC'ed
    Guido> to our group's mailing list (which isn't the same as
    Guido> auto-assignment).

Adding categories should be easy.  Organized in trees?  Not so sure.

    Guido> There are also more ""bug states"" you can use to track progress of
    Guido> a bug through the system: unassigned, assigned, accepted (meaning
    Guido> the assignee is actually working on it). (There are also a whole
    Guido> bunch that I don't find so useful, and severam that roundup
    Guido> already supports.)

Again, I think this should be easy.

    Guido> But perhaps the best feature is ""hot lists"" -- arbitrary,
    Guido> ordered, groupings of selected bugs. Each bug can be assigned to
    Guido> as many hot lists as you want. Seeing the list of all bugs in a
    Guido> particular hot list is one click away. We use this for overlaying
    Guido> project management categories and priorities, such as ""code"",
    Guido> ""documentation"", ""configuration"" as well as ""next internal
    Guido> release"", ""must have"", ""post launch"" etc.

A hot list sounds like a saved search, which Roundup already supports.  It
also supports making these saved searches public.  I suspect you could
define one or more saved public searches which correspond to desired hot
lists.

Aside: Today's my last day here.  I'd like to say hi sometime today.  Free
for lunch?  Maybe this would be a good lunchtime discussion.

Skip


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 07:32:20 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<9e804ac0803160732i13a47a61q5fe0f93e32796701@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 6:07 PM, Greg Ewing <greg.ewing@canterbury.ac.nz>
wrote:

> Thomas Wouters wrote:
> >  >>> a, b = *c
> >   File ""<stdin>"", line 1
> > SyntaxError: can use starred expression only as assignment target
>
> That error message isn't really accurate, since in
>
> >  >>> a, b = (*c,)


> the *c is not an assignment target.
>

Dear lord, give me a chance to fix up all the details before you trip over
things like that. I wrote the patch for load-context-star in half a day at
pycon, I didn't bother to update the error message yet.


> Also, the message implies that
>
>   *c = a, b
>
> should be valid -- is it?
>

No, but that's not related to this patch (but rather the PEP-3132
implementation.)

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/5ea82fc7/attachment-0001.htm 

------------------------------

Message: 8
Date: Sun, 16 Mar 2008 07:35:51 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803160735x62b5e268gc0c6e03c6f6b0338@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 11:26 PM, Greg Ewing <greg.ewing@canterbury.ac.nz>
wrote:

> Thomas Wouters wrote:
> >
> > On Sat, Mar 15, 2008 at 6:07 PM, Greg Ewing <greg.ewing@canterbury.ac.nz
> > <mailto:greg.ewing@canterbury.ac.nz>> wrote:
> >
> >      >>>>*a, b, c = a, b, *c
> >
> >     +0 on allowing * in other than the last position.
> >
> > The left-hand side of all this is already in. Only the rhs is new.
>
> I'm worried that allowing things like
>
>   x = a, b, *c, d, *e, f
>
> is going to make people want to do this in a function
> call as well. Does your patch permit that, or only
> when constructing a tuple?
>

The patch does not, yet. Guido did ask that it would work. (To be precise,
he asked for 'f(*a, b, c)' to be valid, but it only makes sense to allow,
say, 'f(*a, b, *c)' too, and he hasn't said 'no' to that.) However, the
grammar for functiondefinitions and -calls is entirely separate from the
other unpacking contexts, and modifying the grammer is hard; I'm not done
with it yet.

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/731feb62/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 24
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 23","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Using *a for packing in lists and other places (Greg Ewing)
   2. Re: svnmerge - three broken tests (Mark Dickinson)
   3. Re: Using *a for packing in lists and other places (Neil Toronto)
   4. Re: svnmerge - three broken tests (Mark Dickinson)
   5. Re: Using *a for packing in lists and other places (Greg Ewing)
   6. Optimising nested generators (Greg Ewing)
   7. Re: Using *a for packing in lists and other places (Greg Ewing)
   8. Re: Using *a for packing in lists and other places
      (Arnaud Delobelle)
   9. Re: Using *a for packing in lists and other places (Georg Brandl)


----------------------------------------------------------------------

Message: 1
Date: Sun, 16 Mar 2008 13:07:36 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <47DC72D8.3010909@canterbury.ac.nz>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
>  >>> a, b = *c
>   File ""<stdin>"", line 1
> SyntaxError: can use starred expression only as assignment target

That error message isn't really accurate, since in

>  >>> a, b = (*c,)

the *c is not an assignment target.

Also, the message implies that

   *c = a, b

should be valid -- is it?

-- 
Greg


------------------------------

Message: 2
Date: Sun, 16 Mar 2008 00:45:19 -0400
From: ""Mark Dickinson"" <dickinsm@gmail.com>
Subject: Re: [Python-3000] svnmerge - three broken tests
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<5c6f2a5d0803152145l1bed6601l269cbf5778fd0d2c@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 8:00 PM, Christian Heimes <lists@cheimes.de> wrote:

>
>   test_datetime test_struct test_tokenize
>

I think I've fixed test_datetime and test_struct.  I'm less sure what to do
for test_tokenize;  the main cause of failure seems to be doctests
containing syntax that was valid for 2.x but is invalid for 3.0 (e.g.
integer literals with a leading '0' or trailing 'L', 2.x style unicode
literals, ...).

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/f0938f44/attachment-0001.htm 

------------------------------

Message: 3
Date: Sat, 15 Mar 2008 22:51:34 -0600
From: Neil Toronto <ntoronto@cs.byu.edu>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <47DCA756.2040907@cs.byu.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
> 
> On Sat, Mar 15, 2008 at 2:58 PM, Terry Reedy <tjreedy@udel.edu 
> <mailto:tjreedy@udel.edu>> wrote:
> 
>     | Also, yielding everything from an iterator:
>     |
>     | >>> def flatten(iterables):
>     | ...     for it in iterables:
>     | ...         yield *it
> 
>     Following the general rule above for *exp, that would be the same as
>     yield
>     tuple(it).
> 
> No. *exp by itself is not valid syntax:

Why isn't it? I'd rather have one meaning for the *-prefix operator with 
a single special case for assignment targets, than have a bunch of 
special cases scattered across the grammar.

Besides, as the SmugLispWeenies have noted, Python is becoming more like 
Lisp all the time:

     (setq obj '(an ex-parrot))  ; (AN EX-PARROT)
     `(I have ,obj)              ; (I HAVE (AN EX-PARROT))
     `(I have ,@obj)             ; (I HAVE AN EX-PARROT)

Why not hasten the transformation? :p

(Only kidding!)

Neil



------------------------------

Message: 4
Date: Sun, 16 Mar 2008 01:08:21 -0400
From: ""Mark Dickinson"" <dickinsm@gmail.com>
Subject: Re: [Python-3000] svnmerge - three broken tests
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<5c6f2a5d0803152208m28f5792ckd21914319584336e@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

I think test_tokenize is now fixed, too.
Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080316/150d5594/attachment-0001.htm 

------------------------------

Message: 5
Date: Sun, 16 Mar 2008 17:57:23 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <47DCB6C3.9090105@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Charles Merriam wrote:
> -1.
> 
> While the syntax has a basic beauty, it requires too much odd explanation.

On further reflection, I think I would only be in
favour of 'yield *it' if it permitted an optimisation
allowing it to run more efficently than an explicit
for-loop.

In the absence of any such optimisation, writing the
for-loop out explicitly seems preferable. Not only
does it make it perfectly clear what is being done,
it avoids hiding the cost of the for-loop behind a
deceptively compact piece of syntax.

-- 
Greg


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 18:26:13 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: [Python-3000] Optimising nested generators
To: Python 3000 <python-3000@python.org>
Message-ID: <47DCBD85.6090604@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Talin wrote:
> 
> if a generator is yielding the 
> entire output of another generator, it might be possible to 'cut out the 
> middleman' and have the ultimate consumer of the values read the 
> innermost generator directly.

On the face of things, it certainly seems as though such a thing
*ought* to be possible. It would require keeping a stack of
generators somewhere, although I'm not sure exactly where.

Perhaps each generator frame could have a ""referral"" slot
which can contain a reference to another iterator. When a
generator hits a ""yield *"" statement, it puts the argument
into its referral slot.

Then, the next() method of a generator would first run
down the chain of referral slots until it gets to the
end (either a generator with nothing in its referral slot,
or a non-generator iterator), and resume the iterator found
there. If it's found to be exhausted, you would back up to
the previous one and resume that, etc., until you either
get a value or the outermost generator is exhausted.

Does that sound like it would be workable?

-- 
Greg


------------------------------

Message: 7
Date: Sun, 16 Mar 2008 18:26:20 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Python 3000 <python-3000@python.org>
Message-ID: <47DCBD8C.5000307@canterbury.ac.nz>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
> 
> On Sat, Mar 15, 2008 at 6:07 PM, Greg Ewing <greg.ewing@canterbury.ac.nz 
> <mailto:greg.ewing@canterbury.ac.nz>> wrote:
> 
>      >>>>*a, b, c = a, b, *c
> 
>     +0 on allowing * in other than the last position.
> 
> The left-hand side of all this is already in. Only the rhs is new.

I'm worried that allowing things like

   x = a, b, *c, d, *e, f

is going to make people want to do this in a function
call as well. Does your patch permit that, or only
when constructing a tuple?

-- 
Greg


------------------------------

Message: 8
Date: Sun, 16 Mar 2008 06:58:24 +0000
From: Arnaud Delobelle <arnodel@googlemail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <A580DC8A-1719-494C-A3F1-4BB809122855@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed


On 15 Mar 2008, at 16:15, Guido van Rossum wrote:

> Thomas Wouters suggests some new syntax:
>
> http://bugs.python.org/issue2292
>
>>>> a, b, *c = range(5)
>
>>>> *a, b, c = a, b, *c
>>>> a, b, c
> ([0, 1, 2], 3, 4)
>>>> [ *a, b, c ]
> [0, 1, 2, 3, 4]
>>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>>> [ *item for item in L ]
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
> Also, yielding everything from an iterator:
>
>>>> def flatten(iterables):
> ...     for it in iterables:
> ...         yield *it
> ...
>>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>>> flatten(L)
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
> What do people think?

With this syntax, one will be able to write:

 >>> t = (1, 2, 3)
 >>> [*t]
[1, 2, 3]
 >>> {*t}
{1, 2, 3}

Will these become idioms replacing list(), tuple(), set()?

Moreover the '*' also competes with the '+' operator:

 >>> t = (1, 2)
 >>> l = [1, 3]
 >>> [*t, *l] # replaces list(t) + l
[1, 2, 1, 3]
 >>> {*t, *l} # replaces set(t) + set(l)
{1, 2, 3}
 >>> (*t, *l) # replaces t + tuple(l)
(1, 2, 1, 3)

It is more versatile because, for example, t + l wouldn't work.  I
don't know how desirable it is.

-- 
Arnaud



------------------------------

Message: 9
Date: Sun, 16 Mar 2008 11:20:16 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <fris8i$fv0$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Neil Toronto schrieb:

> Besides, as the SmugLispWeenies have noted, Python is becoming more like 
> Lisp all the time:
> 
>      (setq obj '(an ex-parrot))  ; (AN EX-PARROT)
>      `(I have ,obj)              ; (I HAVE (AN EX-PARROT))
>      `(I have ,@obj)             ; (I HAVE AN EX-PARROT)

Only prettier.

Georg


-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 23
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 22","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Using *a for packing in lists and other places (Michael Urman)
   2. Re: Using *a for packing in lists and other  places
      (Phillip J. Eby)
   3. svnmerge - three broken tests (Christian Heimes)
   4. Re: Using *a for packing in lists and other places
      (Charles Merriam)
   5. Re: Using *a for packing in lists and other places (Greg Ewing)
   6. Re: Using *a for packing in lists and other places (Greg Ewing)
   7. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   8. Re: Using *a for packing in lists and other places (Talin)
   9. Re: svnmerge - three broken tests (skip@pobox.com)


----------------------------------------------------------------------

Message: 1
Date: Sat, 15 Mar 2008 18:33:53 -0500
From: ""Michael Urman"" <murman@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID:
	<dcbbbb410803151633q13a43905kc9487dc97909e3c3@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

> > I'm not sure how to solve this except by adopting a different syntax
> > for the multiple-yield. Perhaps
> >
> > *yield x
>
> If there really were an inconsistency here, I would certainly not suggest
> fixing it that way, yuuueghh.

Agreed about *yield looking yucky. In a previous thread somewhere
around http://mail.python.org/pipermail/python-dev/2006-January/059955.html
a construct like ""yield from x"" was offered. It certainly helps
clarify the difference between iteratively yielding the values from
another iterator and yielding the values of an iterator as a tuple.
While parsing rules do differentiate, I don't find the behavior
obvious, and expect the differences between
    yield *x; yield *x(); yield *x,; yield (*x,); and yield *(x,)
would become one of python's warts in a few years, if adopted. In
short, I don't think * should be the syntax for iterative-yielding.

That said, all these star extensions call to me, especially
arbitrarily positioned *args in function calls and iteratively
yielding items from another iterator. But I can't offer any use new
cases.
-- 
Michael Urman


------------------------------

Message: 2
Date: Sat, 15 Mar 2008 19:55:11 -0400
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Michael Urman"" <murman@gmail.com>, python-3000@python.org
Message-ID: <20080315235627.076D13A40D7@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 06:33 PM 3/15/2008 -0500, Michael Urman wrote:
> > > I'm not sure how to solve this except by adopting a different syntax
> > > for the multiple-yield. Perhaps
> > >
> > > *yield x
> >
> > If there really were an inconsistency here, I would certainly not suggest
> > fixing it that way, yuuueghh.
>
>Agreed about *yield looking yucky. In a previous thread somewhere
>around http://mail.python.org/pipermail/python-dev/2006-January/059955.html
>a construct like ""yield from x"" was offered. It certainly helps
>clarify the difference between iteratively yielding the values from
>another iterator and yielding the values of an iterator as a tuple.
>While parsing rules do differentiate, I don't find the behavior
>obvious, and expect the differences between
>     yield *x; yield *x(); yield *x,; yield (*x,); and yield *(x,)
>would become one of python's warts in a few years, if adopted.

After following this thread for a bit, I think it's a wart 
already.  :)  The potential for confusion with the other *assign 
target idea is too high.

I don't have a problem with ""item for *item,val in blah"", but ""*item 
for item in blah"" makes my head hurt.  Why not just say ""i2 for i1 in 
blah for i2 in i1""?  Yes, it's a bit more verbose, but not frequent 
enough to justify the *, and you can tell what's going on by 
textually transposing to the nested for loops.  Plus, it works for 
any depth.  What are you going to do if it's triple-nested?  Use 
**?  What about ***?  Where does it end?

So I think ""yield *"" and ""*item for item in..."" are broken for the 
same reason.  In the function call use case, and in simple 
assignment, it is treated as a literal quasi-textual 
expansion.  However, such an expansion in the yield case would yield 
a tuple, and the literal expansion in the comprehension case would 
make no sense.  (If done by true textual substitution, it would have 
to be a syntax error.)

And I think that a quasi-textual substitution is the right mental 
model for * expressions, as it's simple to explain and easy to reason 
out what happens.



------------------------------

Message: 3
Date: Sun, 16 Mar 2008 01:00:23 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: [Python-3000] svnmerge - three broken tests
To: python-3000@python.org
Message-ID: <frhnuu$64u$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Hi guys!

I hope you all have fun at PyCon! I hope I'll be able to attend to PyCon
next year.

I've spent the better part of the evening to merge changes from the
trunk into py3k for the sprint. I got all tests except of three to pass:

   test_datetime test_struct test_tokenize

Have fun!

Christian



------------------------------

Message: 4
Date: Sat, 15 Mar 2008 20:06:51 -0500
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40803151806r439e1e56g8099c9f5c091e780@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

-1.

While the syntax has a basic beauty, it requires too much odd explanation.
""*"" and ""**"" are already binary operators.
The '*' unary operator can confuse migrating programmers already.
It makes puzzles too easy, e.g.,  yield **[2**3*i, for i in range(2*3**4)]




On Sat, Mar 15, 2008 at 6:55 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 06:33 PM 3/15/2008 -0500, Michael Urman wrote:
>  > > > I'm not sure how to solve this except by adopting a different syntax
>  > > > for the multiple-yield. Perhaps
>  > > >
>  > > > *yield x
>  > >
>  > > If there really were an inconsistency here, I would certainly not suggest
>  > > fixing it that way, yuuueghh.
>  >
>  >Agreed about *yield looking yucky. In a previous thread somewhere
>  >around http://mail.python.org/pipermail/python-dev/2006-January/059955.html
>  >a construct like ""yield from x"" was offered. It certainly helps
>  >clarify the difference between iteratively yielding the values from
>  >another iterator and yielding the values of an iterator as a tuple.
>  >While parsing rules do differentiate, I don't find the behavior
>  >obvious, and expect the differences between
>  >     yield *x; yield *x(); yield *x,; yield (*x,); and yield *(x,)
>  >would become one of python's warts in a few years, if adopted.
>
>  After following this thread for a bit, I think it's a wart
>  already.  :)  The potential for confusion with the other *assign
>  target idea is too high.
>
>  I don't have a problem with ""item for *item,val in blah"", but ""*item
>  for item in blah"" makes my head hurt.  Why not just say ""i2 for i1 in
>  blah for i2 in i1""?  Yes, it's a bit more verbose, but not frequent
>  enough to justify the *, and you can tell what's going on by
>  textually transposing to the nested for loops.  Plus, it works for
>  any depth.  What are you going to do if it's triple-nested?  Use
>  **?  What about ***?  Where does it end?
>
>  So I think ""yield *"" and ""*item for item in..."" are broken for the
>  same reason.  In the function call use case, and in simple
>  assignment, it is treated as a literal quasi-textual
>  expansion.  However, such an expansion in the yield case would yield
>  a tuple, and the literal expansion in the comprehension case would
>  make no sense.  (If done by true textual substitution, it would have
>  to be a syntax error.)
>
>  And I think that a quasi-textual substitution is the right mental
>  model for * expressions, as it's simple to explain and easy to reason
>  out what happens.
>
>
>
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/charles.merriam%40gmail.com
>


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 13:07:30 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Python 3000 <python-3000@python.org>
Message-ID: <47DC72D2.8060100@canterbury.ac.nz>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
> 
> I do not think 
> collecting a (potentially ever-growing) list of results is really the 
> right thing to do, do you?

For those cases where it is, perhaps one should be
able to write

   [yield *it]

and have it treated as a kind of list comprehension.

-- 
Greg


------------------------------

Message: 6
Date: Sun, 16 Mar 2008 13:07:24 +1200
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Python 3000 <python-3000@python.org>
Message-ID: <47DC72CC.4050603@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> Thomas Wouters suggests some new syntax:

>>>>a, b, *c = range(5)

+1 on this.

>>>>*a, b, c = a, b, *c

+0 on allowing * in other than the last position.

> ...     for it in iterables:
> ...         yield *it

+0.5 (due to consistency problems pointed out in others'
comments).

A thought - part of me wants to rewrite the above as

   yield **it

i.e. each * wraps an implicit for loop around
the yield.

-- 
Greg


------------------------------

Message: 7
Date: Sat, 15 Mar 2008 18:46:58 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803151846k6baec5dch34bf550791dab9b7@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 6:07 PM, Greg Ewing <greg.ewing@canterbury.ac.nz>
wrote:

> Guido van Rossum wrote:
> > Thomas Wouters suggests some new syntax:
>
> >>>>a, b, *c = range(5)
>
> +1 on this.
>
> >>>>*a, b, c = a, b, *c
>
> +0 on allowing * in other than the last position.
>

The left-hand side of all this is already in. Only the rhs is new.

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/e0652e97/attachment-0001.htm 

------------------------------

Message: 8
Date: Sat, 15 Mar 2008 18:51:21 -0700
From: Talin <talin@acm.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DC7D19.6080406@acm.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed



Guido van Rossum wrote:
> Also, yielding everything from an iterator:
> 
>>>> def flatten(iterables):
> ...     for it in iterables:
> ...         yield *it
> ...
>>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>>> flatten(L)
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
> 
> What do people think?

(re-sending to the correct place - thanks Guido)

I've suggested something similar a while back:

http://mail.python.org/pipermail/python-list/2005-October/348485.html

At one point I was working on a algorithmic solver for mathematical 
equations using recursive generators to do backtracking search; being 
able to yield an entire generator's worth of output would have 
simplified it considerably.

Also, there's a potential optimization - if a generator is yielding the 
entire output of another generator, it might be possible to 'cut out the 
middleman' and have the ultimate consumer of the values read the 
innermost generator directly. I don't know how feasible that is, however.

All that being said: Using generators to implement backtracking search 
is much nicer than trying to do it with regular recursion and callbacks; 
But even nicer would be true coroutines.

Take for example the solver I mentioned, which basically is a unifier. 
What it does is take two trees (composed of nested tuples) and 
recursively walks them, matching as it goes. At each level, there may be 
several possible ways of doing a match; The algorithm iterates through 
each of these possibilities, invoking the lower-level matchers once for 
each possibility. The lower-level matcher may in turn find several 
possible matches, or may find none (meaning that the upper-level 
possibility didn't pan out.)

When the algorithm gets to a leaf, it yields a result. The caller of the 
algorithm receives essentially a stream of answers, which it can read as 
many or as few as it wishes.

Since generators can't operate across multiple stack frames, the way to 
construct this algorithm is to have each sub-matcher yield all of its 
answers to its parent. This is where the 'yield *' syntax comes in.

In the case of the equation solver, the 'answers' consist of possible 
variable bindings. So given the inputs 'x? + y?' and '1 + 2 + 3', the 
stream of answers is (applying the associative rule):

     (x = 1, y = 2 + 3)
     (x = 1 + 2, y = 3)
     ...and so on

Now, one final comment: PEP 342 promises that the new yield semantics 
can be used to implement true coroutines. But I don't see how to 
actually make that work. Has anyone actually done this?

-- Talin


------------------------------

Message: 9
Date: Sat, 15 Mar 2008 22:57:27 -0500
From: skip@pobox.com
Subject: Re: [Python-3000] svnmerge - three broken tests
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <18396.39591.925075.453159@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Christian> I've spent the better part of the evening to merge changes
    Christian> from the trunk into py3k for the sprint. I got all tests
    Christian> except of three to pass:

    Christian>    test_datetime test_struct test_tokenize

Christian,

I checked in a change to datetime today.  Might that have caused your
problems with test_datetime?  Is your merge checked in so I can have a look?

Skip



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 22
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 21","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Using *a for packing in lists and other places
      ( BJ?rn Lindqvist )
   2. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   3. Re: Using *a for packing in lists and other places (Terry Reedy)
   4. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   5. Re: Using *a for packing in lists and other places
      (Guido van Rossum)
   6. Re: Using *a for packing in lists and other places
      (Thomas Wouters)


----------------------------------------------------------------------

Message: 1
Date: Sat, 15 Mar 2008 21:05:08 +0000
From: "" BJ?rn Lindqvist "" <bjourne@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<740c3aec0803151405n19323a69sd42ba8effd5d52f5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Mar 15, 2008 at 4:15 PM, Guido van Rossum <guido@python.org> wrote:
>  >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>  >>> [ *item for item in L ]
>  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Can you mix freely?

>>> [*(*item, *item) for item in L]
[0, 1, 2, 0, 1, 2, 3, 4, 3, 4, 5, 5, 6, 6, 7, 8, 9, 7, 8, 9]

-- 
mvh Bj?rn


------------------------------

Message: 2
Date: Sat, 15 Mar 2008 14:18:10 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: "" BJ?rn Lindqvist "" <bjourne@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803151418v1b908a96p3ffc842239b003c7@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 2:05 PM, BJ?rn Lindqvist <bjourne@gmail.com> wrote:

> On Sat, Mar 15, 2008 at 4:15 PM, Guido van Rossum <guido@python.org>
> wrote:
> >  >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
> >  >>> [ *item for item in L ]
> >  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
> Can you mix freely?
>
> >>> [*(*item, *item) for item in L]
> [0, 1, 2, 0, 1, 2, 3, 4, 3, 4, 5, 5, 6, 6, 7, 8, 9, 7, 8, 9]
>

Of course. It's just a generalization of *, it's not a special case.
[*(*item, *item)] is automatically parsed correctly. Of course, since L
contains a generator, the output isn't entirely like you suggested:

 >>> a = [0, 1, 2]
>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>> [*(*item, *item) for item in L]
[0, 1, 2, 0, 1, 2, 3, 4, 3, 4, 5, 5, 6, 6, 7, 8, 9]

The only thing that doesn't work (yet) is:

list(*item for item in L)

because the grammar gets confused about the '*item'. This is caused by the
specialcasing that *args and **kwargs in functioncalls and -definitions
really is. Since Guido wants to be able to do 'f(*a, b, c)' (and presumably
'f(*a, *b, *c)' too) that will all have to change anyway. However, changing
this part of the grammar is, uhm, ""not as easy"", so I need a couple of days.

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/f645792c/attachment-0001.htm 

------------------------------

Message: 3
Date: Sat, 15 Mar 2008 17:58:11 -0400
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <frhgpf$k84$1@ger.gmane.org>


""Guido van Rossum"" <guido@python.org> wrote in message 
news:ca471dc20803150915l27750346g8655f596f5035c69@mail.gmail.com...
| Thomas Wouters suggests some new syntax:

I see this as two suggestions:
1. Complete the extension of the validity of *expression syntax from 
function call/definition to expression/assignment.
2. Give *expression a related meaning in yield statements.

|
| http://bugs.python.org/issue2292
|
| >>> a, b, *c = range(5)
|
| >>> *a, b, c = a, b, *c
| >>> a, b, c
| ([0, 1, 2], 3, 4)
| >>> [ *a, b, c ]
| [0, 1, 2, 3, 4]

I understand 'f(*a)' to mean 'execute the expression as if the items of 
iterable a has been written literally in the code (with 'as if' 
optimizations allowed for special cases).  The above follow the same rule.
+1
A tutorial written for Py3 without regard to history should then introduce 
*expressions in examples like the above first, and only later the usage for 
functions, as if things had been this way all along.

| >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
| >>> [ *item for item in L ]
| [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Since above will become equivalent to list(gen_exp), I see this as being 
tied to yield *exp.

| Also, yielding everything from an iterator:
|
| >>> def flatten(iterables):
| ...     for it in iterables:
| ...         yield *it

Following the general rule above for *exp, that would be the same as yield
tuple(it).  But that is nearly useless, whereas the the implicit inner for 
loop meaning is quite useful, with, perhaps, a speedup over an explicit 
inner loop.  Since yield is already pretty magical,a bit more might not 
hurt.

But, ... what do you do with
    yield *a,b,c # a,b,c as above?
Yield a 5-tuple?  That would clash badly with 'yield *a' not yielding a 
3-tuple.
Raise an exception?  That establishes/requires a new grammatical 
category -- yield_expression.  But I would see this as preferable to the 
clash.

Terry Jan Reedy





------------------------------

Message: 4
Date: Sat, 15 Mar 2008 15:13:54 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Terry Reedy"" <tjreedy@udel.edu>
Cc: python-3000@python.org
Message-ID:
	<9e804ac0803151513j495be5d8h22bba219148cf491@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 2:58 PM, Terry Reedy <tjreedy@udel.edu> wrote:

>
> | Also, yielding everything from an iterator:
> |
> | >>> def flatten(iterables):
> | ...     for it in iterables:
> | ...         yield *it
>
> Following the general rule above for *exp, that would be the same as yield
> tuple(it).


No. *exp by itself is not valid syntax:

>>> a, b = *c
  File ""<stdin>"", line 1
SyntaxError: can use starred expression only as assignment target

It needs something to unpack *into*, in the immediate context. So,

>>> a, b = (*c,)

(or [*c]) works, but is effectively the same thing as

>>> a, b = c


>  But that is nearly useless, whereas the the implicit inner for
> loop meaning is quite useful, with, perhaps, a speedup over an explicit
> inner loop.  Since yield is already pretty magical,a bit more might not
> hurt.
>


> But, ... what do you do with
>    yield *a,b,c # a,b,c as above?
> Yield a 5-tuple?  That would clash badly with 'yield *a' not yielding a
> 3-tuple.


It yields a 5-tuple, yes. Does it help your confusion if you write it as:

 >>> yield (*a, b, c)

? The context of the unpacking operation isn't 'yield', it's the tuple you
create with the commas. If you want it to yield all the elements in a,
followed by b and c, you would need:

>>> yield *(*a, b, c)

It's quite like function arguments (except you can only specify *args after
all positional arguments, right now; Guido wants that to change anyway.)

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/a15d52bc/attachment-0001.htm 

------------------------------

Message: 5
Date: Sat, 15 Mar 2008 17:21:12 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Terry Reedy"" <tjreedy@udel.edu>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803151521k45b3117asc18e9b038605c890@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

This post does point out an inconistency in Thomas's patch:

def f():
  yield 1, 2, 3

Yields a single three-tuple.

But

def f():
  yield *[1, 2], 3

Yields three separate values.  I think this is inconsistent, since

(1, 2, 3)

and

(*[1, 2], 3)

are equivalent, and so are

yield 1, 2, 3

and

yield (1, 2, 3)

I'm not sure how to solve this except by adopting a different syntax
for the multiple-yield. Perhaps

*yield x

instead of

yield *x

???

On Sat, Mar 15, 2008 at 4:58 PM, Terry Reedy <tjreedy@udel.edu> wrote:
>
>  ""Guido van Rossum"" <guido@python.org> wrote in message
>  news:ca471dc20803150915l27750346g8655f596f5035c69@mail.gmail.com...
>
> | Thomas Wouters suggests some new syntax:
>
>  I see this as two suggestions:
>  1. Complete the extension of the validity of *expression syntax from
>  function call/definition to expression/assignment.
>  2. Give *expression a related meaning in yield statements.
>
>
>  |
>  | http://bugs.python.org/issue2292
>  |
>  | >>> a, b, *c = range(5)
>  |
>  | >>> *a, b, c = a, b, *c
>  | >>> a, b, c
>  | ([0, 1, 2], 3, 4)
>  | >>> [ *a, b, c ]
>  | [0, 1, 2, 3, 4]
>
>  I understand 'f(*a)' to mean 'execute the expression as if the items of
>  iterable a has been written literally in the code (with 'as if'
>  optimizations allowed for special cases).  The above follow the same rule.
>  +1
>  A tutorial written for Py3 without regard to history should then introduce
>  *expressions in examples like the above first, and only later the usage for
>  functions, as if things had been this way all along.
>
>
>  | >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>  | >>> [ *item for item in L ]
>  | [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
>  Since above will become equivalent to list(gen_exp), I see this as being
>  tied to yield *exp.
>
>
>  | Also, yielding everything from an iterator:
>  |
>  | >>> def flatten(iterables):
>  | ...     for it in iterables:
>  | ...         yield *it
>
>  Following the general rule above for *exp, that would be the same as yield
>  tuple(it).  But that is nearly useless, whereas the the implicit inner for
>  loop meaning is quite useful, with, perhaps, a speedup over an explicit
>  inner loop.  Since yield is already pretty magical,a bit more might not
>  hurt.
>
>  But, ... what do you do with
>     yield *a,b,c # a,b,c as above?
>  Yield a 5-tuple?  That would clash badly with 'yield *a' not yielding a
>  3-tuple.
>  Raise an exception?  That establishes/requires a new grammatical
>  category -- yield_expression.  But I would see this as preferable to the
>  clash.
>
>  Terry Jan Reedy
>
>
>
>
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sat, 15 Mar 2008 16:01:38 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, Terry Reedy <tjreedy@udel.edu>
Message-ID:
	<9e804ac0803151601k9d6dfd8u973d3dec52d5ef0a@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 3:21 PM, Guido van Rossum <guido@python.org> wrote:

> This post does point out an inconistency in Thomas's patch:
>
> def f():
>  yield 1, 2, 3
>
> Yields a single three-tuple.
>
> But
>
> def f():
>  yield *[1, 2], 3
>
> Yields three separate values.


Uhm, what? It doesn't, and it shouldn't, and I'm not sure what makes you
think it does.

>>> def f():
...     yield *[1, 2], 3
...
>>> list(f())
[(1, 2, 3)]

The comma makes the argument to 'yield' a single item (a tuple) and the '*'
is part of the item in the tuple. In other words, the * binds more tightly
than the comma (which is not something I changed; the parser already worked
this way and it's necessary for '*a, b, c = ..' to even work.  'yield *[1,
2], 3' is parsed as 'yield (*[1, 2], 3)', not 'yield *([1, 2], 3)'. What you
suggest (three separate values) requires 'yield *(*[1, 2], 3)'.

>>> def f1():
...     yield (*[1, 2], 3)
...
>>> list(f1())
[(1, 2, 3)]

>>> def f2():
...     yield *([1, 2], 3)
...
>>> list(f2())
[[1, 2], 3]

>>> def f3():
...     yield *(*[1, 2], 3)
...
>>> list(f3())
[1, 2, 3]

  I think this is inconsistent, since
>
> (1, 2, 3)
>
> and
>
> (*[1, 2], 3)
>
> are equivalent, and so are
>
> yield 1, 2, 3
>
> and
>
> yield (1, 2, 3)


Yes, they are indeed all equivalent :-)


>
>
> I'm not sure how to solve this except by adopting a different syntax
> for the multiple-yield. Perhaps
>
> *yield x
>
> instead of
>
> yield *x
>
> ???


If there really were an inconsistency here, I would certainly not suggest
fixing it that way, yuuueghh.


>
> On Sat, Mar 15, 2008 at 4:58 PM, Terry Reedy <tjreedy@udel.edu> wrote:
> >
> >  ""Guido van Rossum"" <guido@python.org> wrote in message
> >  news:ca471dc20803150915l27750346g8655f596f5035c69@mail.gmail.com...
> >
> > | Thomas Wouters suggests some new syntax:
> >
> >  I see this as two suggestions:
> >  1. Complete the extension of the validity of *expression syntax from
> >  function call/definition to expression/assignment.
> >  2. Give *expression a related meaning in yield statements.
> >
> >
> >  |
> >  | http://bugs.python.org/issue2292
> >  |
> >  | >>> a, b, *c = range(5)
> >  |
> >  | >>> *a, b, c = a, b, *c
> >  | >>> a, b, c
> >  | ([0, 1, 2], 3, 4)
> >  | >>> [ *a, b, c ]
> >  | [0, 1, 2, 3, 4]
> >
> >  I understand 'f(*a)' to mean 'execute the expression as if the items of
> >  iterable a has been written literally in the code (with 'as if'
> >  optimizations allowed for special cases).  The above follow the same
> rule.
> >  +1
> >  A tutorial written for Py3 without regard to history should then
> introduce
> >  *expressions in examples like the above first, and only later the usage
> for
> >  functions, as if things had been this way all along.
> >
> >
> >  | >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
> >  | >>> [ *item for item in L ]
> >  | [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
> >
> >  Since above will become equivalent to list(gen_exp), I see this as
> being
> >  tied to yield *exp.
> >
> >
> >  | Also, yielding everything from an iterator:
> >  |
> >  | >>> def flatten(iterables):
> >  | ...     for it in iterables:
> >  | ...         yield *it
> >
> >  Following the general rule above for *exp, that would be the same as
> yield
> >  tuple(it).  But that is nearly useless, whereas the the implicit inner
> for
> >  loop meaning is quite useful, with, perhaps, a speedup over an explicit
> >  inner loop.  Since yield is already pretty magical,a bit more might not
> >  hurt.
> >
> >  But, ... what do you do with
> >     yield *a,b,c # a,b,c as above?
> >  Yield a 5-tuple?  That would clash badly with 'yield *a' not yielding a
> >  3-tuple.
> >  Raise an exception?  That establishes/requires a new grammatical
> >  category -- yield_expression.  But I would see this as preferable to
> the
> >  clash.
> >
> >  Terry Jan Reedy
> >
> >
> >
> >
> >  _______________________________________________
> >  Python-3000 mailing list
> >  Python-3000@python.org
> >  http://mail.python.org/mailman/listinfo/python-3000
> >  Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/guido%40python.org
> >
>
>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/<http://www.python.org/%7Eguido/>
> )
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/thomas%40python.org
>



-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/7368a957/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 21
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 20","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Using *a for packing in lists and other places (Guido van Rossum)
   2. Re: Using *a for packing in lists and other places
      (Thomas Wouters)
   3. Re: Using *a for packing in lists and other places (Brett Cannon)
   4. Re: Using *a for packing in lists and other places (Paul Moore)
   5. Re: Using *a for packing in lists and other places (Nick Coghlan)
   6. Re: Using *a for packing in lists and other places
      (Neville Grech Neville Grech)
   7. Re: Using *a for packing in lists and other places (Georg Brandl)
   8. Re: Using *a for packing in lists and other places
      (Thomas Wouters)


----------------------------------------------------------------------

Message: 1
Date: Sat, 15 Mar 2008 11:15:02 -0500
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] Using *a for packing in lists and other places
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<ca471dc20803150915l27750346g8655f596f5035c69@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thomas Wouters suggests some new syntax:

http://bugs.python.org/issue2292

>>> a, b, *c = range(5)

>>> *a, b, c = a, b, *c
>>> a, b, c
([0, 1, 2], 3, 4)
>>> [ *a, b, c ]
[0, 1, 2, 3, 4]
>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>> [ *item for item in L ]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Also, yielding everything from an iterator:

>>> def flatten(iterables):
...     for it in iterables:
...         yield *it
...
>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>> flatten(L)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

What do people think?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Sat, 15 Mar 2008 09:51:30 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<9e804ac0803150951o144a32ccx84615991174e654d@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 9:15 AM, Guido van Rossum <guido@python.org> wrote:

> Thomas Wouters suggests some new syntax:
>
> http://bugs.python.org/issue2292
>
> >>> a, b, *c = range(5)
>
> >>> *a, b, c = a, b, *c
> >>> a, b, c
> ([0, 1, 2], 3, 4)
> >>> [ *a, b, c ]
> [0, 1, 2, 3, 4]
> >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
> >>> [ *item for item in L ]
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
> Also, yielding everything from an iterator:
>
> >>> def flatten(iterables):
> ...     for it in iterables:
> ...         yield *it
> ...
> >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
> >>> flatten(L)
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>

As you mentioned in the ticket, that's actually a cut-and-paste error:

>>> flatten(L)
<generator object at 0xb7cc5fb4>
>>> list(flatten(L))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Also, it does sets and setcomps too:

>>> { *a, 0, 4}
{0, 1, 2, 4}
>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>> { *item for item in L }
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/5b65c86b/attachment-0001.htm 

------------------------------

Message: 3
Date: Sat, 15 Mar 2008 12:23:59 -0500
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100803151023p54630dbfoecb4acb708376379@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Sat, Mar 15, 2008 at 11:15 AM, Guido van Rossum <guido@python.org> wrote:
> Thomas Wouters suggests some new syntax:
>
>  http://bugs.python.org/issue2292
>
>  >>> a, b, *c = range(5)
>
>  >>> *a, b, c = a, b, *c
>  >>> a, b, c
>  ([0, 1, 2], 3, 4)
>  >>> [ *a, b, c ]
>  [0, 1, 2, 3, 4]
>  >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>  >>> [ *item for item in L ]
>  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
>  Also, yielding everything from an iterator:
>
>  >>> def flatten(iterables):
>  ...     for it in iterables:
>  ...         yield *it
>  ...
>  >>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>  >>> flatten(L)
>  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>
>  What do people think?

I am +1 since it is a nice generalization, especially the yield usage.

-Brett


------------------------------

Message: 4
Date: Sat, 15 Mar 2008 17:33:33 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<79990c6b0803151033n6a4ed8bfh3556f235ed362847@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 15/03/2008, Guido van Rossum <guido@python.org> wrote:
> Thomas Wouters suggests some new syntax:
>
>  http://bugs.python.org/issue2292
[...]
>  What do people think?

I like it. It's on the border of being too obscure (the examples are
logical, but I need to think to apply the logic - if you see what I
mean), but overall I think it's a reasonable generalisation. As Brett
says, the yield example is compelling. I like ""yield *it"" much better
than the current somewhat clumsy idiom ""for val in it: yield val"".

Paul.


------------------------------

Message: 5
Date: Sun, 16 Mar 2008 04:21:19 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47DC139F.5000800@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> What do people think?

I think this idea (or variants thereof) has been suggested a few times 
over the years, and I don't think the arguments against it have ever 
been particularly compelling. The difference this time is that PEP 3132 
has done the work of thrashing out some of the semantic details, and 
Thomas has provided an actual working patch to make it happen :)

So +1 here, even though I expect style guides will end up discouraging 
some of the more obscure possible uses.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 6
Date: Sat, 15 Mar 2008 20:44:19 +0100
From: ""Neville Grech Neville Grech"" <nevillegrech@gmail.com>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<de9ae4950803151244y751e2c40j7eb09be1c161d8c6@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

What about co-routines?

>>> def coroutine():
...     a, b = (yield *[1,2])
...    print (a)
...    print (b)
...
>>> cr=coroutine()
>>> next(cr)
1
>>> cr.send(3)
2
>>> cr.send(4)
3
4
>>>


On Sat, Mar 15, 2008 at 7:21 PM, Nick Coghlan <ncoghlan@gmail.com> wrote:

> Guido van Rossum wrote:
> > What do people think?
>
> I think this idea (or variants thereof) has been suggested a few times
> over the years, and I don't think the arguments against it have ever
> been particularly compelling. The difference this time is that PEP 3132
> has done the work of thrashing out some of the semantic details, and
> Thomas has provided an actual working patch to make it happen :)
>
> So +1 here, even though I expect style guides will end up discouraging
> some of the more obscure possible uses.
>
> Cheers,
> Nick.
>
> --
> Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
> ---------------------------------------------------------------
>             http://www.boredomandlaziness.org
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/nevillegrech%40gmail.com
>



-- 
Regards,
Neville Grech
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/cae04e58/attachment-0001.htm 

------------------------------

Message: 7
Date: Sat, 15 Mar 2008 20:55:23 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: python-3000@python.org
Message-ID: <frh9iu$nmf$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum schrieb:
> Thomas Wouters suggests some new syntax:
> 
> http://bugs.python.org/issue2292
> 
>>>> a, b, *c = range(5)
> 
>>>> *a, b, c = a, b, *c
>>>> a, b, c
> ([0, 1, 2], 3, 4)
>>>> [ *a, b, c ]
> [0, 1, 2, 3, 4]
>>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>>> [ *item for item in L ]
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
> 
> Also, yielding everything from an iterator:
> 
>>>> def flatten(iterables):
> ....     for it in iterables:
> ....         yield *it
> ....
>>>> L = [ a, (3, 4), {5}, {6: None}, (i for i in range(7, 10)) ]
>>>> flatten(L)
> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
> 
> What do people think?

As Brett says, it's a good generalization. +1 from me.

Georg


-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 8
Date: Sat, 15 Mar 2008 14:03:23 -0700
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Using *a for packing in lists and other
	places
To: ""Neville Grech Neville Grech"" <nevillegrech@gmail.com>
Cc: Python 3000 <python-3000@python.org>, Nick Coghlan
	<ncoghlan@gmail.com>
Message-ID:
	<9e804ac0803151403x4c6342b1n1fa41b1d6b0c2b37@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Sat, Mar 15, 2008 at 12:44 PM, Neville Grech Neville Grech <
nevillegrech@gmail.com> wrote:

> What about co-routines?
>

They're out of luck. Your code below doesn't work (the 'yield *it' syntax
always results in None; any sends are discarded.) I do not think collecting
a (potentially ever-growing) list of results is really the right thing to
do, do you? :-) Something that *might* make sense is to forward any sends on
to the inner iterator, but that means it would always have to be a
generator, and at that point you're really much better off explicitly
defining the behaviour (by looping yourself.)


>
> >>> def coroutine():
> ...     a, b = (yield *[1,2])
> ...    print (a)
> ...    print (b)
> ...
> >>> cr=coroutine()
> >>> next(cr)
> 1
> >>> cr.send(3)
> 2
> >>> cr.send(4)
> 3
> 4
> >>>
>
>
> On Sat, Mar 15, 2008 at 7:21 PM, Nick Coghlan <ncoghlan@gmail.com> wrote:
>
> > Guido van Rossum wrote:
> > > What do people think?
> >
> > I think this idea (or variants thereof) has been suggested a few times
> > over the years, and I don't think the arguments against it have ever
> > been particularly compelling. The difference this time is that PEP 3132
> > has done the work of thrashing out some of the semantic details, and
> > Thomas has provided an actual working patch to make it happen :)
> >
> > So +1 here, even though I expect style guides will end up discouraging
> > some of the more obscure possible uses.
> >
> > Cheers,
> > Nick.
> >
> > --
> > Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
> > ---------------------------------------------------------------
> >             http://www.boredomandlaziness.org
> > _______________________________________________
> > Python-3000 mailing list
> > Python-3000@python.org
> > http://mail.python.org/mailman/listinfo/python-3000
> > Unsubscribe:
> > http://mail.python.org/mailman/options/python-3000/nevillegrech%40gmail.com
> >
>
>
>
> --
> Regards,
> Neville Grech
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/thomas%40python.org
>
>


-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080315/c272f61e/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 20
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 19","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. PyBUF_LOCK fails on bytes objects. they're read-only,	why
      should it fail? (Gregory P. Smith)
   2. Re: PyBUF_LOCK fails on bytes objects. they're read-only, why
      should it fail? (Travis Oliphant)


----------------------------------------------------------------------

Message: 1
Date: Fri, 14 Mar 2008 12:45:11 -0500
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: [Python-3000] PyBUF_LOCK fails on bytes objects. they're
	read-only,	why should it fail?
To: python-3000@python.org
Message-ID:
	<52dc1c820803141045k43636b65w946fa552c03b9dc@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

bytes objects are by their definition immutable and read only.  but when
passing one to a buffer api that tries to use the PyBUF_LOCK flag it raises
BufferError ""Cannot lock this object."" from PyBuffer_FillInfo in
Objects/abstract.c as called by Objects/bytesobject.c's bytes_getbuffer
method.

I think the problem is a >= 0 where a != 0 was intended in
PyBuffer_FillInfo:

--- Objects/abstract.c  (revision 61375)
+++ Objects/abstract.c  (working copy)
@@ -673,7 +673,7 @@
 {
        if (view == NULL) return 0;
        if (((flags & PyBUF_LOCK) == PyBUF_LOCK) &&
-           readonly >= 0) {
+           readonly != 0) {
                PyErr_SetString(PyExc_BufferError,
                                ""Cannot lock this object."");
                return -1;


All tests pass for me with this patch applied.

-gps
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080314/1a8c3be3/attachment-0001.htm 

------------------------------

Message: 2
Date: Sat, 15 Mar 2008 00:46:58 -0500
From: Travis Oliphant <oliphant.travis@ieee.org>
Subject: Re: [Python-3000] PyBUF_LOCK fails on bytes objects. they're
	read-only, why should it fail?
To: python-3000@python.org
Message-ID: <frfnsi$maq$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Gregory P. Smith wrote:
> bytes objects are by their definition immutable and read only.  but when 
> passing one to a buffer api that tries to use the PyBUF_LOCK flag it 
> raises BufferError ""Cannot lock this object."" from PyBuffer_FillInfo in 
> Objects/abstract.c as called by Objects/bytesobject.c's bytes_getbuffer 
> method.
> 
> I think the problem is a >= 0 where a != 0 was intended in 
> PyBuffer_FillInfo:
> 
> --- Objects/abstract.c  (revision 61375)
> +++ Objects/abstract.c  (working copy)
> @@ -673,7 +673,7 @@
>  {
>         if (view == NULL) return 0;
>         if (((flags & PyBUF_LOCK) == PyBUF_LOCK) &&
> -           readonly >= 0) {
> +           readonly != 0) {
>                 PyErr_SetString(PyExc_BufferError,
>                                 ""Cannot lock this object."");
>                 return -1;
> 
>

Good catch.  This looks like a good fix.

-Travis O.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 19
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 18","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Tue, 11 Mar 2008 10:49:14 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D5ACDA.1060402@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Anthony Tolle wrote:
> I'm wrapping an instance of  <type 'staticmethod'>
> I'm wrapping an instance of  <type 'classmethod'>
> I'm wrapping an instance of  <type 'function'>

Hmmm, so what you're really worried about is that
people will be able to create static methods without
using staticmethod().

I think the solution to this has already been
mentioned. If you're wrapping a method in something
that inserts an extra argument at the beginning,
then you write it as

   @somewrapper
   def meth(extra_arg, self, arg1, arg2, ...)
     ...

Simple, explicit, non-magical, no introspection
required.

-- 
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 18
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 17","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Anthony Tolle)
   2. Re: The case for unbound methods? (Anthony Tolle)
   3. Re: The case for unbound methods? (Anthony Tolle)
   4. Re: The case for unbound methods? (Anthony Tolle)


----------------------------------------------------------------------

Message: 1
Date: Sun, 9 Mar 2008 19:53:49 -0400
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<47857e720803091653m4a427818w2227200885340977@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 9, 2008 at 6:31 AM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
>
>  No, a wrapper can't distinguish between a plain function and
>  an unbound method this way, because it gets called before the
>  function is put into a class. So it's always wrapping a plain
>  function, not an unbound method object.
>

Witness:

>>> def wraptest(func):
...     print ""I'm wrapping an instance of "", type(func)
...     return func
...
>>> class C(object):
...     @wraptest
...     @staticmethod
...     def s():
...         pass
...     @wraptest
...     @classmethod
...     def c():
...         pass
...     @wraptest
...     def i():
...         pass
...
I'm wrapping an instance of  <type 'staticmethod'>
I'm wrapping an instance of  <type 'classmethod'>
I'm wrapping an instance of  <type 'function'>
>>>


------------------------------

Message: 2
Date: Sun, 9 Mar 2008 20:07:54 -0400
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<47857e720803091707k69649c67y9ae19ed19e021987@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 9, 2008 at 7:53 PM, Anthony Tolle <artomegus@gmail.com> wrote:
> On Sun, Mar 9, 2008 at 6:31 AM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
>  >
>  >  No, a wrapper can't distinguish between a plain function and
>  >  an unbound method this way, because it gets called before the
>  >  function is put into a class. So it's always wrapping a plain
>  >  function, not an unbound method object.
>  >
>
>  Witness:
>
>  >>> def wraptest(func):
>  ...     print ""I'm wrapping an instance of "", type(func)
>  ...     return func
>  ...
>  >>> class C(object):
>  ...     @wraptest
>  ...     @staticmethod
>  ...     def s():
>  ...         pass
>  ...     @wraptest
>  ...     @classmethod
>  ...     def c():
>  ...         pass
>  ...     @wraptest
>  ...     def i():
>  ...         pass
>  ...
>  I'm wrapping an instance of  <type 'staticmethod'>
>  I'm wrapping an instance of  <type 'classmethod'>
>  I'm wrapping an instance of  <type 'function'>
>  >>>
>

Sorry about replying to myself, but I should clarify:  That particular
point in my post was about checking the type of wrapped object
*before* calling __get__ on it, to see whether or not I'm wrapping a
static method.  The theory is, if I don't see 'staticmethod' or
'classmethod', then simple deduction tells me I'm going to get either
a bound method or an unbound method.  Whether it is bound or unbound
won't be known until I check what is returned by __get__.

Of course, the other point was that this would only work on the first
wrapper around @staticmethod or @classmethod.  I wasn't offering it as
a real solution.


------------------------------

Message: 3
Date: Sun, 9 Mar 2008 22:22:47 -0400
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<47857e720803091922q11cbfb2fna8fbfd7d493c96d3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Mar 9, 2008 at 5:54 AM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Anthony Tolle wrote:
>  > As for a more concrete example, imagine the wrapper using the inspect
>  > module to gather some information about the stack frame and passing it
>  > along to selected methods.
>
>  That's still not very concrete. It doesn't demonstrate
>  why you would want to find out that particular piece of
>  information.
>

Ok, I have something that I hope is concrete enough.  It is (yet
another) version of autosuper that I put together for Python 2.5,
since it doesn't have the magic version of super() from 3.0.  Rather
than write a new super function, I wanted to write something that
would work by inserting the correct value of super into the argument
list.  In fact, this script is why I brought up the whole discussion.

Now, while the point of the script itself is moot in version 3.0, it
is still a concrete example of what I've been discussing.  When I
realized that the check for a static method wouldn't work in 3.0, I
began to wonder if anyone else had run across the same problem, or if
they even cared.

Here's the script, which includes some assertions to test its behavior:

------------------------------------------------------------

class autosuper_method(object):
    def __init__(self, desc, cls=None):
        self.desc = desc
        self.cls = cls

    def __get__(self, obj, type=None):
        return autosuper_callable(self.desc,
                                  self.cls,
                                  self.desc.__get__(obj, type))

class autosuper_callable(autosuper_method):
    def __init__(self, desc, cls, callable):
        self.desc = desc
        self.cls = cls
        self.callable = callable

    def __call__(self, *args, **kwargs):
        if self.cls is None:
            raise TypeError('must inherit from autosuper')
        try:
            obj = self.callable.im_self
        except AttributeError:
            raise TypeError('autosuper used with static method')
        if obj is None:
            obj = args[0]
            return self.callable.__call__(obj,
                                          super(self.cls, obj),
                                          *args[1:],
                                          **kwargs)
        return self.callable.__call__(super(self.cls, obj),
                                      *args,
                                      **kwargs)

class autosuper_meta(type):
    def __init__(cls, name, bases, clsdict):
        # fix up all autosuper_method instances in class
        for attr in clsdict.keys():
            value = clsdict[attr]
            if isinstance(value, autosuper_method):
                type.__setattr__(cls,
                                 attr,
                                 autosuper_method(value.desc, cls))

    def __setattr__(cls, attr, value):
        # catch assignment after class definition
        if isinstance(value, autosuper_method):
            value = autosuper_method(value.desc, cls)
        type.__setattr__(cls, attr, value)

class autosuper(object):
    __metaclass__ = autosuper_meta

if __name__ == '__main__':
    class A(autosuper):
        @classmethod
        def cm(cls):
            return 'A(%s)' % cls.name

        def im(self):
            return 'A(%s)' % self.name

    # Demo - standard use
    class B(A):
        @autosuper_method
        @classmethod
        def cm(cls, super):
            return 'B' + super.cm()

        @autosuper_method
        def im(self, super):
            return 'B' + super.im()

    # Demo - reference super in inner function
    class C(A):
        @autosuper_method
        @classmethod
        def cm(cls, super):
            def inner():
                return 'C' + super.cm()
            return inner()

        @autosuper_method
        def im(self, super):
            def inner():
                return 'C' + super.im()
            return inner()

    # Demo - define function before class definition
    @autosuper_method
    @classmethod
    def D_cm(cls, super):
        return 'D' + super.cm()

    @autosuper_method
    def D_im(self, super):
        return 'D' + super.im()

    class D(B, C):
        name = 'D'
        def __init__(self, name):
            self.name = name
        cm = D_cm
        im = D_im

    # Demo - define functions after class definition
    class E(B, C):
        name = 'E'
        def __init__(self, name):
            self.name = name

    @autosuper_method
    @classmethod
    def E_cm(cls, super):
        return 'E' + super.cm()

    @autosuper_method
    def E_im(self, super):
        return 'E' + super.im()

    E.cm = E_cm
    E.im = E_im

    # Test D
    d = D('d')
    assert d.cm() == 'DBCA(D)'  # class method, instance binding
    assert D.cm() == 'DBCA(D)'  # class method, class binding
    assert d.im() == 'DBCA(d)'  # instance method, instance binding
    assert D.im(d) == 'DBCA(d)' # instance method, class binding

    # Test E
    e = E('e')
    assert e.cm() == 'EBCA(E)'  # class method, instance binding
    assert E.cm() == 'EBCA(E)'  # class method, class binding
    assert e.im() == 'EBCA(e)'  # instance method, instance binding
    assert E.im(e) == 'EBCA(e)' # instance method, class binding

    # Give E cm and im from D
    E.cm = D.cm
    E.im = D.im
    assert e.cm() == 'DBCA(E)'  # class method, instance binding
    assert E.cm() == 'DBCA(E)'  # class method, class binding
    assert e.im() == 'DBCA(e)'  # instance method, instance binding
    assert E.im(e) == 'DBCA(e)' # instance method, class binding

------------------------------------------------------------

I can imagine the next question: If this version of autosuper doesn't
work for static methods (it doesn't make sense that it would, since
super only works when bound), then why would I care if it couldn't
check for static methods?  Why not just assume it will be used for
class methods and instance methods, and adjust the code accordingly?

Well, that was my question from the beginning: When writing a wrapper
like this, would anyone care if it could no longer distinguish between
static methods and unbound methods, in Python 3.0?

So far, it sounds like the answer is 'no', which is fine with me.  I
just thought I'd bring it to everyone's attention.


------------------------------

Message: 4
Date: Sun, 9 Mar 2008 22:28:18 -0400
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<47857e720803091928p2712b5cas6c7aff136539f786@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Mar 8, 2008 at 8:38 PM, Steven Bethard <steven.bethard@gmail.com> wrote:
>
>  I don't see an error thrown with either the bound or unbound methods...
>

Sorry, I should have clarified. The error occurs when wrapping the
function as a descriptor, not when wrapping it with another function.
Here's an example in Python 2.5:

class add_initial_argument(object):
    def __init__(self, descriptor, callable=None):
        self.descriptor = descriptor
        self.callable = callable
    def __get__(self, obj, type=None):
        return add_initial_argument(self.descriptor,
                                    self.descriptor.__get__(obj, type))
    def __call__(self, *args, **kwargs):
        return self.callable.__call__('newarg',
                                      *args,
                                      **kwargs)

class C(object):
    @add_initial_argument
    def foo(newarg, self):
        print 'arg1: ', newarg
        print 'arg2: ', self

>>> C().foo()
arg1:  <__main__.C object at 0x00A900D0>
arg2:  newarg
>>> C.foo(C())
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""<stdin>"", line 11, in __call__
TypeError: unbound method foo() must be called with C instance as first argument
 (got str instance instead)

Also notice that the bound method still got self as the first argument.

See the script example in my recent reply to Greg Ewing for why I'm
using descriptor wrapping:
http://mail.python.org/pipermail/python-3000/2008-March/012428.html


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 17
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 16","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Steven Bethard)
   2. Re: The case for unbound methods? (Anthony Tolle)
   3. Re: The case for unbound methods? (Steven Bethard)
   4. Re: should Python 3's executable install as 'python'?
      (Guido van Rossum)
   5. Re: The case for unbound methods? (Greg Ewing)
   6. Re: The case for unbound methods? (Greg Ewing)
   7. Re: The case for unbound methods? (Greg Ewing)
   8. Re: The case for unbound methods? (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Sat, 8 Mar 2008 13:28:09 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Anthony Tolle"" <artomegus@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0803081228j72eee849xab5cf8a3ae394b69@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Mar 7, 2008 at 8:47 PM, Anthony Tolle <artomegus@gmail.com> wrote:
>  Let me put it this way: if unbound methods are gone for good, then I
>  think it would nice to develop some guidance on checking the signature
>  of callable objects, to enable decorators to play nice with each
>  other--especially if they intend to modify the argument list.
[snip]
>  For a static method:
>    return self.callable(newarg, *args, **kwargs)
>
>  For an instance method with instance binding (i.e. a bound method):
>    return self.callable(newarg, *args, **kwargs)
>
>  For an instance method with class binding (i.e. an unbound method):
>    return self.callable(args[0], newarg, args[1:], **kwargs)

Why is it so crucial that ""self"" is the first argument?  If I use a
decorator that adds a new element to the beginning of the argument
list, I wouldn't be surprised that I now have to write my methods as::

    @add_initial_argument
    def method(new_arg, self, ...):
        ...

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 2
Date: Sat, 8 Mar 2008 18:33:40 -0500
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<47857e720803081533i4129ca52i91843cfde765bdd8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Mar 8, 2008 at 3:28 PM, Steven Bethard <steven.bethard@gmail.com> wrote:
>  Why is it so crucial that ""self"" is the first argument?  If I use a
>  decorator that adds a new element to the beginning of the argument
>  list, I wouldn't be surprised that I now have to write my methods as::
>
>     @add_initial_argument
>     def method(new_arg, self, ...):
>         ...

That would work with class binding in Python 3.0 (i.e. ""unbound""
methods).  In Python 2.5, doing that with an unbound method would
throw an error.

However, bound methods still force the first argument to be self.  If
I want to change this behavior, then I need to grab the __func__
attribute of the method and send the parameters directly.  That means
re-implementing the behavior of bound methods; i.e. inserting __self__
into the argument list.

Unfortunately, that destroys the ""magic"" of the bound method,
bypassing it altogether, and it could only be done once.  Thus, if
another decorator wrapped this one, then the inner one would have to
present itself as a plain function (no __self__ or __func__
attributes) to the outer one.  Any information about the original
method type would be lost; and I'm not sure that is a good thing.

Anyway, this isn't just about inserting arguments.  It is also about
being able to inspect callables to determine their origin (static
method, bound method, unbound method), to facilitate designing
decorators that play well with one another.  In my opinion, the ideal
situation is to allow information about the original method to pass
all the way up the chain of decorators.

Of course, there may be cases one would want to mask the underlying
signature (which is essentially what staticmethod does).  In most
cases, however, preserving the attribute signature would be indicative
of well-behaved decorators.


------------------------------

Message: 3
Date: Sat, 8 Mar 2008 17:38:45 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Anthony Tolle"" <artomegus@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0803081638g7aa7ae32p8006bbee2c3033c4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Sat, Mar 8, 2008 at 4:33 PM, Anthony Tolle <artomegus@gmail.com> wrote:
> On Sat, Mar 8, 2008 at 3:28 PM, Steven Bethard <steven.bethard@gmail.com> wrote:
>  >  Why is it so crucial that ""self"" is the first argument?  If I use a
>  >  decorator that adds a new element to the beginning of the argument
>  >  list, I wouldn't be surprised that I now have to write my methods as::
>  >
>  >     @add_initial_argument
>  >     def method(new_arg, self, ...):
>  >         ...
>
>  That would work with class binding in Python 3.0 (i.e. ""unbound""
>  methods).  In Python 2.5, doing that with an unbound method would
>  throw an error.

>>> def add_initial_argument(func):
...     def f(*args, **kwargs):
...         return func('newarg', *args, **kwargs)
...     return f
...
>>> class C(object):
...     @add_initial_argument
...     def foo(newarg, self):
...         print newarg
...
>>> C().foo()
newarg
>>> C.foo(C())
newarg

I don't see an error thrown with either the bound or unbound methods...

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 4
Date: Sat, 8 Mar 2008 16:47:50 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Mike Meyer"" <mwm@mired.org>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803081647h1f334c4bi9d3a12de7633613a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 5, 2008 at 4:29 PM, Mike Meyer <mwm@mired.org> wrote:
>
> On Thu, 06 Mar 2008 09:33:21 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
>
>  > skip@pobox.com writes:
>  >
>  >  > I still think it worthwhile to have *some* target in the Makefile
>  >  > which depends on altinstall and does the bininstall and maninstall
>  >  > steps.  Something like ""makeprimary""?
>  > How about ""install-as-python"" or ""install-as-default""?
>
>  How about the install target smart? If there's a $PREFIX/bin/python,
>  it doesn't clobber it. If there's not, it does.

That's not enough -- this might hide a ""python"" on the shell's $PATH
in a later spot.

During the next 3 years or so, installing Py3k as the default ""python""
will be a deed of utter irresponsibility and is likely to break your
system in subtle ways (both OSX and Linux these days use Python for
certain system tasks). If you *really* want to shoot yourself in the
foot this way, go ahead and explicitly use ""make altinstall
bininstall"" or link it yourself.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sun, 09 Mar 2008 22:54:23 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D3B3CF.7040204@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Anthony Tolle wrote:
> As for a more concrete example, imagine the wrapper using the inspect
> module to gather some information about the stack frame and passing it
> along to selected methods.

That's still not very concrete. It doesn't demonstrate
why you would want to find out that particular piece of
information.

-- 
Greg


------------------------------

Message: 6
Date: Sun, 09 Mar 2008 23:02:01 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D3B599.4030303@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Phillip J. Eby wrote:
> He's writing a variant of 'partial' that inserts an argument *after* 
> the 'self', if there is one

I'll need convincing that the user of such a function
isn't able to know whether the function he's wrapping
takes a self, and use an appropriate variation of
the partial function.

-- 
Greg


------------------------------

Message: 7
Date: Sun, 09 Mar 2008 23:31:27 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D3BC7F.9090800@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Anthony Tolle wrote:

> So how does wrapper1 know whether it is wrapping a static method, a
> bound method, or an unbound method?  Well, one way it could do this is
> to examine the type of the descriptor it is wrapping.

No, a wrapper can't distinguish between a plain function and
an unbound method this way, because it gets called before the
function is put into a class. So it's always wrapping a plain
function, not an unbound method object.

-- 
Greg


------------------------------

Message: 8
Date: Sun, 09 Mar 2008 23:37:14 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D3BDDA.4060600@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Nick Coghlan wrote:
> functools.partial style functionality doesn't always play well 
> with methods,

I can see it not working well with *unbound* methods. Bound
methods shouldn't be any problem, since from the outside
they're called just like any other function.

But applying partial to an unbound method seems like a
screwy thing to do in the first place. I'm going to need
to see a concrete use case for *that* which can't be
fixed by explicitly using a special version of partial
that inserts after the first argument.

-- 
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 16
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 15","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Nick Coghlan)


----------------------------------------------------------------------

Message: 1
Date: Sat, 08 Mar 2008 18:30:12 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: Anthony Tolle <artomegus@gmail.com>
Cc: python-3000@python.org
Message-ID: <47D24E94.8090006@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Anthony Tolle wrote:
> On Thu, Mar 6, 2008 at 11:59 PM, Guido van Rossum <guido@python.org> wrote:
>> Would you mind giving an ""executive summary"" of your argument that
>>  doesn't require scanning 40 lines of code?
>>
> 
> Let me put it this way: if unbound methods are gone for good, then I
> think it would nice to develop some guidance on checking the signature
> of callable objects, to enable decorators to play nice with each
> other--especially if they intend to modify the argument list.

The short-short version (as PJE already summarised it) of the underlying 
problem: functools.partial style functionality doesn't always play well 
with methods, because the first argument may need special handling once 
__get__ has been invoked, but there's not always any easy way to tell if 
this is the case. With the removal of unbound methods in Py3k, there's 
no longer any reliable way at all to tell the difference between an 
unbound method and a static method.

functools.partial actually ducks the issue entirely by always creating 
an object that behaves like a static method - it has no __get__ method, 
so acts like any other class attribute rather than trying to act as a 
descriptor. The downside of this is that you can't use it to wrap an 
unbound method, since you want to insert the later supplied 'self' 
argument before the positional args rather than after.

Descriptor wrapping is actually quite a complicated topic - I think the 
original poster has a valid complaint, but I'm not sure that restoring 
unbound methods is the right answer (unfortunately, I don't have a 
better answer to offer).

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 15
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 14","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Anthony Tolle)
   2. Re: The case for unbound methods? (Phillip J. Eby)
   3. Potential overflows due to incorrect usage of
      PyUnicode_AsString. (Alexandre Vassalotti)
   4. Re: Potential overflows due to incorrect usage of
      PyUnicode_AsString. (Guido van Rossum)
   5. Re: Potential overflows due to incorrect usage of
      PyUnicode_AsString. (Brett Cannon)
   6. Re: The case for unbound methods? (Anthony Tolle)
   7. 3.0 alpha builds break on FreeBSD. (Mike Meyer)
   8. Re: should Python 3's executable install as 'python'? (Mike Meyer)
   9. Re: 3.0 alpha builds break on FreeBSD. (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Fri, 7 Mar 2008 08:06:44 -0500
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID:
	<47857e720803070506r35b345d7w9748d01a835b3008@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Greg Ewing wrote:

>  Not very well, IMO.
>
>  Without seeing a concrete use case, it's hard to be
>  sure, but my feeling is that there's almost certainly
>  a better way of thinking about the problem you're
>  trying to solve -- one that doesn't require introspecting
>  on a callable object to find out whether its implementation
>  involves a 'self' argument. That's *not* duck typing,
>  it's look-inside-before-you-leap.

>From the Python Tutorial glossary:

----------
duck-typing
    Pythonic programming style that determines an object's type by
inspection of its method or attribute signature rather than by
explicit relationship to some type object (""If it looks like a duck
and quacks like a duck, it must be a duck."") By emphasizing interfaces
rather than specific types, well-designed code improves its
flexibility by allowing polymorphic substitution. Duck-typing avoids
tests using type() or isinstance(). Instead, it typically employs
hasattr() tests or EAFP programming.
----------

That's what the code is doing. By wrapping the attribute access in a
try statement, it is essentially performing a hasattr() test.  That is
all hasattr does anyway; it tries getattr and checks if an exception
occurs.

So the question becomes, what is the 'duck test' for objects returned
by descriptors?  The test used in the example code works with Python
2.5, but fails in only one case in Python 3.0, because unbound methods
were removed.  When writing a wrapper that might wrap static methods
or instance methods (with class binding), the distinction between them
disappears when the attribute signature is the same for the the
respective callable objects.

As for a more concrete example, imagine the wrapper using the inspect
module to gather some information about the stack frame and passing it
along to selected methods.

I just like flexibility, and that's what unbound methods permitted in
2.5.  With them, the attribute signature of callable objects is
distinct for three separate cases: static methods, instance methods
with instance binding, and instance methods with class binding (class
methods are just a subset of instance methods with instance binding).

I'm not saying that unbound methods are 100% essential--I can learn to
live without them--I just think they provided some additional
flexibility, and that's a good thing in my opinion.


------------------------------

Message: 2
Date: Fri, 07 Mar 2008 09:50:38 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Guido van Rossum"" <guido@python.org>,	""Anthony Tolle""
	<artomegus@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080307145103.6403D3A40AC@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 08:59 PM 3/6/2008 -0800, Guido van Rossum wrote:
>Would you mind giving an ""executive summary"" of your argument that
>doesn't require scanning 40 lines of code?

He's writing a variant of 'partial' that inserts an argument *after* 
the 'self', if there is one, but doesn't rely on 'self' being called 
'self'.  The only way to do that is by having unbound methods.

Personally, I think the error message for calling unbound methods was 
a better argument for keeping them.  (That, and the other use cases 
for unbound methods' im_class that I googled up the last time this 
subject came up.)

See also...

Error message use case:
http://mail.python.org/pipermail/python-dev/2007-November/075361.html

py.test breakage (i.e., your original retraction of unbound-method removal):
http://mail.python.org/pipermail/python-dev/2005-January/051236.html

Misc. Use cases found via Googling:
http://mail.python.org/pipermail/python-dev/2007-November/075308.html



------------------------------

Message: 3
Date: Fri, 7 Mar 2008 12:39:35 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: [Python-3000] Potential overflows due to incorrect usage of
	PyUnicode_AsString.
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<acd65fa20803070939t1b9da7d7vd06d39f0176be20@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

Hi,

A while ago, I found some pieces of code which were susceptible to
overflow. I posted a patch, however I haven't heard any comment about
it. Could someone, who has the time, take a look and review the patch
before I commit it?

http://bugs.python.org/issue1950

Thanks,
-- Alexandre


------------------------------

Message: 4
Date: Fri, 7 Mar 2008 09:59:44 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Potential overflows due to incorrect usage
	of	PyUnicode_AsString.
To: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20803070959t433e1b45obc2fe5be8469b1a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I wish I could, I really wish, but I won't have time until April 1st,
unless I can steal some time while at PyCon.

On Fri, Mar 7, 2008 at 9:39 AM, Alexandre Vassalotti
<alexandre@peadrop.com> wrote:
> Hi,
>
>  A while ago, I found some pieces of code which were susceptible to
>  overflow. I posted a patch, however I haven't heard any comment about
>  it. Could someone, who has the time, take a look and review the patch
>  before I commit it?
>
>  http://bugs.python.org/issue1950
>
>  Thanks,
>  -- Alexandre

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Fri, 7 Mar 2008 12:15:36 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Potential overflows due to incorrect usage
	of	PyUnicode_AsString.
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100803071215n10be935bxf4492a6fbab75cd0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Mar 7, 2008 at 9:59 AM, Guido van Rossum <guido@python.org> wrote:
> I wish I could, I really wish, but I won't have time until April 1st,
>  unless I can steal some time while at PyCon.
>

Ditto for me, but make my availability time April 8th.

-Brett


>
>  On Fri, Mar 7, 2008 at 9:39 AM, Alexandre Vassalotti
>  <alexandre@peadrop.com> wrote:
>  > Hi,
>  >
>  >  A while ago, I found some pieces of code which were susceptible to
>  >  overflow. I posted a patch, however I haven't heard any comment about
>  >  it. Could someone, who has the time, take a look and review the patch
>  >  before I commit it?
>  >
>  >  http://bugs.python.org/issue1950
>  >
>  >  Thanks,
>  >  -- Alexandre
>
>  --
>  --Guido van Rossum (home page: http://www.python.org/~guido/)
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/brett%40python.org
>


------------------------------

Message: 6
Date: Fri, 7 Mar 2008 22:47:48 -0500
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<47857e720803071947s3be5fc55r872fd09eadad6db1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Mar 6, 2008 at 11:59 PM, Guido van Rossum <guido@python.org> wrote:
> Would you mind giving an ""executive summary"" of your argument that
>  doesn't require scanning 40 lines of code?
>

Let me put it this way: if unbound methods are gone for good, then I
think it would nice to develop some guidance on checking the signature
of callable objects, to enable decorators to play nice with each
other--especially if they intend to modify the argument list.

For example, let's say there are two wrappers around two different
method types, like so (this is a short pseudo-code example, I
promise):

class A(object):
    @wrapper2
    @wrapper1
    @staticmethod
    def sm(*args):
        ...

    @wrapper2
    @wrapper1
    def im(self, *args):
       ...

Let's say the purpose of both wrapper1 and wrapper2 is to insert a new
argument into the argument list.  How should they do this for each
combination of method and binding type?

It would work as follows (in these examples, self.callable is what was
returned by the __get__ method of the wrapped descriptor):

For a static method:
   return self.callable(newarg, *args, **kwargs)

For an instance method with instance binding (i.e. a bound method):
   return self.callable(newarg, *args, **kwargs)

For an instance method with class binding (i.e. an unbound method):
   return self.callable(args[0], newarg, args[1:], **kwargs)

Notice the change?  This is necessary to maintain consistency for
handling instance binding and class binding.  With instance binding
(i.e. a bound method), the instance argument is passed implicitly--as
the first argument--by the wrapped callable.  Thus, the wrapper must
simulate this for class binding, because the instance argument must be
passed explicitly.

So how does wrapper1 know whether it is wrapping a static method, a
bound method, or an unbound method?  Well, one way it could do this is
to examine the type of the descriptor it is wrapping.  If it sees that
it is an instance of staticmethod, then it can process it as such.

However, wrapper2 doesn't have this luxury, since all it knows is that
it is wrapping an instance of wrapper1.

The other way is to examine the callable returned by the __get__
method of the wrapped descriptor.  This is where things get
interesting.

In Python 2.5, this was extremely easy:  If the callable has no
im_self attribute, then it is a static function.  If the callable has
an im_self attribute, and im_self is None, then it is an unbound
method.  If im_self is not None, then it is a bound method.  Simple.

But there's more: because the attribute signature is so simple, it can
easily be emulated by wrapper1's __get__ function, and thus wrapper2
would be able to make the same determination.  Plus, wrapper1 could
even copy the im_func attribute, so it would be possible to follow the
chain of wrappers all the way back to the original function.

But Python 3.0 breaks the pattern, because unbound methods no longer
exist.  When examining the callable returned by __get__, the signature
for a static method and an ""unbound"" method is the same (both plain
functions).  Now the wrapper will not be able to determine how to
modify the arguments.

How about this as a compromise?

1) In Python 3.0, all functions will have a read-only __self__
attribute that is set to None (so that it looks like an unbound
method, signature wise).

2) Bound methods will continue to behave as before; as a callable
object with a __self__ attribute referencing the instance object, and
a __func__ attribute referencing the original function object.

3) If a function is decorated with @staticmethod, then its __get__
method will return a callable object that wraps the function.  The
callable object will have no __self__ attribute, but it will have a
__func__ attribute referencing the original function.

4) As a convention, a callable that wraps another callable will copy
the __self__ attribute (or lack thereof), and the __func__ attribute.
Thus, the signature will be preserved up the chain.

Thus, the signature for a callable can be tested as follows:

if hasattr(obj, '__self__'):
   if obj.__self__ is None:
       ...""unbound"" method...
   else:
       ....bound method...
else:
   ....static method....

Note that class methods always fall into the category of a bound
method, whether or not instance binding is used.  If there is a need
to differentiate between an instance method and a class method, then
the __self__ object can be examined to see if it a class.


------------------------------

Message: 7
Date: Wed, 5 Mar 2008 16:27:45 -0500
From: Mike Meyer <mwm@mired.org>
Subject: [Python-3000] 3.0 alpha builds break on FreeBSD.
To: python-3000@python.org
Message-ID: <20080305162745.66f98009@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

The 3.0 alphas don't seem to build on FreeBSD. I've tried on both
6.2-stable and 7.0-RELEASE, using both make and gmake on each. They
all start complaining about bad commands in the makeilfe, then seem to
be working fine, then complain about a recursion in the dependency
graph, and stop.

The problem appears to be related to configure not being able to find
a shell it's happy with. I'm not sure what's wrong with /bin/sh, but
configure complains about it not supporting functions. Changing the #!
line to use bash (after installing bash) solved the problem.

I'm sure there's more details those interested in fixing this would
like, I'm just not sure what they are - so please ask.

      Thanks,
      <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 8
Date: Wed, 5 Mar 2008 19:29:00 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <20080305192900.1fc1776b@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Thu, 06 Mar 2008 09:33:21 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:

> skip@pobox.com writes:
> 
>  > I still think it worthwhile to have *some* target in the Makefile
>  > which depends on altinstall and does the bininstall and maninstall
>  > steps.  Something like ""makeprimary""?
> How about ""install-as-python"" or ""install-as-default""?

How about the install target smart? If there's a $PREFIX/bin/python,
it doesn't clobber it. If there's not, it does.

    <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 9
Date: Sat, 08 Mar 2008 09:17:48 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] 3.0 alpha builds break on FreeBSD.
To: Mike Meyer <mwm@mired.org>
Cc: python-3000@python.org
Message-ID: <47D24BAC.5060201@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> The 3.0 alphas don't seem to build on FreeBSD.

That's not what the buildbot says:

http://www.python.org/dev/buildbot/3.0/x86%20FreeBSD%203.0/builds/530/step-configure/0
http://www.python.org/dev/buildbot/3.0/x86%20FreeBSD%203.0/builds/530/step-compile/0

> The problem appears to be related to configure not being able to find
> a shell it's happy with. I'm not sure what's wrong with /bin/sh, but
> configure complains about it not supporting functions. Changing the #!
> line to use bash (after installing bash) solved the problem.
> 
> I'm sure there's more details those interested in fixing this would
> like, I'm just not sure what they are - so please ask.

A specific error message, literally copied from the configure output,
would be helpful (assuming there really is an error message from
configure, rather than configure complaining by some other means
than an error message). Along with that, the snippet from config.log
immediately preceding that error message might also be needed.

Regards,
Martin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 14
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 13","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The case for unbound methods? (Greg Ewing)
   2. Re: RELEASED Python 2.6a1 and 3.0a3 (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Fri, 07 Mar 2008 19:30:21 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID: <47D0E0FD.5080808@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Anthony Tolle wrote:

> Have I made a case for the existence of unbound methods?

Not very well, IMO.

Without seeing a concrete use case, it's hard to be
sure, but my feeling is that there's almost certainly
a better way of thinking about the problem you're
trying to solve -- one that doesn't require introspecting
on a callable object to find out whether its implementation
involves a 'self' argument. That's *not* duck typing,
it's look-inside-before-you-leap.

-- 
Greg


------------------------------

Message: 2
Date: Fri, 07 Mar 2008 07:40:50 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: jek-gmane@kleckner.net
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47D0E372.1080105@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Ok, I have the 3MB log file.  Should I upload it
> somewhere or is there a pattern to find?

Please compress it, and make a bug report on
bugs.python.org.

Regards,
Martin



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 13
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 12","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: RELEASED Python 2.6a1 and 3.0a3 (Jim Kleckner)
   2. Re: RELEASED Python 2.6a1 and 3.0a3 (Martin v. L?wis)
   3. Re: RELEASED Python 2.6a1 and 3.0a3 (Jim Kleckner)
   4. Re: RELEASED Python 2.6a1 and 3.0a3 (Jim Kleckner)
   5. The case for unbound methods? (Anthony Tolle)
   6. Re: The case for unbound methods? (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Thu, 06 Mar 2008 15:41:33 -0800
From: Jim Kleckner <jek-gmane@kleckner.net>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqpvff$lg2$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis wrote:
>> Thanks for fixing these Martin!
> 
> I have now also uploaded signed MSI files for 3.0a3.
> 
> I have not tested them on a machine which doesn't have the
> VS 2008 CRT installed (as all the machines I can access
> right now do have it); please report what works and what
> doesn't.

When I install 2.6a1 onto a Windoze machine without any previous 
install, I get a dialog:
  There is a problem with this Windows Installer package.
  A program run as part of the setup did not finish as expected.
  Contact your support personnel or package vendor.

Note that it didn't have VS2008 or any other new code installed.

When running the Python console, running
  import Tkinter

results in an error saying that _tkinter can't be loaded.
  DLL load failed.  The system can't find _tkinter.pyd

_tkinter.pyd and tcl84.dll and tk84.dll are in DLLs and
appear to have reasonable permissions.

I suspect something in the install failed to set something
in the registry.  Is there any log file of the install
to inspect?



------------------------------

Message: 2
Date: Fri, 07 Mar 2008 01:03:15 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: jek-gmane@kleckner.net
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47D08643.50207@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> I suspect something in the install failed to set something
> in the registry.  Is there any log file of the install
> to inspect?

You need to run

msiexec /i <msifile> /l*v <logfile>

to generate a logfile for the installation.

Regards,
Martin


------------------------------

Message: 3
Date: Thu, 06 Mar 2008 15:56:24 -0800
From: Jim Kleckner <jek-gmane@kleckner.net>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqq0bb$nnp$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Jim Kleckner wrote:
> Martin v. L?wis wrote:
>>> Thanks for fixing these Martin!
>> I have now also uploaded signed MSI files for 3.0a3.
>>
>> I have not tested them on a machine which doesn't have the
>> VS 2008 CRT installed (as all the machines I can access
>> right now do have it); please report what works and what
>> doesn't.
> 
> When I install 2.6a1 onto a Windoze machine without any previous 
> install, I get a dialog:
>   There is a problem with this Windows Installer package.
>   A program run as part of the setup did not finish as expected.
>   Contact your support personnel or package vendor.
> 
> Note that it didn't have VS2008 or any other new code installed.
> 
> When running the Python console, running
>   import Tkinter
> 
> results in an error saying that _tkinter can't be loaded.
>   DLL load failed.  The system can't find _tkinter.pyd
> 
> _tkinter.pyd and tcl84.dll and tk84.dll are in DLLs and
> appear to have reasonable permissions.
> 
> I suspect something in the install failed to set something
> in the registry.  Is there any log file of the install
> to inspect?

I forgot to mention that this is on a current-patch XP
system and that I also tried python-2.6.13944.msi
from the buildbot just in case after uninstalling/reinstalling.




------------------------------

Message: 4
Date: Thu, 06 Mar 2008 16:56:09 -0800
From: Jim Kleckner <jek-gmane@kleckner.net>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqq3ra$202$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis wrote:
>> I suspect something in the install failed to set something
>> in the registry.  Is there any log file of the install
>> to inspect?
> 
> You need to run
> 
> msiexec /i <msifile> /l*v <logfile>
> 
> to generate a logfile for the installation.

Ok, I have the 3MB log file.  Should I upload it
somewhere or is there a pattern to find?

Perhaps this ""PROPERTY CHANGE: Deleting SECONDSEQUENCE"" ?


Property(S): Privileged = 1
Property(S): DATABASE = C:\WINDOWS\Installer\5f5ad0.msi
Property(S): OriginalDatabase = C:\cygwin\tmp\python-2.6a1.msi
Property(S): UILevel = 5
Property(S): Preselected = 1
Property(S): CostingComplete = 1
Property(S): OutOfDiskSpace = 0
Property(S): OutOfNoRbDiskSpace = 0
Property(S): PrimaryVolumeSpaceAvailable = 0
Property(S): PrimaryVolumeSpaceRequired = 0
Property(S): PrimaryVolumeSpaceRemaining = 0
Property(S): SOURCEDIR = C:\cygwin\tmp\
Property(S): SourcedirProduct = {0BA82E1B-52FD-4E03-8610-A6C76238E8A8}
Property(S): ProductToBeRegistered = 1
MSI (s) (FC:D0) [16:38:30:939]: MainEngineThread is returning 1603
MSI (s) (FC:C0) [16:38:30:939]: Destroying RemoteAPI object.
MSI (s) (FC:54) [16:38:30:939]: Custom Action Manager thread ending.
MSI (c) (E0:54) [16:38:30:954]: Back from server. Return value: 1603
MSI (c) (E0:54) [16:38:30:954]: Decrementing counter to disable 
shutdown. If counter >= 0, shutdown will be denied.  Counter after 
decrement: -1
MSI (c) (E0:54) [16:38:30:954]: PROPERTY CHANGE: Deleting SECONDSEQUENCE 
property. Its current value is '1'.
Action ended 16:38:30: ExecuteAction. Return value 3.
MSI (c) (E0:54) [16:38:30:954]: Doing action: FatalError
Action 16:38:30: FatalError.
Action start 16:38:30: FatalError.
Action 16:38:30: FatalError. Dialog created
Action ended 16:38:32: FatalError. Return value 2.
Action ended 16:38:32: INSTALL. Return value 3.
MSI (c) (E0:54) [16:38:32:375]: Destroying RemoteAPI object.
MSI (c) (E0:2C) [16:38:32:375]: Custom Action Manager thread ending.
Property(C): X = C:\Python26\Tools\pynche\X\
Property(C): UpgradeCode = {65E6DE48-A358-434D-AA4F-4AF72DB4718F}
Property(C): ProductName = Python 2.6a1
Property(C): ProductCode = {0BA82E1B-52FD-4E03-8610-A6C76238E8A8}
Property(C): ProductVersion = 2.6.101
Property(C): Manufacturer = Python Software Foundation



------------------------------

Message: 5
Date: Thu, 6 Mar 2008 22:43:53 -0500
From: ""Anthony Tolle"" <artomegus@gmail.com>
Subject: [Python-3000] The case for unbound methods?
To: python-3000@python.org
Message-ID:
	<47857e720803061943j16568798k750d62636fe4a719@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Exhibit A, wraptest.py (demonstrates using a wrapper to insert an
extra argument into method calls):

------------------------------------------------------------

import sys

if sys.version_info[0] < 3:
    _self_attr = 'im_self'
else:
    _self_attr = '__self__'

class methodwrapper(object):
    def __init__(self, descriptor, callable=None):
        self.descriptor = descriptor
        self.callable = callable

    def __get__(self, obj, type=None):
        if self.callable is not None:
            return self
        return methodwrapper(self.descriptor,
                             self.descriptor.__get__(obj, type))

    def __call__(self, *args, **kwargs):
        if self.callable is None:
            raise TypeError('wrapper called before __get__')
        try:
            obj = getattr(self.callable, _self_attr)
        except AttributeError:
            # must be a function
            return self.callable.__call__('inserted',
                                          *args,
                                          **kwargs)
        if obj is None:
            # must be an unbound method
            if not args:
                raise TypeError('instance argument missing')
            return self.callable.__call__(args[0],
                                          'inserted',
                                          *args[1:],
                                          **kwargs)
        # must be a bound method
        return self.callable.__call__('inserted',
                                      *args,
                                      **kwargs)

if __name__ == '__main__':
    class A(object):
        @methodwrapper
        @staticmethod
        def s(inserted):
            return inserted

        @methodwrapper
        @classmethod
        def c(cls, inserted):
            return inserted

        @methodwrapper
        def i(self, inserted):
            return inserted

    a = A()
    assert a.s() == 'inserted'     # instance binding - static method
    assert a.c() == 'inserted'     # instance binding - class method
    assert a.i() == 'inserted'     # instance binding - instance method
    assert A.s() == 'inserted'     # class binding - static method
    assert A.c() == 'inserted'     # class binding - class method
    assert A.i(a) == 'inserted'    # class binding - instance method

------------------------------------------------------------
Exhibit B:

Run wraptest.py in Python 2.5, and all assertions pass.

However, run it in Python 3.0, and witness:

Traceback (most recent call last):
  File ""wraptest.py"", line 64, in <module>
    assert A.i(a) == 'inserted'    # class binding - instance method
AssertionError

------------------------------------------------------------
Summary:

There is a subtle difference between an unbound method and a function.
 Generally, one can assume that the underlying function of an unbound
method will expect an instance as the first argument, but this is not
the case for plain functions.  Here's why:

1) The staticmethod descriptor always returns a function, to which no
arguments are passed implicitly.

2) The classmethod descriptor always returns a bound method, which
implicitly passes an instance (the class) as the first argument to the
underlying function.

3) That leaves regular instance methods.  In version 2.5, the
descriptor will return either a bound method (in which the instance
argument is passed implicitly), or an unbound method (in which an
instance argument must be passed explicitly), depending on the binding
used: instance binding or class binding, respectively.  Either way,
the underlying function will expect an instance as the first argument.

Here is a table of combinations for Python 2.5, using wraptest.py as
the template:

a.s -> staticmethod descriptor -> function (no im_self attribute)
a.c -> classmethod descriptor -> bound method (im_self = A)
a.i -> function descriptor -> bound method (im_self = a)

A.s -> staticmethod descriptor -> function (no im_self attribute)
A.c -> classmethod descriptor -> bound method (im_self = A)
A.i -> function descriptor -> unbound method (im_self = None)

If you are creating a custom descriptor that needs to wrap static
methods, class methods, and instance methods, one can determine the
difference between instance binding and class binding for instance
methods by whether the descriptor returns a bound method or an unbound
method.

However, in 3.0, unbound methods have been done away with, and the
situation is as follows:

a.s -> staticmethod descriptor -> function (no __self__ attribute)
a.c -> classmethod descriptor -> bound method (__self__ = A)
a.i -> function descriptor -> bound method (__self__ = a)

A.s -> staticmethod descriptor -> function (no __self__ attribute)
A.c -> classmethod descriptor -> bound method (__self__ = A)
A.i -> function descriptor -> **function!** (no __self__ attribute)

As such, if the wrapper receives a function from the descriptor, how
does it know if it is a static method, which doesn't need an instance
argument, or an instance method with class binding, which does?

OK, I suppose that that the code *could* check if the descriptor is an
instance of staticmethod or classmethod.  However, this is slower than
the duck typing used in the example code, assuming that a majority of
methods are plain instance methods.  And, by using duck typing, the
class can wrap other descriptors that might mimic classmethod or
staticmethod.  The code above could even be extended to do just that,
by mimicking the behavior of the underlying descriptor (essentially
masking its presence).   That way, several wrappers could be chained
together, without having to check the type of the descriptor.

Another solution would be to create two separate wrappers: one for
static methods, and one for class methods and instance methods.
However, this seems clumsy, since it isn't even necessary in 2.5.

Have I made a case for the existence of unbound methods?  I don't
know.  I'll be the first to admit that I may have missed something
vitally important in my analysis.  Perhaps there is a new way of doing
things in 3.0 to which I should strive.  Or, perhaps I am too hung up
on creating a ""universal"" method wrapper.

Anyway, those are my thoughts on the subject.  Thanks for your time,

Anthony Tolle


------------------------------

Message: 6
Date: Thu, 6 Mar 2008 20:59:54 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] The case for unbound methods?
To: ""Anthony Tolle"" <artomegus@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803062059v2097adoce67dfd15f3b31f8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Would you mind giving an ""executive summary"" of your argument that
doesn't require scanning 40 lines of code?

On Thu, Mar 6, 2008 at 7:43 PM, Anthony Tolle <artomegus@gmail.com> wrote:
> Exhibit A, wraptest.py (demonstrates using a wrapper to insert an
>  extra argument into method calls):
>
>  ------------------------------------------------------------
>
>  import sys
>
>  if sys.version_info[0] < 3:
>     _self_attr = 'im_self'
>  else:
>     _self_attr = '__self__'
>
>  class methodwrapper(object):
>     def __init__(self, descriptor, callable=None):
>         self.descriptor = descriptor
>         self.callable = callable
>
>     def __get__(self, obj, type=None):
>         if self.callable is not None:
>             return self
>         return methodwrapper(self.descriptor,
>                              self.descriptor.__get__(obj, type))
>
>     def __call__(self, *args, **kwargs):
>         if self.callable is None:
>             raise TypeError('wrapper called before __get__')
>         try:
>             obj = getattr(self.callable, _self_attr)
>         except AttributeError:
>             # must be a function
>             return self.callable.__call__('inserted',
>                                           *args,
>                                           **kwargs)
>         if obj is None:
>             # must be an unbound method
>             if not args:
>                 raise TypeError('instance argument missing')
>             return self.callable.__call__(args[0],
>                                           'inserted',
>                                           *args[1:],
>                                           **kwargs)
>         # must be a bound method
>         return self.callable.__call__('inserted',
>                                       *args,
>                                       **kwargs)
>
>  if __name__ == '__main__':
>     class A(object):
>         @methodwrapper
>         @staticmethod
>         def s(inserted):
>             return inserted
>
>         @methodwrapper
>         @classmethod
>         def c(cls, inserted):
>             return inserted
>
>         @methodwrapper
>         def i(self, inserted):
>             return inserted
>
>     a = A()
>     assert a.s() == 'inserted'     # instance binding - static method
>     assert a.c() == 'inserted'     # instance binding - class method
>     assert a.i() == 'inserted'     # instance binding - instance method
>     assert A.s() == 'inserted'     # class binding - static method
>     assert A.c() == 'inserted'     # class binding - class method
>     assert A.i(a) == 'inserted'    # class binding - instance method
>
>  ------------------------------------------------------------
>  Exhibit B:
>
>  Run wraptest.py in Python 2.5, and all assertions pass.
>
>  However, run it in Python 3.0, and witness:
>
>  Traceback (most recent call last):
>   File ""wraptest.py"", line 64, in <module>
>     assert A.i(a) == 'inserted'    # class binding - instance method
>  AssertionError
>
>  ------------------------------------------------------------
>  Summary:
>
>  There is a subtle difference between an unbound method and a function.
>   Generally, one can assume that the underlying function of an unbound
>  method will expect an instance as the first argument, but this is not
>  the case for plain functions.  Here's why:
>
>  1) The staticmethod descriptor always returns a function, to which no
>  arguments are passed implicitly.
>
>  2) The classmethod descriptor always returns a bound method, which
>  implicitly passes an instance (the class) as the first argument to the
>  underlying function.
>
>  3) That leaves regular instance methods.  In version 2.5, the
>  descriptor will return either a bound method (in which the instance
>  argument is passed implicitly), or an unbound method (in which an
>  instance argument must be passed explicitly), depending on the binding
>  used: instance binding or class binding, respectively.  Either way,
>  the underlying function will expect an instance as the first argument.
>
>  Here is a table of combinations for Python 2.5, using wraptest.py as
>  the template:
>
>  a.s -> staticmethod descriptor -> function (no im_self attribute)
>  a.c -> classmethod descriptor -> bound method (im_self = A)
>  a.i -> function descriptor -> bound method (im_self = a)
>
>  A.s -> staticmethod descriptor -> function (no im_self attribute)
>  A.c -> classmethod descriptor -> bound method (im_self = A)
>  A.i -> function descriptor -> unbound method (im_self = None)
>
>  If you are creating a custom descriptor that needs to wrap static
>  methods, class methods, and instance methods, one can determine the
>  difference between instance binding and class binding for instance
>  methods by whether the descriptor returns a bound method or an unbound
>  method.
>
>  However, in 3.0, unbound methods have been done away with, and the
>  situation is as follows:
>
>  a.s -> staticmethod descriptor -> function (no __self__ attribute)
>  a.c -> classmethod descriptor -> bound method (__self__ = A)
>  a.i -> function descriptor -> bound method (__self__ = a)
>
>  A.s -> staticmethod descriptor -> function (no __self__ attribute)
>  A.c -> classmethod descriptor -> bound method (__self__ = A)
>  A.i -> function descriptor -> **function!** (no __self__ attribute)
>
>  As such, if the wrapper receives a function from the descriptor, how
>  does it know if it is a static method, which doesn't need an instance
>  argument, or an instance method with class binding, which does?
>
>  OK, I suppose that that the code *could* check if the descriptor is an
>  instance of staticmethod or classmethod.  However, this is slower than
>  the duck typing used in the example code, assuming that a majority of
>  methods are plain instance methods.  And, by using duck typing, the
>  class can wrap other descriptors that might mimic classmethod or
>  staticmethod.  The code above could even be extended to do just that,
>  by mimicking the behavior of the underlying descriptor (essentially
>  masking its presence).   That way, several wrappers could be chained
>  together, without having to check the type of the descriptor.
>
>  Another solution would be to create two separate wrappers: one for
>  static methods, and one for class methods and instance methods.
>  However, this seems clumsy, since it isn't even necessary in 2.5.
>
>  Have I made a case for the existence of unbound methods?  I don't
>  know.  I'll be the first to admit that I may have missed something
>  vitally important in my analysis.  Perhaps there is a new way of doing
>  things in 3.0 to which I should strive.  Or, perhaps I am too hung up
>  on creating a ""universal"" method wrapper.
>
>  Anyway, those are my thoughts on the subject.  Thanks for your time,
>
>  Anthony Tolle
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 12
*******************************************
??????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 11","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: should Python 3's executable install as 'python'?
      (Guido van Rossum)
   2. Re: should Python 3's executable install as 'python'?
      (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Wed, 5 Mar 2008 15:23:13 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803051523w172500cdn4865a2d70479422f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 5, 2008 at 2:31 PM,  <skip@pobox.com> wrote:
>
>     Guido> I guess I wasn't clear -- I don't want there to be a target that
>     Guido> does what install does today. It would be a mistake to use it in
>     Guido> 99.99% of cases. IOW
>
>     Guido>   install = altinstall
>
>  The install target does three things (ignoring Mac framework installs):
>
>     altinstall
>     bininstall
>     maninstall
>
>  The altinstall target is version-specific, so it's fine.  The bininstall and
>  maninstall targets create files which are not obviously tied to a specific
>  version though.  Their actions are complex enough that most people are not
>  going to want to do them manually though.  I still think it worthwhile to
>  have *some* target in the Makefile which depends on altinstall and does the
>  bininstall and maninstall steps.  Something like ""makeprimary""?  I don't
>  know.  You still need some way to record all the steps necessary to make
>  what you're installing ""right now"" be considered ""python"".

Let them type ""make altinstall bininstall maninstall"".

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Thu, 06 Mar 2008 09:33:21 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <87k5kgvgha.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

skip@pobox.com writes:

 > I still think it worthwhile to have *some* target in the Makefile
 > which depends on altinstall and does the bininstall and maninstall
 > steps.  Something like ""makeprimary""?

How about ""install-as-python"" or ""install-as-default""?



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 11
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 10","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: should Python 3's executable install as 'python'?
      (Guido van Rossum)
   2. Re: should Python 3's executable install as 'python'?
      (skip@pobox.com)
   3. Re: should Python 3's executable install as 'python'?
      (Guido van Rossum)
   4. Re: should Python 3's executable install as 'python'?
      (skip@pobox.com)
   5. Re: should Python 3's executable install as 'python'?
      (Oleg Broytmann)
   6. Re: should Python 3's executable install as 'python'?
      (Oleg Broytmann)
   7. Re: should Python 3's executable install as 'python'?
      (Nick Coghlan)
   8. Re: should Python 3's executable install as 'python'?
      (Guido van Rossum)
   9. Re: should Python 3's executable install as 'python'? (Greg Ewing)
  10. Re: should Python 3's executable install as 'python'?
      (skip@pobox.com)


----------------------------------------------------------------------

Message: 1
Date: Wed, 5 Mar 2008 09:39:16 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Oleg Broytmann"" <phd@phd.pp.ru>, python-3000@python.org
Message-ID:
	<ca471dc20803050939w7f66263fo4a3e28e95b1bbeff@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 5, 2008 at 3:31 AM, Oleg Broytmann <phd@phd.pp.ru> wrote:
> On Wed, Mar 05, 2008 at 11:28:22AM +0000, Paul Moore wrote:
>  > There was a discussion on this list not long ago, under the title
>  > ""Namespaces are one honking great idea"". You might want to look at
>  > that. I don't recall any conclusion being reached, though.
>
>    AFAIR the conclusion was: use ""make altinstall"" instead of ""make install"".

Actually I believe the conclusion was that ""make install"" should be
have like ""make altinstall"". Now that I think about it I believe there
should be *no* way to install it as just ""python"" -- that's just
encouraging people to do something dumb.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Wed, 5 Mar 2008 12:11:50 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <18382.57958.331087.10882@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Guido> Actually I believe the conclusion was that ""make install"" should
    Guido> be have like ""make altinstall"". Now that I think about it I
    Guido> believe there should be *no* way to install it as just ""python""
    Guido> -- that's just encouraging people to do something dumb.

Well, whoever updates the Makefile will need to update the README file as
well.  I checked in a change earlier describing how to properly install
multiple versions using the altinstall target.

If, in the future, the install target does what the altinstall target does
today, what should the target that does what the install target does today?

    (???, install) = (install, altinstall)

Skip



------------------------------

Message: 3
Date: Wed, 5 Mar 2008 10:19:16 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803051019i6591a254r79f3441140b757d5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 5, 2008 at 10:11 AM,  <skip@pobox.com> wrote:
>
>     Guido> Actually I believe the conclusion was that ""make install"" should
>     Guido> be have like ""make altinstall"". Now that I think about it I
>     Guido> believe there should be *no* way to install it as just ""python""
>     Guido> -- that's just encouraging people to do something dumb.
>
>  Well, whoever updates the Makefile will need to update the README file as
>  well.  I checked in a change earlier describing how to properly install
>  multiple versions using the altinstall target.
>
>  If, in the future, the install target does what the altinstall target does
>  today, what should the target that does what the install target does today?
>
>     (???, install) = (install, altinstall)

I guess I wasn't clear -- I don't want there to be a target that does
what install does today. It would be a mistake to use it in 99.99% of
cases. IOW

  install = altinstall

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Wed, 5 Mar 2008 12:30:23 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Guido van Rossum"" <guido@python.org>, python-3000@python.org
Message-ID: <18382.59071.112078.109268@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


yikes!

    skip> If, in the future, the install target does what the altinstall target does
    skip> today, what should the target that does what the install target does today?

    skip>     (???, install) = (install, altinstall)

Let me try this again.  If, in the future, the install target does what the
altinstall target does today, what should we call the target that does what
the install target does today?

Skip


------------------------------

Message: 5
Date: Wed, 5 Mar 2008 22:13:46 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080305191346.GA23170@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Mar 05, 2008 at 09:39:16AM -0800, Guido van Rossum wrote:
> Actually I believe the conclusion was that ""make install"" should be
> have like ""make altinstall"". Now that I think about it I believe there
> should be *no* way to install it as just ""python"" -- that's just
> encouraging people to do something dumb.

install: altinstall
   echo ""Your python is now $(INSTALLPATH)/python$(MAJOR).$(MINOR)""

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 6
Date: Wed, 5 Mar 2008 22:18:43 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <20080305191843.GB23170@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Mar 05, 2008 at 12:11:50PM -0600, skip@pobox.com wrote:
>     Guido> Actually I believe the conclusion was that ""make install"" should
>     Guido> be have like ""make altinstall"". Now that I think about it I
>     Guido> believe there should be *no* way to install it as just ""python""
>     Guido> -- that's just encouraging people to do something dumb.
> 
> Well, whoever updates the Makefile will need to update the README file as
> well.  I checked in a change earlier describing how to properly install
> multiple versions using the altinstall target.
> 
> If, in the future, the install target does what the altinstall target does
> today, what should the target that does what the install target does today?
> 
>     (???, install) = (install, altinstall)

   forceinstall? dangerous-install? damaging-install? (half-wink ;)

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 7
Date: Thu, 06 Mar 2008 07:40:39 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <47CF1357.5040808@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> I guess I wasn't clear -- I don't want there to be a target that does
> what install does today. It would be a mistake to use it in 99.99% of
> cases. IOW
> 
>   install = altinstall

Leaving it up to packagers for the different distributions to decide if 
they want to add the 'python' symlink? That sounds reasonable to me.

Does this apply to 2.6 as well, or just 3.0?

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 8
Date: Wed, 5 Mar 2008 14:12:45 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20803051412j58144e2fi6f9ec3b00a90feab@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Mar 5, 2008 at 1:40 PM, Nick Coghlan <ncoghlan@gmail.com> wrote:
> Guido van Rossum wrote:
>  > I guess I wasn't clear -- I don't want there to be a target that does
>  > what install does today. It would be a mistake to use it in 99.99% of
>  > cases. IOW
>  >
>  >   install = altinstall
>
>  Leaving it up to packagers for the different distributions to decide if
>  they want to add the 'python' symlink? That sounds reasonable to me.
>
>  Does this apply to 2.6 as well, or just 3.0?

Only 3.0.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Thu, 06 Mar 2008 11:30:49 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <47CF1F19.4030204@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Oleg Broytmann wrote:
>    forceinstall? dangerous-install? damaging-install? (half-wink ;)

burnmybridgesinstall

-- 
Greg


------------------------------

Message: 10
Date: Wed, 5 Mar 2008 16:31:48 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <18383.8020.234900.192145@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Guido> I guess I wasn't clear -- I don't want there to be a target that
    Guido> does what install does today. It would be a mistake to use it in
    Guido> 99.99% of cases. IOW

    Guido>   install = altinstall

The install target does three things (ignoring Mac framework installs):

    altinstall
    bininstall
    maninstall

The altinstall target is version-specific, so it's fine.  The bininstall and
maninstall targets create files which are not obviously tied to a specific
version though.  Their actions are complex enough that most people are not
going to want to do them manually though.  I still think it worthwhile to
have *some* target in the Makefile which depends on altinstall and does the
bininstall and maninstall steps.  Something like ""makeprimary""?  I don't
know.  You still need some way to record all the steps necessary to make
what you're installing ""right now"" be considered ""python"".

Skip
 


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 10
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 9","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: should Python 3's executable install as 'python'? (Paul Moore)
   2. Re: should Python 3's executable install as 'python'?
      (Oleg Broytmann)
   3. indexing wart (Neal Becker)
   4. Re: should Python 3's executable install as 'python'?
      (Martijn Faassen)
   5. Re: should Python 3's executable install as 'python'?
      (Martijn Faassen)
   6. Re: should Python 3's executable install as 'python'?
      (Oleg Broytmann)
   7. Re: should Python 3's executable install as 'python'?
      (Martijn Faassen)
   8. Re: PEP 3102 (Gustavo Niemeyer)
   9. Re: PEP 3102 (Gustavo Niemeyer)
  10. Re: should Python 3's executable install as 'python'?
      (skip@pobox.com)
  11. Re: indexing wart (Michael Urman)


----------------------------------------------------------------------

Message: 1
Date: Wed, 5 Mar 2008 11:28:22 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Martijn Faassen"" <faassen@startifact.com>
Cc: python-3000@python.org
Message-ID:
	<79990c6b0803050328m536e0ecsddbc9960f1b6c84e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 05/03/2008, Martijn Faassen <faassen@startifact.com> wrote:
> This is quick feedback given my experiences installing Python 3 for the
> first time. Take it as that, please.
[...]
> A quick search on the topic found a  discussion about this in '05
> without a conclusion, and the following text in PEP 3000:

There was a discussion on this list not long ago, under the title
""Namespaces are one honking great idea"". You might want to look at
that. I don't recall any conclusion being reached, though.

As far as Unix is concerned, I have no direct interest, and so won't
comment. All I will say is that I expect Python 3 to install a
python.exe executable on Windows. I have no reason to believe that
this won't happen, and it's the current default. All I'm saying is
that whatever is decided to be appropriate on Unix shouldn't affect
Windows behaviour.

Paul.


------------------------------

Message: 2
Date: Wed, 5 Mar 2008 14:31:02 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <20080305113102.GA10232@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Mar 05, 2008 at 11:28:22AM +0000, Paul Moore wrote:
> There was a discussion on this list not long ago, under the title
> ""Namespaces are one honking great idea"". You might want to look at
> that. I don't recall any conclusion being reached, though.

   AFAIR the conclusion was: use ""make altinstall"" instead of ""make install"".

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 3
Date: Wed, 05 Mar 2008 06:33:07 -0500
From: Neal Becker <ndbecker2@gmail.com>
Subject: [Python-3000] indexing wart
To: python-3000@python.org
Message-ID: <fqm0dj$ssn$1@ger.gmane.org>
Content-Type: text/plain; charset=us-ascii

It is a bit unfortunate that slicing has a singularity.

samples_to_trim = (some calculation yielding an integer >= 0)


trimmed_vector = vector[:-samples_to_trim] if samples_to_trim != 0 else
vector[:]

A bit unfortunate that the case of samples_to_trim == 0 has to be handled
differently.

I don't really see any solution to this.





------------------------------

Message: 4
Date: Wed, 5 Mar 2008 12:37:04 +0100
From: ""Martijn Faassen"" <faassen@startifact.com>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: ""Paul Moore"" <p.f.moore@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<8928d4e90803050337u5ff861f0i430a5585fce1ccbb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hey,

On Wed, Mar 5, 2008 at 12:28 PM, Paul Moore <p.f.moore@gmail.com> wrote:
> On 05/03/2008, Martijn Faassen <faassen@startifact.com> wrote:
>  > This is quick feedback given my experiences installing Python 3 for the
>  > first time. Take it as that, please.
>  [...]
>  > A quick search on the topic found a  discussion about this in '05
>  > without a conclusion, and the following text in PEP 3000:
>
>  There was a discussion on this list not long ago, under the title
>  ""Namespaces are one honking great idea"". You might want to look at
>  that. I don't recall any conclusion being reached, though.

Ah, I missed that entirely! My apologies for bringing up a previous discussion.

Regards,

Martijn


------------------------------

Message: 5
Date: Wed, 05 Mar 2008 12:42:39 +0100
From: Martijn Faassen <faassen@startifact.com>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <fqm0vf$u4v$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Oleg Broytmann wrote:
> On Wed, Mar 05, 2008 at 11:28:22AM +0000, Paul Moore wrote:
>> There was a discussion on this list not long ago, under the title
>> ""Namespaces are one honking great idea"". You might want to look at
>> that. I don't recall any conclusion being reached, though.
> 
>    AFAIR the conclusion was: use ""make altinstall"" instead of ""make install"".

Not that I actually *READ* the README file before installing, but there 
is only a single rather hint in the build instructions in README that 
altinstall exists, and it doesn't say what it does.

Regards,

Martijn





------------------------------

Message: 6
Date: Wed, 5 Mar 2008 14:47:18 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <20080305114718.GB10232@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Mar 05, 2008 at 12:42:39PM +0100, Martijn Faassen wrote:
> altinstall exists, and it doesn't say what it does.

   ""make altinstall"" installs everything including pythonX.Y binary. ""make
install"" does ""make altinstall"" and then hardlinks pythonX.Y to just
python. Running ""make altinstall"" without ""make install"" installs python
without the last step, so your previous python binary left intact, and you
new python binary is pythonX.Y.

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 7
Date: Wed, 05 Mar 2008 12:54:12 +0100
From: Martijn Faassen <faassen@startifact.com>
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <fqm1l4$11d$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Oleg Broytmann wrote:
> On Wed, Mar 05, 2008 at 12:42:39PM +0100, Martijn Faassen wrote:
>> altinstall exists, and it doesn't say what it does.
> 
>    ""make altinstall"" installs everything including pythonX.Y binary. ""make
> install"" does ""make altinstall"" and then hardlinks pythonX.Y to just
> python. Running ""make altinstall"" without ""make install"" installs python
> without the last step, so your previous python binary left intact, and you
> new python binary is pythonX.Y.

Yes, I understood when you pointed it out the first time, given the 
context. I was suggesting you need text like that in README. You might 
want to add something like this:

""If you install Python 3.x on a system that already uses Python 2.x, we 
encourage you to use 'make altinstall'. Doing ""make install"" risks 
breaking existing scripts until they have been updated to work with 
Python 3.0.""

Regards,

Martijn



------------------------------

Message: 8
Date: Wed, 05 Mar 2008 10:00:56 -0300
From: Gustavo Niemeyer <gustavo@niemeyer.net>
Subject: Re: [Python-3000] PEP 3102
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <47CE9988.20605@niemeyer.net>
Content-Type: text/plain; charset=ISO-8859-1


> Agreed. Now can you come up with a syntax for positional-only
> arguments? So far everybody has failed at that, and there are some use
> cases where it's useful too.

I guess it might be too late, but has anyone considered:

def func(normal_arg, *, positional_arg, **, keyword_arg):
    pass

-- 
Gustavo Niemeyer
http://niemeyer.net


------------------------------

Message: 9
Date: Wed, 05 Mar 2008 10:06:22 -0300
From: Gustavo Niemeyer <gustavo@niemeyer.net>
Subject: Re: [Python-3000] PEP 3102
To: Gustavo Niemeyer <gustavo@niemeyer.net>
Cc: python@rcn.com, python-3000@python.org
Message-ID: <47CE9ACE.1050100@niemeyer.net>
Content-Type: text/plain; charset=ISO-8859-1


> I guess it might be too late, but has anyone considered:
> 
> def func(normal_arg, *, positional_arg, **, keyword_arg):
>     pass

Or even that, since it's meaningless to have a positional argument in the
middle:

def func(positional_arg, *, normal_arg, **, keyword_arg):
    pass

-- 
Gustavo Niemeyer
http://niemeyer.net


------------------------------

Message: 10
Date: Wed, 5 Mar 2008 07:30:41 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] should Python 3's executable install as
	'python'?
To: Martijn Faassen <faassen@startifact.com>
Cc: python-3000@python.org
Message-ID: <18382.41089.546853.464296@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Martijn> ""If you install Python 3.x on a system that already uses Python
    Martijn> 2.x, we encourage you to use 'make altinstall'. Doing ""make
    Martijn> install"" risks breaking existing scripts until they have been
    Martijn> updated to work with Python 3.0.""

Of course the same holds true for people who install multiple minor
revisions of Python 2.x.  The README files on both trunk and the py3k branch
need updating.  If I get a chance today and nobody beats me to it I will
modify it with something like Oleg's wording.

Skip


------------------------------

Message: 11
Date: Wed, 5 Mar 2008 08:16:11 -0600
From: ""Michael Urman"" <murman@gmail.com>
Subject: Re: [Python-3000] indexing wart
To: ""Neal Becker"" <ndbecker2@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<dcbbbb410803050616t2a1522b7sf3dff51c8449b9c0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Wed, Mar 5, 2008 at 5:33 AM, Neal Becker <ndbecker2@gmail.com> wrote:
> It is a bit unfortunate that slicing has a singularity.
>
> samples_to_trim = (some calculation yielding an integer >= 0)
>
>
> trimmed_vector = vector[:-samples_to_trim] if samples_to_trim != 0 else
> vector[:]
>
> A bit unfortunate that the case of samples_to_trim == 0 has to be handled
> differently.
>
> I don't really see any solution to this.

Just transform the problem away. If you can guarantee that
samples_to_trim is <= len(vector), then it's trivial:
trimmed_vector = vector[:len(vector) - samples_to_trim]

If not, it gets more complicated, but you can wrap the upper bound in
a max(0, ...).

-- 
Michael Urman


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 9
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 8","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] No releases tonight (Rodrigo Bernardo Pimentel)
   2. should Python 3's executable install as 'python'?
      (Martijn Faassen)


----------------------------------------------------------------------

Message: 1
Date: Tue, 4 Mar 2008 21:01:04 -0300
From: Rodrigo Bernardo Pimentel <rbp@isnomore.net>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: python-3000@python.org, python-dev@python.org
Message-ID: <20080305000103.GA17165@isnomore.net>
Content-Type: text/plain; charset=utf-8

On Sun, Mar 02 2008 at 05:49:35AM BRT, Jeroen Ruigrok van der Werven <asmodai@in-nomine.org> wrote:
> -On [20080301 19:57], Christian Heimes (lists@cheimes.de) wrote:
> >I also propose translations of the shorter text to important languages
> >like French, German, Japanese, Portuguese and Spanish. I'm willing to
> >help with the German translation.
> 
> I can probably get a translation done in Japanese, Chinese and Korean.
> 
> For Portuguese I guess we could ask the ASync guys in Brazil, they're huge
> Python users with their work for Canonical/Ubuntu.

I could write the Portuguese translation.



        rbp


------------------------------

Message: 2
Date: Wed, 05 Mar 2008 11:41:43 +0100
From: Martijn Faassen <faassen@startifact.com>
Subject: [Python-3000] should Python 3's executable install as
	'python'?
To: python-3000@python.org
Message-ID: <fqltd8$ih0$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi there,

This is quick feedback given my experiences installing Python 3 for the 
first time. Take it as that, please.

I just installed Python 3 into my local installation directory, and 
noticed it installs as 'python'. I already had a local Python 2.4 
installed which I am actively using, and its 'python' was overwritten. 
This is normal behavior for the installation process, but Python 3 not a 
usual release.

Since Python 3 is not directly compatible with Python 2, overwriting 
'python' might lead to some confusion: people may have legitimate 
expectations that their python code remains working when they use 
'python', and scripts may be referring to it using #!. I started with 
the expectation that it wouldn't change the behavior of 'python' in my 
sandbox, but that expectation was wrong. :)

So the question is whether Python 3 should install itself as 'python' as 
well as 'python3.0'. It may be that this question should be answered 
differently now than it will be in a few years, depending on the rate of 
Python 3's adoption. A Python 3.1 or 3.2 might then be installed as 
""python"" straight away.

A quick search on the topic found a  discussion about this in '05 
without a conclusion, and the following text in PEP 3000:

""Naming

Python 3000, Python 3.0 and Py3K are all names for the same thing. The 
project is called Python 3000, or abbreviated to Py3k. The actual Python 
release will be referred to as Python 3.0, and that's what ""python3.0 
-V"" will print; the actual file names will use the same naming 
convention we use for Python 2.x. I don't want to pick a new name for 
the executable or change the suffix for Python source files.""

I suspect that the PEP section I quoted already answers my question in 
the form of ""no"", but it seems to leave some leeway given that it refers 
to the executable as ""python3.0"" in its example. I understand the 
long-term reason for letting 'python' be Python 3.x: ""python"" should 
invoke the most recent version of Python installed. It may still not be 
the best strategy to do this in the short term however, as while people 
have such an expectation, they also tend to have the expectation that 
their code will continue to run.

Python distributors such as Linux distributions will have to determine 
what 'python' does on their system. Some may choose to invoke Python 
2.x, some may choose Python 3.x. It might useful for the Python team to 
give some guidance on this, if possible, to try to avoid inconsistent 
decisions to be taken.

It would be nice if the motivation for the decision could be added to 
the PEP so we don't have others bringing up the same topic. This might 
also be a useful place distributors of Python could get their clues as 
to policy, though perhaps a ""distributor's guide"" might be useful.

Regards,

Martijn



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 8
******************************************
????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 7","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] No releases tonight
      (Jeroen Ruigrok van der Werven)
   2. Re: [Python-Dev] No releases tonight (Facundo Batista)
   3. Re: [Python-Dev]  The release process (Barry Warsaw)
   4. Re: [Python-Dev] The release process (Barry Warsaw)
   5. Re: [Python-Dev] No releases tonight (Barry Warsaw)
   6. Re: [Python-Dev] No releases tonight (Christian Heimes)
   7. Re: [Python-Dev]  The release process (skip@pobox.com)


----------------------------------------------------------------------

Message: 1
Date: Sun, 2 Mar 2008 09:49:35 +0100
From: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Christian Heimes <lists@cheimes.de>
Cc: Steve Holden <steve@holdenweb.com>, python-3000@python.org,
	python-dev@python.org
Message-ID: <20080302084935.GA62047@nexus.in-nomine.org>
Content-Type: text/plain; charset=utf-8

-On [20080301 19:57], Christian Heimes (lists@cheimes.de) wrote:
>I also propose translations of the shorter text to important languages
>like French, German, Japanese, Portuguese and Spanish. I'm willing to
>help with the German translation.

I can probably get a translation done in Japanese, Chinese and Korean.

For Portuguese I guess we could ask the ASync guys in Brazil, they're huge
Python users with their work for Canonical/Ubuntu.

-- 
Jeroen Ruigrok van der Werven <asmodai(-at-)in-nomine.org> / asmodai
????? ?????? ??? ?? ??????
http://www.in-nomine.org/ | http://www.rangaku.org/
There can be no justice so long as laws are absolute...


------------------------------

Message: 2
Date: Mon, 3 Mar 2008 15:03:06 -0200
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: Steve Holden <steve@holdenweb.com>, python-3000@python.org,
	python-dev@python.org
Message-ID:
	<e04bdf310803030903t24716c22t55ee64668d292584@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/3/1, Christian Heimes <lists@cheimes.de>:

>  I also propose translations of the shorter text to important languages
>  like French, German, Japanese, Portuguese and Spanish. I'm willing to
>  help with the German translation.

/me raises his hand while saying ""Spanish, Spanish!"".

Which is the official text?

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 3
Date: Mon, 3 Mar 2008 17:43:57 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev]  The release process
To: skip@pobox.com
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <614DA72A-2900-4BA6-AA39-48B1E8C3CA98@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 7:28 PM, skip@pobox.com wrote:

>
>    Barry> The dependency on gtk is unnecessary and means it can  
> effectively
>    Barry> only be run on Linux.  Specifically it means I can't do  
> releases
>    Barry> on OS X.  I don't see much benefit in having a gui tool  
> for doing
>    Barry> releases.
>
> Gtk and Glade are available through MacPorts, at least according to  
> ""port
> search ..."".

True, but it's just more moving parts to break, especially when I  
don't really feel a u/i buys you much[*].

- -Barry

[*] Skip knows me as a diehard XEmacser so that statement can pretty  
much define my standard answer to all such questions. :)

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8x/LXEjvBPtnXfVAQKnFAP/RDKzhQsIDuc8joSR3G2mrKv7jH+6tl04
Fq3d++1jFjE5cBiY9uDL2/799wqUKvevx2QnGrON1ins9xuYGh5/xY9w4JvbI8aX
zLq/RjNFzPl/YnMCX7OSUBjbQoE3sr+dgUpLurImsJxWaFcjqufzQuno6N0sqvWg
sevJTwfBkOE=
=HfWd
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Mon, 3 Mar 2008 17:53:08 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] The release process
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <AF9C4630-AB72-47BB-926C-C11D4422C994@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 2, 2008, at 1:54 AM, Georg Brandl wrote:

> Barry Warsaw schrieb:
>
>> PEP 101 is sorely out of date, especially with regards to updating  
>> web
>> content and the Python documentation.  I think I now know how to
>> update the python.org web site, but the new Python documentation
>> format is still a mystery to me.  If someone would like to help  
>> update
>> PEP 101 for the documentation steps, please let me know.
>
> Well, it's not very hard to guess who this someone is, is it?

Actually, I honestly didn't know... sorry Georg!

> I've updated PEP 101, except for the part where the docs are uploaded
> to the website, I've no idea if the FTP paths etc. are still valid.

Thanks, this is a big help.  I'll double check the ftp paths, but I  
think they haven't changed.

> For the next releases, if you want to do documentation packages,
> please feel free to contact me, I'll be happy to help!

Great, thanks!
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8yBVHEjvBPtnXfVAQJemgP/aE/a54SaKc7Ls9osae+g57zcYB7d95FX
O/HcE3/QFJCQeBquTfwbOV8doyAYHFDDIw8U2GIvgppLjPEqHAJzKfBqeQIILM3a
uZM/4yUUcnnI8UQYhi4u+maztv6YwQxyKj9sLuK9GFncxk1B1z7zW4WcWISoet3H
j3XC4eFVvjM=
=SDdJ
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Mon, 3 Mar 2008 18:06:21 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Alex Martelli <aleaxit@gmail.com>
Cc: python-3000@python.org, Steve Holden <steve@holdenweb.com>,
	Christian Heimes <lists@cheimes.de>, python-dev@python.org
Message-ID: <1D91070A-1387-4CFD-A6AC-0BA84626EE62@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 9:00 PM, Alex Martelli wrote:

> On Sat, Mar 1, 2008 at 11:11 AM, Barry Warsaw <barry@python.org>  
> wrote:
>   ...
>>> I also propose translations of the shorter text to important  
>>> languages
>>> like French, German, Japanese, Portuguese and Spanish. I'm willing  
>>> to
>>> help with the German translation.
>>
>> Cool, thanks.
>
> I'd like to volunteer for Italian (and we, the Italian Python
> community, do have reasonably good connections to the Italian
> technical press, which is covering e.g. the upcoming Pycon Due
> conference), and although my French is VERY rusty I can give it a try
> if no native French speaker is forthcoming.

So how should we handle this?  Is it something you need input from me  
from, or can you just take my announcement, do the translations and  
post them to the appropriate forums?

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8yEbXEjvBPtnXfVAQLU9QP/Tq3NsOHmKijNZQ2Gq8y4iLjznRAMS5ld
gkI+onjtjHO42pJ40p7UJMuUkp5V6+WzFSh1JqhxfyTLSYuMv90Jr+SKo8emtyg1
kJQjLfjtPu4JY/RIVhmbBD2IBIAchNBH2HWUjFY7Odp7TapuG78KRUFMsbt0GDP8
7XDl9xYXalg=
=w0Uo
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Tue, 04 Mar 2008 01:41:58 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Barry Warsaw <barry@python.org>
Cc: Steve Holden <steve@holdenweb.com>, python-3000@python.org,
	python-dev@python.org
Message-ID: <47CC9AD6.90504@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Barry Warsaw wrote:
> So how should we handle this?  Is it something you need input from me
> from, or can you just take my announcement, do the translations and post
> them to the appropriate forums?

Your announcements are fine for Python's mailing lists and forums.
However I had a differnt target in mind, mainly large IT news sites with
broader audience. It'd be great if we can mobilize some professional PR
people to write an announcement for the press.

Christian


------------------------------

Message: 7
Date: Mon, 3 Mar 2008 21:30:48 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-Dev]  The release process
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <18380.49768.250393.961583@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Barry> True, but it's just more moving parts to break, especially when I
    Barry> don't really feel a u/i buys you much[*].

    Barry> [*] Skip knows me as a diehard XEmacser so that statement can
    Barry> pretty much define my standard answer to all such questions. :)

So if we put together a ""gui"" which uses Johan Vroman's defunct Emacs Lisp
forms package you'd be okay with that? <wink>

Skip


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 7
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 6","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Silent failing unit tests. (Alexandre Vassalotti)
   2. Re: Silent failing unit tests. (Brett Cannon)
   3. Re: Silent failing unit tests. (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Sun, 2 Mar 2008 20:56:57 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: [Python-3000] Silent failing unit tests.
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<acd65fa20803021756w51a0db1bha7a05047b3346e44@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

Hi,

Since I got some free time during my study break, I started to work
again on my stuff. Hopefully, I finish off pickle. :-) Anyway, I found
weird while merging the py3k branch into my private branch. I found
some failing unit tests that don't report any failure when run with
regrtest:

test_pty
test_largefile
test_ossaudiodev [this one has been known to fail for while now]
test_pep247

There is probably others that I haven't noticed. You can try to find
other ""silent"" tests by watching the output of:

  % for t in Lib/test/test_*; do ./python $t; done

Cheers,
-- Alexandre


------------------------------

Message: 2
Date: Sun, 2 Mar 2008 18:33:00 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Silent failing unit tests.
To: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100803021833p44ebc3a4i4feba88d1c3883ad@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Sun, Mar 2, 2008 at 5:56 PM, Alexandre Vassalotti
<alexandre@peadrop.com> wrote:
> Hi,
>
>  Since I got some free time during my study break, I started to work
>  again on my stuff. Hopefully, I finish off pickle. :-) Anyway, I found
>  weird while merging the py3k branch into my private branch. I found
>  some failing unit tests that don't report any failure when run with
>  regrtest:
>

On OS X 10.5:

>  test_pty

Failing.

>  test_largefile

Wasn't even executing tests! Must now that has been patched in r 61191
it is failing. =)

>  test_ossaudiodev [this one has been known to fail for while now]
>  test_pep247

Failing.

Don't know why regrtest is not picking up the failures.

-Brett


------------------------------

Message: 3
Date: Sun, 2 Mar 2008 19:28:28 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Silent failing unit tests.
To: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100803021928y2bfcdcfcmb68b5a2bd804f08a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Sun, Mar 2, 2008 at 6:33 PM, Brett Cannon <brett@python.org> wrote:
> On Sun, Mar 2, 2008 at 5:56 PM, Alexandre Vassalotti
>  <alexandre@peadrop.com> wrote:
>  > Hi,
>  >
>  >  Since I got some free time during my study break, I started to work
>  >  again on my stuff. Hopefully, I finish off pickle. :-) Anyway, I found
>  >  weird while merging the py3k branch into my private branch. I found
>  >  some failing unit tests that don't report any failure when run with
>  >  regrtest:
>  >
>
>  On OS X 10.5:
>
>  >  test_pty
>
>  Failing.
>
>  >  test_largefile
>
>  Wasn't even executing tests! Must now that has been patched in r 61191
>  it is failing. =)
>
>
>  >  test_ossaudiodev [this one has been known to fail for while now]
>  >  test_pep247
>
>  Failing.
>
>  Don't know why regrtest is not picking up the failures.

test_pty's failure was not showing up because it is was due to the
test consuming verbose output. When run under regrtest there is no
verbose output, so the offending code was never triggered.

test_pep247 was not triggering as it is not designed to execute in any
way other than a a main module. This has been fixed in r61195 in the
trunk so it can get forward-ported.

-Brett


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 6
******************************************
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 5","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: The release process (Martin v. L?wis)
   2. Re: [Python-Dev]  RELEASED Python 2.6a1 and 3.0a3 (Paul Moore)
   3. Re: The release process (Barry Warsaw)
   4. Re: RELEASED Python 2.6a1 and 3.0a3 (Martin v. L?wis)
   5. Re: [Python-Dev]  RELEASED Python 2.6a1 and 3.0a3
      (Martin v. L?wis)
   6. Re: The release process (Barry Warsaw)
   7. Re: [Python-Dev]  The release process (skip@pobox.com)
   8. Re: [Python-Dev] No releases tonight (Alex Martelli)
   9. Re: [Python-Dev] No releases tonight (Hasan Diwan)
  10. Re: [Python-Dev] No releases tonight (Arnaud Delobelle)


----------------------------------------------------------------------

Message: 1
Date: Sat, 01 Mar 2008 23:37:05 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] The release process
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C9DA91.9000105@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> With apologies to Anthony, welease is crack.  I made pretty good  
> progress once I ditched it and starting doing things manually.   
> Between now and the next alpha I intend to work on a command line  
> script to help with releases.  If you're interested in helping, let me  
> know.

I guess every release manager is free to come up with his own set of
tools, but I feel you've given up too quickly (or started too late -
perhaps a test release run a few days before the release would have
helped).

In any case, I'm willing to help with welease, but not with yet another
release tool. If you primarily complain about the GUIness of welease,
I could help with a command line version of it.

Regards,
Martin


------------------------------

Message: 2
Date: Sat, 1 Mar 2008 22:39:41 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] [Python-Dev]  RELEASED Python 2.6a1 and
	3.0a3
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-list@python.org, python-3000@python.org,
	python-dev@python.org,	Terry Reedy <tjreedy@udel.edu>
Message-ID:
	<79990c6b0803011439n583bc2b2w5c544b620a91fa61@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 01/03/2008, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > As of 4:50 PM  EST, the links to Windows installers give 404 File Not
>  > Found.
>  >
>  > I gather that they are still in process,
>  > and notice that there is no public c.l.p. announcement.
>
>
> I just fixed that. The files were there; just the links were wrong.

The 2.6a1 x86 MSI is there, but the 3.0a3 x86 MSI is still giving a 404.

Paul.


------------------------------

Message: 3
Date: Sat, 1 Mar 2008 17:46:31 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] The release process
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <FF10524F-7E57-48E2-B2EA-7DF82E1F7FBC@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 3:04 PM, Christian Heimes wrote:

> I *never* sync changes from trunk Misc/NEWS to py3k Misc/NEWS. From my
> point of view it doesn't make sense to put Python 2.6 changes in the
> same section as Python 3.0 changes. Moving changes from to the right
> section would put a large and unnecessary burden on me. In general  
> every
> change of the 2.6 source tree makes it into 3.0. Exceptions to the  
> rule
> is stuff that makes no sense like 3.0 compatibility and warnings.
>
> Thumb rule: Changes, bug fixes and new features in 2.6 are also in 3.0
> except they are outruled by a Python 3.0 feature.
>
> Several people including me and Guido himself are watching the cvs
> lists. We make sure everybody adds an entry to Misc/NEWS whenever a  
> bug
> is fixed or a new feature is added. Otherwise we crack the whip ^H^H^H
> contact the committer. You can be sure that at least 98% of  all  
> closed
> bug reports, feature request and important changes have an entry in
> Misc/NEWS.

Great, this is all I'm really asking for!  The point of my  
unconscionable rant :) was that I think it's unfeasible to update the  
NEWS files at release time.  Knowing that you, Guido and others are  
keeping an eye on commits and an iron hand on the NEWS files makes me  
as the RM rest comfortably. :)

> So in general Misc/NEWS isn't an issue but Docs/whatsnew/ is. Only a
> couple of people - mostly Georg and Andrew - are updating the files.

I think it's okay if these lag behind during the alphas, but it would  
be good to start whipping these in shape by the time we start  
releasing betas.

Thanks,
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8ncx3EjvBPtnXfVAQJeNQP+L2wK4CmGfwzgsQUHQISniaJ2rREBhJua
sJwqGNpBhnf6Uc8jJz+JRiexPdCW4AlH34FtHkyRkw2ZIVWwd6sO+7ixQPk0A/TP
+gGk1uST/sjPG3q8T5u9OElri5SoTqJzEgWMkTiGhwYouSvOjpW/GFFREySU68Tk
h9XGzJFZex0=
=aXqC
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Sat, 01 Mar 2008 23:49:42 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: Barry Warsaw <barry@python.org>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47C9DD86.4040300@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Thanks for fixing these Martin!

I have now also uploaded signed MSI files for 3.0a3.

I have not tested them on a machine which doesn't have the
VS 2008 CRT installed (as all the machines I can access
right now do have it); please report what works and what
doesn't.

Regards,
Martin


------------------------------

Message: 5
Date: Sat, 01 Mar 2008 23:51:36 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  RELEASED Python 2.6a1 and
	3.0a3
To: Paul Moore <p.f.moore@gmail.com>
Cc: python-list@python.org, python-3000@python.org,
	python-dev@python.org,	Terry Reedy <tjreedy@udel.edu>
Message-ID: <47C9DDF8.30000@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> The 2.6a1 x86 MSI is there, but the 3.0a3 x86 MSI is still giving a 404.

Please try again - *those* files weren't actually there when I sent my
last message; I just built them.

Regards,
Martin


------------------------------

Message: 6
Date: Sat, 1 Mar 2008 18:03:35 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] The release process
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <10EE358F-8120-4EAC-9413-BDE5B812639F@python.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 5:37 PM, Martin v. L?wis wrote:

>> With apologies to Anthony, welease is crack.  I made pretty good   
>> progress once I ditched it and starting doing things manually.    
>> Between now and the next alpha I intend to work on a command line   
>> script to help with releases.  If you're interested in helping, let  
>> me  know.
>
> I guess every release manager is free to come up with his own set of
> tools, but I feel you've given up too quickly (or started too late -
> perhaps a test release run a few days before the release would have
> helped).

Maybe.

> In any case, I'm willing to help with welease, but not with yet  
> another
> release tool. If you primarily complain about the GUIness of welease,
> I could help with a command line version of it.

The dependency on gtk is unnecessary and means it can effectively only  
be run on Linux.  Specifically it means I can't do releases on OS X.   
I don't see much benefit in having a gui tool for doing releases.

Some of the problems I had include having to run glade3 in order to  
update the menus which allow you to choose which release you were  
going to make.  It only new about py24 and 25 maintenance.  No knock  
on Anthony there, since those are the releases he had to make, but I  
shouldn't have to edit the interface description files to add new  
release versions.

Also, the scheme to compare IDLE versions seemed way off.  Maybe  
that's another thing that makes sense for py24 and py25 but it  
definitely didn't work for py30.

The much more serious problem, and where I stopped, is that welease  
broke on code containing the with statement.  I don't remember the  
details because at that point I was pretty tired and hadn't made any  
progress on the releases, but I /think/ the problem is that welease  
runs on a different version of Python than it's checking so it can't  
handle syntactic differences and such.

The kind of tool I think we need is a fairly straightforward command  
line tool, but one that would not just check that things are done, but  
also do them.  E.g. the tool would keep track of all the little places  
where version numbers and copyright years need updating.  The tool  
would actually make those changes, and using $EDITOR would show them  
to you for confirmation.  It would pause at steps that require  
coordination, such as when things need to be committed or signed, or  
when you're waiting from input from others.  It would have a dry-run  
mode and it would fairly closely follow PEP 101.

Anyway, that's the kind of tool I plan on building (or perhaps with  
help from others -- hi Benjamin) for the next alpha round.

Cheers,
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8ngyHEjvBPtnXfVAQKYaAP+JzIj8HiwVYIJLMyxh+Glq57YQozOh2bB
XILPBwUyppBBkezcT6IWAnawo5YUGXwg1tJjS/OsqSnIoajnRQCzzR6X896qXUAn
asgXKTydmf553iSD03OG4K38UsdeD6uPUWN9zg/bceKaH2GM72p6md3Wepof4DuE
UdTGgXENXOI=
=uKmC
-----END PGP SIGNATURE-----


------------------------------

Message: 7
Date: Sat, 1 Mar 2008 18:28:07 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-Dev]  The release process
To: Barry Warsaw <barry@python.org>
Cc: Python, 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <18377.62615.194234.88761@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Barry> The dependency on gtk is unnecessary and means it can effectively
    Barry> only be run on Linux.  Specifically it means I can't do releases
    Barry> on OS X.  I don't see much benefit in having a gui tool for doing
    Barry> releases.

Gtk and Glade are available through MacPorts, at least according to ""port
search ..."".

Skip


------------------------------

Message: 8
Date: Sat, 1 Mar 2008 18:00:11 -0800
From: ""Alex Martelli"" <aleaxit@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: ""Barry Warsaw"" <barry@python.org>
Cc: python-3000@python.org, Steve Holden <steve@holdenweb.com>,
	Christian Heimes <lists@cheimes.de>, python-dev@python.org
Message-ID:
	<e8a0972d0803011800v7c26035eh95a9371be21ed9b0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Mar 1, 2008 at 11:11 AM, Barry Warsaw <barry@python.org> wrote:
   ...
>  > I also propose translations of the shorter text to important languages
>  > like French, German, Japanese, Portuguese and Spanish. I'm willing to
>  > help with the German translation.
>
>  Cool, thanks.

I'd like to volunteer for Italian (and we, the Italian Python
community, do have reasonably good connections to the Italian
technical press, which is covering e.g. the upcoming Pycon Due
conference), and although my French is VERY rusty I can give it a try
if no native French speaker is forthcoming.


Alex


------------------------------

Message: 9
Date: Sat, 1 Mar 2008 22:57:50 -0800
From: ""Hasan Diwan"" <hasan.diwan@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: python-dev@python.org, python-3000@python.org
Message-ID:
	<2cda2fc90803012257i3a63bd1etd176948ebc4ba048@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

I'll volunteer to do a French translation of the release.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>


------------------------------

Message: 10
Date: Sun, 2 Mar 2008 08:58:34 +0000
From: Arnaud Delobelle <arnodel@googlemail.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Alex Martelli <aleaxit@gmail.com>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <827383A5-9EB5-4B02-94AB-E33D54481071@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On 2 Mar 2008, at 02:00, Alex Martelli wrote:

> On Sat, Mar 1, 2008 at 11:11 AM, Barry Warsaw <barry@python.org>  
> wrote:
>   ...
>>> I also propose translations of the shorter text to important  
>>> languages
>>> like French, German, Japanese, Portuguese and Spanish. I'm willing  
>>> to
>>> help with the German translation.
>>
>> Cool, thanks.
>
> I'd like to volunteer for Italian (and we, the Italian Python
> community, do have reasonably good connections to the Italian
> technical press, which is covering e.g. the upcoming Pycon Due
> conference), and although my French is VERY rusty I can give it a try
> if no native French speaker is forthcoming.

I'm a native French speaker, and although I am not involved in  
Python's development I would be happy to help by translating the  
documents.  I have no connections with the French-speaking technical  
press.

-- 
Arnaud



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 5
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 4","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] No releases tonight (Steve Holden)
   2. The release process (Barry Warsaw)
   3. Re: [Python-Dev] No releases tonight (Barry Warsaw)
   4. Re: [Python-Dev] No releases tonight (Christian Heimes)
   5. Re: [Python-Dev] No releases tonight (Steve Holden)
   6. Re: The release process (Christian Heimes)
   7. Re: RELEASED Python 2.6a1 and 3.0a3 (Terry Reedy)
   8. Re: RELEASED Python 2.6a1 and 3.0a3 (Martin v. L?wis)
   9. Re: RELEASED Python 2.6a1 and 3.0a3 (Barry Warsaw)


----------------------------------------------------------------------

Message: 1
Date: Sat, 01 Mar 2008 14:01:36 -0500
From: Steve Holden <steve@holdenweb.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqc96p$4qh$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes wrote:
> Barry Warsaw wrote:
>> In this case, there was a lot more work to do because 2.6 wasn't tied
>> in at all.  Add to the fact that I didn't have any experience with the
>> website infrastructure made things a bit more difficult the first time
>> out.  I still don't quite have the 2.6 links working correctly in my
>> local fs.  So the biggest problem is really: what steps do you take
>> when you need to expose a new major release on the website?
> 
> Starting with the first betas of 2.6 and 3.0 we should also work on
> official texts for the press. Other projects like PHP are drawing lots
> of attention with their releases, even with bug fix and security
> releases. Bad news are better than no news - a beta release is *good* news.
> 
> When 3.0a2 was released I contacted two larger German IT news sites. Non
> of them even bother to reply. :/
> 
> I propose that we provide two official texts for the press. A shorter
> text which explains Python and the most important changes since the last
> version in a few paragraphs and a longer, more detailed text like
> Martin's text for the 2.5.2 release.
> 
> I also propose translations of the shorter text to important languages
> like French, German, Japanese, Portuguese and Spanish. I'm willing to
> help with the German translation.
> 
> Christian

PyCon is using a PR team to help with publicity. Maybe we can ask them 
for assistance on how to get the word out?

regards
  Steve
-- 
Steve Holden        +1 571 484 6266   +1 800 494 3119
Holden Web LLC              http://www.holdenweb.com/



------------------------------

Message: 2
Date: Sat, 1 Mar 2008 14:07:49 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] The release process
To: Python Dev <python-dev@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <DE89A1CA-29D1-4A77-B427-F61ADF4C7CC8@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I just announced the 2.6a1 and 3.0a3 releases, and am thawing both  
branches.

Just some quick feedback in case anybody is interested.  First, huge  
thanks go to Brett Cannon, Neal Norwitz, Mark Dickinson and Fred Drake  
for their help last night. Apologies also to them for my drunken rants  
on jabber :).  Also thanks to Martin von Loewis for the Windows msi's  
for Python 2.6.  I'm sure Martin will soon provide msi's for 3.0, but  
these are not yet available.

Some other random notes:

Brett fixed test_profile in 3.0 last night but test_cProfile was still  
broken.  I disabled the test via a TestSkipped and set this to  
expected in regrtest.py.  This test should be fixed and the expected  
skip removed.

I will definitely need help keeping the various NEWS files up to  
date.  I don't see any way that I'll be able to spend time on these  
when I'm cutting a release.  Python 2.6 NEWS was simply impossible to  
proofread because of its sheer size and the fact that it was the first  
alpha of the series.

PEP 101 describes 4 news files: Misc/NEWS and Lib/idlelib/NEWS.txt for  
both 2.6 and 3.0.  I am urgently requesting that when people commit  
newsworthy items to the Python releases that they keep the NEWS files  
up-to-date.  This is especially tricky for code merged between the two  
versions.  Thanks to Neal for looking over 3.0's NEWS file last  
night.  As RM, I am going to operate on the assumption that the NEWS  
files are up-to-date.  I'd be thrilled if someone volunteered to be  
the ""NEWS czar"" -- we all know when the next alpha release is coming  
(Friday March 25), so this czar would be responsible for watching  
commits and making sure that NEWS was updated as appropriate, or  
harassing the committer into updating NEWS to describe their new  
feature.  If you'd like to be this NEWS czar, please let me know.

With apologies to Anthony, welease is crack.  I made pretty good  
progress once I ditched it and starting doing things manually.   
Between now and the next alpha I intend to work on a command line  
script to help with releases.  If you're interested in helping, let me  
know.

PEP 101 is sorely out of date, especially with regards to updating web  
content and the Python documentation.  I think I now know how to  
update the python.org web site, but the new Python documentation  
format is still a mystery to me.  If someone would like to help update  
PEP 101 for the documentation steps, please let me know.

PEP 101 also describes some steps for updating the distutils version  
numbers.  These instructions seemed stale too.  If you know anything  
about distutils version numbers and the process for updating them,  
please contact me.

There's no Misc/RPM/python-3.0.spec file so I skipped that step too.   
Sean, do you know anything about that?

That's it.  See you again next time :).  Let me know if you notice  
anything broken about the releases.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8mphXEjvBPtnXfVAQKPcwQAqQVP+IWO60/m1Rm1OKpcGfpS+BZILKvj
LkLJamZ6gvupFeJj1kCr6eAl62Mqaec2Z29jsnXK9TfAogGGVcW21a98rgcQUong
fRh34dt1YGVMcqw4r8G60kqYQG4caGJ9tS5oKEXq+lYWPfirLZ7mC1SkkfnJ9mVd
Cscr0ZAYayI=
=nnlY
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Sat, 1 Mar 2008 14:11:18 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org, python-dev@python.org,	Steve Holden
	<steve@holdenweb.com>
Message-ID: <3B6D7A5F-2426-485E-BF5F-0BC16DF26A74@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 1:56 PM, Christian Heimes wrote:

> Barry Warsaw wrote:
>> In this case, there was a lot more work to do because 2.6 wasn't tied
>> in at all.  Add to the fact that I didn't have any experience with  
>> the
>> website infrastructure made things a bit more difficult the first  
>> time
>> out.  I still don't quite have the 2.6 links working correctly in my
>> local fs.  So the biggest problem is really: what steps do you take
>> when you need to expose a new major release on the website?
>
> Starting with the first betas of 2.6 and 3.0 we should also work on
> official texts for the press. Other projects like PHP are drawing lots
> of attention with their releases, even with bug fix and security
> releases. Bad news are better than no news - a beta release is  
> *good* news.

Great idea, and I agree.  I won't be the person spearheading this  
though, but since it'll probably be me making the announcement, I'd  
like to coordinate with this effort.

> When 3.0a2 was released I contacted two larger German IT news sites.  
> Non
> of them even bother to reply. :/
>
> I propose that we provide two official texts for the press. A shorter
> text which explains Python and the most important changes since the  
> last
> version in a few paragraphs and a longer, more detailed text like
> Martin's text for the 2.5.2 release.
>
> I also propose translations of the shorter text to important languages
> like French, German, Japanese, Portuguese and Spanish. I'm willing to
> help with the German translation.

Cool, thanks.
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8mqVnEjvBPtnXfVAQIlkAP/U5z0xSaaDKbXxArncL49NpRTU5O431Wi
+qdlnJQbApMtWMJyw14jXD0ovDlAFFK/71fGSUW7IxBvd+sWy9xJJpwydNz5xUVJ
Ze3GYX0pWF0zDp9IIX9o3W9uotm9156lWe8Ahbsa0TWXN2AXyuRjyccIS7v2mU55
mHY6niZ8SbE=
=OJl/
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Sat, 01 Mar 2008 20:43:24 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Steve Holden <steve@holdenweb.com>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47C9B1DC.5070201@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Steve Holden wrote:
> PyCon is using a PR team to help with publicity. Maybe we can ask them 
> for assistance on how to get the word out?

That's a *very* good idea! Let's ask some professionals rather than
writing something on our own.

Christian


------------------------------

Message: 5
Date: Sat, 01 Mar 2008 14:57:13 -0500
From: Steve Holden <steve@holdenweb.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqccf2$fl2$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes wrote:
> Steve Holden wrote:
>> PyCon is using a PR team to help with publicity. Maybe we can ask them 
>> for assistance on how to get the word out?
> 
> That's a *very* good idea! Let's ask some professionals rather than
> writing something on our own.
> 
> Christian

Done, with a Cc: to Barry as release manager. Let's see whether they can 
help, at least. It's important news for PyCon anyway ...

regards
  Steve
-- 
Steve Holden        +1 571 484 6266   +1 800 494 3119
Holden Web LLC              http://www.holdenweb.com/



------------------------------

Message: 6
Date: Sat, 01 Mar 2008 21:04:27 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] The release process
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C9B6CB.1060909@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Barry Warsaw wrote:
> I will definitely need help keeping the various NEWS files up to
> date.  I don't see any way that I'll be able to spend time on these
> when I'm cutting a release.  Python 2.6 NEWS was simply impossible to
> proofread because of its sheer size and the fact that it was the first
> alpha of the series.
> 
> PEP 101 describes 4 news files: Misc/NEWS and Lib/idlelib/NEWS.txt for
> both 2.6 and 3.0.  I am urgently requesting that when people commit
> newsworthy items to the Python releases that they keep the NEWS files
> up-to-date.  This is especially tricky for code merged between the two
> versions.  Thanks to Neal for looking over 3.0's NEWS file last
> night.  As RM, I am going to operate on the assumption that the NEWS
> files are up-to-date.  I'd be thrilled if someone volunteered to be
> the ""NEWS czar"" -- we all know when the next alpha release is coming
> (Friday March 25), so this czar would be responsible for watching
> commits and making sure that NEWS was updated as appropriate, or
> harassing the committer into updating NEWS to describe their new
> feature.  If you'd like to be this NEWS czar, please let me know.

I *never* sync changes from trunk Misc/NEWS to py3k Misc/NEWS. From my
point of view it doesn't make sense to put Python 2.6 changes in the
same section as Python 3.0 changes. Moving changes from to the right
section would put a large and unnecessary burden on me. In general every
change of the 2.6 source tree makes it into 3.0. Exceptions to the rule
is stuff that makes no sense like 3.0 compatibility and warnings.

Thumb rule: Changes, bug fixes and new features in 2.6 are also in 3.0
except they are outruled by a Python 3.0 feature.

Several people including me and Guido himself are watching the cvs
lists. We make sure everybody adds an entry to Misc/NEWS whenever a bug
is fixed or a new feature is added. Otherwise we crack the whip ^H^H^H
contact the committer. You can be sure that at least 98% of  all closed
bug reports, feature request and important changes have an entry in
Misc/NEWS.

So in general Misc/NEWS isn't an issue but Docs/whatsnew/ is. Only a
couple of people - mostly Georg and Andrew - are updating the files.

Christian


------------------------------

Message: 7
Date: Sat, 1 Mar 2008 16:48:10 -0500
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: python-3000@python.org
Cc: python-list@python.org, python-dev@python.org
Message-ID: <fqciun$3l2$1@ger.gmane.org>


""Barry Warsaw"" <barry@python.org> wrote in message 
news:6E72CEB8-D3BF-4440-A1EA-1A3D545CC8DB@python.org...
| -----BEGIN PGP SIGNED MESSAGE-----
|     http://www.python.org/download/releases/3.0/

As of 4:50 PM  EST, the links to Windows installers give 404 File Not 
Found.

I gather that they are still in process,
and notice that there is no public c.l.p. announcement. 





------------------------------

Message: 8
Date: Sat, 01 Mar 2008 23:26:10 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: Terry Reedy <tjreedy@udel.edu>
Cc: python-list@python.org, python-3000@python.org,
	python-dev@python.org
Message-ID: <47C9D802.2090205@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> As of 4:50 PM  EST, the links to Windows installers give 404 File Not 
> Found.
> 
> I gather that they are still in process,
> and notice that there is no public c.l.p. announcement. 

I just fixed that. The files were there; just the links were wrong.

Regards,
Martin


------------------------------

Message: 9
Date: Sat, 1 Mar 2008 17:29:39 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: python-list@python.org, python-3000@python.org,
	python-dev@python.org,	Terry Reedy <tjreedy@udel.edu>
Message-ID: <05D00F06-8B87-4B94-8878-42E1F3F50F90@python.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 5:26 PM, Martin v. L?wis wrote:

>> As of 4:50 PM  EST, the links to Windows installers give 404 File Not
>> Found.
>>
>> I gather that they are still in process,
>> and notice that there is no public c.l.p. announcement.
>
> I just fixed that. The files were there; just the links were wrong.

Thanks for fixing these Martin!

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8nY1HEjvBPtnXfVAQJ3YgP/TYr0X5vRqvVDEMgsHxHuiSuYZCIr8y36
ibAh3RAGeLLK7C7NiOyAfxkesf91HCbL1in0TcnD06QZy52O8elBa927JOomP3mc
Y6K4Y49JhxonBrmGcmasnc9PFjbhXtGdWLREinuzpB5itLpRv+SevMhxP27Fp8qr
df173TV4hpk=
=nf32
-----END PGP SIGNATURE-----


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 4
******************************************
????????????????????????????????????????????????????????????????????????????????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 3","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] No releases tonight (Barry Warsaw)
   2. Re: [Python-Dev] No releases tonight (Steve Holden)
   3. Re: [Python-3000-checkins] r61155 -
      python/branches/py3k/Lib/test/test_profile.py (Guido van Rossum)
   4. Re: [Python-Dev] No releases tonight (Barry Warsaw)
   5. Re: [Python-3000-checkins] r61155 -
      python/branches/py3k/Lib/test/test_profile.py (Barry Warsaw)
   6. RELEASED Python 2.6a1 and 3.0a3 (Barry Warsaw)
   7. Re: [Python-Dev] No releases tonight (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Sat, 1 Mar 2008 09:11:34 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Steve Holden <steve@holdenweb.com>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <CDBAE1CD-9C0B-4ED1-8F67-0090516E1442@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 12:36 AM, Steve Holden wrote:

> If you can document the web stuff you have to do I will formalize it  
> as
> a procedure for use in future releases.

Hi Steve,

In this case, there was a lot more work to do because 2.6 wasn't tied  
in at all.  Add to the fact that I didn't have any experience with the  
website infrastructure made things a bit more difficult the first time  
out.  I still don't quite have the 2.6 links working correctly in my  
local fs.  So the biggest problem is really: what steps do you take  
when you need to expose a new major release on the website?

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8lkF3EjvBPtnXfVAQLjtQP/cyIu6i/3hL7RMyJjwi5UWaVelq+6+DjX
c8P6aLT0Gq2jIIacwt2P5lWYGx5D2nahoLCkLoA4M3avHM6UiTaIW45nFrnffItx
F/ib/UY/j+gsudlg5GsZQrBTzvrso6BFDuIr9VISuzf3e6QRr7sAhUfXzgIETXjj
DPT3y474bDs=
=Kxv7
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Sat, 01 Mar 2008 10:38:32 -0500
From: Steve Holden <steve@holdenweb.com>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fqbta0$vf8$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> On Mar 1, 2008, at 12:36 AM, Steve Holden wrote:
> 
>> If you can document the web stuff you have to do I will formalize it  
>> as
>> a procedure for use in future releases.
> 
> Hi Steve,
> 
> In this case, there was a lot more work to do because 2.6 wasn't tied  
> in at all.  Add to the fact that I didn't have any experience with the  
> website infrastructure made things a bit more difficult the first time  
> out.  I still don't quite have the 2.6 links working correctly in my  
> local fs.  So the biggest problem is really: what steps do you take  
> when you need to expose a new major release on the website?
> 
I guess the thing to do is to look at your diffs once you have committed 
the changes - I presume this'll all be dropped in as a single revision?

regards
  Steve
-- 
Steve Holden        +1 571 484 6266   +1 800 494 3119
Holden Web LLC              http://www.holdenweb.com/



------------------------------

Message: 3
Date: Sat, 1 Mar 2008 07:55:29 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-3000-checkins] r61155 -
	python/branches/py3k/Lib/test/test_profile.py
To: ""Brett Cannon"" <brett@python.org>, ""Barry Warsaw""
	<barry@python.org>, 	""Python 3000"" <python-3000@python.org>
Message-ID:
	<ca471dc20803010755i63f78b6dj60ec8cdc78f315d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thanks for fixing this Brett!

test_cProfile.py is still failing, but I think that's because it's the
wrong file. In 2.6, test_cprofile and test_profile are rather similar.
But in 3.0, test_cProfile.py seems to be a clone of the 'profilee.py'
test program... Probably a manual-merge glitch. Maybe it should just
be deleted and replaced with a modified copy of test_profile.py?

--Guido

On Fri, Feb 29, 2008 at 8:28 PM, brett.cannon
<python-3000-checkins@python.org> wrote:
> Author: brett.cannon
>  Date: Sat Mar  1 05:28:23 2008
>  New Revision: 61155
>
>  Modified:
>    python/branches/py3k/Lib/test/test_profile.py
>  Log:
>  Change test_profile to only compare data that originates from the test file.
>  Including the full output becomes hairy in the face of the I/O system being
>  written in Python and thus profiled (i.e., running the test on its own and then
>  under regrtest created a different profile thanks to an extra flush() call in
>  the latter case).
>
>  No need to backport as 2.x's I/O is entirely C-based and thus not profiled.
>
>
>  Modified: python/branches/py3k/Lib/test/test_profile.py
>  ==============================================================================
>  --- python/branches/py3k/Lib/test/test_profile.py       (original)
>  +++ python/branches/py3k/Lib/test/test_profile.py       Sat Mar  1 05:28:23 2008
>  @@ -29,7 +29,13 @@
>              stats = pstats.Stats(prof, stream=s)
>              stats.strip_dirs().sort_stats(""stdname"")
>              getattr(stats, methodname)()
>  -            results.append(s.getvalue())
>  +            output = s.getvalue().splitlines()
>  +            mod_name = testfunc.__module__.rsplit('.', 1)[1]
>  +            # Only compare against stats originating from the test file.
>  +            # Prevents outside code (e.g., the io module) from causing
>  +            # unexpected output.
>  +            output = [line.rstrip() for line in output if mod_name in line]
>  +            results.append('\n'.join(output))
>          return results
>
>      def test_cprofile(self):
>  @@ -53,7 +59,7 @@
>      with open(filename, 'r') as f:
>          for line in f:
>              newfile.append(line)
>  -            if line[:6] == '#--cut':
>  +            if line.startswith('#--cut'):
>                  break
>
>      with open(filename, 'w') as f:
>  @@ -77,22 +83,6 @@
>   # Don't remove this comment. Everything below it is auto-generated.
>   #--cut--------------------------------------------------------------------------
>   ProfileTest.expected_output['print_stats'] = """"""\
>  -         126 function calls (106 primitive calls) in 999.751 CPU seconds
>  -
>  -   Ordered by: standard name
>  -
>  -   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
>  -        4   -0.004   -0.001   -0.004   -0.001 :0(append)
>  -        4   -0.004   -0.001   -0.004   -0.001 :0(exc_info)
>  -        1   -0.004   -0.004  999.753  999.753 :0(exec)
>  -       12   -0.024   -0.002   11.964    0.997 :0(hasattr)
>  -        1    0.000    0.000    0.000    0.000 :0(setprofile)
>  -        1   -0.002   -0.002  999.767  999.767 <string>:1(<module>)
>  -        2   -0.004   -0.002   -0.010   -0.005 io.py:1213(flush)
>  -        2   -0.002   -0.001   -0.002   -0.001 io.py:656(closed)
>  -        2   -0.004   -0.002   -0.006   -0.003 io.py:874(flush)
>  -        0    0.000             0.000          profile:0(profiler)
>  -        1   -0.002   -0.002  999.751  999.751 profile:0(testfunc())
>         28   27.972    0.999   27.972    0.999 profilee.py:110(__getattr__)
>          1  269.996  269.996  999.769  999.769 profilee.py:25(testfunc)
>       23/3  149.937    6.519  169.917   56.639 profilee.py:35(factorial)
>  @@ -101,26 +91,12 @@
>          4  115.984   28.996  119.964   29.991 profilee.py:73(helper1)
>          2   -0.006   -0.003  139.946   69.973 profilee.py:84(helper2_indirect)
>          8  311.976   38.997  399.912   49.989 profilee.py:88(helper2)
>  -        8   63.976    7.997   79.960    9.995 profilee.py:98(subhelper)
>  -
>  -
>  -""""""
>  +        8   63.976    7.997   79.960    9.995 profilee.py:98(subhelper)""""""
>   ProfileTest.expected_output['print_callers'] = """"""\
>  -   Ordered by: standard name
>  -
>  -Function                          was called by...
>   :0(append)                        <- profilee.py:73(helper1)(4)  119.964
>   :0(exc_info)                      <- profilee.py:73(helper1)(4)  119.964
>  -:0(exec)                          <- profile:0(testfunc())(1)  999.751
>   :0(hasattr)                       <- profilee.py:73(helper1)(4)  119.964
>                                       profilee.py:88(helper2)(8)  399.912
>  -:0(setprofile)                    <- profile:0(testfunc())(1)  999.751
>  -<string>:1(<module>)              <- :0(exec)(1)  999.753
>  -io.py:1213(flush)                 <- :0(exec)(2)  999.753
>  -io.py:656(closed)                 <- io.py:874(flush)(2)   -0.006
>  -io.py:874(flush)                  <- io.py:1213(flush)(2)   -0.010
>  -profile:0(profiler)               <-
>  -profile:0(testfunc())             <- profile:0(profiler)(1)    0.000
>   profilee.py:110(__getattr__)      <- :0(hasattr)(12)   11.964
>                                       profilee.py:98(subhelper)(16)   79.960
>   profilee.py:25(testfunc)          <- <string>:1(<module>)(1)  999.767
>  @@ -133,27 +109,10 @@
>   profilee.py:84(helper2_indirect)  <- profilee.py:55(helper)(2)  599.830
>   profilee.py:88(helper2)           <- profilee.py:55(helper)(6)  599.830
>                                       profilee.py:84(helper2_indirect)(2)  139.946
>  -profilee.py:98(subhelper)         <- profilee.py:88(helper2)(8)  399.912
>  -
>  -
>  -""""""
>  +profilee.py:98(subhelper)         <- profilee.py:88(helper2)(8)  399.912""""""
>   ProfileTest.expected_output['print_callees'] = """"""\
>  -   Ordered by: standard name
>  -
>  -Function                          called...
>  -:0(append)                        ->
>  -:0(exc_info)                      ->
>  -:0(exec)                          -> <string>:1(<module>)(1)  999.767
>  -                                     io.py:1213(flush)(2)   -0.010
>   :0(hasattr)                       -> profilee.py:110(__getattr__)(12)   27.972
>  -:0(setprofile)                    ->
>   <string>:1(<module>)              -> profilee.py:25(testfunc)(1)  999.769
>  -io.py:1213(flush)                 -> io.py:874(flush)(2)   -0.006
>  -io.py:656(closed)                 ->
>  -io.py:874(flush)                  -> io.py:656(closed)(2)   -0.002
>  -profile:0(profiler)               -> profile:0(testfunc())(1)  999.751
>  -profile:0(testfunc())             -> :0(exec)(1)  999.753
>  -                                     :0(setprofile)(1)    0.000
>   profilee.py:110(__getattr__)      ->
>   profilee.py:25(testfunc)          -> profilee.py:35(factorial)(1)  169.917
>                                       profilee.py:55(helper)(2)  599.830
>  @@ -164,16 +123,11 @@
>                                       profilee.py:84(helper2_indirect)(2)  139.946
>                                       profilee.py:88(helper2)(6)  399.912
>   profilee.py:73(helper1)           -> :0(append)(4)   -0.004
>  -                                     :0(exc_info)(4)   -0.004
>  -                                     :0(hasattr)(4)   11.964
>   profilee.py:84(helper2_indirect)  -> profilee.py:35(factorial)(2)  169.917
>                                       profilee.py:88(helper2)(2)  399.912
>   profilee.py:88(helper2)           -> :0(hasattr)(8)   11.964
>                                       profilee.py:98(subhelper)(8)   79.960
>  -profilee.py:98(subhelper)         -> profilee.py:110(__getattr__)(16)   27.972
>  -
>  -
>  -""""""
>  +profilee.py:98(subhelper)         -> profilee.py:110(__getattr__)(16)   27.972""""""
>
>   if __name__ == ""__main__"":
>      main()
>  _______________________________________________
>  Python-3000-checkins mailing list
>  Python-3000-checkins@python.org
>  http://mail.python.org/mailman/listinfo/python-3000-checkins
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sat, 1 Mar 2008 11:30:58 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Steve Holden <steve@holdenweb.com>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <506EC4C0-11C1-4032-BB18-16C65E1EEC5B@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 10:38 AM, Steve Holden wrote:

> Barry Warsaw wrote:
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> On Mar 1, 2008, at 12:36 AM, Steve Holden wrote:
>>
>>> If you can document the web stuff you have to do I will formalize it
>>> as
>>> a procedure for use in future releases.
>>
>> Hi Steve,
>>
>> In this case, there was a lot more work to do because 2.6 wasn't tied
>> in at all.  Add to the fact that I didn't have any experience with  
>> the
>> website infrastructure made things a bit more difficult the first  
>> time
>> out.  I still don't quite have the 2.6 links working correctly in my
>> local fs.  So the biggest problem is really: what steps do you take
>> when you need to expose a new major release on the website?
>>
> I guess the thing to do is to look at your diffs once you have  
> committed
> the changes - I presume this'll all be dropped in as a single  
> revision?

That would be great Steve, thanks!  r11294.

I'm going to build Python 3.0 now.
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8mEw3EjvBPtnXfVAQKm9gP+PdoDvqTmA4kuqVrNmQJdHSsQDVcB7/sV
BRxeYH0S1TNo05NCzv6qyJ6nxe2CVI6he+chhoCbtCRqp6c5LQOXtaSHUqoSNzP9
FSw9YnQ3DHmFRX3BfNyZ7d9FS2Fs5irsLuAc+WUFNR0AWsvbwXR6qlT0qNQGP666
V46DiUdNhUA=
=ybmk
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Sat, 1 Mar 2008 11:52:45 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-3000-checkins] r61155 -
	python/branches/py3k/Lib/test/test_profile.py
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <8F9636D5-910D-4C42-8BE9-93FA392E1CA1@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Mar 1, 2008, at 10:55 AM, Guido van Rossum wrote:

> Thanks for fixing this Brett!

Indeed!

> test_cProfile.py is still failing, but I think that's because it's the
> wrong file. In 2.6, test_cprofile and test_profile are rather similar.
> But in 3.0, test_cProfile.py seems to be a clone of the 'profilee.py'
> test program... Probably a manual-merge glitch. Maybe it should just
> be deleted and replaced with a modified copy of test_profile.py?

I tried the brain-dead simplest way of doing this and didn't get it to  
pass.  For now, I'm just going to disable test_cProfile and cut  
3.0a3.  We can repair it for the next alpha.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8mJ3XEjvBPtnXfVAQKnIQP+LFoFWccuzguQc/mNFKSzGLl3OcYPojCw
+NomjebaHbyZa9V5SWi8xIDzLoRqf7uc7FYWxOmXQIR3H9LCHqR5HKFWTwyZnuW6
B+esv8+WZwpOjxhyZTWXFOjx/BA4kXKJCOY+ZxkVoKLh7N2aOE4X6WUcCgeWv3r8
lOAtjpo4RKg=
=alcS
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Sat, 1 Mar 2008 13:51:38 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] RELEASED Python 2.6a1 and 3.0a3
To: python-announce@python.org
Cc: python-list@python.org, Python 3000 <python-3000@python.org>,
	Python Dev <python-dev@python.org>
Message-ID: <6E72CEB8-D3BF-4440-A1EA-1A3D545CC8DB@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On behalf of the Python development team and the Python community, I'm  
happy to announce the first alpha release of Python 2.6, and the third  
alpha release of Python 3.0.

Python 2.6 is not only the next advancement in the Python 2 series, it  
is also a transitionary release, helping developers begin to prepare  
their code for Python 3.0.  As such, many features are being  
backported from Python 3.0 to 2.6.  It makes sense to release both  
versions in at the same time, the precedence for this having been set  
with the Python 1.6 and 2.0 releases.

During the alpha testing cycle we will be releasing both versions in  
lockstep, on a monthly release cycle.  The releases will happen on the  
last Friday of every month.  If this schedule works well, we will  
continue releasing in lockstep during the beta program.  See PEP 361  
for schedule details:

     http://www.python.org/dev/peps/pep-0361/

Please note that these are alpha releases, and as such are not  
suitable for production environments.  We continue to strive for a  
high degree of quality, but there are still some known problems and  
the feature sets have not been finalized.  These alphas are being  
released to solicit feedback and hopefully discover bugs, as well as  
allowing you to determine how changes in 2.6 and 3.0 might impact  
you.  If you find things broken or incorrect, please submit a bug  
report at

     http://bugs.python.org

For more information and downloadable distributions, see the Python  
2.6 web
site:

     http://www.python.org/download/releases/2.6/

and the Python 3.0 web site:

     http://www.python.org/download/releases/3.0/

We are planning a number of additional alpha releases, with the final  
release schedule still to be determined.

Enjoy,
- -Barry

Barry Warsaw
barry@python.org
Python 2.6/3.0 Release Manager
(on behalf of the entire python-dev team)

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8mlu3EjvBPtnXfVAQKePAQAgx6w9wztfJaSWkbKrbwur2U6t6o5aIY5
pyMa00CZWY06p8099BztcSjgp5rKrd6/9V7cJ0NP7NLZ+tz20uRfyI8uqoIYBIWC
ibJay6SSnzgOQM3PRIJV/K/m0dVPPPVD1LDnoEvuu+cKUpV434yHdgWkMPswsxUd
fLydrXABlOM=
=l6aj
-----END PGP SIGNATURE-----


------------------------------

Message: 7
Date: Sat, 01 Mar 2008 19:56:28 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev] No releases tonight
To: Barry Warsaw <barry@python.org>
Cc: python-3000@python.org, python-dev@python.org,	Steve Holden
	<steve@holdenweb.com>
Message-ID: <47C9A6DC.9070708@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Barry Warsaw wrote:
> In this case, there was a lot more work to do because 2.6 wasn't tied
> in at all.  Add to the fact that I didn't have any experience with the
> website infrastructure made things a bit more difficult the first time
> out.  I still don't quite have the 2.6 links working correctly in my
> local fs.  So the biggest problem is really: what steps do you take
> when you need to expose a new major release on the website?

Starting with the first betas of 2.6 and 3.0 we should also work on
official texts for the press. Other projects like PHP are drawing lots
of attention with their releases, even with bug fix and security
releases. Bad news are better than no news - a beta release is *good* news.

When 3.0a2 was released I contacted two larger German IT news sites. Non
of them even bother to reply. :/

I propose that we provide two official texts for the press. A shorter
text which explains Python and the most important changes since the last
version in a few paragraphs and a longer, more detailed text like
Martin's text for the 2.5.2 release.

I also propose translations of the shorter text to important languages
like French, German, Japanese, Portuguese and Spanish. I'm willing to
help with the German translation.

Christian


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 3
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 2","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: test_profile failing (Barry Warsaw)
   2. Re: test_profile failing (Barry Warsaw)
   3. No releases tonight (Barry Warsaw)
   4. Re: [Python-Dev] Code freeze? (Scott Dial)


----------------------------------------------------------------------

Message: 1
Date: Fri, 29 Feb 2008 21:13:35 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Mark Dickinson"" <dickinsm@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <B74CDD27-7997-47A2-803E-C6B7319751BB@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 9:05 PM, Mark Dickinson wrote:

> On Fri, Feb 29, 2008 at 11:55 AM, Fred Drake <fdrake@acm.org> wrote:
>
>> They were failing for me a couple of days ago; checking now, they
>> still are, and test_itertools has been added to the list of failing
>> tests:
>>
>> test test_itertools failed -- Traceback (most recent call last):
>>  File ""/Users/fdrake/projects/python/py3k/Lib/test/
>> test_itertools.py"", line 698, in test_chain
>>    self.assertRaises(TypeError, chain, N(s))
>> AssertionError: TypeError not raised by chain
>>
>
> This looks like an easy one: line 698 of test_itertools.py should
> be changed from
>
>            self.assertRaises(TypeError, chain, N(s))
>
> to
>
>            self.assertRaises(TypeError, list, chain(N(s)))
>
> Here N(s) is an instance of a class lacking a __next__
> method; It looks like Raymond recently altered itertools.chain
> to consume its arguments lazily, so the TypeError used to occur
> as soon as chain(N(s)) was called, and now doesn't happen
> until chain(N(s)).__next__ is first callled.
>
> Shall I check in this fix?

Yes, thanks Mark!  Please say in the commit message that I approved it.

Brett, Neal and I spent several hours this evening trying to track  
down the test_profile failure, but we were unsuccessful.  We suspect  
it's due to a call from C that eventually ends up in StringIO.flush()  
but we were unable to find it.  I'm going to disable this test for the  
3.0 release; someone else is going to have to fix it.

BTW, I am on #python-dev now if anybody wants to help and/or chat  
about the release. I'm also on IM and Jabber.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8i7z3EjvBPtnXfVAQI1NQP/bmVWEdTKZ0niBqjVk003jT4XFiAfUAwr
NOBIK26zLbKeLOy6OiOQyIqnM7MjKweuS6MXZ95u+BUJYVBhfKgYuX2p5Cu+mwQq
N+N7Tsp5RmZ/sDSWMWU4Amsgy/3E9SIx+IesTN7/ExPwfR1GbmlOs+BFmD8+0QDC
O1rkPyaDlZs=
=ZWlC
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Fri, 29 Feb 2008 21:15:34 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] test_profile failing
To: Python 3000 <python-3000@python.org>
Message-ID: <0468F2D1-4084-44B5-B147-4A0C6DCE829D@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 9:13 PM, Barry Warsaw wrote:

> BTW, I am on #python-dev now if anybody wants to help and/or chat
> about the release. I'm also on IM and Jabber.

Oh, and I'm doing 2.6 first in case anybody is motivated to keep  
looking for the test_profile failure this evening!

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8i8R3EjvBPtnXfVAQIUJAP9FyLrvPFZKR7p57vK6gCgW7a1pOQtyJg/
s0nn5VdksgJnBtk10+9N4pCzppNW9keps2ef5nTj3InjGUzC+fFPTMd0r0DiNgTP
ilJXs0Jc9IbcFd6A/5lbsDoO8hdVdDbIuMp8Af5+1wP3/x56LR+PJ77RsHShMxpv
WmL3YjW365g=
=Agv6
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Fri, 29 Feb 2008 23:38:32 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] No releases tonight
To: Python Dev <python-dev@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <D7C34296-EB95-436E-AA17-DDD4EBCDFF22@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I tried, I really did.

Python 2.6 is nearly ready, I'm mostly trying to figure out how to  
build the web pages properly.  I haven't started on 3.0, but huge  
thanks go to Brett Cannon, Neal Norwitz, Mark Dickinson, and Fred  
Drake for helping out tonight with everything, including fixing the  
outstanding bugs in 3.0.

Python 2.6a1 is tagged and built, so feel free to commit changes to  
the trunk.

Python 3.0 is not tagged yet so if you can hold off from committing to  
that branch for a little while longer, that would be appreciated.  I  
will cut 3.0a3 tomorrow (Saturday) as early as possible.

time-to-start-drinking-ly y'rs,
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8jdyXEjvBPtnXfVAQJSowQAgIqqYKYPvzEMtvtAHiNC+OkMpO3vxelh
9kcAgXClhCS47wAMc9viJsb5Uo12f7TlOURkEjuMZ13jrBri+HCFtrAGjjHj/qHk
KyH9ua+q0dCtpg0P0CzvxznGr7k2XV5LiZit4G+UwuSokJr/F/dUDQV3jkSgWEvh
xTRj8ZZisQw=
=Hg6S
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Fri, 29 Feb 2008 03:57:47 -0500
From: Scott Dial <scott+python-dev@scottdial.com>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C7C90B.5040707@scottdial.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
>> Alterntaively, I guess you could just suggest that people check the
>> buildbot page for their platforms before downloading ....
> 
> Yes, good idea.  I'm only going to cut source tarballs for the alphas.
> 

I apologize for having doubt in your plan, and I can certainly 
appreciate the work you will be doing as release manager. But..

I don't understand who these alpha releases are supposed to be for, and 
who they will serve. When I first saw this plan, I thought ""ok, you're 
the man.."" But now I wonder even more if they are only going to be 
source tarballs. Who is the intended audience of these alphas? It seems 
like cutting only source tarballs is targeting developers, and if that 
is the case, I wonder if you have misplaced your motivations.

I'm not sure what developer outside of the core community would want to 
work with something missing key features and released fairly 
arbitrarily. Ok, I grant you that it's a monthly cycle, but there are no 
feature milestones involved, so it's fairly arbitrary from a utility 
standpoint; it's not clear to me that we are even worrying about all of 
the buildbots being green before releasing.

More to the point, I don't know why a developer wouldn't just checkout 
from SVN in any case. Certainly if they are going to help root out bugs, 
then we would like them to be using the trunk if possible. I fear that 
once an alpha is 2 weeks old, we will start saying ""please check if its 
still a problem on the trunk.""

A mild concern is how this effects checkins with individuals either 
trying to meet a deadline or even wait until after an alpha release to 
checkin a large change. I'm not sure this will happen, but having 
releases scheduled without feature milestones attached certainly changes 
the environment for work to be done in.

I guess I am hoping to understand better how these alphas serve us. 
Again, I apologize if that sounded judgmental, but I wanted to make sure 
that releasing alphas was the best plan. And again, I appreciate your 
enthusiasm and effort.

-- 
Scott Dial
scott@scottdial.com
scodial@cs.indiana.edu


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 2
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 25, Issue 1","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: test_profile failing (Brett Cannon)
   2. Re: test_profile failing (Barry Warsaw)
   3. Re: test_profile failing (Brett Cannon)
   4. Re: test_profile failing (Brett Cannon)
   5. Re: test_profile failing (Guido van Rossum)
   6. Re: test_profile failing (Brett Cannon)
   7. Re: test_profile failing (Mark Dickinson)


----------------------------------------------------------------------

Message: 1
Date: Fri, 29 Feb 2008 11:44:05 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100802291144v1a9c74f1g1d5e502cd15b2721@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
>  Hash: SHA1
>
>
> On Feb 29, 2008, at 12:49 PM, Guido van Rossum wrote:
>
>  > On Fri, Feb 29, 2008 at 9:41 AM, Guido van Rossum <guido@python.org>
>  > wrote:
>  >> It looks like the failures are shallow -- there's a ""golden"" expected
>  >> output which includes some silliness like the exact number of CPU
>  >> seconds used.
>  >
>  > Actually I take it back. The same approach works fine in the trunk, so
>  > I suspect it's a merge problem. It may be quite subtle, alas. :-(
>  >
>  > Still, we shouldn't release with this failing. It would reduce
>  > confidence in the releases and generate tons of spurious customer
>  > support calls ^W^W^W bug reports.
>
>  Of course, the /real/ bug is that a commit was allowed that broke the
>  test suite.  This failure goes back to the first rev on the buildbot
>  page 61103 so it'll take a little more investigation to see what broke
>  it.
>
>  I'll see what can be done to fix this particular problem, and try to
>  be more attentive to buildbot failure notices when they happen so we
>  can nip it closer to the bud.  Ultimately, it would be nice if we had
>  a process that prevented any breaking patch from landing, but we're
>  not there yet.

A quick tweak to test_profile to print out what it got for output
shows that some changes to io.py led to a different tracing.

-Brett


------------------------------

Message: 2
Date: Fri, 29 Feb 2008 14:57:50 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] test_profile failing
To: Brett Cannon <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <EE9C9CE8-739B-465C-9EE1-FE5BC8901442@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 2:44 PM, Brett Cannon wrote:

> On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org>  
> wrote:
>>
>> I'll see what can be done to fix this particular problem, and try to
>> be more attentive to buildbot failure notices when they happen so we
>> can nip it closer to the bud.  Ultimately, it would be nice if we had
>> a process that prevented any breaking patch from landing, but we're
>> not there yet.
>
> A quick tweak to test_profile to print out what it got for output
> shows that some changes to io.py led to a different tracing.

Thanks Brett.  Do we just need to regen the expected output then?

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8hjvnEjvBPtnXfVAQJNPgP/WSq1x89laWuptso3MNYdtmwnY7L9pZbN
0IoFlqSbPQ/iB42lbE6apAdBNwUjPBAX+IpwFMKEtbDEQzBK5GZ/smksOxyw152E
yMwJaLCnsAf/SS57cxxRv2s6bfB7XF/A1XeodtqlV3O+5seV/zHvX+5IycQ0HJ0R
Ap4uOwC8+II=
=XpFM
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Fri, 29 Feb 2008 12:01:26 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100802291201u57d40bbat4621afde41e772af@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Feb 29, 2008 at 11:57 AM, Barry Warsaw <barry@python.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
>  Hash: SHA1
>
>
> On Feb 29, 2008, at 2:44 PM, Brett Cannon wrote:
>
>  > On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org>
>  > wrote:
>  >>
>
> >> I'll see what can be done to fix this particular problem, and try to
>  >> be more attentive to buildbot failure notices when they happen so we
>  >> can nip it closer to the bud.  Ultimately, it would be nice if we had
>  >> a process that prevented any breaking patch from landing, but we're
>  >> not there yet.
>  >
>  > A quick tweak to test_profile to print out what it got for output
>  > shows that some changes to io.py led to a different tracing.
>
>  Thanks Brett.  Do we just need to regen the expected output then?

Nope, it's still failing. I think there might be a slight issue with
how it is generating. I am going to work on this for another half hour
before I need to take off for an appointment. I will send another
update before I take off.

-Brett


------------------------------

Message: 4
Date: Fri, 29 Feb 2008 12:39:38 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100802291239v3642e465y3c3df42486ac890a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Feb 29, 2008 at 11:57 AM, Barry Warsaw <barry@python.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
>  Hash: SHA1
>
>
> On Feb 29, 2008, at 2:44 PM, Brett Cannon wrote:
>
>  > On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org>
>  > wrote:
>  >>
>
> >> I'll see what can be done to fix this particular problem, and try to
>  >> be more attentive to buildbot failure notices when they happen so we
>  >> can nip it closer to the bud.  Ultimately, it would be nice if we had
>  >> a process that prevented any breaking patch from landing, but we're
>  >> not there yet.
>  >
>  > A quick tweak to test_profile to print out what it got for output
>  > shows that some changes to io.py led to a different tracing.
>
>  Thanks Brett.  Do we just need to regen the expected output then?

Ah, the joys of expected output. =)

So here is the problem, and it is probably going to mean test_profile
needs to be rewritten...

When you run ``./python Lib/test/test_profile.py -r`` it runs the
profile and rewrites the file with the golden output. That's great and
all, but there was a slight difference with that golden output and
what was being generated by ``./python Lib/test/test_profile.py``. You
know what that difference was? An extra write call in io.py.

Turns out that when the golden output is generated that all streams
have their buffers empty. But when unittest prints its whole ""__test__
.. ok"" output it has stuff in a buffer since the ""ok"" has not been
written yet (in other words sys.stdout has not been fully flushed yet
while the test is running). If you change the print() call in
test_profile.regenerate_expected_output() to ``print('Regenerating %s
... ' % filename, end='')`` then sys.stdout gets a flush() call during
the profiling for the golden output and everyone is happy.

But guess what happens when you run ``./python Lib/test/regrtest.py
test_profile``? That's right, there is no extra flush call!
regrtest.py outputs a single line, runs the test, and then prints
another line when it knows the result of the test.. Actually, there is
one less flush call in the regrtest.py case than in the generated
stuff, so I suspect regrtest or someone is doing an explicit flush or
something.

In other words, having the golden output have any I/O in it is making
it impossible to test. What would probably be best is to just strip
out any and all lines that do not directly involve profilee.py and
only compare those lines. I have no clue if a simple 'contains' check
will suffice because I don't know if the stat numbers are consistent
enough.

Anyway, I am out of time. Hopefully someone can finish up this work
some time today.

-Brett


------------------------------

Message: 5
Date: Fri, 29 Feb 2008 13:15:32 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Brett Cannon"" <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802291315o9beed6j1c9575bc47da4e9b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 29, 2008 at 12:39 PM, Brett Cannon <brett@python.org> wrote:
> On Fri, Feb 29, 2008 at 11:57 AM, Barry Warsaw <barry@python.org> wrote:
>  > -----BEGIN PGP SIGNED MESSAGE-----
>  >  Hash: SHA1
>  >
>  >
>  > On Feb 29, 2008, at 2:44 PM, Brett Cannon wrote:
>  >
>  >  > On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org>
>  >  > wrote:
>  >  >>
>  >
>  > >> I'll see what can be done to fix this particular problem, and try to
>  >  >> be more attentive to buildbot failure notices when they happen so we
>  >  >> can nip it closer to the bud.  Ultimately, it would be nice if we had
>  >  >> a process that prevented any breaking patch from landing, but we're
>  >  >> not there yet.
>  >  >
>  >  > A quick tweak to test_profile to print out what it got for output
>  >  > shows that some changes to io.py led to a different tracing.
>  >
>  >  Thanks Brett.  Do we just need to regen the expected output then?
>
>  Ah, the joys of expected output. =)
>
>  So here is the problem, and it is probably going to mean test_profile
>  needs to be rewritten...
>
>  When you run ``./python Lib/test/test_profile.py -r`` it runs the
>  profile and rewrites the file with the golden output. That's great and
>  all, but there was a slight difference with that golden output and
>  what was being generated by ``./python Lib/test/test_profile.py``. You
>  know what that difference was? An extra write call in io.py.
>
>  Turns out that when the golden output is generated that all streams
>  have their buffers empty. But when unittest prints its whole ""__test__
>  .. ok"" output it has stuff in a buffer since the ""ok"" has not been
>  written yet (in other words sys.stdout has not been fully flushed yet
>  while the test is running). If you change the print() call in
>  test_profile.regenerate_expected_output() to ``print('Regenerating %s
>  ... ' % filename, end='')`` then sys.stdout gets a flush() call during
>  the profiling for the golden output and everyone is happy.
>
>  But guess what happens when you run ``./python Lib/test/regrtest.py
>  test_profile``? That's right, there is no extra flush call!
>  regrtest.py outputs a single line, runs the test, and then prints
>  another line when it knows the result of the test.. Actually, there is
>  one less flush call in the regrtest.py case than in the generated
>  stuff, so I suspect regrtest or someone is doing an explicit flush or
>  something.
>
>  In other words, having the golden output have any I/O in it is making
>  it impossible to test. What would probably be best is to just strip
>  out any and all lines that do not directly involve profilee.py and
>  only compare those lines. I have no clue if a simple 'contains' check
>  will suffice because I don't know if the stat numbers are consistent
>  enough.
>
>  Anyway, I am out of time. Hopefully someone can finish up this work
>  some time today.

Good analysis. Can't we insert a flush somewhere before the profiler
is started so that the starting point is always with empty output
buffers?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Fri, 29 Feb 2008 14:38:38 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100802291438l1e99d864ke1888d4f19504bb1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Feb 29, 2008 at 1:15 PM, Guido van Rossum <guido@python.org> wrote:
>
> On Fri, Feb 29, 2008 at 12:39 PM, Brett Cannon <brett@python.org> wrote:
>  > On Fri, Feb 29, 2008 at 11:57 AM, Barry Warsaw <barry@python.org> wrote:
>  >  > -----BEGIN PGP SIGNED MESSAGE-----
>  >  >  Hash: SHA1
>  >  >
>  >  >
>  >  > On Feb 29, 2008, at 2:44 PM, Brett Cannon wrote:
>  >  >
>  >  >  > On Fri, Feb 29, 2008 at 11:22 AM, Barry Warsaw <barry@python.org>
>  >  >  > wrote:
>  >  >  >>
>  >  >
>  >  > >> I'll see what can be done to fix this particular problem, and try to
>  >  >  >> be more attentive to buildbot failure notices when they happen so we
>  >  >  >> can nip it closer to the bud.  Ultimately, it would be nice if we had
>  >  >  >> a process that prevented any breaking patch from landing, but we're
>  >  >  >> not there yet.
>  >  >  >
>  >  >  > A quick tweak to test_profile to print out what it got for output
>  >  >  > shows that some changes to io.py led to a different tracing.
>  >  >
>  >  >  Thanks Brett.  Do we just need to regen the expected output then?
>  >
>  >  Ah, the joys of expected output. =)
>  >
>  >  So here is the problem, and it is probably going to mean test_profile
>  >  needs to be rewritten...
>  >
>  >  When you run ``./python Lib/test/test_profile.py -r`` it runs the
>  >  profile and rewrites the file with the golden output. That's great and
>  >  all, but there was a slight difference with that golden output and
>  >  what was being generated by ``./python Lib/test/test_profile.py``. You
>  >  know what that difference was? An extra write call in io.py.
>  >
>  >  Turns out that when the golden output is generated that all streams
>  >  have their buffers empty. But when unittest prints its whole ""__test__
>  >  .. ok"" output it has stuff in a buffer since the ""ok"" has not been
>  >  written yet (in other words sys.stdout has not been fully flushed yet
>  >  while the test is running). If you change the print() call in
>  >  test_profile.regenerate_expected_output() to ``print('Regenerating %s
>  >  ... ' % filename, end='')`` then sys.stdout gets a flush() call during
>  >  the profiling for the golden output and everyone is happy.
>  >
>  >  But guess what happens when you run ``./python Lib/test/regrtest.py
>  >  test_profile``? That's right, there is no extra flush call!
>  >  regrtest.py outputs a single line, runs the test, and then prints
>  >  another line when it knows the result of the test.. Actually, there is
>  >  one less flush call in the regrtest.py case than in the generated
>  >  stuff, so I suspect regrtest or someone is doing an explicit flush or
>  >  something.
>  >
>  >  In other words, having the golden output have any I/O in it is making
>  >  it impossible to test. What would probably be best is to just strip
>  >  out any and all lines that do not directly involve profilee.py and
>  >  only compare those lines. I have no clue if a simple 'contains' check
>  >  will suffice because I don't know if the stat numbers are consistent
>  >  enough.
>  >
>  >  Anyway, I am out of time. Hopefully someone can finish up this work
>  >  some time today.
>
>  Good analysis. Can't we insert a flush somewhere before the profiler
>  is started so that the starting point is always with empty output
>  buffers?

Flushing both stdout and stderr just before the logging call still
doesn't fix it for running the test through regrtest. There is an
extra call to 'exec' (not sure if it is just a method on some object
named that or the actual built-in) triggering a call to IOBase.flush()
that is only being triggered when the test is run under regrtest.
Looking in regrtest the only exec() call is when you hunt for
refleaks, not general testing so I am not sure where it is coming
from.

-Brett


------------------------------

Message: 7
Date: Fri, 29 Feb 2008 21:05:45 -0500
From: ""Mark Dickinson"" <dickinsm@gmail.com>
Subject: Re: [Python-3000] test_profile failing
To: ""Guido van Rossum"" <guido@python.org>, 	""Python 3000""
	<python-3000@python.org>
Message-ID:
	<5c6f2a5d0802291805g2f5cb14fud307790aba1469ab@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Fri, Feb 29, 2008 at 11:55 AM, Fred Drake <fdrake@acm.org> wrote:

> They were failing for me a couple of days ago; checking now, they
> still are, and test_itertools has been added to the list of failing
> tests:
>
> test test_itertools failed -- Traceback (most recent call last):
>   File ""/Users/fdrake/projects/python/py3k/Lib/test/
> test_itertools.py"", line 698, in test_chain
>     self.assertRaises(TypeError, chain, N(s))
> AssertionError: TypeError not raised by chain
>

This looks like an easy one: line 698 of test_itertools.py should
be changed from

            self.assertRaises(TypeError, chain, N(s))

to

            self.assertRaises(TypeError, list, chain(N(s)))

Here N(s) is an instance of a class lacking a __next__
method; It looks like Raymond recently altered itertools.chain
to consume its arguments lazily, so the TypeError used to occur
as soon as chain(N(s)) was called, and now doesn't happen
until chain(N(s)).__next__ is first callled.

Shall I check in this fix?

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080229/9844e7e0/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 25, Issue 1
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 62","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: test_profile failing (Facundo Batista)
   2. Re: test_profile failing (Fred Drake)
   3. Re: test_profile failing (Guido van Rossum)
   4. Re: test_profile failing (Guido van Rossum)
   5. Re: Code freeze? (Eric Smith)
   6. Re: [Python-Dev] Code freeze? (Stephen J. Turnbull)
   7. Re: test_profile failing (Barry Warsaw)
   8. Re: Code freeze? (Barry Warsaw)
   9. Re: [Python-Dev] Code freeze? (Barry Warsaw)


----------------------------------------------------------------------

Message: 1
Date: Fri, 29 Feb 2008 14:25:20 -0200
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] test_profile failing
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<e04bdf310802290825n187da935qc2ab7b16e264c59d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/2/29, Guido van Rossum <guido@python.org>:

> Am I the only one for whom test_profile and test_cProfile are failing
>  with a current Py3k head checkout?

Both fail for me too.

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 2
Date: Fri, 29 Feb 2008 11:55:46 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] test_profile failing
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <CFDE3ABF-4F02-441C-BC86-5CA39E095319@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On Feb 29, 2008, at 11:16 AM, Guido van Rossum wrote:
> Am I the only one for whom test_profile and test_cProfile are failing
> with a current Py3k head checkout?


They were failing for me a couple of days ago; checking now, they  
still are, and test_itertools has been added to the list of failing  
tests:

test test_itertools failed -- Traceback (most recent call last):
   File ""/Users/fdrake/projects/python/py3k/Lib/test/ 
test_itertools.py"", line 698, in test_chain
     self.assertRaises(TypeError, chain, N(s))
AssertionError: TypeError not raised by chain

This is on Mac OS X 10.5.2 with no local changes.  I did a ""make  
clean; make; make test"" and still get the error.  I've no time to look  
into it right now.


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 3
Date: Fri, 29 Feb 2008 09:41:13 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Fred Drake"" <fdrake@acm.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802290941s25f8081ewbd50f50dee93a1fa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 29, 2008 at 8:55 AM, Fred Drake <fdrake@acm.org> wrote:
> On Feb 29, 2008, at 11:16 AM, Guido van Rossum wrote:
>
> > Am I the only one for whom test_profile and test_cProfile are failing
>  > with a current Py3k head checkout?
>
>
>  They were failing for me a couple of days ago; checking now, they
>  still are, and test_itertools has been added to the list of failing
>  tests:
>
>  test test_itertools failed -- Traceback (most recent call last):
>    File ""/Users/fdrake/projects/python/py3k/Lib/test/
>  test_itertools.py"", line 698, in test_chain
>      self.assertRaises(TypeError, chain, N(s))
>  AssertionError: TypeError not raised by chain
>
>  This is on Mac OS X 10.5.2 with no local changes.  I did a ""make
>  clean; make; make test"" and still get the error.  I've no time to look
>  into it right now.

We should not release with failing tests. We've got to keep *some*
standard of quality.

It looks like the failures are shallow -- there's a ""golden"" expected
output which includes some silliness like the exact number of CPU
seconds used.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Fri, 29 Feb 2008 09:49:03 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Fred Drake"" <fdrake@acm.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802290949l1327c5e1r598fe95ddce15696@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 29, 2008 at 9:41 AM, Guido van Rossum <guido@python.org> wrote:
>  It looks like the failures are shallow -- there's a ""golden"" expected
>  output which includes some silliness like the exact number of CPU
>  seconds used.

Actually I take it back. The same approach works fine in the trunk, so
I suspect it's a merge problem. It may be quite subtle, alas. :-(

Still, we shouldn't release with this failing. It would reduce
confidence in the releases and generate tons of spurious customer
support calls ^W^W^W bug reports.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Fri, 29 Feb 2008 13:08:24 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C84A18.5030602@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> On Feb 28, 2008, at 4:03 PM, Eric Smith wrote:
> 
>> Barry Warsaw wrote:
>>> -----BEGIN PGP SIGNED MESSAGE-----
>>> Hash: SHA1
>>> On Feb 28, 2008, at 2:49 PM, Christian Heimes wrote:
>>>> Hey Barry!
>>> Hi Christian!
>>>> When are you planing to freeze the code of the trunk and branches/py3k
>>>> for the upcoming alpha releases? I'll merge the last modifications  
>>>> from
>>>> 2.6 to 3.0 in a couple of minutes. All tests on Linux are looking  
>>>> good,
>>>> except for the two profile tests on 3.0. I'm going to test Windows  
>>>> later.
>>> Okay, let's go ahead and make it official.
>>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern  
>>> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to  
>>> that: 2200 UTC Friday 29-Feb-2008.
>>
>> Argh!  I was going to check the last of the PEP 3127 changes in 
>> tonight, but I won't make it by 6 pm EST.  I have them finished, but 
>> no tests written, so I'm not comfortable checking them in yet.  I 
>> guess it's no big deal that they slip until the next alpha.
> 
> Sorry, I notice my message might not have been clear.  As of this 
> writing, you have 23 hours and 54 minute before code freeze :).
> 
> Code freeze: 2200 UTC 29-Feb-2008
> Alpha making: 2300 UTC 29-Feb-2008

It turns out I'm not going to make this first alpha with the rest of the 
PEP 3127 changes.  The code doesn't handle all combinations of (int, 
long) and (str, unicode).  I'll get it finished before the next alpha.

Eric.


------------------------------

Message: 6
Date: Sat, 01 Mar 2008 03:59:03 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Scott Dial <scott+python-dev@scottdial.com>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <873arblhc8.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Not speaking for Barry or anyone else but myself.  This is an
explanation of how I understand the process and why I welcome it.

Scott Dial writes:

 > I don't understand who these alpha releases are supposed to be for, and 
 > who they will serve.

An alpha test is internal.  It is comprised of those tests the
developers working on the product (and/or an affiliated QA department)
can imagine.

Similarly, an alpha release is of, by, and for the developers.

 > I'm not sure what developer outside of the core community would
 > want to work with something missing key features and released
 > fairly arbitrarily.

Developers outside of the core community are not targeted.  That said,
how do you know that key features are missing?  Part of the point of a
release is that it says ""*this stuff* is working"".  I want *my* key
feature to be part of ""this stuff"", not *your* key feature.  Given ""my
feature,"" I download to give the team feedback as early as possible.
Lacking yours, you don't.  Next alpha, presumably our roles will be
reversed.

 > More to the point, I don't know why a developer wouldn't just checkout 
 > from SVN in any case. Certainly if they are going to help root out bugs, 
 > then we would like them to be using the trunk if possible. I fear that 
 > once an alpha is 2 weeks old, we will start saying ""please check if its 
 > still a problem on the trunk.""

Software development in practice is a matter of ""take two steps back,
then three steps forward.""  The point of an alpha release is to
checkpoint what is a regression, and what is a temporary ""feature""
introduced by new development.  The latter is admissible on the trunk,
but the goal should be none from one alpha to the next.  In other
words, a bug introduced by new development should be fixed by the next
alpha.  If it can't be, the developer misjudged the timing of the
merge to mainline; it wasn't ready yet.

 > A mild concern is how this effects checkins with individuals either 
 > trying to meet a deadline or even wait until after an alpha release to 
 > checkin a large change. I'm not sure this will happen, but having 
 > releases scheduled without feature milestones attached certainly changes 
 > the environment for work to be done in.

Scheduling feature milestones assumes that people put priority on
those features at a given time.  Barry can't assume that yet.  Once
the rhythm is established, Barry can start asking for, and some people
will start volunteering, milestone commitments for given releases.

I think that it probably is desirable to to put that deadline pressure
on.  Individuals who rush to get their work in, and cause alpha-to-
alpha regressions, can be advised to wait in the future in similar
circumstances.  Once the rhythm is established, people can expect that
alphas will be consistently increasing in features and consistently
decreasing in defects.  If that's not true, something's wrong with the
process, and the team needs to step back and do something about it.

But in the nature of software development, *monotone improvement is
not something you want to, or even can, impose on the trunk at all
points in time*.


------------------------------

Message: 7
Date: Fri, 29 Feb 2008 14:22:46 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <DD5AE829-48CB-4CB2-8950-CCC1C62CADAF@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 12:49 PM, Guido van Rossum wrote:

> On Fri, Feb 29, 2008 at 9:41 AM, Guido van Rossum <guido@python.org>  
> wrote:
>> It looks like the failures are shallow -- there's a ""golden"" expected
>> output which includes some silliness like the exact number of CPU
>> seconds used.
>
> Actually I take it back. The same approach works fine in the trunk, so
> I suspect it's a merge problem. It may be quite subtle, alas. :-(
>
> Still, we shouldn't release with this failing. It would reduce
> confidence in the releases and generate tons of spurious customer
> support calls ^W^W^W bug reports.

Of course, the /real/ bug is that a commit was allowed that broke the  
test suite.  This failure goes back to the first rev on the buildbot  
page 61103 so it'll take a little more investigation to see what broke  
it.

I'll see what can be done to fix this particular problem, and try to  
be more attentive to buildbot failure notices when they happen so we  
can nip it closer to the bud.  Ultimately, it would be nice if we had  
a process that prevented any breaking patch from landing, but we're  
not there yet.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8hbhnEjvBPtnXfVAQIUxQQAhPzrDAdBxbIRqAHSK2ipj3eD27Hvq6FR
vZFDwL7rV/tobvnacPAiZCoTXKg39PXoPZQHhPbheB7mxqMcHRLEb9Kf0GD0qhBL
GKu6p+wgJ7PUOciVlXdykE/E+3+rT0v0MXU3RcvZW7zVRidsLZmQP26OjWgFm0RW
S6VuFw7E2e0=
=kOv3
-----END PGP SIGNATURE-----


------------------------------

Message: 8
Date: Fri, 29 Feb 2008 14:23:26 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Code freeze?
To: Eric Smith <eric+python-dev@trueblade.com>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <5B7CA66C-E966-4308-9FD6-4AD7A47D0D19@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 1:08 PM, Eric Smith wrote:

> Barry Warsaw wrote:
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>> On Feb 28, 2008, at 4:03 PM, Eric Smith wrote:
>>> Barry Warsaw wrote:
>>>> -----BEGIN PGP SIGNED MESSAGE-----
>>>> Hash: SHA1
>>>> On Feb 28, 2008, at 2:49 PM, Christian Heimes wrote:
>>>>> Hey Barry!
>>>> Hi Christian!
>>>>> When are you planing to freeze the code of the trunk and  
>>>>> branches/py3k
>>>>> for the upcoming alpha releases? I'll merge the last  
>>>>> modifications  from
>>>>> 2.6 to 3.0 in a couple of minutes. All tests on Linux are  
>>>>> looking  good,
>>>>> except for the two profile tests on 3.0. I'm going to test  
>>>>> Windows  later.
>>>> Okay, let's go ahead and make it official.
>>>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm  
>>>> Eastern  (UTC-5) time or 2300 UTC.  Let's freeze the tree one  
>>>> hour prior to  that: 2200 UTC Friday 29-Feb-2008.
>>>
>>> Argh!  I was going to check the last of the PEP 3127 changes in  
>>> tonight, but I won't make it by 6 pm EST.  I have them finished,  
>>> but no tests written, so I'm not comfortable checking them in  
>>> yet.  I guess it's no big deal that they slip until the next alpha.
>> Sorry, I notice my message might not have been clear.  As of this  
>> writing, you have 23 hours and 54 minute before code freeze :).
>> Code freeze: 2200 UTC 29-Feb-2008
>> Alpha making: 2300 UTC 29-Feb-2008
>
> It turns out I'm not going to make this first alpha with the rest of  
> the PEP 3127 changes.  The code doesn't handle all combinations of  
> (int, long) and (str, unicode).  I'll get it finished before the  
> next alpha.

No problem Eric.  You know when the next alpha is coming out anyway. :)

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8hbrnEjvBPtnXfVAQKRvgP/Qe5/vCtHPX5LKklLTtcD4pnR/AtRs/V2
/VNeqkvXnr4Ooe8LwNKFMo4Yy0pdvjEQbLR/FGKojG2JIJ0kXyE2ObQXFsKCKAxV
TCr8ZPeh5wqGLYuJAXtTz/UJzf5CzkgbKY9p32u5yy5qXiP7rgGpi8JvSZJKN3cP
bApx/pGyNdU=
=GaSZ
-----END PGP SIGNATURE-----


------------------------------

Message: 9
Date: Fri, 29 Feb 2008 14:33:34 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: Scott Dial <scott+python-dev@scottdial.com>,	Python 3000
	<python-3000@python.org>, Python Dev <python-dev@python.org>
Message-ID: <079EC957-A3D3-48F9-8A77-A8BEB402E749@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 1:59 PM, Stephen J. Turnbull wrote:

> I think that it probably is desirable to to put that deadline pressure
> on.  Individuals who rush to get their work in, and cause alpha-to-
> alpha regressions, can be advised to wait in the future in similar
> circumstances.  Once the rhythm is established, people can expect that
> alphas will be consistently increasing in features and consistently
> decreasing in defects.  If that's not true, something's wrong with the
> process, and the team needs to step back and do something about it.

I agree, and what I already think is broken about our process is that  
changes can land that break the buildbots.  Ideally, this should never  
happen, but our build/test environment has two flaws.  First, it's  
retroactive not proactive.  Second, the tests themselves are not  
always stable.

Given the wide range of platforms and the volunteer nature of the  
buildbot farm, I don't think there's much right now that we can do  
about the second point.  We can do things to mitigate it though, such  
as take a majority-success approach, or give more weight to more  
stable platforms and buildbots.

The second one is tougher because more work on the process is  
necessary, and it would change our workflow for committing changes to  
the tree.  Even with its faults, I'm a big fan of PQM <https://launchpad.net/pqm 
 > though that's not something I think we're ready for.  The bigger  
question though is whether we as a development community would change  
the way we work so that nothing lands if it doesn't pass all the  
tests.  We'd be trading some inconvenience (and administrative  
headaches) for better overall quality and always-releasable guarantees.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8heD3EjvBPtnXfVAQIj/gP/dyf1oavy7y4gTrKHi+j/m+0y4DJstIDf
Fh2MhqExWtCX6V8M3mOn46uRwStwtz9+TUEznNEC8xsxq734GtVyi9Vw6cLpmZQ6
uQp+IBT+nkqNz3sDd8N/ewAGPBO5Ml2m+yn+rfi2XaT5Vfi5akSR/aDwJKGC71fL
8IaWHo5XKEM=
=JQMb
-----END PGP SIGNATURE-----


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 62
*******************************************
??????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 61","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Code freeze? (Nick Coghlan)
   2. Re: [Python-Dev] Code freeze? (Barry Warsaw)
   3. Re: [Python-Dev] Code freeze? (Nick Coghlan)
   4. Re: [Python-Dev] Code freeze? (Barry Warsaw)
   5. Re: Code freeze? (Christian Heimes)
   6. Re: Code freeze? (Nick Coghlan)
   7. Re: Code freeze? (Christian Heimes)
   8. test_profile failing (Guido van Rossum)
   9. Re: test_profile failing (Barry Warsaw)


----------------------------------------------------------------------

Message: 1
Date: Fri, 29 Feb 2008 21:39:22 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Code freeze?
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C7EEEA.3080405@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes wrote:
> Barry Warsaw wrote:
>> Okay, let's go ahead and make it official.
>>
>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern
>> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to
>> that: 2200 UTC Friday 29-Feb-2008.
> 
> Linux is looking good. I've fixed some minor Windows issue in the last
> 30 minutes. I found one strange behavior. Some tests were failing
> because iter(fileobj) where fileobj is a tempfile._TemporaryFileWrapper
> failed. Apparently iter() doesn't use __getattr__ to acquire the
> __iter__ method. Is this behavior deliberately?

The interpreter is actually permitted to bypass the instance when 
looking up magic methods. Whether it does or not is implementation 
dependent - even CPython varies its behaviour depending on the specific 
circumstance (e.g. the translation of with statements to bytecode ends 
up using normal GET_ATTR opcodes, so those will see __enter__ and 
__exit__ methods on instances, but most of the magic method lookups from 
C code bypass the instance and go straight to the relevant tp_* slot).

I'd call this behaviour a bug in _TemporaryFileWrapper, since it's 
delegation trick in __getattr__ isn't guaranteed to work for the magic 
methods. I'm actually becoming less and less enamoured of that shortcut 
every day - given that we've already had to spell out the file method 
and property delegation for SpooledTemporaryFile in 2.6, I'm tempted to 
start spelling it out for _TemporaryFileWrapper as well.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Fri, 29 Feb 2008 07:00:44 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <44FA87F7-324E-4D2A-9005-820195A4F423@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 5:21 AM, Georg Brandl wrote:

> Scott Dial schrieb:
>> Barry Warsaw wrote:
>>>> Alterntaively, I guess you could just suggest that people check the
>>>> buildbot page for their platforms before downloading ....
>>>
>>> Yes, good idea.  I'm only going to cut source tarballs for the  
>>> alphas.
>>>
>>
>> I apologize for having doubt in your plan, and I can certainly
>> appreciate the work you will be doing as release manager. But..
>>
>> I don't understand who these alpha releases are supposed to be for,  
>> and
>> who they will serve.
>
> For one thing, releases generate ""news"", meaning that people will be  
> made
> aware that things are moving, that Python is well underway to its next
> major versions, and maybe will be more inclined to look at what's new,
> or check out a release.

I completely agree.

There's another very important aspect of doing alpha releases, and  
that is to debug the /process/ of releasing.  I need to see how far  
we've come in the years since I RM'd last.  How smoothly we can  
coordinate all the various players?  What does it take to update the  
website?  Where are the glitches in the process that slows everything  
down or blocks certain steps?  What is the state of the tools, and is  
there anything else we can automate?

I also want to see if sticking to the monthly cycle can make us all  
work more productively as a community, so that we know when bugs need  
to be fixed in order to show up in the next release, and so on.

Think of it this way: the alphas are for /us/ as much as for our users.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8fz7XEjvBPtnXfVAQI0zgQAnp8nva5qxIoN4ocr7uNXeNxJ+BdP2lMA
8GN1kv3R/+9ny6h/iakfyE0lt1hvHP+uchchd4zo1CWQ390h1W8eR0SpzbubRYFP
Bvdnup7K1zSSGe0ILGoa6Zv8VCYI4vET0PsxM+bkhj8NblwQQu1xUcc6CnYBtapM
c9TwZum/ODg=
=A2cs
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Fri, 29 Feb 2008 22:39:42 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Georg Brandl <g.brandl@gmx.net>, python-3000@python.org,
	python-dev@python.org
Message-ID: <47C7FD0E.3090306@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
> Think of it this way: the alphas are for /us/ as much as for our users.

In that vein, I think the monthly alphas may also help as a means for 
setting personal deadlines for things we're working on. ""Implement for 
2.6"" is a bit of a wishy-washy deadline at some vague point in the 
future - it doesn't provide much impetus to sit down and spend an 
afternoon or evening getting it done. ""Implement for next 2.6 alpha, 
which will be cut in 3 weeks, 2 days and 16 hours"" is a real concrete 
target that can be aimed for (even if I'm the only person that knows I'm 
aiming for it for a given bug fix or feature).

It should also motivate at least a monthly review of the buildbot 
status, and is already motivating a push towards making the buildbots a 
more reliable indicator of the health of the source tree.

Sure, they may mostly be internal milestones (with third parties waiting 
for a feature-complete alpha or the first beta), but I think there is a 
decent chance the approach will turn out to be beneficial.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 4
Date: Fri, 29 Feb 2008 07:57:13 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Nick Coghlan <ncoghlan@gmail.com>
Cc: Georg Brandl <g.brandl@gmx.net>, python-3000@python.org,
	python-dev@python.org
Message-ID: <7FF2D914-8120-487E-A962-D306CA53F888@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 7:39 AM, Nick Coghlan wrote:

> Barry Warsaw wrote:
>> Think of it this way: the alphas are for /us/ as much as for our  
>> users.
>
> In that vein, I think the monthly alphas may also help as a means  
> for setting personal deadlines for things we're working on.  
> ""Implement for 2.6"" is a bit of a wishy-washy deadline at some vague  
> point in the future - it doesn't provide much impetus to sit down  
> and spend an afternoon or evening getting it done. ""Implement for  
> next 2.6 alpha, which will be cut in 3 weeks, 2 days and 16 hours""  
> is a real concrete target that can be aimed for (even if I'm the  
> only person that knows I'm aiming for it for a given bug fix or  
> feature).
>
> It should also motivate at least a monthly review of the buildbot  
> status, and is already motivating a push towards making the  
> buildbots a more reliable indicator of the health of the source tree.
>
> Sure, they may mostly be internal milestones (with third parties  
> waiting for a feature-complete alpha or the first beta), but I think  
> there is a decent chance the approach will turn out to be beneficial.

That's my hope too!
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8gBKnEjvBPtnXfVAQK5egP+JgrZd68JtkyhLOGhcd0aBjhQEJM4e2FO
HcRION8EeI4jhg5KQWOt/KmP6CBLblGq50RFI0afsLaJVapk4U6MFTB0LQus3LgX
myd0zK5egu+sblFfKFfe5mMKn5T1Mx5HCLuOE4g3uwuFtdddsGMvYwCyqjm3smq1
T38bbujy234=
=xSv1
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Fri, 29 Feb 2008 14:09:51 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Code freeze?
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fq908c$gaq$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Nick Coghlan wrote:
> The interpreter is actually permitted to bypass the instance when 
> looking up magic methods. Whether it does or not is implementation 
> dependent - even CPython varies its behaviour depending on the specific 
> circumstance (e.g. the translation of with statements to bytecode ends 
> up using normal GET_ATTR opcodes, so those will see __enter__ and 
> __exit__ methods on instances, but most of the magic method lookups from 
> C code bypass the instance and go straight to the relevant tp_* slot).

I suspected the different behavior is related to C type slots as well.
tp_iter is part of the PyTypeObject struct and the __enter__ and
__exit__ methods are ordinary methods. I just wasn't sure if the
behavior is correct. I've never encountered a problem with the dark
corners of the language so far. ;)

I did some further testing. iter() doesn't even go through
__getattribute__. It grabs the class and does a lookup on the class.

>>> class Example(object):
...     def __getattribute__(self, name):
...         print name
...         return object.__getattribute__(self, name)
>>> e = Example()
>>> iter(e)
__class__
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
TypeError: 'Example' object is not iterable

That's either a bug or at least a big gotcha for developers of proxy
objects. At least I expected that __getattribute__ is called for *every*
attribute including magic methods.

Is this documented somewhere? The docs say ""See the
:meth:`__getattribute__` method below for a way to actually get total
control over attribute access."".

Christian



------------------------------

Message: 6
Date: Sat, 01 Mar 2008 00:30:39 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Code freeze?
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47C8170F.2050003@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes wrote:
> Is this documented somewhere? The docs say ""See the
> :meth:`__getattribute__` method below for a way to actually get total
> control over attribute access."".

I just checked, and the restriction is now documented in the development 
docs in the section on special methods at [1]. It was backported from 
the Py3k docs and isn't part of the docs for 2.5 or earlier versions.

The gist is that special methods *must* be defined directly on a 
new-style class in order for the interpreter to reliably access them, 
but defining them on a new-style instance *may* still affect the 
interpreter's behaviour in some cases (but won't necessarily do so).

In composing this response, I also realised why the new tempfile tests 
worked for me before I checked them in: I was testing it on the trunk, 
where _TemporaryFileWrapper is a classic class. Special method lookup on 
classic classes doesn't include the 'direct-to-type' optimisation, so 
those tests work with the tempfile module as written on 2.x.

Unfortunately, proxies like _TemporaryFileWrapper that rely on 
__getattr__ to provide special methods simply won't work properly when 
implemented as new-style classes - for that, they need to spell out the 
overridden special methods the way SpooledTemporaryFile does.

I think we may need a -3 warning that detects situations where ""__*__"" 
attributes are retrieved via a __getattr__ implementation on a classic 
class - classes being used that way have a very high chance of breaking 
when ported to 3.0 and I can't see any possible way for 2to3 to detect them.

Cheers,
Nick.

[1]
http://docs.python.org/dev/reference/datamodel.html#special-method-names

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 7
Date: Fri, 29 Feb 2008 15:54:39 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Code freeze?
To: Nick Coghlan <ncoghlan@gmail.com>
Cc: python-3000@python.org, python-dev@python.org
Message-ID: <47C81CAF.6070004@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Nick Coghlan wrote:
> In composing this response, I also realised why the new tempfile tests 
> worked for me before I checked them in: I was testing it on the trunk, 
> where _TemporaryFileWrapper is a classic class. Special method lookup on 
> classic classes doesn't include the 'direct-to-type' optimisation, so 
> those tests work with the tempfile module as written on 2.x.

tempfile is also using different implementation for TemporaryFile on
Win32. On Windows it's an alias for NamedTemporaryFile while on Unix
it's using a file descriptor of an unlinked file.

Christian


------------------------------

Message: 8
Date: Fri, 29 Feb 2008 08:16:14 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] test_profile failing
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<ca471dc20802290816l125bd069y17e300542c17c7e6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Am I the only one for whom test_profile and test_cProfile are failing
with a current Py3k head checkout?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Fri, 29 Feb 2008 11:20:07 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] test_profile failing
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <EB8CDB10-1B0F-4185-8E73-3270C8EF3A3A@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 29, 2008, at 11:16 AM, Guido van Rossum wrote:

> Am I the only one for whom test_profile and test_cProfile are failing
> with a current Py3k head checkout?

No, they're failing across the board afaict.  I won't have time to  
look at them before tonight, but it would be great if we can fix them  
before I cut the alphas.  I think they're the only failures in the 3.0  
test suite.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8gwuHEjvBPtnXfVAQJclQP/Sz90X6qj0BWxaadmzO4Kr+bqJL2yq4gK
vscxkuGxt6leh/ojMgn8esSoGGZsy0GhCQgfagP93txc7MI36ZiYheZoyRFUwUCG
3Y/W+0E0yArShXhgQ/V8yfIN1tTq7iQxzIiJvHrZ9g2xOMh+j7leSxRk8j+vW7TL
+ye8u8r7dvQ=
=C0ir
-----END PGP SIGNATURE-----


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 61
*******************************************
???????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 60","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Code freeze? (Christian Heimes)
   2. Re: Code freeze? (Chris Mellon)
   3. Re: Code freeze? (Barry Warsaw)
   4. Re: [Python-Dev]  Code freeze? (Barry Warsaw)
   5. Re: Code freeze? (Christian Heimes)
   6. Re: Code freeze? (Eric Smith)
   7. Re: [Python-Dev] Code freeze? (Stephen J. Turnbull)
   8. Re: Code freeze? (Barry Warsaw)
   9. Re: [Python-Dev] Code freeze? (Barry Warsaw)
  10. Re: Code freeze? (Eric Smith)


----------------------------------------------------------------------

Message: 1
Date: Thu, 28 Feb 2008 20:49:46 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: [Python-3000] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C7105A.20908@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Hey Barry!

When are you planing to freeze the code of the trunk and branches/py3k
for the upcoming alpha releases? I'll merge the last modifications from
2.6 to 3.0 in a couple of minutes. All tests on Linux are looking good,
except for the two profile tests on 3.0. I'm going to test Windows later.

Christian


------------------------------

Message: 2
Date: Thu, 28 Feb 2008 14:03:51 -0600
From: ""Chris Mellon"" <arkanes@gmail.com>
Subject: Re: [Python-3000] Code freeze?
To: ""Python 3000"" <python-3000@python.org>,	""Python Dev""
	<python-dev@python.org>
Message-ID:
	<4866bea60802281203p29caa500q53de0ddb6fb92a82@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 28, 2008 at 1:49 PM, Christian Heimes <lists@cheimes.de> wrote:
> Hey Barry!
>
>  When are you planing to freeze the code of the trunk and branches/py3k
>  for the upcoming alpha releases? I'll merge the last modifications from
>  2.6 to 3.0 in a couple of minutes. All tests on Linux are looking good,
>  except for the two profile tests on 3.0. I'm going to test Windows later.
>

Would a call for third-party module maintainer updates be justified?
pysqlite in particular has advanced a couple versions since 2.5, and
it'd be nice if the latest made it into 2.6.


------------------------------

Message: 3
Date: Thu, 28 Feb 2008 15:51:13 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Code freeze?
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <00E337B6-FFC8-43C8-BA9F-142725954320@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 28, 2008, at 2:49 PM, Christian Heimes wrote:

> Hey Barry!

Hi Christian!

> When are you planing to freeze the code of the trunk and branches/py3k
> for the upcoming alpha releases? I'll merge the last modifications  
> from
> 2.6 to 3.0 in a couple of minutes. All tests on Linux are looking  
> good,
> except for the two profile tests on 3.0. I'm going to test Windows  
> later.

Okay, let's go ahead and make it official.

I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern  
(UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to  
that: 2200 UTC Friday 29-Feb-2008.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8cewnEjvBPtnXfVAQJSpQP/aWjpFbTAETdHGnp0IOEagaXNojwJEBBl
llFAE6FQI+WjPxNDAG6Y8T0y4kdiBVubMA7yfp+wXZdn+zpO/4D5OtBVeAoGVjLj
Tg1Ws1Y2uEf7Ah4lRqLya1tfgO+rnKJ38vsCit58XACYVGKWDpD0mVu+An7+6Jmj
rtlEjwGpvFQ=
=jIiD
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Thu, 28 Feb 2008 15:55:26 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev]  Code freeze?
To: ""Chris Mellon"" <arkanes@gmail.com>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <8C97586F-C049-4574-817C-34EB4D4C0C7A@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 28, 2008, at 3:03 PM, Chris Mellon wrote:

> On Thu, Feb 28, 2008 at 1:49 PM, Christian Heimes <lists@cheimes.de>  
> wrote:
>> Hey Barry!
>>
>> When are you planing to freeze the code of the trunk and branches/ 
>> py3k
>> for the upcoming alpha releases? I'll merge the last modifications  
>> from
>> 2.6 to 3.0 in a couple of minutes. All tests on Linux are looking  
>> good,
>> except for the two profile tests on 3.0. I'm going to test Windows  
>> later.
>>
>
> Would a call for third-party module maintainer updates be justified?
> pysqlite in particular has advanced a couple versions since 2.5, and
> it'd be nice if the latest made it into 2.6.

There's still plenty of time for stuff to make it into 2.6 -- this is  
only an alpha release!  I encourage people to get their changes in now  
if they want them reflected in the next alphas, but I intend to cut  
the release from whatever's in svn at 2300 UTC tomorrow.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8cfvnEjvBPtnXfVAQJKSwP+M5RzAFsQ3fNSwwYzRa+j3EaocwLgWJ+i
QVLxALoH+ha6yWQDmdQJCvm4H+DPBSnz9o/ejuJ3Wuhf9TEIWBLjuwB1rM8qm7mB
blaaNVV9eOXfORjlQ3PvwGblfwmGMGFUKfTuta8BZqkxtEzNKL5tDvgVdx98rbTV
VEyfj7ap3BM=
=dsql
-----END PGP SIGNATURE-----


------------------------------

Message: 5
Date: Thu, 28 Feb 2008 22:15:04 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <47C72458.8090306@cheimes.de>
Content-Type: text/plain; charset=""iso-8859-1""

Barry Warsaw wrote:
> Okay, let's go ahead and make it official.
> 
> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern
> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to
> that: 2200 UTC Friday 29-Feb-2008.

Linux is looking good. I've fixed some minor Windows issue in the last
30 minutes. I found one strange behavior. Some tests were failing
because iter(fileobj) where fileobj is a tempfile._TemporaryFileWrapper
failed. Apparently iter() doesn't use __getattr__ to acquire the
__iter__ method. Is this behavior deliberately?

Christian


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 252 bytes
Desc: OpenPGP digital signature
Url : http://mail.python.org/pipermail/python-3000/attachments/20080228/948cd274/attachment-0001.pgp 

------------------------------

Message: 6
Date: Thu, 28 Feb 2008 16:03:28 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	Python Dev <python-dev@python.org>
Message-ID: <47C721A0.6060802@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> On Feb 28, 2008, at 2:49 PM, Christian Heimes wrote:
> 
>> Hey Barry!
> 
> Hi Christian!
> 
>> When are you planing to freeze the code of the trunk and branches/py3k
>> for the upcoming alpha releases? I'll merge the last modifications  
>> from
>> 2.6 to 3.0 in a couple of minutes. All tests on Linux are looking  
>> good,
>> except for the two profile tests on 3.0. I'm going to test Windows  
>> later.
> 
> Okay, let's go ahead and make it official.
> 
> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern  
> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to  
> that: 2200 UTC Friday 29-Feb-2008.

Argh!  I was going to check the last of the PEP 3127 changes in tonight, 
but I won't make it by 6 pm EST.  I have them finished, but no tests 
written, so I'm not comfortable checking them in yet.  I guess it's no 
big deal that they slip until the next alpha.

Eric.



------------------------------

Message: 7
Date: Fri, 29 Feb 2008 07:07:04 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <87hcfsloqf.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Barry Warsaw writes:

 > I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern  
 > (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to  
 > that: 2200 UTC Friday 29-Feb-2008.

Is that enough time for the buildbots to do their thing and for you to
look at the page?

Alterntaively, I guess you could just suggest that people check the
buildbot page for their platforms before downloading ....





------------------------------

Message: 8
Date: Thu, 28 Feb 2008 17:07:03 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Code freeze?
To: Eric Smith <eric+python-dev@trueblade.com>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	Python Dev <python-dev@python.org>
Message-ID: <59F9E6AD-3FED-498B-960A-5CD0426FB409@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 28, 2008, at 4:03 PM, Eric Smith wrote:

> Barry Warsaw wrote:
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>> On Feb 28, 2008, at 2:49 PM, Christian Heimes wrote:
>>> Hey Barry!
>> Hi Christian!
>>> When are you planing to freeze the code of the trunk and branches/ 
>>> py3k
>>> for the upcoming alpha releases? I'll merge the last  
>>> modifications  from
>>> 2.6 to 3.0 in a couple of minutes. All tests on Linux are looking   
>>> good,
>>> except for the two profile tests on 3.0. I'm going to test  
>>> Windows  later.
>> Okay, let's go ahead and make it official.
>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern   
>> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to   
>> that: 2200 UTC Friday 29-Feb-2008.
>
> Argh!  I was going to check the last of the PEP 3127 changes in  
> tonight, but I won't make it by 6 pm EST.  I have them finished, but  
> no tests written, so I'm not comfortable checking them in yet.  I  
> guess it's no big deal that they slip until the next alpha.

Sorry, I notice my message might not have been clear.  As of this  
writing, you have 23 hours and 54 minute before code freeze :).

Code freeze: 2200 UTC 29-Feb-2008
Alpha making: 2300 UTC 29-Feb-2008

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8cwh3EjvBPtnXfVAQLRSAP/XalWCb1ArFUxoa0OQlA0T7Rw7Si3AFYu
mXRTlU0kqptiYDiHYbPaQwzFwI3xgUBCG5qUnFFq3PCLrxmd6ilYcWAhErSGmxOS
PAWfmrxZElAxqXHviOPQw5dlnoD8JhDudArgn74zRHHluazZYR4r+fCvN8fV0gKc
zRDt8Owdwng=
=uCn6
-----END PGP SIGNATURE-----


------------------------------

Message: 9
Date: Thu, 28 Feb 2008 17:09:45 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] [Python-Dev] Code freeze?
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID: <476595E7-1350-40F1-8E64-EB4EB64F69DB@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 28, 2008, at 5:07 PM, Stephen J. Turnbull wrote:

> Barry Warsaw writes:
>
>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern
>> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to
>> that: 2200 UTC Friday 29-Feb-2008.
>
> Is that enough time for the buildbots to do their thing and for you to
> look at the page?

I don't know, but we'll find out!  The first time (in years) will be a  
bit of a trial-and-error for me.  I can always get dinner in the  
middle of it. :)

> Alterntaively, I guess you could just suggest that people check the
> buildbot page for their platforms before downloading ....

Yes, good idea.  I'm only going to cut source tarballs for the alphas.

- -Barry


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8cxKXEjvBPtnXfVAQLgqwQAiiQUL1lhQM6EmYr8bvZNW2h97ziKGtpf
mVTiNOCJZ1xZ6vKkcmR3Asd+Cwm7B2eT+sVLEpq+Z6tbki+7o0wXC4V6h/ar+zMz
dQcR0QdwM218hioOiIVhtZXbWUTLGndWVviKBcoOdw6qwTbWFspCMV0+FEzdiNUN
V0bDUjn4zkI=
=uPib
-----END PGP SIGNATURE-----


------------------------------

Message: 10
Date: Thu, 28 Feb 2008 18:31:45 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Code freeze?
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	Python Dev <python-dev@python.org>
Message-ID: <47C74461.20103@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Barry Warsaw wrote:
>>> Okay, let's go ahead and make it official.
>>> I plan on cutting the alphas for 2.6 and 3.0 at about 6pm Eastern  
>>> (UTC-5) time or 2300 UTC.  Let's freeze the tree one hour prior to  
>>> that: 2200 UTC Friday 29-Feb-2008.
>>
>> Argh!  I was going to check the last of the PEP 3127 changes in 
>> tonight, but I won't make it by 6 pm EST.  I have them finished, but 
>> no tests written, so I'm not comfortable checking them in yet.  I 
>> guess it's no big deal that they slip until the next alpha.
> 
> Sorry, I notice my message might not have been clear.  As of this 
> writing, you have 23 hours and 54 minute before code freeze :).
> 
> Code freeze: 2200 UTC 29-Feb-2008
> Alpha making: 2300 UTC 29-Feb-2008

Your message was clear, it's my reading comprehension that is low.  Now 
you've removed my excuse for not getting this done.  To the keyboard!

Eric.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 60
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 59","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  Python 2.6 and 3.0 (Martin v. L?wis)
   2. Re: [Python-Dev]  Python 2.6 and 3.0 (Trent Nelson)


----------------------------------------------------------------------

Message: 1
Date: Wed, 27 Feb 2008 21:56:12 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Trent Nelson <tnelson@onresolve.com>
Cc: 'Python 3000' <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	'python-dev Dev' <python-dev@python.org>
Message-ID: <47C5CE6C.8020602@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>> (unless a complete working solution is presented in that other
>> technology, and as long as that other technology still creates MSI
>> files with free-as-in-beer tools).
> 
> Just out of interest, what's the reason for enforcing that the
> installer must be an MSI?  Or, rather, if I were to present an
> alternative .exe installer that ticks all of the above boxes, exceeds
> the capabilities of the current installer and above all is easier to
> extend and maintain -- would that be a non-starter because it's not
> an MSI?

Not necessarily - it is just very hard to provide the same features
as MSI, but with a different tool. It seems that most tools have given
up the battle against MSI, and now provide just another layer on top
of MSI (just as my msilib does, or WiX).

Regards,
Martin



------------------------------

Message: 2
Date: Wed, 27 Feb 2008 12:26:19 -0800
From: Trent Nelson <tnelson@onresolve.com>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: "" \""Martin v. L?wis\"" "" <martin@v.loewis.de>, Christian	Heimes
	<lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID:
	<87D3F9C72FBF214DB39FA4E3FE618CDC6E160CEDC4@EXMBX04.exchhosting.com>
Content-Type: text/plain; charset=""iso-8859-1""

> (unless a complete working solution is presented in that other technology,
> and as long as that other technology still creates MSI files with free-as-in-beer tools).

Just out of interest, what's the reason for enforcing that the installer must be an MSI?  Or, rather, if I were to present an alternative .exe installer that ticks all of the above boxes, exceeds the capabilities of the current installer and above all is easier to extend and maintain -- would that be a non-starter because it's not an MSI?

    Trent.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 59
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 58","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] Python 2.6 and 3.0 (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Tue, 26 Feb 2008 23:42:42 +0100
From: Christian Heimes <christian@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev] Python 2.6 and 3.0
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C495E2.2090705@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
>> The Windows builds are hidden in the development section. It took me 10
>> minutes to find them because I was searching in the download section and
>> for nightly builds. The *daily* builds are available at
>> http://www.python.org/dev/daily-msi/
>
> The builds occur 11:00 UTC (2.5), 12:00 UTC (2.6) and 13:00 UTC (3.0).
> What that's at day or at night depends on where you live :-)

Trust me, the day and night cycle of our sun can be unrelated to the day
and night cycle of my life. I define morning as the time span after my
first coffee. I sometimes work until dawn so technically speaking 11:00
UTC could fit my definition of nightly build. :)

Christian


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 58
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 57","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Python 2.6 and 3.0 (Barry Warsaw)
   2. Re: [Python-Dev]  Python 2.6 and 3.0
      (Jeroen Ruigrok van der Werven)
   3. Re: Python 2.6 and 3.0 (Christian Heimes)
   4. Re: [Python-Dev]  Python 2.6 and 3.0 (Martin v. L?wis)
   5. Re: Python 2.6 and 3.0 (Martin v. L?wis)
   6. Re: [Python-Dev]  Python 2.6 and 3.0 (Martin v. L?wis)
   7. Re: Python 2.6 and 3.0 (Travis Oliphant)
   8. Re: [Python-Dev] Python 2.6 and 3.0 (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Tue, 26 Feb 2008 07:28:20 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <7DC2E52B-1F40-4DFB-9680-5410DD9E854E@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 25, 2008, at 7:11 PM, Christian Heimes wrote:

> Barry Warsaw wrote:
>> From the follow ups, it sounds like others can pitch in here.  A
>> question though: is it reasonable to hold up the monthly release  
>> because
>> a binary build we're going to make available can't be done at the  
>> same
>> time?
>>
>> My preference (at least for the alphas) is ""no"".  If we can make a
>> source release, and if we can build a binary release from exactly the
>> same revision, then we should go ahead and release.  I'd rather get  
>> the
>> alpha out there and in people's hands.
>>
>> We'll almost certainly be stricter for the candidates, finals, and  
>> maybe
>> betas.
>
> I agree. It's not reasonable to hold of alphas because the Windows
> binaries may be released a few days later. Do we need official Windows
> binaries for alphas at all? Martin's buildbot creates nightly Windows
> builds. We could point users to the nightly builds and ask them to  
> test
> the version.

That would be find with me.  Where are those Windows binaries  
available for download from?

>> Dang.  I actually don't know how long it's going to take me to do the
>> source release, but I hope it's no more than 3 or 4 hours.
>
> I guess it's less than 2 hours. You can prepare most of the work like
> the announcements a couple of days earlier. I (perhaps naively) assume
> you have to smack the whip to get everything in place, do the svn cp  
> to
> tag, svn export, tar cz, tar xzf && ./configure && make && make test
> dance and upload the tar.gz. Am I missing something important? :]

Dunno yet!  It's been years since I did a release and I really want to  
check out Anthony's welease tool this time.  I may not have time  
before Friday to look at this though.

>> When's the PSF gonna start hiring? :)
>
> Dunno :) But I'm probably the last in a long line of Python core
> developers to get hired. Don't forget I'm still fresh and a junior  
> core
> developer. *jk*

:)

>> So, as I mentioned in my last reply, I'm planning to only allow  
>> critical
>> bugs (as described in roundup) hold up the release.  Right now  
>> there are
>> no critical bugs open.
>
> #1569 is critical but not important enough to stop an alpha. As I said
> in the other mail it should be fixed for the first beta and must be
> fixed for the first rc.

It's not marked critical in roundup, and that's the only thing I'm  
going by!  But it doesn't seem critical in the sense that it should  
hold up the alpha release, IMO.

Cheers,
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8QF5nEjvBPtnXfVAQJhrgP/Xz3IQrlCB9QPGsMGIL+xG3I5t+aThNg6
4n/bMjt4DRzTCRiNBjUllyCb5+VtPfTZu2wFVdi5I7NLMDG4WI4jfDGZlhvodbHW
TPG/7bN/ykx9yE1hUPI5X+Kqrg0lG7Tbp9Zev5eHJCMwParSVu+hfWqD48+1bQqw
JGfzz8AlqE0=
=PQgE
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Tue, 26 Feb 2008 07:31:04 +0100
From: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Martin v. L?wis <martin@v.loewis.de>
Cc: 'Python 3000' <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	'python-dev Dev' <python-dev@python.org>
Message-ID: <20080226063104.GU66273@nexus.in-nomine.org>
Content-Type: text/plain; charset=utf-8

-On [20080225 23:03], ""Martin v. L?wis"" (martin@v.loewis.de) wrote:
>No, I still haven't found a solution. I do want to use the merge
>module; anything else probably isn't going to work.

I updated the ticket with some links to how to approach this issue.

-- 
Jeroen Ruigrok van der Werven <asmodai(-at-)in-nomine.org> / asmodai
????? ?????? ??? ?? ??????
http://www.in-nomine.org/ | http://www.rangaku.org/
To conquer fear is the beginning of wisdom...


------------------------------

Message: 3
Date: Tue, 26 Feb 2008 15:13:54 +0100
From: Christian Heimes <christian@cheimes.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C41EA2.4070508@cheimes.de>
Content-Type: text/plain; charset=""iso-8859-1""

Barry Warsaw wrote:
> That would be find with me.  Where are those Windows binaries available
> for download from?

The Windows builds are hidden in the development section. It took me 10
minutes to find them because I was searching in the download section and
for nightly builds. The *daily* builds are available at
http://www.python.org/dev/daily-msi/

Christian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 252 bytes
Desc: OpenPGP digital signature
Url : http://mail.python.org/pipermail/python-3000/attachments/20080226/e9756b6b/attachment-0001.pgp 

------------------------------

Message: 4
Date: Tue, 26 Feb 2008 21:13:14 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Mark Hammond <mhammond@skippinet.com.au>
Cc: 'Python 3000' <python-3000@python.org>,	'Jeroen Ruigrok van der
	Werven' <asmodai@in-nomine.org>,	'Christian Heimes'
	<lists@cheimes.de>,	'python-dev Dev' <python-dev@python.org>
Message-ID: <47C472DA.1070708@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> My problem is still getting my head
> around various MSI issues at any level (eg, bdist_msi needs some tweaking to
> allow for different releases of the same ""package"" to be recognized as such,
> but I'm not sure what MSI concept I'm dealing with yet...)

Don't hesitate to ask here. Not sure what problem you are talking to 
specifically, but I guess you are asking for ""upgrade codes""; there is
also upgrade codes and package codes.

Each package file should have its own unique *package? code, mere 
rebuilding should generate a new one. msilib does that correctly.
A package code code can be installed at most once on a system.

Related packages for the same software should share a *product* code.
Rebuilding should not change the package code (but might in msilib;
I'd have to check). Again, installer enforces that a specific package
code can only be installed once on a system. Python assigns a
separate product code for each bug fix release. Product codes
are most useful for uninstallation, e.g. to uninstall Python 2.5.1,
do

   msiexec /x {31800004-6386-4999-a519-518f2d78d8f0}

Use separate product codes if you want to allow for simultaneous
versions.

Subsequent versions of the same product should share an *upgrade*
code. MSI will check the Upgrade table, to see whether a package
with the same upgrade code (but a different product code) is
already installed, and if so, whether the version range matches.
If the installed product is newer, it will refuse to install the
older one. If the installed product is older, it will perform
an ""upgrade installation"", which involves uninstalling the older
version (possibly on a file-by-file basis), and possibly
migrating the feature selections.

Python uses a single upgrade code (until 2.5.2, which introduces
a separate upgrade code for Win64). It then uses version ranges
to make 2.5.2 an upgrade of 2.5.1 and 2.5.0, but not of 2.4.2
(say), essentially causing only one bug fix release per 2.5.x
to be installed on the system, but allowing simultaneous
installation of 2.5 and 2.4 (say). With 2.5.2, simultaneous
installation of Win64 and Win32 releases on a single system becomes
possible - which also requires to assign separate product codes
to Win64, namely

    2.5.2, Win32: 6b976adf-8ae8-434e-b282-a06c7f624d2f
    2.5.2, Win64: 6b976adf-8ae8-434e-b282-a06c7f624d20

> WiX is an excellent inspiration though - if a WiX example can be found for
> something, it should be a significant help in implementing it via msilib.

The current challenge is merge modules: How can I merge the VC msm into
the Python MSI (including support for SxS).

Regards,
Martin


------------------------------

Message: 5
Date: Tue, 26 Feb 2008 21:26:20 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C475EC.1020004@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>> No, I still haven't found a solution. I do want to use the merge
>> module; anything else probably isn't going to work.
> 
> Da...ng
> Didn't you prepare a new MSI installer for 3.0a2 that includes the VS
> Redist MSM for X86? I vaguely remember that you've replaced my installer
> with a new one.

Right. I produced a package that ships the CRT, but not by using the
merge module. Instead, I arranged to include sufficient copies of the
manifest file to make it work in the non-admin installation (and yes,
you do need to install multiple copies of it - just see the 3.0a2 MSI
file).

> The issue should be resolved before Python 2.6 and 3.0 are reaching beta
> stage. Maybe we can get some help from outside?

Perhaps. I'm confident that I can find a solution when I get the time;
I'm not so confident that I can find the time, though. Of course, I 
would prefer if the outside help would propose something better than
""switch to this completely different technology; it may work"" (unless
a complete working solution is presented in that other technology, and
as long as that other technology still creates MSI files with
free-as-in-beer tools).

In any case, contributions are welcome.

Regards,
Martin


------------------------------

Message: 6
Date: Tue, 26 Feb 2008 21:35:10 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	Jeroen Ruigrok van der
	Werven <asmodai@in-nomine.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C477FE.3000301@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> What do you think?

Feel free to try it out. I'm skeptical that it will be a better overall
solution than the current one - the main difference would be that, 
rather than me being the only one who can realistically change the
packaging chain, it would be you who is the only one - which, in 
principle, would be fine with me.

I believe you need deep inside knowledge of the MSI database format
for WiX, just as you do for using the automation API. I think I could
learn WiX fairly quickly after all these years of learning MSI in the
first place. I think the WiX designers did right in tying WiX so close
to the MSI data model, but it means that WiX makes package creation not
simpler - merely more productive for the experienced user (who I
hesitate to call WiXers :-)

In any case, when you work with WiX, I'm sure you'll gain a lot of
expert knowledge on Windows packaging. Depending on your job situation,
that might pay some day :-)

Regards,
Martin


------------------------------

Message: 7
Date: Tue, 26 Feb 2008 14:51:59 -0600
From: Travis Oliphant <oliphant.travis@ieee.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fq1u5g$d4p$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis wrote:
>>> No, I still haven't found a solution. I do want to use the merge
>>> module; anything else probably isn't going to work.
>> Da...ng
>> Didn't you prepare a new MSI installer for 3.0a2 that includes the VS
>> Redist MSM for X86? I vaguely remember that you've replaced my installer
>> with a new one.
> 
> Right. I produced a package that ships the CRT, but not by using the
> merge module. Instead, I arranged to include sufficient copies of the
> manifest file to make it work in the non-admin installation (and yes,
> you do need to install multiple copies of it - just see the 3.0a2 MSI
> file).
> 
>> The issue should be resolved before Python 2.6 and 3.0 are reaching beta
>> stage. Maybe we can get some help from outside?
> 
> Perhaps. I'm confident that I can find a solution when I get the time;
> I'm not so confident that I can find the time, though. Of course, I 
> would prefer if the outside help would propose something better than
> ""switch to this completely different technology; it may work"" (unless
> a complete working solution is presented in that other technology, and
> as long as that other technology still creates MSI files with
> free-as-in-beer tools).
> 
> In any case, contributions are welcome.
>

I've been involved in packaging MSI's at Enthought for a few months now 
and I have been using Martin's msi Tool extensively.  We explored 
several other options (including WiX) before settling back to Martin's 
tool.  It is really a fantastic thing.

I've changed a few things in msilib that I will offer back (as soon as 
I'm happy with the results) --- mainly in the area of File-Table naming 
strategies to avoid conflicts, error reporting, and adding custom 
actions.  We also have a large file schema that we are using (because 
our MSI has over 40,000 files in it).

We are able to package the entire Enthought Python Distribution (which 
includes python 2.5.2 plus about 70 other packages as eggs) into an MSI 
using a modified version of Martin's tool.   If you want to check out 
the beta you can get the 174 MB download here (the official beta 
announcement will be tomorrow so you might want to wait a bit):

http://code.enthought.com/downloads/epd/enthought_python-2.5.2001.msi

My main purpose in posting to this thread is to offer kudos to Martin 
and advertise the utility of the msi-generation tools that he has 
provided.

Thanks for your very useful tool Martin,


-Travis Oliphant



------------------------------

Message: 8
Date: Tue, 26 Feb 2008 22:19:00 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev] Python 2.6 and 3.0
To: Christian Heimes <christian@cheimes.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C48244.4060404@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> The Windows builds are hidden in the development section. It took me 10
> minutes to find them because I was searching in the download section and
> for nightly builds. The *daily* builds are available at
> http://www.python.org/dev/daily-msi/

The builds occur 11:00 UTC (2.5), 12:00 UTC (2.6) and 13:00 UTC (3.0).
What that's at day or at night depends on where you live :-)

Regards,
Martin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 57
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 56","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  Python 2.6 and 3.0 (Martin v. L?wis)
   2. Re: [Python-Dev]  Python 2.6 and 3.0 (Martin v. L?wis)
   3. Re: Python 2.6 and 3.0 (David Bolen)
   4. Re: Python 2.6 and 3.0 (Christian Heimes)
   5. Re: [Python-Dev]  Python 2.6 and 3.0 (Christian Heimes)
   6. Re: Python 2.6 and 3.0 (Christian Heimes)
   7. Re: [Python-Dev]  Python 2.6 and 3.0 (Mark Hammond)


----------------------------------------------------------------------

Message: 1
Date: Mon, 25 Feb 2008 23:02:36 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Cc: 'Python 3000' <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>,	'python-dev Dev' <python-dev@python.org>
Message-ID: <47C33AFC.8010307@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

>> For the MSI installers you also need Python 2.5, your pywin32 package
>> and some additional tools like the help compiler and cabarc.exe.
> 
> Have you looked at http://wix.sourceforge.net/ ?

Yes.

Martin



------------------------------

Message: 2
Date: Mon, 25 Feb 2008 23:06:11 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	Jeroen Ruigrok van der
	Werven <asmodai@in-nomine.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C33BD3.5040003@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> On the one hand a XML based MSI generator could be easier to maintain.

I've looked at it, and I seriously doubt that. In WiX, you need to
specify a fixed file list (perhaps with wildcards; I'm unsure). This
will be tricky for Python, where the list of files to be installed
changes all the time.

You *need* to have a turing-complete packing language (such as Python).

> On the other hand it would introduce another dependency to a 3rd party
> tool and things may get complicated if we leave the road. Automation
> tools tend to make common things really easy but special and uncommon
> stuff really hard.

Exactly so. When I started with MSI generation, and tried what comes
with Visual Studio, and found it unusable - it did not support Itanium,
and could not be changed to support it.

Regards,
Martin


------------------------------

Message: 3
Date: Mon, 25 Feb 2008 17:50:36 -0500
From: David Bolen <db3l.net@gmail.com>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <m2skzgr6pv.fsf@valheru.db3l.homeip.net>
Content-Type: text/plain; charset=utf-8

Barry Warsaw <barry@python.org> writes:

> On Feb 24, 2008, at 1:57 PM, Martin v. L?wis wrote:
>
>>> It very well might.  See Christian Heimes's follow up re: Windows   
>>> builds.  OTOH, I'm okay if at least for the alphas, the binary  
>>> builds  lag behind the source releases, though I'd like to get the  
>>> process as  streamlined as possible.
>>
>> I can continue to provide Windows binaries if desired.
>
> Great, thanks!

Note that my buildbot is still also building MSIs each night based on
the svn head for 2.5, 2.6 and 3.0, and uploading them back to
python.org (viewable at http://www.python.org/dev/daily-msi).

So at least for an alpha based on the current SVN trunk, that might be
an easy place to grab a binary snapshot from, unless I'm missing
something.

Conversely, the machine is there to make builds upon request, I
presume, depending on the master configuration.  I know Martin set the
current scheme up.

-- David




------------------------------

Message: 4
Date: Tue, 26 Feb 2008 00:50:19 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C3543B.8060303@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
> No, I still haven't found a solution. I do want to use the merge
> module; anything else probably isn't going to work.

Da...ng
Didn't you prepare a new MSI installer for 3.0a2 that includes the VS
Redist MSM for X86? I vaguely remember that you've replaced my installer
with a new one.

The issue should be resolved before Python 2.6 and 3.0 are reaching beta
stage. Maybe we can get some help from outside?

Christian



------------------------------

Message: 5
Date: Tue, 26 Feb 2008 00:58:32 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: ""Martin v. L?wis"" <martin@v.loewis.de>
Cc: 'Python 3000' <python-3000@python.org>,	Jeroen Ruigrok van der
	Werven <asmodai@in-nomine.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C35628.6060200@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
> I've looked at it, and I seriously doubt that. In WiX, you need to
> specify a fixed file list (perhaps with wildcards; I'm unsure). This
> will be tricky for Python, where the list of files to be installed
> changes all the time.
>
> You *need* to have a turing-complete packing language (such as Python).

You are most likely right. A pure XML based solution ain't going to work
for Python. But how about a mixed solution?

    XML templates -> Python fu -> WiX XML -> MSI

We take some XML templates, modify them from Python and add the files.
Finalliy we let WiX create the MSI installer from the resulting XML file.

What do you think?

> Exactly so. When I started with MSI generation, and tried what comes
> with Visual Studio, and found it unusable - it did not support
> Itanium, and could not be changed to support it.

Yeah, been there, got frustrated, went back :/

Christian



------------------------------

Message: 6
Date: Tue, 26 Feb 2008 01:11:26 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C3592E.2080704@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Barry Warsaw wrote:
> From the follow ups, it sounds like others can pitch in here.  A
> question though: is it reasonable to hold up the monthly release because
> a binary build we're going to make available can't be done at the same
> time?
> 
> My preference (at least for the alphas) is ""no"".  If we can make a
> source release, and if we can build a binary release from exactly the
> same revision, then we should go ahead and release.  I'd rather get the
> alpha out there and in people's hands.
> 
> We'll almost certainly be stricter for the candidates, finals, and maybe
> betas.

I agree. It's not reasonable to hold of alphas because the Windows
binaries may be released a few days later. Do we need official Windows
binaries for alphas at all? Martin's buildbot creates nightly Windows
builds. We could point users to the nightly builds and ask them to test
the version.

> Dang.  I actually don't know how long it's going to take me to do the
> source release, but I hope it's no more than 3 or 4 hours.

I guess it's less than 2 hours. You can prepare most of the work like
the announcements a couple of days earlier. I (perhaps naively) assume
you have to smack the whip to get everything in place, do the svn cp to
tag, svn export, tar cz, tar xzf && ./configure && make && make test
dance and upload the tar.gz. Am I missing something important? :]

> When's the PSF gonna start hiring? :)

Dunno :) But I'm probably the last in a long line of Python core
developers to get hired. Don't forget I'm still fresh and a junior core
developer. *jk*

> So, as I mentioned in my last reply, I'm planning to only allow critical
> bugs (as described in roundup) hold up the release.  Right now there are
> no critical bugs open.

#1569 is critical but not important enough to stop an alpha. As I said
in the other mail it should be fixed for the first beta and must be
fixed for the first rc.

Christian



------------------------------

Message: 7
Date: Tue, 26 Feb 2008 20:09:06 +1100
From: ""Mark Hammond"" <mhammond@skippinet.com.au>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: ""'Christian Heimes'"" <lists@cheimes.de>, '""Martin v. L?wis""'
	<martin@v.loewis.de>
Cc: 'Python 3000' <python-3000@python.org>,	'Jeroen Ruigrok van der
	Werven' <asmodai@in-nomine.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <02cf01c87857$4d19bf40$e74d3dc0$@com.au>
Content-Type: text/plain;	charset=""iso-8859-1""

> Martin v. L?wis wrote:
> > I've looked at it, and I seriously doubt that. In WiX, you need to
> > specify a fixed file list (perhaps with wildcards; I'm unsure). This
> > will be tricky for Python, where the list of files to be installed
> > changes all the time.
> >
> > You *need* to have a turing-complete packing language (such as
> Python).
> 
> You are most likely right. A pure XML based solution ain't going to
> work
> for Python. But how about a mixed solution?
> 
>     XML templates -> Python fu -> WiX XML -> MSI
> 
> We take some XML templates, modify them from Python and add the files.
> Finalliy we let WiX create the MSI installer from the resulting XML
> file.
> 
> What do you think?

I'm inclined to agree with Martin that WiX doesn't offer us much value (it
offers value in many places though - just not for our requirements given
Martin's msilib).  I believe that once we know how to solve a particular
problem, it would not be significantly easier to implement using WiX than it
would using the current infrastructure.  My problem is still getting my head
around various MSI issues at any level (eg, bdist_msi needs some tweaking to
allow for different releases of the same ""package"" to be recognized as such,
but I'm not sure what MSI concept I'm dealing with yet...)

WiX is an excellent inspiration though - if a WiX example can be found for
something, it should be a significant help in implementing it via msilib.

Cheers,

Mark




------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 56
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 55","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Python 2.6 and 3.0 (Christian Heimes)
   2. Re: [Python-Dev]  Python 2.6 and 3.0
      (Jeroen Ruigrok van der Werven)
   3. Re: [Python-Dev]  Python 2.6 and 3.0
      (Jeroen Ruigrok van der Werven)
   4. Re: [Python-Dev]  Python 2.6 and 3.0 (Christian Heimes)
   5. Re: removing destructuring del (Guido van Rossum)
   6. Print Statement => Function (Hasan Diwan)
   7. Re: Print Statement => Function (Guido van Rossum)
   8. Re: Python 2.6 and 3.0 (Barry Warsaw)
   9. Re: Python 2.6 and 3.0 (Barry Warsaw)
  10. Re: Python 2.6 and 3.0 (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Mon, 25 Feb 2008 16:01:21 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Mark Hammond <mhammond@skippinet.com.au>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C2D841.2030501@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Mark Hammond wrote:
> Me too - I still regularly build the svn version of Python, and although I don't regularly turn them into .MSI files, I'm confident I could learn how to do that ;)  I understand that over time the binary process will need some tweaking, but in the general case, I expect that turning the crank for a test build needn't be that much or a burden. I expect the biggest problem is that I could no longer ignore certain extensions I don't care about, such as Tk.

It's not too hard. Tkinter, bsddb and friends are explained in
PCbuild/README.txt. You should be able to compile them in less than half
an hour.

For the MSI installers you also need Python 2.5, your pywin32 package
and some additional tools like the help compiler and cabarc.exe.

Martin:
Have you solved the problem with the VS CRT redist
(http://bugs.python.org/issue1569)? Maybe Mark is able to assist you.

Christian


------------------------------

Message: 2
Date: Sun, 24 Feb 2008 21:16:13 +0100
From: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Martin v. L?wis <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <20080224201613.GL66273@nexus.in-nomine.org>
Content-Type: text/plain; charset=utf-8

-On [20080224 19:57], ""Martin v. L?wis"" (martin@v.loewis.de) wrote:
>I can continue to provide Windows binaries if desired.

If need be, I can help testing the build infrastructure since I have access
to various releases of Visual Studio as well.

-- 
Jeroen Ruigrok van der Werven <asmodai(-at-)in-nomine.org> / asmodai
????? ?????? ??? ?? ??????
http://www.in-nomine.org/ | http://www.rangaku.org/
What's in a name? That which we call a rose by any other name would
smell as sweet...


------------------------------

Message: 3
Date: Mon, 25 Feb 2008 16:44:43 +0100
From: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <20080225154443.GP66273@nexus.in-nomine.org>
Content-Type: text/plain; charset=utf-8

-On [20080225 16:02], Christian Heimes (lists@cheimes.de) wrote:
>For the MSI installers you also need Python 2.5, your pywin32 package
>and some additional tools like the help compiler and cabarc.exe.

Have you looked at http://wix.sourceforge.net/ ?

-- 
Jeroen Ruigrok van der Werven <asmodai(-at-)in-nomine.org> / asmodai
????? ?????? ??? ?? ??????
http://www.in-nomine.org/ | http://www.rangaku.org/
What good will it be for a man if he gains the whole world, yet forfeits
his soul?


------------------------------

Message: 4
Date: Mon, 25 Feb 2008 17:06:12 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: Jeroen Ruigrok van der Werven <asmodai@in-nomine.org>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C2E774.2040205@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Jeroen Ruigrok van der Werven wrote:
> Have you looked at http://wix.sourceforge.net/ ?

WiX looks interesting but I'm neither in the position to change the
installer nor do I have a strong opinion. It's Martin's area of expertise.

On the one hand a XML based MSI generator could be easier to maintain.
On the other hand it would introduce another dependency to a 3rd party
tool and things may get complicated if we leave the road. Automation
tools tend to make common things really easy but special and uncommon
stuff really hard.

Christian


------------------------------

Message: 5
Date: Mon, 25 Feb 2008 09:07:23 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] removing destructuring del
To: ""Neal Norwitz"" <nnorwitz@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802250907w791f7a7ax9c28d514543cc016@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Sun, Feb 24, 2008 at 9:55 PM, Neal Norwitz <nnorwitz@gmail.com> wrote:
>  What bothers me more is assert of a tuple.  It does the wrong thing
>  from what newbies expect.  pychecker warns about this, but the version
>  of pylint in use at Google doesn't warn about this.  I wonder if we
>  should add a warning?
>
>  The code I recently saw was:
>   assert (something_short,
>                'Some long assertion string that needs its own line')
>
>  The original code that pylint warned about was:
>   assert something_short, \
>                'Some long assertion string that needs its own line'
>
>  Index: Python/compile.c
>  ===================================================================
>  --- Python/compile.c    (revision 61058)
>  +++ Python/compile.c    (working copy)
>  @@ -2056,6 +2056,9 @@
>                 if (assertion_error == NULL)
>                         return 0;
>         }
>  +       if (s->v.Assert.test->kind == Tuple_kind) {
>  +               printf(""got a tuple\n"");
>  +       }
>         VISIT(c, expr, s->v.Assert.test);
>         end = compiler_new_block(c);
>         if (end == NULL)
>
>  Seems to do the trick.  Maybe this should be turned into a real patch
>  with using PyErr_Warn()?

+1

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Mon, 25 Feb 2008 09:14:59 -0800
From: ""Hasan Diwan"" <hasan.diwan@gmail.com>
Subject: [Python-3000] Print Statement => Function
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<2cda2fc90802250914x20926827nbddd0beddbab9cd3@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

I attended Guido's talk in which he said that the print statement was
going to become a function, but gave no sense of direction. There is a
print-like statement in the file statement called ""write"". So, perhaps
print could be reworked as follows, for starters:

def print(self, fileobj, stringobj, *kwarg):
  fileobj.write(stringobj)

-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>


------------------------------

Message: 7
Date: Mon, 25 Feb 2008 09:32:36 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Print Statement => Function
To: ""Hasan Diwan"" <hasan.diwan@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802250932x4efac826x8ab911d11d9636f2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

PEP 3105

On Mon, Feb 25, 2008 at 9:14 AM, Hasan Diwan <hasan.diwan@gmail.com> wrote:
> I attended Guido's talk in which he said that the print statement was
>  going to become a function, but gave no sense of direction. There is a
>  print-like statement in the file statement called ""write"". So, perhaps
>  print could be reworked as follows, for starters:
>
>  def print(self, fileobj, stringobj, *kwarg):
>   fileobj.write(stringobj)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Mon, 25 Feb 2008 16:07:11 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <8E45F999-6B4B-43A4-AD9A-54D2D1570732@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 24, 2008, at 9:19 AM, Christian Heimes wrote:

> Barry Warsaw wrote:
>> I'd also like for us to consider doing regular monthly releases.
>> Several other FLOSS projects I'm involved with are doing this to very
>> good success.  The nice thing is that everyone knows well in advance
>> when the next release is going to happen, and so all developers and
>> users know what to expect and what is needed from them.
>>
>> I'd like to propose that we do a joint release the last Friday of
>> every month.  For the alphas, it's basically what's in svn.  This
>> gives us some time to experiment with the process out and see if we
>> like it enough to keep it going through the betas and final releases.
>
> Thanks for volunteering for the job, Barry!
>
> +1 for release early, release often but I want to point out a resource
> issue that may speak against a monthly release cycle. The Windows
> binaries still require a large amount of attention and human
> interaction. The last Windows binaries were build by me and I spent  
> half
> the night ironing out issues and testing the installers. As far as I
> know the team only Martin and I have the infrastructure and tools to
> build the Windows binaries.

 From the follow ups, it sounds like others can pitch in here.  A  
question though: is it reasonable to hold up the monthly release  
because a binary build we're going to make available can't be done at  
the same time?

My preference (at least for the alphas) is ""no"".  If we can make a  
source release, and if we can build a binary release from exactly the  
same revision, then we should go ahead and release.  I'd rather get  
the alpha out there and in people's hands.

We'll almost certainly be stricter for the candidates, finals, and  
maybe betas.

> We could cut down the time requirements by shipping only normal  
> binaries
> instead of PGO (profile guided optimization) binaries. IMHO we could
> also skip the AMD64 builds until we have reached beta stage. But it's
> still going to cost either Martin or me the better half of a Friday  
> night.

Dang.  I actually don't know how long it's going to take me to do the  
source release, but I hope it's no more than 3 or 4 hours.

> I won't have time to assist with the Windows builds next Friday. I'm
> more than busy with personal life and job interviews. Hopefully I'm
> going to find a job that allows me to work on the Python core as  
> much as
> during the past few months.

When's the PSF gonna start hiring? :)

> That's for the Windows builds. Now I have a list of bugs and  
> features I
> like to see fixed / applied before the next release:
>
> http://bugs.python.org/issue1692335 Fix exception pickling: Move  
> initial
> args assignment to BaseException.__new__
>
> http://bugs.python.org/issue1792 (trivial performance patch for  
> marshal)
>
> http://bugs.python.org/issue1569 MS VCRT redist issue. IIRC Martin  
> had a
> working solution for it in his sandbox.
>
> http://bugs.python.org/issue1657 my kqueue and epoll patch, just needs
> another review

So, as I mentioned in my last reply, I'm planning to only allow  
critical bugs (as described in roundup) hold up the release.  Right  
now there are no critical bugs open.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8MuAHEjvBPtnXfVAQJ4JQP9F8AijArF8KhyxC7lp0ePDBGphgZjq7h8
9vZZ13oGOCtED/6M4bGDaZWrI1LEcj3iuf61Kdk6KwaeAi3dnGHkrP1XOTxZbLcz
8euKbC8JhBHan/A4SO4+xzxx4ZI9vCMRQqe+sLOQJsE9vH+4UMU1FDrhROxYwLbb
aG0+fzGPdzA=
=zpPQ
-----END PGP SIGNATURE-----


------------------------------

Message: 9
Date: Mon, 25 Feb 2008 16:07:25 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Martin v. L?wis <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <4CE13670-0F86-444E-9F3F-B94AEA9B8295@python.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 24, 2008, at 1:57 PM, Martin v. L?wis wrote:

>> It very well might.  See Christian Heimes's follow up re: Windows   
>> builds.  OTOH, I'm okay if at least for the alphas, the binary  
>> builds  lag behind the source releases, though I'd like to get the  
>> process as  streamlined as possible.
>
> I can continue to provide Windows binaries if desired.

Great, thanks!
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8MuDXEjvBPtnXfVAQJeJwP/R8MMAhOsyRtpxIISEUoqMGDJksI5EtVM
PcsxNO1p0MGcHfm5lNg0YNYwxsfc/0ghkRbsidegvcyN6BZWgHSaA7I0O1cBTG1x
R4eNmLJBWCOcJNmTGgxCA7G8eEHTNTxneaQ0APO+yQbbHS/eyGGMcmFldNMkDqNO
ycqikt0XiWI=
=M3eC
-----END PGP SIGNATURE-----


------------------------------

Message: 10
Date: Mon, 25 Feb 2008 23:02:18 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Christian Heimes <lists@cheimes.de>
Cc: 'Python 3000' <python-3000@python.org>,	'python-dev Dev'
	<python-dev@python.org>
Message-ID: <47C33AEA.2010600@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Have you solved the problem with the VS CRT redist
> (http://bugs.python.org/issue1569)? Maybe Mark is able to assist you.

No, I still haven't found a solution. I do want to use the merge
module; anything else probably isn't going to work.

Regards,
Martin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 55
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 54","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  Python 2.6 and 3.0 (Mark Hammond)
   2. Re: removing destructuring del (Neal Norwitz)


----------------------------------------------------------------------

Message: 1
Date: Mon, 25 Feb 2008 09:58:56 +1100
From: ""Mark Hammond"" <mhammond@skippinet.com.au>
Subject: Re: [Python-3000] [Python-Dev]  Python 2.6 and 3.0
To: ""'Python 3000'"" <python-3000@python.org>,	""'python-dev Dev'""
	<python-dev@python.org>
Message-ID: <01a101c87738$da592b90$8f0b82b0$@com.au>
Content-Type: text/plain;	charset=""UTF-8""

Jeroen Ruigrok van der Werven:
> -On [20080224 19:57], ""Martin v. Lwis"" (martin@v.loewis.de) wrote:
> >I can continue to provide Windows binaries if desired.
> 
> If need be, I can help testing the build infrastructure since I have
> access
> to various releases of Visual Studio as well.

Me too - I still regularly build the svn version of Python, and although I don't regularly turn them into .MSI files, I'm confident I could learn how to do that ;)  I understand that over time the binary process will need some tweaking, but in the general case, I expect that turning the crank for a test build needn't be that much or a burden. I expect the biggest problem is that I could no longer ignore certain extensions I don't care about, such as Tk.

Cheers,

Mark



------------------------------

Message: 2
Date: Sun, 24 Feb 2008 21:55:11 -0800
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: Re: [Python-3000] removing destructuring del
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<ee2a432c0802242155wa5af222t9fbc7b343b8241ab@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 22, 2008 at 7:44 AM, Guido van Rossum <guido@python.org> wrote:

[... del (tuple, of, variables), etc deleted]

>
>  >  I also think
>  >
>  >    del a,
>  >
>  >  should not be legal (""SyntaxError: trailing comma not allowed without
>  >  surrounding parentheses""?), but that's getting into my own personal
>  >  preferences.
>
>  These all make sense to me, but at the same time it seems such a minor
>  issue that I'm not sure we should bother. It would probably end up
>  being more custom syntax -- right now it just uses exprlist in the
>  grammar and is limited to assignment targets by the compiler.

What bothers me more is assert of a tuple.  It does the wrong thing
from what newbies expect.  pychecker warns about this, but the version
of pylint in use at Google doesn't warn about this.  I wonder if we
should add a warning?

The code I recently saw was:
  assert (something_short,
               'Some long assertion string that needs its own line')

The original code that pylint warned about was:
  assert something_short, \
               'Some long assertion string that needs its own line'

Index: Python/compile.c
===================================================================
--- Python/compile.c    (revision 61058)
+++ Python/compile.c    (working copy)
@@ -2056,6 +2056,9 @@
                if (assertion_error == NULL)
                        return 0;
        }
+       if (s->v.Assert.test->kind == Tuple_kind) {
+               printf(""got a tuple\n"");
+       }
        VISIT(c, expr, s->v.Assert.test);
        end = compiler_new_block(c);
        if (end == NULL)

Seems to do the trick.  Maybe this should be turned into a real patch
with using PyErr_Warn()?

n


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 54
*******************************************
??????????????
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 53","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Putting pdb.set_trace() in builtins? (Barry Warsaw)
   2. Re: Python 2.6 and 3.0 (Christian Heimes)
   3. Re: Python 2.6 and 3.0 (Barry Warsaw)
   4. Re: Python 2.6 and 3.0 (Martin v. L?wis)
   5. Buildbots are all red (Brett Cannon)
   6. Re: Buildbots are all red (Eric Smith)
   7. Re: Buildbots are all red (Guido van Rossum)
   8. Re: Buildbots are all red (Eric Smith)
   9. Re: Buildbots are all red (Eric Smith)
  10. Re: Buildbots are all red (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Sun, 24 Feb 2008 07:32:02 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Putting pdb.set_trace() in builtins?
To: Jean-Paul Calderone <exarkun@divmod.com>
Cc: python-3000@python.org
Message-ID: <BF149209-AA8D-4E4E-9A32-A7949444C005@python.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 21, 2008, at 10:23 AM, Jean-Paul Calderone wrote:

> Wouldn't a less invasive solution be to make pdb better?  In  
> particular,
> to make `breakpoint? actually reliably set a breakpoint?

Maybe, although I like the directness and simplicity of setting a  
break point explicitly in the code (maybe inside a conditional,  
etc.).  I just want to type less. :)

Well, it was probably a dumb idea anyway born of minor frustration, so  
I'll drop it.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8FjwnEjvBPtnXfVAQIvqQQApHsTLcflVp4TkVWNhgdRYTcIxaWCpOjS
9XCz40WKgh9tg0m4iiZng+g7/h2rtlL4ythRGJfNFXr0xEGEt62appu87XHOt00g
sOwLfglpRG/pA+RCnmrb/ezNCZMMJYjCfGbbN5huqb4EYUoAH2Pml5GjrG8bJN+G
gozq5Pb1Jxk=
=aELO
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Sun, 24 Feb 2008 15:19:02 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C17CD6.1040707@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Barry Warsaw wrote:
> I'd also like for us to consider doing regular monthly releases.
> Several other FLOSS projects I'm involved with are doing this to very
> good success.  The nice thing is that everyone knows well in advance
> when the next release is going to happen, and so all developers and
> users know what to expect and what is needed from them.
> 
> I'd like to propose that we do a joint release the last Friday of
> every month.  For the alphas, it's basically what's in svn.  This
> gives us some time to experiment with the process out and see if we
> like it enough to keep it going through the betas and final releases.

Thanks for volunteering for the job, Barry!

+1 for release early, release often but I want to point out a resource
issue that may speak against a monthly release cycle. The Windows
binaries still require a large amount of attention and human
interaction. The last Windows binaries were build by me and I spent half
the night ironing out issues and testing the installers. As far as I
know the team only Martin and I have the infrastructure and tools to
build the Windows binaries.

We could cut down the time requirements by shipping only normal binaries
instead of PGO (profile guided optimization) binaries. IMHO we could
also skip the AMD64 builds until we have reached beta stage. But it's
still going to cost either Martin or me the better half of a Friday night.

I won't have time to assist with the Windows builds next Friday. I'm
more than busy with personal life and job interviews. Hopefully I'm
going to find a job that allows me to work on the Python core as much as
during the past few months.


That's for the Windows builds. Now I have a list of bugs and features I
like to see fixed / applied before the next release:

http://bugs.python.org/issue1692335 Fix exception pickling: Move initial
args assignment to BaseException.__new__

http://bugs.python.org/issue1792 (trivial performance patch for marshal)

http://bugs.python.org/issue1569 MS VCRT redist issue. IIRC Martin had a
working solution for it in his sandbox.

http://bugs.python.org/issue1657 my kqueue and epoll patch, just needs
another review

Christian


------------------------------

Message: 3
Date: Sun, 24 Feb 2008 12:51:24 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: ""Brett Cannon"" <brett@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <6D7348BC-EF35-4639-BBB5-83C8C7410EC6@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 22, 2008, at 6:54 PM, Brett Cannon wrote:

>> Hi everyone,
>>
>> I've volunteered to be the release manager for Python 2.6 and 3.0.
>> It's been several years since I've RM'd a Python release, and I'm
>> happy to do it again (he says while the medication is still
>> working :).
>
> Can the PSF buy you more of the meds? =)

Depends on the jurisdiction. :)

>> I would like to get the next alpha releases of both
>> versions out before Pycon, so I propose next Friday, February 29 for
>> both.
>>
>
> Since they are just alphas, sure. Not like I am going to make any
> earth-shattering changes that soon.

Cool.

>> Guido reminded me that we released Python 1.6 and 2.0 together and it
>> makes sense to both of us to do the same for Python 2.6 and 3.0.  I
>> don't think it will be that much more work (for me at least :) to
>> release them in lockstep, so I think we should try it.  I won't try  
>> to
>> sync their pre-release version numbers except at the milestones (e.g.
>> first beta, release candidates, final releases).
>>
>> I propose to change PEP 361 to outline the release schedule for both
>> Python 2.6 and 3.0.  I'm hoping we can work out a more definite
>> schedule at Pycon, but for now I want to at least describe the
>> lockstep release schedule and the Feb 29 date.
>>
>> I'd also like for us to consider doing regular monthly releases.
>> Several other FLOSS projects I'm involved with are doing this to very
>> good success.  The nice thing is that everyone knows well in advance
>> when the next release is going to happen, and so all developers and
>> users know what to expect and what is needed from them.
>>
>> I'd like to propose that we do a joint release the last Friday of
>> every month.  For the alphas, it's basically what's in svn.  This
>> gives us some time to experiment with the process out and see if we
>> like it enough to keep it going through the betas and final releases.
>>
>> Comments?
>
> If you want to do monthly alphas, go for it! But if you are going to
> do that frequently is a source release going to make more sense than
> doing binary builds?

It very well might.  See Christian Heimes's follow up re: Windows  
builds.  OTOH, I'm okay if at least for the alphas, the binary builds  
lag behind the source releases, though I'd like to get the process as  
streamlined as possible.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR8GunXEjvBPtnXfVAQIP0AQAo5F2tH1vXWbMAFGARZN576xopbQXSokX
uVNXbeg5yjopCx38sHb5OCbublyIDOO8/2ubuuQ6uvAOJc3Br4BuMGHoC5ymQGqf
6pZYZLf4YUGLqFlYOB/huXpJPfH98RJJnK99zA8IQh4B7pN4xg14MF22gGij3Ybt
z2hoy1EbYEk=
=hW7b
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Sun, 24 Feb 2008 19:57:41 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: Barry Warsaw <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID: <47C1BE25.9050300@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> It very well might.  See Christian Heimes's follow up re: Windows  
> builds.  OTOH, I'm okay if at least for the alphas, the binary builds  
> lag behind the source releases, though I'd like to get the process as  
> streamlined as possible.

I can continue to provide Windows binaries if desired.

Regards,
Martin


------------------------------

Message: 5
Date: Sun, 24 Feb 2008 13:17:55 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: [Python-3000] Buildbots are all red
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<bbaeab100802241317g61f47fafmb036761fb1cefd90@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

test_types is triggering an assertion error::

  Objects/stringlib/string_format.h:497: failed assertion
`PyString_Check(result)'

A *really* quick session with gdb would seem to suggest that 'result'
is actually a str, so I don't know what is going on. Don't have time
to dig any deeper right now.

-Brett


------------------------------

Message: 6
Date: Sun, 24 Feb 2008 16:19:20 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Buildbots are all red
To: Brett Cannon <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47C1DF58.6060903@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon wrote:
> test_types is triggering an assertion error::
> 
>   Objects/stringlib/string_format.h:497: failed assertion
> `PyString_Check(result)'
> 
> A *really* quick session with gdb would seem to suggest that 'result'
> is actually a str, so I don't know what is going on. Don't have time
> to dig any deeper right now.

I'll check.

Eric.


------------------------------

Message: 7
Date: Sun, 24 Feb 2008 13:26:00 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Buildbots are all red
To: ""Eric Smith"" <eric+python-dev@trueblade.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802241326u42e46b99q683a0942dce28e41@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

If this is Py3k, perhaps the result should be a PyUnicode instead?

On Sun, Feb 24, 2008 at 1:19 PM, Eric Smith
<eric+python-dev@trueblade.com> wrote:
> Brett Cannon wrote:
>  > test_types is triggering an assertion error::
>  >
>  >   Objects/stringlib/string_format.h:497: failed assertion
>  > `PyString_Check(result)'
>  >
>  > A *really* quick session with gdb would seem to suggest that 'result'
>  > is actually a str, so I don't know what is going on. Don't have time
>  > to dig any deeper right now.
>
>  I'll check.
>
>  Eric.
>
>
> _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sun, 24 Feb 2008 16:31:13 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Buildbots are all red
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47C1E221.4020108@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> If this is Py3k, perhaps the result should be a PyUnicode instead?

Probably so, yes.

But I can't reproduce this on a Fedora Core 6 box.  I'm compiling under 
Windows now to see if I can reproduce it there.  I'll change it to 
PyUnicode_Check shortly, even if I can't reproduce it.

Eric.

> 
> On Sun, Feb 24, 2008 at 1:19 PM, Eric Smith
> <eric+python-dev@trueblade.com> wrote:
>> Brett Cannon wrote:
>>  > test_types is triggering an assertion error::
>>  >
>>  >   Objects/stringlib/string_format.h:497: failed assertion
>>  > `PyString_Check(result)'
>>  >
>>  > A *really* quick session with gdb would seem to suggest that 'result'
>>  > is actually a str, so I don't know what is going on. Don't have time
>>  > to dig any deeper right now.
>>
>>  I'll check.
>>
>>  Eric.
>>
>>
>> _______________________________________________
>>  Python-3000 mailing list
>>  Python-3000@python.org
>>  http://mail.python.org/mailman/listinfo/python-3000
>>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>>
> 
> 
> 



------------------------------

Message: 9
Date: Sun, 24 Feb 2008 16:46:30 -0500
From: Eric Smith <eric+python-dev@trueblade.com>
Subject: Re: [Python-3000] Buildbots are all red
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47C1E5B6.7070407@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Eric Smith wrote:
> Guido van Rossum wrote:
>> If this is Py3k, perhaps the result should be a PyUnicode instead?
> 
> Probably so, yes.
> 
> But I can't reproduce this on a Fedora Core 6 box.  I'm compiling under 
> Windows now to see if I can reproduce it there.  I'll change it to 
> PyUnicode_Check shortly, even if I can't reproduce it.

I reproduced it on Windows, and checked in the fix, which Guido 
diagnosed correctly.  I'm not sure what the issue with my FC6 box is, 
I'll investigate.

>> On Sun, Feb 24, 2008 at 1:19 PM, Eric Smith
>> <eric+python-dev@trueblade.com> wrote:
>>> Brett Cannon wrote:
>>>  > test_types is triggering an assertion error::
>>>  >
>>>  >   Objects/stringlib/string_format.h:497: failed assertion
>>>  > `PyString_Check(result)'
>>>  >
>>>  > A *really* quick session with gdb would seem to suggest that 'result'
>>>  > is actually a str, so I don't know what is going on. Don't have time
>>>  > to dig any deeper right now.
>>>
>>>  I'll check.
>>>
>>>  Eric.
>>>
>>>
>>> _______________________________________________
>>>  Python-3000 mailing list
>>>  Python-3000@python.org
>>>  http://mail.python.org/mailman/listinfo/python-3000
>>>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>>>
>>
>>
> 
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/eric%2Bpython-dev%40trueblade.com
> 



------------------------------

Message: 10
Date: Sun, 24 Feb 2008 23:35:18 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Buildbots are all red
To: python-3000@python.org
Message-ID: <fpsrf7$cf$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Eric Smith wrote:
> Eric Smith wrote:
>> Guido van Rossum wrote:
>>> If this is Py3k, perhaps the result should be a PyUnicode instead?
>> Probably so, yes.
>>
>> But I can't reproduce this on a Fedora Core 6 box.  I'm compiling under 
>> Windows now to see if I can reproduce it there.  I'll change it to 
>> PyUnicode_Check shortly, even if I can't reproduce it.
> 
> I reproduced it on Windows, and checked in the fix, which Guido 
> diagnosed correctly.  I'm not sure what the issue with my FC6 box is, 
> I'll investigate.

I assume it's yet another problem with the makefile. Most likely the
header files aren't listed correctly. I'm working on it.

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 53
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 52","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Python 2.6 and 3.0 (Neal Norwitz)


----------------------------------------------------------------------

Message: 1
Date: Sat, 23 Feb 2008 15:26:04 -0800
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID:
	<ee2a432c0802231526k4e3241f3x1900b4e65c4058e7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

+1 to everything -- n

On Fri, Feb 22, 2008 at 3:45 PM, Barry Warsaw <barry@python.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
>  Hash: SHA1
>
>  Hi everyone,
>
>  I've volunteered to be the release manager for Python 2.6 and 3.0.
>  It's been several years since I've RM'd a Python release, and I'm
>  happy to do it again (he says while the medication is still
>  working :).  I would like to get the next alpha releases of both
>  versions out before Pycon, so I propose next Friday, February 29 for
>  both.
>
>  Guido reminded me that we released Python 1.6 and 2.0 together and it
>  makes sense to both of us to do the same for Python 2.6 and 3.0.  I
>  don't think it will be that much more work (for me at least :) to
>  release them in lockstep, so I think we should try it.  I won't try to
>  sync their pre-release version numbers except at the milestones (e.g.
>  first beta, release candidates, final releases).
>
>  I propose to change PEP 361 to outline the release schedule for both
>  Python 2.6 and 3.0.  I'm hoping we can work out a more definite
>  schedule at Pycon, but for now I want to at least describe the
>  lockstep release schedule and the Feb 29 date.
>
>  I'd also like for us to consider doing regular monthly releases.
>  Several other FLOSS projects I'm involved with are doing this to very
>  good success.  The nice thing is that everyone knows well in advance
>  when the next release is going to happen, and so all developers and
>  users know what to expect and what is needed from them.
>
>  I'd like to propose that we do a joint release the last Friday of
>  every month.  For the alphas, it's basically what's in svn.  This
>  gives us some time to experiment with the process out and see if we
>  like it enough to keep it going through the betas and final releases.
>
>  Comments?
>  - -Barry
>
>  -----BEGIN PGP SIGNATURE-----
>  Version: GnuPG v1.4.8 (Darwin)
>
>  iQCVAwUBR79ek3EjvBPtnXfVAQJrmQP+KAzy0lSzake2BZsVxErD0kpFQJM+Iij0
>  qN86wjH0NoqARMfYKVA6eUzEY8vZPu7sJl+SjCOmhnE/KP+l/ArOdis5smiSKwQI
>  klL4XKd/qdorTMqQ9mWgA0DeBb0Asvln9y64nxzNqgve+36q9j6ytPuRey1GjSI5
>  nVWoJDb3WsM=
>  =4SRa
>  -----END PGP SIGNATURE-----
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/nnorwitz%40gmail.com
>


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 52
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 51","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Please sign up for the PyCon sprint if you are	attending!
      (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Fri, 22 Feb 2008 19:46:20 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: [Python-3000] Please sign up for the PyCon sprint if you are
	attending!
To: ""python-dev Dev"" <python-dev@python.org>, 	""Python 3000""
	<python-3000@python.org>
Message-ID:
	<bbaeab100802221946x3510d6b3lf714e342afd3959e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

With the PyCon sprint approaching I would like all attendees to be
signed up on the wiki page for the sprint:
http://wiki.python.org/moin/PyCon2008/SprintSignups/Python . I am
going to be using that list to send out an email about what is exactly
expected of people in terms of setup ahead of time, etc.

And even if you do know what you are doing, I still would appreciate
people adding themselves so I can have a head count. That will let the
sprint coordinators make sure we have a space big enough for us.

-Brett


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 51
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 50","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: removing destructuring del (Guido van Rossum)
   2. Re: removing destructuring del (Alexander Belopolsky)
   3. Re: removing destructuring del (Greg Ewing)
   4. Re: removing destructuring del (Andrew Dalke)
   5. Re: removing destructuring del (Guido van Rossum)
   6. Re: removing destructuring del (Andrew Dalke)
   7. Python 2.6 and 3.0 (Barry Warsaw)
   8. Re: Python 2.6 and 3.0 (Brett Cannon)
   9. Re: [Python-Dev] Python 2.6 and 3.0 (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Fri, 22 Feb 2008 07:44:25 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] removing destructuring del
To: ""Andrew Dalke"" <dalke@dalkescientific.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802220744w6c0ae599vec3ed979b2b32577@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 21, 2008 at 11:27 PM, Andrew Dalke
<dalke@dalkescientific.com> wrote:
> On Feb 22, 2008, at 2:25 AM, Guido van Rossum wrote:
>  > What syntax would you allow instead? Just del variable, variable, ...?
>
>  Yes.  These are and should be legal
>
>  del a, b[1], c.d
>  del (e+f).g[9]().h
>
>  but I think this should not be legal
>
>  del a, (b, c)
>
>  That should raise
>
>    SyntaxError: can't delete tuple
>
>  and I would also like it if the following raised the same error
>
>    del (a, b)
>
>  but people use it now and I can see that perhaps, like with the from
>  statement, using '()' for long expressions is useful
>
>    del (some_very_large_variable_name[1],
>         another_large_variable_name[2].with_attribute)

Well, you could rewrite that as two del statements of course... The
only use I can think if would be

del (very_long_name.
        very_long_attribute)

>  I also think
>
>    del a,
>
>  should not be legal (""SyntaxError: trailing comma not allowed without
>  surrounding parentheses""?), but that's getting into my own personal
>  preferences.

These all make sense to me, but at the same time it seems such a minor
issue that I'm not sure we should bother. It would probably end up
being more custom syntax -- right now it just uses exprlist in the
grammar and is limited to assignment targets by the compiler.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Fri, 22 Feb 2008 17:07:12 +0000 (UTC)
From: Alexander Belopolsky <alexander.belopolsky@gmail.com>
Subject: Re: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <loom.20080222T165155-100@post.gmane.org>
Content-Type: text/plain; charset=us-ascii

Guido van Rossum <guido <at> python.org> writes:

> 
> On Thu, Feb 21, 2008 at 11:27 PM, Andrew Dalke
> <dalke <at> dalkescientific.com> wrote:
> .. I think this should not be legal
> >
> >  del a, (b, c)
> >
> >  That should raise
> >
> >    SyntaxError: can't delete tuple
..
> These all make sense to me, but at the same time it seems such a minor
> issue that I'm not sure we should bother. It would probably end up
> being more custom syntax -- right now it just uses exprlist in the
> grammar and is limited to assignment targets by the compiler.
> 

I was always wondering why both lists and tuples are allowed as
assignment targets.  As far as I can tell, the only difference is in
the corner cases such as

>>> del []
>>> del ()
  File ""<stdin>"", line 1
SyntaxError: can't assign to ()
>>> [] = ()
>>> () = ()
  File ""<stdin>"", line 1
SyntaxError: can't assign to ()

Maybe Py3k should eliminate the list form, but allow empty tuples
as useful in auto-generated code (deleting variable number of
names.)



------------------------------

Message: 3
Date: Sat, 23 Feb 2008 09:08:14 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <47BF2BAE.9090709@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Alexander Belopolsky wrote:
> I was always wondering why both lists and tuples are allowed as
> assignment targets.

I seem to remember a very early version of Python when you had
to use the list form for unpacking lists and the tuple form for
unpacking tuples, and you'd be told off for using the wrong one.

That was quickly seen to be a silly idea, but both syntaxes
were kept for compatibility.

--
Greg


------------------------------

Message: 4
Date: Fri, 22 Feb 2008 21:42:18 +0100
From: Andrew Dalke <dalke@dalkescientific.com>
Subject: Re: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <1D75411D-E13B-4322-9F2F-B4A4F7C390C4@dalkescientific.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On Feb 22, 2008, at 6:07 PM, Alexander Belopolsky wrote:
> Maybe Py3k should eliminate the list form, but allow empty tuples
> as useful in auto-generated code (deleting variable number of
> names.)

That seems pretty theoretical.  It's easy to add a ""if has variables""  
check first.  I looked at quite a few libraries grepping for unusual  
del statements and didn't find any, including nothing like 'del []'

BTW, there's a bug in the error message for 'del ()'

Python 2.5 (r25:51908, Oct  9 2006, 13:24:22)
[GCC 3.4.6 [FreeBSD] 20060305] on freebsd6
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
 >>> del []
 >>> del ()
   File ""<stdin>"", line 1
SyntaxError: can't assign to ()
 >>>


Python 3.0a2 (r30a2:59382, Feb 20 2008, 12:09:57)
[GCC 4.0.1 (Apple Computer, Inc. build 5367)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
 >>> del []
 >>> del ()
SyntaxError: can't assign to () (<stdin>, line 1)
 >>>

This is the exception I want to see when someone does a destructuring  
del, though with corrected wording.

				Andrew
				dalke@dalkescientific.com




------------------------------

Message: 5
Date: Fri, 22 Feb 2008 13:49:16 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] removing destructuring del
To: ""Andrew Dalke"" <dalke@dalkescientific.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802221349w213e691fr214a2bf4e93da8a8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 22, 2008 at 12:42 PM, Andrew Dalke
<dalke@dalkescientific.com> wrote:
> On Feb 22, 2008, at 6:07 PM, Alexander Belopolsky wrote:
>  > Maybe Py3k should eliminate the list form, but allow empty tuples
>  > as useful in auto-generated code (deleting variable number of
>  > names.)
>
>  That seems pretty theoretical.  It's easy to add a ""if has variables""
>  check first.  I looked at quite a few libraries grepping for unusual
>  del statements and didn't find any, including nothing like 'del []'
>
>  BTW, there's a bug in the error message for 'del ()'
>
>  Python 2.5 (r25:51908, Oct  9 2006, 13:24:22)
>  [GCC 3.4.6 [FreeBSD] 20060305] on freebsd6
>  Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>
>  >>> del []
>   >>> del ()
>    File ""<stdin>"", line 1
>  SyntaxError: can't assign to ()
>   >>>

The only bug I see here is that it doesn't complain about ""del []"".

>  Python 3.0a2 (r30a2:59382, Feb 20 2008, 12:09:57)
>  [GCC 4.0.1 (Apple Computer, Inc. build 5367)] on darwin
>  Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>   >>> del []
>   >>> del ()
>  SyntaxError: can't assign to () (<stdin>, line 1)
>   >>>
>
>  This is the exception I want to see when someone does a destructuring
>  del, though with corrected wording.

I guess if you're really motivated to get this through, you'll have to
submit a patch, including unittests and doc updates.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Fri, 22 Feb 2008 23:00:35 +0100
From: Andrew Dalke <dalke@dalkescientific.com>
Subject: Re: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <12FF10F2-E91D-47A3-B9CF-416BFFADF55F@dalkescientific.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On Feb 22, 2008, at 10:49 PM, Guido van Rossum wrote:
>>>>> del []
>>>>> del ()
>>    File ""<stdin>"", line 1
>>  SyntaxError: can't assign to ()
>>>>>
>
> The only bug I see here is that it doesn't complain about ""del []"".

I expected it to say ""can't delete"" instead of ""can't assign""

 >>> del 1
SyntaxError: can't delete literal (<stdin>, line 1)


> I guess if you're really motivated to get this through, you'll have to
> submit a patch, including unittests and doc updates.

I figured that was a likely response - and it's better than ""nope"" or  
""too late"".  Mmm, _ast.c, I presume?  Let me find my pith helmet.  :)



				Andrew
				dalke@dalkescientific.com




------------------------------

Message: 7
Date: Fri, 22 Feb 2008 18:45:23 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] Python 2.6 and 3.0
To: python-dev Dev <python-dev@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <54334B67-3CD3-436D-BFEE-E358CF31A270@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi everyone,

I've volunteered to be the release manager for Python 2.6 and 3.0.   
It's been several years since I've RM'd a Python release, and I'm  
happy to do it again (he says while the medication is still  
working :).  I would like to get the next alpha releases of both  
versions out before Pycon, so I propose next Friday, February 29 for  
both.

Guido reminded me that we released Python 1.6 and 2.0 together and it  
makes sense to both of us to do the same for Python 2.6 and 3.0.  I  
don't think it will be that much more work (for me at least :) to  
release them in lockstep, so I think we should try it.  I won't try to  
sync their pre-release version numbers except at the milestones (e.g.  
first beta, release candidates, final releases).

I propose to change PEP 361 to outline the release schedule for both  
Python 2.6 and 3.0.  I'm hoping we can work out a more definite  
schedule at Pycon, but for now I want to at least describe the  
lockstep release schedule and the Feb 29 date.

I'd also like for us to consider doing regular monthly releases.   
Several other FLOSS projects I'm involved with are doing this to very  
good success.  The nice thing is that everyone knows well in advance  
when the next release is going to happen, and so all developers and  
users know what to expect and what is needed from them.

I'd like to propose that we do a joint release the last Friday of  
every month.  For the alphas, it's basically what's in svn.  This  
gives us some time to experiment with the process out and see if we  
like it enough to keep it going through the betas and final releases.

Comments?
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR79ek3EjvBPtnXfVAQJrmQP+KAzy0lSzake2BZsVxErD0kpFQJM+Iij0
qN86wjH0NoqARMfYKVA6eUzEY8vZPu7sJl+SjCOmhnE/KP+l/ArOdis5smiSKwQI
klL4XKd/qdorTMqQ9mWgA0DeBb0Asvln9y64nxzNqgve+36q9j6ytPuRey1GjSI5
nVWoJDb3WsM=
=4SRa
-----END PGP SIGNATURE-----


------------------------------

Message: 8
Date: Fri, 22 Feb 2008 15:54:52 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Python 2.6 and 3.0
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>,	python-dev Dev
	<python-dev@python.org>
Message-ID:
	<bbaeab100802221554t55527c27w98084751b233316e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Fri, Feb 22, 2008 at 3:45 PM, Barry Warsaw <barry@python.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
>  Hash: SHA1
>
>  Hi everyone,
>
>  I've volunteered to be the release manager for Python 2.6 and 3.0.
>  It's been several years since I've RM'd a Python release, and I'm
>  happy to do it again (he says while the medication is still
>  working :).

Can the PSF buy you more of the meds? =)

>  I would like to get the next alpha releases of both
>  versions out before Pycon, so I propose next Friday, February 29 for
>  both.
>

Since they are just alphas, sure. Not like I am going to make any
earth-shattering changes that soon.

>  Guido reminded me that we released Python 1.6 and 2.0 together and it
>  makes sense to both of us to do the same for Python 2.6 and 3.0.  I
>  don't think it will be that much more work (for me at least :) to
>  release them in lockstep, so I think we should try it.  I won't try to
>  sync their pre-release version numbers except at the milestones (e.g.
>  first beta, release candidates, final releases).
>
>  I propose to change PEP 361 to outline the release schedule for both
>  Python 2.6 and 3.0.  I'm hoping we can work out a more definite
>  schedule at Pycon, but for now I want to at least describe the
>  lockstep release schedule and the Feb 29 date.
>
>  I'd also like for us to consider doing regular monthly releases.
>  Several other FLOSS projects I'm involved with are doing this to very
>  good success.  The nice thing is that everyone knows well in advance
>  when the next release is going to happen, and so all developers and
>  users know what to expect and what is needed from them.
>
>  I'd like to propose that we do a joint release the last Friday of
>  every month.  For the alphas, it's basically what's in svn.  This
>  gives us some time to experiment with the process out and see if we
>  like it enough to keep it going through the betas and final releases.
>
>  Comments?

If you want to do monthly alphas, go for it! But if you are going to
do that frequently is a source release going to make more sense than
doing binary builds?

-Brett


------------------------------

Message: 9
Date: Fri, 22 Feb 2008 19:29:32 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] [Python-Dev] Python 2.6 and 3.0
To: Barry Warsaw <barry@python.org>, python-dev Dev
	<python-dev@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <20080222192932.AHK93803@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Barry]
> I'd also like for us to consider doing regular monthly releases. 

+1


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 50
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 49","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Putting pdb.set_trace() in builtins? (Barry Warsaw)
   2. Re: Putting pdb.set_trace() in builtins? (Jean-Paul Calderone)
   3. Re: Putting pdb.set_trace() in builtins? (Facundo Batista)
   4. Re: Putting pdb.set_trace() in builtins? (Aahz)
   5. Re: Putting pdb.set_trace() in builtins? (Facundo Batista)
   6. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   7. removing destructuring del (Andrew Dalke)
   8. Re: removing destructuring del (Guido van Rossum)
   9. Re: removing destructuring del (Andrew Dalke)


----------------------------------------------------------------------

Message: 1
Date: Thu, 21 Feb 2008 10:01:56 -0500
From: Barry Warsaw <barry@python.org>
Subject: [Python-3000] Putting pdb.set_trace() in builtins?
To: Python 3000 <python-3000@python.org>
Message-ID: <C15961F9-23FC-441C-AFF9-3EB34A4C2580@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I know this will get shot down like a Navy missile aimed at an errant  
spy satellite, but I'm going to suggest it anyway.

Several of us have been talking about merging the two Emacs Python  
modes and this prompted a discussion of Ken Manheimer's excellent  
pdbtrack hack, which got me thinking about the way I use pdb.  I don't  
know if this is typical or unique, or whether anyone else is annoyed  
the same way I am.  Admittedly it's a minor annoyance, but I still  
think we can do better.

So I have some particularly troublesome code that I want to set a  
breakpoint at and start stepping through.  I usually will stick this  
tidbit at the place I want to break:

     good_code()
     import pdb; pdb.set_trace()
     call_buggy_code()

In doctests it's a little ickier because I have to put that all on the  
line where I want to break, not before it or doctest won't do the  
right thing, e.g.:

     >>> import pdb; pdb.set_trace(); call_buggy_code()

I suggest that setting a breakpoint be done with a new built-in, e.g  
breakpoint().  So now I would do this:

     good_code()
     breakpoint()
     call_buggy_code()

or

     >>> breakpoint(); call_buggy_code()

Yes, all it saves me is an import, but it also elevates debugging to a  
more important, and more visible location.

Okay, so now that I've convinced you this is the most brilliant idea  
this century <wink>, I'm really going to smoke some crack.

The other thing this should do is allow us to use different debuggers  
if we wanted.  Maybe today breakpoint() would call into pdb, but maybe  
tomorrow we'll have a better debugger, or someone will have installed  
a better debugger in site-packages (e.g. pydb).  I would suggest that  
breakpoint() consult an environment variable such as PYTHONDEBUGGER to  
see which debugger to invoke (the first time in a session only of  
course).  Perhaps you could also set PYTHONDEBUGGER=ignore to noop any  
and all calls to breakpoint.  Maybe there's a python command line  
switch to mirror $PYTHONDEBUGGER.

trying-not-to-spray-hydrazine-all-over-you-ly y'rs,
- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iQCVAwUBR72SZXEjvBPtnXfVAQK7gwP7BKyIMAarMZEPzTQVfR/W8J4KzBEQFhtj
3pLd83I8oQMgP4SD0BapiJZ2BOws3i2TAZ501V8VF8iR50nyNGTYCP4pJ/sy6Cr0
Q79ahrvKq5+eS/17+Zi/c/yC028h585m1pvg9/VALu1decLvz3m6UPxJWsZJ+ldw
Qj5bUtuCJ7c=
=YBMp
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Thu, 21 Feb 2008 10:23:48 -0500
From: Jean-Paul Calderone <exarkun@divmod.com>
Subject: Re: [Python-3000] Putting pdb.set_trace() in builtins?
To: python-3000@python.org
Message-ID: <20080221152348.6859.1072137842.divmod.quotient.11578@ohm>
Content-Type: text/plain; format=flowed; charset=utf-8

On Thu, 21 Feb 2008 10:01:56 -0500, Barry Warsaw <barry@python.org> wrote:
>-----BEGIN PGP SIGNED MESSAGE-----
>Hash: SHA1
>
>I know this will get shot down like a Navy missile aimed at an errant
>spy satellite, but I'm going to suggest it anyway.
>
>Several of us have been talking about merging the two Emacs Python
>modes and this prompted a discussion of Ken Manheimer's excellent
>pdbtrack hack, which got me thinking about the way I use pdb.  I don't
>know if this is typical or unique, or whether anyone else is annoyed
>the same way I am.  Admittedly it's a minor annoyance, but I still
>think we can do better.
>
>So I have some particularly troublesome code that I want to set a
>breakpoint at and start stepping through.  I usually will stick this
>tidbit at the place I want to break:
>
>     good_code()
>     import pdb; pdb.set_trace()
>     call_buggy_code()

I do this all the time, too.  Basically any time I need to use a debugger
to fix something.

>
>In doctests it's a little ickier because I have to put that all on the
>line where I want to break, not before it or doctest won't do the
>right thing, e.g.:
>
>     >>> import pdb; pdb.set_trace(); call_buggy_code()
>
>I suggest that setting a breakpoint be done with a new built-in, e.g
>breakpoint().  So now I would do this:
>
>     good_code()
>     breakpoint()
>     call_buggy_code()
>
>or
>
>     >>> breakpoint(); call_buggy_code()
>
>Yes, all it saves me is an import, but it also elevates debugging to a
>more important, and more visible location.
>
>Okay, so now that I've convinced you this is the most brilliant idea
>this century <wink>, I'm really going to smoke some crack.
>
>The other thing this should do is allow us to use different debuggers
>if we wanted.  Maybe today breakpoint() would call into pdb, but maybe
>tomorrow we'll have a better debugger, or someone will have installed
>a better debugger in site-packages (e.g. pydb).  I would suggest that
>breakpoint() consult an environment variable such as PYTHONDEBUGGER to
>see which debugger to invoke (the first time in a session only of
>course).  Perhaps you could also set PYTHONDEBUGGER=ignore to noop any
>and all calls to breakpoint.  Maybe there's a python command line
>switch to mirror $PYTHONDEBUGGER.
>
>trying-not-to-spray-hydrazine-all-over-you-ly y'rs,
>- -Barry

Wouldn't a less invasive solution be to make pdb better?  In particular,
to make `breakpoint? actually reliably set a breakpoint?

Jean-Paul


------------------------------

Message: 3
Date: Thu, 21 Feb 2008 12:28:40 -0300
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] Putting pdb.set_trace() in builtins?
To: ""Barry Warsaw"" <barry@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<e04bdf310802210728h6b8c62b8g371c66bf752801d9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/2/21, Barry Warsaw <barry@python.org>:

>      good_code()
>      import pdb; pdb.set_trace()
>      call_buggy_code()
>
>  ...
>
>      good_code()
>      breakpoint()
>      call_buggy_code()

""import gdb;gdb.set_trace()"" is my second-most-used debugging tool
(the first one is ""print""), so I'm with you here!

+1

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 4
Date: Thu, 21 Feb 2008 07:41:32 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] Putting pdb.set_trace() in builtins?
To: Python 3000 <python-3000@python.org>
Message-ID: <20080221154132.GA9990@panix.com>
Content-Type: text/plain; charset=us-ascii

On Thu, Feb 21, 2008, Barry Warsaw wrote:
> 
> So I have some particularly troublesome code that I want to set a  
> breakpoint at and start stepping through.  I usually will stick this  
> tidbit at the place I want to break:
> 
>      good_code()
>      import pdb; pdb.set_trace()
>      call_buggy_code()
> 
> In doctests it's a little ickier because I have to put that all on the  
> line where I want to break, not before it or doctest won't do the  
> right thing, e.g.:
> 
>      >>> import pdb; pdb.set_trace(); call_buggy_code()
> 
> I suggest that setting a breakpoint be done with a new built-in, e.g  
> breakpoint().  So now I would do this:
> 
>      good_code()
>      breakpoint()
>      call_buggy_code()

-0

>From my POV, this is cruft in the builtins (I mostly do web apps) -- and
I don't particularly like your suggestions for modifying the result of
breakpoint() (note that Facundo wants to use gdb).  Why not simply
inject set_trace() into the builtins in your startup code?  You can
control whether it gets injected with a DEBUG env var or something.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 5
Date: Thu, 21 Feb 2008 12:51:09 -0300
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] Putting pdb.set_trace() in builtins?
To: Aahz <aahz@pythoncraft.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<e04bdf310802210751w76905fb0ta4110a136c9fe924@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/2/21, Aahz <aahz@pythoncraft.com>:

 >  >From my POV, this is cruft in the builtins (I mostly do web apps) -- and
 >  I don't particularly like your suggestions for modifying the result of
 >  breakpoint() (note that Facundo wants to use gdb).  Why not simply

No, no, my mistake, I also use pdb.

 BTW, I use this even when doing PyGTK... didn't try it on web
 development, though.

 --
 .    Facundo

 Blog: http://www.taniquetil.com.ar/plog/
 PyAr: http://www.python.org/ar/


------------------------------

Message: 6
Date: Thu, 21 Feb 2008 20:18:19 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fpkmab$qg$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 16:32:43 +0000, Giovanni Bajo wrote:

>> At the very least, can you add the issue to the tracker so we'll have a
>> permanent reminder until it's resolved?
> 
> Done: issue 2128. 

The patch was uploaded a few days ago. Can any Windows maintainer find 
some time to review it?

Thanks!
-- 
Giovanni Bajo



------------------------------

Message: 7
Date: Wed, 20 Feb 2008 21:45:40 +0100
From: Andrew Dalke <dalke@dalkescientific.com>
Subject: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <9CB907CE-4F42-4AE9-9D28-90A6DCA83EDB@dalkescientific.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

For lack of a better term, I'll call this a destructuring del

    del (a, (b, (c)))

I propose that it should not be valid in Python 3.

It's supported in 2.x and 3.0a2.  It's never caused anyone problems.   
No one (that I can find through 10 minutes of grepping) uses it.   
When I figured out that I could do it, by looking at the grammar, I  
didn't believe it was valid.  I still can't figure out why anyone  
would use it.

Python 3 removes support for destructuring in function calls

def f((a,b)):  # SyntaxError in Python3
    pass

and I think this falls into the same category.

I would even argue that

    del(x)

should not be allowed because it's suggests and is likely based on  
the false belief that 'del' is a function call.  But I'm not  
proposing getting rid of return(x).


				Andrew
				dalke@dalkescientific.com




------------------------------

Message: 8
Date: Thu, 21 Feb 2008 17:25:32 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] removing destructuring del
To: ""Andrew Dalke"" <dalke@dalkescientific.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802211725i39c0ef49nb07943ab5531a99e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

What syntax would you allow instead? Just del variable, variable, ...?

On Wed, Feb 20, 2008 at 12:45 PM, Andrew Dalke
<dalke@dalkescientific.com> wrote:
> For lack of a better term, I'll call this a destructuring del
>
>     del (a, (b, (c)))
>
>  I propose that it should not be valid in Python 3.
>
>  It's supported in 2.x and 3.0a2.  It's never caused anyone problems.
>  No one (that I can find through 10 minutes of grepping) uses it.
>  When I figured out that I could do it, by looking at the grammar, I
>  didn't believe it was valid.  I still can't figure out why anyone
>  would use it.
>
>  Python 3 removes support for destructuring in function calls
>
>  def f((a,b)):  # SyntaxError in Python3
>     pass
>
>  and I think this falls into the same category.
>
>  I would even argue that
>
>     del(x)
>
>  should not be allowed because it's suggests and is likely based on
>  the false belief that 'del' is a function call.  But I'm not
>  proposing getting rid of return(x).
>
>
>                                 Andrew
>                                 dalke@dalkescientific.com
>
>
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Fri, 22 Feb 2008 08:27:37 +0100
From: Andrew Dalke <dalke@dalkescientific.com>
Subject: Re: [Python-3000] removing destructuring del
To: python-3000@python.org
Message-ID: <741DC74F-8366-471F-B0C2-9B9153F4D83F@dalkescientific.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On Feb 22, 2008, at 2:25 AM, Guido van Rossum wrote:
> What syntax would you allow instead? Just del variable, variable, ...?

Yes.  These are and should be legal

del a, b[1], c.d
del (e+f).g[9]().h

but I think this should not be legal

del a, (b, c)

That should raise

   SyntaxError: can't delete tuple

and I would also like it if the following raised the same error

   del (a, b)

but people use it now and I can see that perhaps, like with the from  
statement, using '()' for long expressions is useful

   del (some_very_large_variable_name[1],
        another_large_variable_name[2].with_attribute)


I also think

   del a,

should not be legal (""SyntaxError: trailing comma not allowed without  
surrounding parentheses""?), but that's getting into my own personal  
preferences.

				Andrew
				dalke@dalkescientific.com




------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 49
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 48","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: detect file encoding or always use the default,	UTF-8?
      (Ronald Oussoren)
   2. Re: detect file encoding or always use the default,	UTF-8?
      (Kumar McMillan)
   3. PEP 3119 ""Open issues"" (James Thiele)


----------------------------------------------------------------------

Message: 1
Date: Wed, 20 Feb 2008 15:54:30 +0100
From: Ronald Oussoren <ronaldoussoren@mac.com>
Subject: Re: [Python-3000] detect file encoding or always use the
	default,	UTF-8?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <DE65E9A2-70D6-44FF-A56B-C9679B762F62@mac.com>
Content-Type: text/plain; charset=""us-ascii""


On 19 Feb, 2008, at 19:33, Guido van Rossum wrote:

> Well, we're basically hoping that the folks who actually uses Python
> to read and write text files containing non-ASCII characters on OSX
> tell us what they want. At least that's where I am. Since I personally
> still live in a nearly-ASCII world (and probably always will), my own
> experience just doesn't give me any guidance as to what would be the
> most useful.

I'd prefer UTF-8 because that's a much more standard format in the  
wider world.
>
>
> How does Apple's TextEdit do the guessing (assuming it guesses at  
> all)?

TextEdit by default saves as UTF-8 on 10.5 (at encoding set to  
""automatic"" in the preferences).

Ronald

>
>
> I just typed a few non-ASCII characters into a text file with TextEdit
> on OSX 10.5, and it seems to have written the file in MacRoman. This
> with the preferences for open and save set to automatic.
>
> --Guido
>
> On Feb 18, 2008 4:32 PM, Kumar McMillan <kumar.mcmillan@gmail.com>  
> wrote:
>> Hello.
>>
>> In Python 3, when opening a file without declaring the encoding
>> keyword is Python going to guess the encoding of the file or just use
>> the default?  That is, assume the file is UTF-8?
>>
>> What led me to wonder this is that on Mac OS X 10.4.11, opening a  
>> file
>> containing UTF-8 encoded text creates a unicode object under the
>> assumption the text was ""mac roman"" encoding.  This seems like a bug.
>> It works if I set the encoding to UTF-8 explicitly.  I can post the
>> code but it sounds like there are some Mac encoding issues in flux so
>> I thought to ask first.
>>
>> thanks, Kumar
>> _______________________________________________
>> Python-3000 mailing list
>> Python-3000@python.org
>> http://mail.python.org/mailman/listinfo/python-3000
>> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>>
>
>
>
> -- 
> --Guido van Rossum (home page: http://www.python.org/~guido/)
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/ronaldoussoren%40mac.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2224 bytes
Desc: not available
Url : http://mail.python.org/pipermail/python-3000/attachments/20080220/f294a21e/attachment-0001.bin 

------------------------------

Message: 2
Date: Wed, 20 Feb 2008 09:30:57 -0600
From: ""Kumar McMillan"" <kumar.mcmillan@gmail.com>
Subject: Re: [Python-3000] detect file encoding or always use the
	default,	UTF-8?
To: ""Ronald Oussoren"" <ronaldoussoren@mac.com>
Cc: python-3000@python.org
Message-ID:
	<b571660a0802200730h29b6751ey6c3079f7cee307eb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 20, 2008 8:54 AM, Ronald Oussoren <ronaldoussoren@mac.com> wrote:
>
> I'd prefer UTF-8 because that's a much more standard format in the
> wider world.

I agree.  Mac OS Roman is only marginally better than ASCII.  UTF-8
would be more versatile.


------------------------------

Message: 3
Date: Wed, 20 Feb 2008 11:34:22 -0800
From: ""James Thiele"" <python3now@gmail.com>
Subject: [Python-3000] PEP 3119 ""Open issues""
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<8f01efd00802201134v96c9bccu9095ea178631e8df@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

PEP 3119 has some ""Open issues"", three of which I list below. These
have (I assume) probably been resolved but it is hard to know what
search terms to use to find them in this mailing list. It would be
useful to record the decisions in the PEP, or at least resolve them if
they are still open issues.

(in ""One Trick Ponies"") Open issues: Conceivably, instead of using the
ABCMeta metaclass, these classes could override __instancecheck__ and
__subclasscheck__ to check for the presence of the applicable special
method

(in Sequence) Open issues: Other candidate methods, which can all have
default concrete implementations that only depend on __len__ and
__getitem__ with an integer argument: __reversed__, index, count,
__add__, __mul__.

(in Strings) Open issues: define the base interfaces for these so
alternative implementations and subclasses know what they are in for.
This may be the subject of a new PEP or PEPs (PEP 358 should be
co-opted for the bytes type).


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 48
*******************************************
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 47","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: detect file encoding or always use the default,	UTF-8?
      (Guido van Rossum)
   2. Re: PEP 3102 (Arnaud Delobelle)
   3. Re: detect file encoding or always use the default,	UTF-8?
      (Kumar McMillan)
   4. Library Change Request: change	functools.partial.keywords to
      kwargs (hashcollision)
   5. Re: Library Change Request: change	functools.partial.keywords
      to kwargs (Brett Cannon)
   6. Re: Library Change Request: change	functools.partial.keywords
      to kwargs (Collin Winter)
   7. Re: Library Change Request: change	functools.partial.keywords
      to kwargs (Nick Coghlan)
   8. Re: PEP 3102 (Jim Jewett)


----------------------------------------------------------------------

Message: 1
Date: Tue, 19 Feb 2008 10:33:03 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] detect file encoding or always use the
	default,	UTF-8?
To: ""Kumar McMillan"" <kumar.mcmillan@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802191033y1f52fd6cm80e0f7176d3ff696@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Well, we're basically hoping that the folks who actually uses Python
to read and write text files containing non-ASCII characters on OSX
tell us what they want. At least that's where I am. Since I personally
still live in a nearly-ASCII world (and probably always will), my own
experience just doesn't give me any guidance as to what would be the
most useful.

How does Apple's TextEdit do the guessing (assuming it guesses at all)?

I just typed a few non-ASCII characters into a text file with TextEdit
on OSX 10.5, and it seems to have written the file in MacRoman. This
with the preferences for open and save set to automatic.

--Guido

On Feb 18, 2008 4:32 PM, Kumar McMillan <kumar.mcmillan@gmail.com> wrote:
> Hello.
>
> In Python 3, when opening a file without declaring the encoding
> keyword is Python going to guess the encoding of the file or just use
> the default?  That is, assume the file is UTF-8?
>
> What led me to wonder this is that on Mac OS X 10.4.11, opening a file
> containing UTF-8 encoded text creates a unicode object under the
> assumption the text was ""mac roman"" encoding.  This seems like a bug.
> It works if I set the encoding to UTF-8 explicitly.  I can post the
> code but it sounds like there are some Mac encoding issues in flux so
> I thought to ask first.
>
> thanks, Kumar
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Tue, 19 Feb 2008 18:45:06 +0000
From: Arnaud Delobelle <arnodel@googlemail.com>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <2C0C17DD-7DD1-4563-BB6E-9F3DC9491EF6@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On 19 Feb 2008, at 10:49, Nick Coghlan wrote:
[...]
>> Such obscure features warrant an obscure yet well-named decorator,  
>> not
>> an obscure syntax that's difficult to get help on.
>
> It's difficult to handle this in a decorator, as the problem that  
> occurs is the underlying function reporting duplicate definitions  
> for a parameter.
>
> >>> def f(self, **kwds):
> ...     print self, kwds
> ...
> >>> f(1, self=2)
> Traceback (most recent call last):
>  File ""<stdin>"", line 1, in <module>
> TypeError: f() got multiple values for keyword argument 'self'
>
> There really isn't a lot a decorator can do to prevent this, unless  
> we modify function calls to permit direct assignment of the keywords  
> dictionary without unpacking it. Then it would become possible to  
> provide a decorator in functools along the lines of:
>
> def positional_only(required=1):
>    def wrap(f):
>        @wraps(f)
>        def wrapper(*args, **kwds):
>            if len(args) < required:
>                raise TypeError(""Need %d positional arguments ""
>                                ""(%d given)"" % (required, len(args)))
>            f(*args, **=kwds)
>

[...]

> We've also veered fairly far off topic for the Py3k list - further  
> ideas for positional-only argument syntax or decorators should  
> probably be kicked around on python-ideas rather than here or python- 
> dev.

For reference, here was a long thread on this on python-ideas [1].   
Several syntax options were discussed, I proposed using a decorator  
and several ways of achieving this were posted:

* by Steven Bethard [2]
* by me [3], [4]

I posted a cookbook recipe based on [4].

[1] http://mail.python.org/pipermail/python-ideas/2007-May/000704.html
[2] http://mail.python.org/pipermail/python-ideas/2007-May/000763.html
[3] http://mail.python.org/pipermail/python-ideas/2007-May/000808.html
[4] http://mail.python.org/pipermail/python-ideas/2007-May/000860.html

-- 
Arnaud



------------------------------

Message: 3
Date: Tue, 19 Feb 2008 13:35:38 -0600
From: ""Kumar McMillan"" <kumar.mcmillan@gmail.com>
Subject: Re: [Python-3000] detect file encoding or always use the
	default,	UTF-8?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<b571660a0802191135v5656b747ve058879072da2a9e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hi.
I was mainly confused about the auto-detection of the encoding.  I
thought I read something earlier that Python 3 will not try to guess
encodings and that opening files will always use the sys encoding
(defaulting to UTF-8) instead of guessing.  Can't find where I read
that so I might have made it up :D  Now at least I know it will be
guessing encodings.

On Feb 19, 2008 12:33 PM, Guido van Rossum <guido@python.org> wrote:
> Well, we're basically hoping that the folks who actually uses Python
> to read and write text files containing non-ASCII characters on OSX
> tell us what they want. At least that's where I am. Since I personally
> still live in a nearly-ASCII world (and probably always will), my own
> experience just doesn't give me any guidance as to what would be the
> most useful.

I too pretty much work entirely in ascii for day to day stuff so it's
hard to say.

>
> How does Apple's TextEdit do the guessing (assuming it guesses at all)?
>
> I just typed a few non-ASCII characters into a text file with TextEdit
> on OSX 10.5, and it seems to have written the file in MacRoman. This
> with the preferences for open and save set to automatic.

Were you saving in RTF format or plain text?  TextEdit is strange in
that it makes it hard to save a plain text file so if you were working
with RTF files I'd think you'd have to open it from Python in binary
mode anyway, no?

But for plain text TextEdit doesn't guess.  I typed some non-ascii and
went to format -> Make plain text.  Then in the save dialog it
defaulted to UTF-16 and the only options (without making custom
modifications) were UTF-8 and simplified Chinese.  However, this was
on 10.4; someone checked 10.5 for me and said the default is UTF-8
(sounds like they fixed something!).


thanks, Kumar


------------------------------

Message: 4
Date: Tue, 19 Feb 2008 14:54:40 -0500
From: hashcollision <hashcollision@gmail.com>
Subject: [Python-3000] Library Change Request: change
	functools.partial.keywords to kwargs
To: python-3000@python.org
Message-ID:
	<37f76d50802191154r56f7c655xb1b5b91dbcba23cc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I have a library change request: currently partial Objects created by
functools.partial has the ""keywords"" attribute. However, the standard
name for something like it is kwargs. I request that it be renamed to
""kwargs"".

http://docs.python.org/lib/partial-objects.html


------------------------------

Message: 5
Date: Tue, 19 Feb 2008 12:03:31 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Library Change Request: change
	functools.partial.keywords to kwargs
To: hashcollision <hashcollision@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100802191203rf305d8v1213ee193ffbe56f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 19, 2008 11:54 AM, hashcollision <hashcollision@gmail.com> wrote:
> I have a library change request: currently partial Objects created by
> functools.partial has the ""keywords"" attribute. However, the standard
> name for something like it is kwargs. I request that it be renamed to
> ""kwargs"".

-1

The change has minor benefit while breaking code in the process. If
you want this to happen it is going to take at least a full release
cycle of having a deprecation warning on the old attribute name and I
still don't see enough benefit to bother.

-Brett


------------------------------

Message: 6
Date: Tue, 19 Feb 2008 12:03:40 -0800
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] Library Change Request: change
	functools.partial.keywords to kwargs
To: hashcollision <hashcollision@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<43aa6ff70802191203m71594d56gb15f2806d5a0ad22@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 19, 2008 11:54 AM, hashcollision <hashcollision@gmail.com> wrote:
> I have a library change request: currently partial Objects created by
> functools.partial has the ""keywords"" attribute. However, the standard
> name for something like it is kwargs. I request that it be renamed to
> ""kwargs"".

Is it conflicting with something you're doing or this just a personal
aesthetic preference?

Collin Winter


------------------------------

Message: 7
Date: Wed, 20 Feb 2008 09:14:56 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Library Change Request: change
	functools.partial.keywords to kwargs
To: Brett Cannon <brett@python.org>
Cc: hashcollision <hashcollision@gmail.com>, python-3000@python.org
Message-ID: <47BB62F0.5050202@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon wrote:
> On Feb 19, 2008 11:54 AM, hashcollision <hashcollision@gmail.com> wrote:
>> I have a library change request: currently partial Objects created by
>> functools.partial has the ""keywords"" attribute. However, the standard
>> name for something like it is kwargs. I request that it be renamed to
>> ""kwargs"".
> 
> -1
> 
> The change has minor benefit while breaking code in the process. If
> you want this to happen it is going to take at least a full release
> cycle of having a deprecation warning on the old attribute name and I
> still don't see enough benefit to bother.

Calling 'kwargs' a standard name is overstating the case quite a bit as 
well (I always use '**kwds' myself).

Cheers,
Nick.

P.S. -1 if that wasn't obvious ;)

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 8
Date: Tue, 19 Feb 2008 20:33:48 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: ""Adam Olsen"" <rhamph@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<fb6fbf560802191733l254a3ea2id914812970b50259@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 2/18/08, Adam Olsen <rhamph@gmail.com> wrote:
> On Feb 18, 2008 1:17 PM, Arnaud Delobelle <arnodel@googlemail.com> wrote:
> > A typical use of positional-only arguments is with a function

> > def f(x, y=1, **kwargs):
> >         ...
> >
> > where keyword arguments are potentially anything at all, including x
> > and y.  For example: dict.update().

> I worry that dict is not just an example, it may be the *only*
> example.  Does somebody have a use case that doesn't involve dict?

Some existing functions are positional only, often because they expose
underlying (positional-only) C library functions.  Attemping to make a
duck-type replacement just doesn't feel as clean if the arguments are
named.

That said, I don't think it does any actual damage except for the ""and
it takes arbitrary keywords"" case.  Even then, a reserved set (such as
__* names) is usually acceptable.

-jJ


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 47
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 46","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows: debug mode (Martin v. L?wis)
   2. Re: PEP 3102 (Talin)
   3. Re: PEP 3102 (Arnaud Delobelle)
   4. detect file encoding or always use the default, UTF-8?
      (Kumar McMillan)
   5. Re: PEP 3102 (Adam Olsen)
   6. Re: PEP 3102 (Nick Coghlan)


----------------------------------------------------------------------

Message: 1
Date: Mon, 18 Feb 2008 19:17:22 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows: debug mode
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <47B9CBB2.3070105@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>> Is there a way to make distutils do this for me with a simple command-
>> line switch?
> 
> Yes - provide a patch :)
> 
>> 2) Add the same compilation mode to Python itself, so that users can 
>> easily compile a Python DLL which has debug symbols but with the release 
>> ABI (since stepping into the Python's core can be useful while debugging 
>> an extension).
> 
> The Windows build files were carefully design for the job. [...]

As he says.

Regards,
Martin


------------------------------

Message: 2
Date: Mon, 18 Feb 2008 11:39:37 -0800
From: Talin <talin@acm.org>
Subject: Re: [Python-3000] PEP 3102
To: Arnaud Delobelle <arnodel@googlemail.com>
Cc: python-3000@python.org
Message-ID: <47B9DEF9.2070606@acm.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Arnaud Delobelle wrote:
> 
> On Feb 14, 11:13 pm, ""Guido van Rossum"" <gu...@python.org> wrote:
>> On Thu, Feb 14, 2008 at 2:48 PM, Raymond Hettinger <pyt...@rcn.com> wrote:
>>> I've been exercising the new keyword-only arguments syntax.  It is absolutely wonderful.  I'm amazed at how many long standing problems it solves elegantly.
>> Agreed. Now can you come up with a syntax for positional-only
>> arguments? So far everybody has failed at that, and there are some use
>> cases where it's useful too.
> 
> The idea in PEP 3102 is that *args gobbles up all remaining positional
> arguments, hence what comes after can only be interpreted as
> keyword-only arguments. This is extended to allowing * on its own.
> 
> e.g. f(*, z, t=2)
>      => z, t are keyword-only
> 
> Following the same train of thought, **kwargs gobbles up all remaining
> keyword arguments, hence what comes after can only interpreted as
> positional-only arguments.  Then one could extend it to allowing ** on
> its own.
> 
> e.g. f(**, x, y=1)
>      => x, y are positional-only
> 
> Now, how do keyword-only arguments fit in?  Say x, y=1 are
> positional-only and z, t=2 are keyword-only.  One could have:
> 
> f(**, x, y=1, *, z, t=2)
> 
> The general cases could look like
> 
> f(x, y=1, *args, z, t=2, **kwargs):
>      => x, y are hybrid
>      => args: all remaining positional arguments
>      => z, t are keyword-only
>      => kwargs: all remaining keyword arguments
> 
> f(**kwargs, x, y=1, *args, z, t=2):
>      => x, y are positional-only
>      => args: all remaining positional arguments
>      => z, t are keyword-only
>      => kwargs: all remaining keyword arguments
> 
> 'args' and 'kwargs' are optional in both cases. If 'kwargs' is present
> in the second version, it is a bit strange as it usually only appears
> at the end.  Alternatively, only '**' could be allowed at the start
> and if needed '**kwargs' would come at the end:
> 
> f(**, x, y=1, *args, z, t=2, **kwargs)
> 
> Note that this syntax doesn't allow for positional-only and hybrid
> arguments to coexist.  But this is nice IMHO, as it seems to me that
> it would only create confusion.
> 
> Unconvincingly yours,

Well, that is certainly a logical continuation of the train of thought 
behind the 'single *' syntax.

I'd be curious to know which parts of 3102 people are finding most 
useful. You see, the itch that I was originally attempting to scratch 
concerned just the narrow use case of combining a 'varargs' function 
with optional keywords. I've seen/written a lot of code where you have a 
function that takes a list of arguments, with a couple of optional 
keywords that control how that list is handled, and 3102 was intended to 
make that case much easier to handle.

I was never all that interested in 'forcing' some of the arguments to a 
non-varargs function to be specified by keyword. I am perfectly 
comfortable with the idea that the caller always gets to choose whether 
to pass something positionally or via keyword, and limiting the caller's 
choice seems vaguely unpythonic to me. However, I included that part in 
the PEP based on the feedback from here.

In any case, limiting arguments to being specified by keyword-only or 
positional-only was not part of my original 'itch', and I am curious as 
to what are the use cases for it that people are envisioning.

> --
> Arnaud
> 
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/talin%40acm.org
> 


------------------------------

Message: 3
Date: Mon, 18 Feb 2008 20:17:41 +0000
From: Arnaud Delobelle <arnodel@googlemail.com>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <6AF2BB12-ECFE-4B32-A6F8-DE589C49E213@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On 18 Feb 2008, at 19:39, Talin wrote:

> Arnaud Delobelle wrote:
>>
[...]
>> Unconvincingly yours,
>
> Well, that is certainly a logical continuation of the train of  
> thought behind the 'single *' syntax.

> I'd be curious to know which parts of 3102 people are finding most  
> useful. You see, the itch that I was originally attempting to  
> scratch concerned just the narrow use case of combining a 'varargs'  
> function with optional keywords. I've seen/written a lot of code  
> where you have a function that takes a list of arguments, with a  
> couple of optional keywords that control how that list is handled,  
> and 3102 was intended to make that case much easier to handle.

Another use would be allowing the '_cache trick' with a varargs  
function, i.e.

def f(*args, _cache={}):
	...

Personally I don't like this trick though...

> I was never all that interested in 'forcing' some of the arguments  
> to a non-varargs function to be specified by keyword. I am perfectly  
> comfortable with the idea that the caller always gets to choose  
> whether to pass something positionally or via keyword, and limiting  
> the caller's choice seems vaguely unpythonic to me. However, I  
> included that part in the PEP based on the feedback from here.
>
> In any case, limiting arguments to being specified by keyword-only  
> or positional-only was not part of my original 'itch', and I am  
> curious as to what are the use cases for it that people are  
> envisioning.
>

A typical use of positional-only arguments is with a function

def f(x, y=1, **kwargs):
	...

where keyword arguments are potentially anything at all, including x  
and y.  For example: dict.update().  In fact it is a fairly  
symmetrical itch to yours: without positional only arguments, the  
above must be written something like:

def f(*args, **kwargs):
	nargs = len(args)
	if 1 <= nargs <= 2:
		x = args[0]
		y = args[1] if nargs==2 else 1
	else:
		raise blah
	...

whereas with positional-only arguments (using the syntax I put  
forward) one could write simply:

def f(**kwargs, x, y=1)

Just like

def f(*args, a, b=1):
	...

had to be written pre-PEP 3102 as something like:

def f(*args, **kwargs):
	a = kwargs.pop('a')
	b = kwargs.pop('b', 1)
	if kwargs:
		raise blah	

Both itches are about not having to unpack something: **kwargs in the  
case of PEP 3102, *args in the case of positional-only arguments.


-- 
Arnaud



------------------------------

Message: 4
Date: Mon, 18 Feb 2008 18:32:35 -0600
From: ""Kumar McMillan"" <kumar.mcmillan@gmail.com>
Subject: [Python-3000] detect file encoding or always use the default,
	UTF-8?
To: python-3000@python.org
Message-ID:
	<b571660a0802181632k5acf9781v410f7229b316c0c7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hello.

In Python 3, when opening a file without declaring the encoding
keyword is Python going to guess the encoding of the file or just use
the default?  That is, assume the file is UTF-8?

What led me to wonder this is that on Mac OS X 10.4.11, opening a file
containing UTF-8 encoded text creates a unicode object under the
assumption the text was ""mac roman"" encoding.  This seems like a bug.
It works if I set the encoding to UTF-8 explicitly.  I can post the
code but it sounds like there are some Mac encoding issues in flux so
I thought to ask first.

thanks, Kumar


------------------------------

Message: 5
Date: Mon, 18 Feb 2008 18:29:39 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: ""Arnaud Delobelle"" <arnodel@googlemail.com>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0802181729x4c5ee5f4tc85daa67c6ac379b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 18, 2008 1:17 PM, Arnaud Delobelle <arnodel@googlemail.com> wrote:
> A typical use of positional-only arguments is with a function
>
> def f(x, y=1, **kwargs):
>         ...
>
> where keyword arguments are potentially anything at all, including x
> and y.  For example: dict.update().  In fact it is a fairly
> symmetrical itch to yours: without positional only arguments, the
> above must be written something like:

I worry that dict is not just an example, it may be the *only*
example.  Does somebody have a use case that doesn't involve dict?

Whereas keyword-only arguments force explicitness (at the cost of
brevity), positional-only arguments do the opposite.  The default
already allows us to choose brevity when appropriate, and the only
reason I see to force it is when there's a conflict with **kwargs.
Such obscure features warrant an obscure yet well-named decorator, not
an obscure syntax that's difficult to get help on.


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 6
Date: Tue, 19 Feb 2008 20:49:28 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: Adam Olsen <rhamph@gmail.com>
Cc: python-3000@python.org
Message-ID: <47BAB438.9050504@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Adam Olsen wrote:
> Whereas keyword-only arguments force explicitness (at the cost of
> brevity), positional-only arguments do the opposite.  The default
> already allows us to choose brevity when appropriate, and the only
> reason I see to force it is when there's a conflict with **kwargs.

Which for me happens when I have a method which I want to accept 
arbitrary keyword arguments (I'll grant that isn't very often, but it 
has happened). I have to choose between disallowing 'self' or '_self' as 
one of the no-longer-quite-so-arbitrary keyword arguments, or else I 
have to do the song and dance to implement manual unpacking.

> Such obscure features warrant an obscure yet well-named decorator, not
> an obscure syntax that's difficult to get help on.

It's difficult to handle this in a decorator, as the problem that occurs 
is the underlying function reporting duplicate definitions for a parameter.

 >>> def f(self, **kwds):
...     print self, kwds
...
 >>> f(1, self=2)
Traceback (most recent call last):
   File ""<stdin>"", line 1, in <module>
TypeError: f() got multiple values for keyword argument 'self'

There really isn't a lot a decorator can do to prevent this, unless we 
modify function calls to permit direct assignment of the keywords 
dictionary without unpacking it. Then it would become possible to 
provide a decorator in functools along the lines of:

def positional_only(required=1):
     def wrap(f):
         @wraps(f)
         def wrapper(*args, **kwds):
             if len(args) < required:
                 raise TypeError(""Need %d positional arguments ""
                                 ""(%d given)"" % (required, len(args)))
             f(*args, **=kwds)

The idea of the **= syntax would be that the supplied dictionary is used 
directly as the arbitrary keywords parameter for the underlying 
function. Other named arguments would *not* be extracted from that 
dictionary (obviously, the above decorator would need further work in 
order to correctly handle parameters which can passed as either 
positional or keywords parameters).

Personally, I don't think the problem comes up often enough to be overly 
worried about it, as much as my sense of aesthetics would like to see an 
elegant solution (as judged by own personal definition of elegance of 
course ;)

We've also veered fairly far off topic for the Py3k list - further ideas 
for positional-only argument syntax or decorators should probably be 
kicked around on python-ideas rather than here or python-dev.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 46
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 45","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: PEP 3102 (Arnaud Delobelle)
   2. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   3. Re: Windows, sys.argv and unicode (Christian Heimes)
   4. Re: Windows: debug mode (Giovanni Bajo)
   5. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   6. Re: Windows: debug mode (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Sun, 17 Feb 2008 09:45:48 -0800 (PST)
From: Arnaud Delobelle <arnodel@googlemail.com>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID:
	<f9c7d49c-2807-4f5d-9a97-017de341dbda@60g2000hsy.googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1



On Feb 14, 11:13?pm, ""Guido van Rossum"" <gu...@python.org> wrote:
> On Thu, Feb 14, 2008 at 2:48 PM, Raymond Hettinger <pyt...@rcn.com> wrote:
> > I've been exercising the new keyword-only arguments syntax. ?It is absolutely wonderful. ?I'm amazed at how many long standing problems it solves elegantly.
>
> Agreed. Now can you come up with a syntax for positional-only
> arguments? So far everybody has failed at that, and there are some use
> cases where it's useful too.

The idea in PEP 3102 is that *args gobbles up all remaining positional
arguments, hence what comes after can only be interpreted as
keyword-only arguments. This is extended to allowing * on its own.

e.g. f(*, z, t=2)
     => z, t are keyword-only

Following the same train of thought, **kwargs gobbles up all remaining
keyword arguments, hence what comes after can only interpreted as
positional-only arguments.  Then one could extend it to allowing ** on
its own.

e.g. f(**, x, y=1)
     => x, y are positional-only

Now, how do keyword-only arguments fit in?  Say x, y=1 are
positional-only and z, t=2 are keyword-only.  One could have:

f(**, x, y=1, *, z, t=2)

The general cases could look like

f(x, y=1, *args, z, t=2, **kwargs):
     => x, y are hybrid
     => args: all remaining positional arguments
     => z, t are keyword-only
     => kwargs: all remaining keyword arguments

f(**kwargs, x, y=1, *args, z, t=2):
     => x, y are positional-only
     => args: all remaining positional arguments
     => z, t are keyword-only
     => kwargs: all remaining keyword arguments

'args' and 'kwargs' are optional in both cases. If 'kwargs' is present
in the second version, it is a bit strange as it usually only appears
at the end.  Alternatively, only '**' could be allowed at the start
and if needed '**kwargs' would come at the end:

f(**, x, y=1, *args, z, t=2, **kwargs)

Note that this syntax doesn't allow for positional-only and hybrid
arguments to coexist.  But this is nice IMHO, as it seems to me that
it would only create confusion.

Unconvincingly yours,

--
Arnaud



------------------------------

Message: 2
Date: Sun, 17 Feb 2008 21:25:42 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fpa8om$46i$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sun, 17 Feb 2008 18:09:18 +0100, Martin v. L?wis wrote:

>> Actually, I am. Py3k will already remove usage of stdio, for file input
>> and output. 

>> Are you doing this work on some public branch?
> 
> Yes, on the Py3k branch, and the trunk.

I looked at fileobject.c in py3k branch today and it looked like it was 
still using FILE* everywhere. I'm not sure I know where to look, though.

BTW, is there a public description about how you are planning to remove 
usage of stdio from fileobject? For instance, will PyFile_FromFile() be 
deprecated/removed?

Generically speaking, all the UNIX world seems to speak char* and UTF-8 
lately, while the Windows world speaks either char* and MBCS or wchar_t 
and UTF-16[*]. How do you plan to make these two world live together?

In case the question is not clear, I elaborate with an example. Today, I 
found out that putting Unicode strings in sys.path breaks zipimporter, 
because it expects a 8-byte string; I guess the whole import machinery 
passes char* everywhere for filenames and directories. How do you plan to 
make all that code Unicode-aware on Windows?

[*] I'm not a Unicode guru, so I'm not 100% sure that the wide APIs in 
Windows formally accepts UTF-16, but at least it looks like UTF-16 to 
me :) It's not really relevant to the question, I reckon.
-- 
Giovanni Bajo



------------------------------

Message: 3
Date: Sun, 17 Feb 2008 22:31:56 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fpa94c$5sg$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

Giovanni Bajo wrote:
> On Sun, 17 Feb 2008 18:09:18 +0100, Martin v. L?wis wrote:
> 
>>> Actually, I am. Py3k will already remove usage of stdio, for file input
>>> and output. 
> 
>>> Are you doing this work on some public branch?
>> Yes, on the Py3k branch, and the trunk.
> 
> I looked at fileobject.c in py3k branch today and it looked like it was 
> still using FILE* everywhere. I'm not sure I know where to look, though.

Are you looking at the correct sources? Neither fileobject nor _fileio.c
are using FILE except for Py_UniversalNewlineFgets.

Christian



------------------------------

Message: 4
Date: Sun, 17 Feb 2008 21:33:46 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows: debug mode
To: python-3000@python.org
Message-ID: <fpa97q$46i$2@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sun, 17 Feb 2008 18:19:30 +0100, Martin v. L?wis wrote:

>> Thus, I'm hereby proposing that we change this in Py3k so that Python's
>> debug mode does not mandate any ABI change anymore.
> 
> It seems people still debate what it is that you *actually* want. 

Yes, sorry for the confusion. 

> This
> sentence suggests Christian's interpretation, i.e. you might be unaware
> that the debug mode not only adds debug symbols, but also changes the
> layout of objects. That is *very* useful, and should not be dropped.

Yes, I know it changes the ABI, and I know it must say as it is. I 
believe that Py_DEBUG is mostly useful to core developers and not much to 
extension developer or regular Python developers, but it's immaterial in 
this discussion.

>> This means that a
>> programmer will be able to mixmatch release-mode extensions and
>> compile- mode extensions, thus getting debuggability only of those
>> extensions he really cares.
> 
> Whereas this suggests Phillip's interpretation, i.e. you merely want
> debug symbols on a single DLL.

Yes I want this.

> You can get that today - just enable debug information for your
> extension module, and the compiler will emit the PDB files you need for
> debugging.

Yes, this is what I do everyday by manually hand-edit my setup.py script. 
Is there a way to make distutils do this for me with a simple command-
line switch?

I think my request can be resumed like this:

1) Add to distutils a way support to compile extensions with debug 
informations, without optimizations, and linked with the non-debug CRT.

2) Add the same compilation mode to Python itself, so that users can 
easily compile a Python DLL which has debug symbols but with the release 
ABI (since stepping into the Python's core can be useful while debugging 
an extension).

I hope it's clear now :)
-- 
Giovanni Bajo



------------------------------

Message: 5
Date: Sun, 17 Feb 2008 21:45:38 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fpa9u2$46i$3@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sun, 17 Feb 2008 22:31:56 +0100, Christian Heimes wrote:

> Giovanni Bajo wrote:
>> On Sun, 17 Feb 2008 18:09:18 +0100, Martin v. L?wis wrote:
>> 
>>>> Actually, I am. Py3k will already remove usage of stdio, for file
>>>> input and output.
>> 
>>>> Are you doing this work on some public branch?
>>> Yes, on the Py3k branch, and the trunk.
>> 
>> I looked at fileobject.c in py3k branch today and it looked like it was
>> still using FILE* everywhere. I'm not sure I know where to look,
>> though.
> 
> Are you looking at the correct sources? Neither fileobject nor _fileio.c
> are using FILE except for Py_UniversalNewlineFgets.

Doh! I don't know what I was looking at... I probably got my directory 
crossed. Sorry for the spam.
-- 
Giovanni Bajo



------------------------------

Message: 6
Date: Sun, 17 Feb 2008 23:11:24 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows: debug mode
To: python-3000@python.org
Message-ID: <fpabed$dfv$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

Giovanni Bajo wrote:
> Yes, I know it changes the ABI, and I know it must say as it is. I 
> believe that Py_DEBUG is mostly useful to core developers and not much to 
> extension developer or regular Python developers, but it's immaterial in 
> this discussion.

Py_DEBUG builds are useful to extension developers, too. It's the best
way to debug reference leaks. You'll need at least a Py_REF_DEBUG build
for the task.

> Yes, this is what I do everyday by manually hand-edit my setup.py script. 
> Is there a way to make distutils do this for me with a simple command-
> line switch?

Yes - provide a patch :)

> 2) Add the same compilation mode to Python itself, so that users can 
> easily compile a Python DLL which has debug symbols but with the release 
> ABI (since stepping into the Python's core can be useful while debugging 
> an extension).

The Windows build files were carefully design for the job. I've invested
quite some time to build a project inheritance tree. All projects
inherit settings from pyproject.vsprops. In order to build a release
version of Python with less optimization and debug symbols you've to
alter the global properties for Release|Win32 and recompile the project.

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 45
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 44","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   2. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   3. Windows: debug mode (Giovanni Bajo)
   4. Re: Windows: debug mode (Christian Heimes)
   5. Re: weakrefs of bound methods (Phillip J. Eby)
   6. Re: Windows: debug mode (Phillip J. Eby)
   7. Re: Windows, sys.argv and unicode (Martin v. L?wis)
   8. Re: Windows: debug mode (Christian Heimes)
   9. Re: Windows, sys.argv and unicode (Martin v. L?wis)
  10. Re: Windows: debug mode (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Sun, 17 Feb 2008 11:24:23 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp95h7$qm7$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 21:01:10 +0100, Martin v. L?wis wrote:

>> If you avoided the static CRT, and only used Windows APIs, that would
>> avoid this issue, but that means reimplementing everything -
>> malloc/free, FILE*, stdin/stdout/stderr, etc etc. I don't think anyone
>> is contemplating that.
> 
> Actually, I am. Py3k will already remove usage of stdio, for file input
> and output. 

Are you doing this work on some public branch?
-- 
Giovanni Bajo



------------------------------

Message: 2
Date: Sun, 17 Feb 2008 11:27:55 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp95nr$qm7$2@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 20:58:51 +0100, Martin v. L?wis wrote:

>> BTW: is there a long-time plan to make the Python core *not* link
>> against msvcrt dll anymore but only rely on Windows APIs (or maybe also
>> the static C runtime, I don't really care)?
> 
> I have plans to reduce usage of the CRT as much as possible. I don't
> believe that linking statically would actually work very well.

Given a reduced usage of CRT, why statically linking should not work?

For instance, if all else fail wrt memory allocation, I can't see why it 
is a problem using the statically-linked CRT's malloc (or another multi-
platform malloc implementation like Google's tcmalloc -- which would of 
course be statically linked as well).
-- 
Giovanni Bajo



------------------------------

Message: 3
Date: Sun, 17 Feb 2008 13:09:40 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: [Python-3000] Windows: debug mode
To: python-3000@python.org
Message-ID: <fp9bmk$9lb$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

Hi,

an issue related to the CRT removal/reduced usage under Windows is that 
of debug mode, which I stand that it is mostly useless as it is currently 
implemented.

Python's debug mode under Windows mandates an ABI change: the debug 
version of dynamic libraries (_d) are linked against the CRT debug 
runtime, which is not ABI-compatible to the release runtime. So you 
either have the _d version of all the extensions you need or you can't 
even start your program in debug mode. I believe this started back in the 
days where Python programs were small, had only a couple of dependencies, 
and most developers were also core developers (core developers are 
probably the only ones that can succesfully use the current debug mode).

Thus, what happens is that if you get a segfault in an extension library 
(eg: one you're developing) within a large application, you are forced to 
*recompile all your dependencies* to debug mode before being able to 
debug your extension. This is long and tiresome: you might be using large 
and complex extensions (like numpy or PyOpenGL) which are really hard to 
compile and requires many C-level dependecies and complicated setup; in 
fact, it is likely that you have always used them through their binary 
release-only distributions, and now, simply to get a small stacktrace of 
a crash in your extension, you are forced to setup the whole development 
environment needed to recompile all those extensions!

So, what does a programmer do instead, today? It simply hacks his own 
distutils script to compile his own extension in debug mode, but 
*without* relying on Python's official debug mode support, that is 
*without* using CRT's debug libraries; for example, adding /Zi and /DEBUG 
switches to Visual Studio compiler and linker is sufficient to get a 
*fully debuggable* extension that fully cooperates with the standard 
Python runtime and the standard binary extensions. So, the programmer 
totally ditches the official debug support (eg: --debug in distutils), 
and has to come up with something himself. 

Thus, I'm hereby proposing that we change this in Py3k so that Python's 
debug mode does not mandate any ABI change anymore. This means that a 
programmer will be able to mixmatch release-mode extensions and compile-
mode extensions, thus getting debuggability only of those extensions he 
really cares. He will be able to compile in debug mode only his extension 
by simply doing ""setup.py build --debug"" and get useful stacktraces and 
debuggability (step-by-step, whatever) through it, without even needed a 
debug build of Python.

If people agree on this goal, I'm willing to actually implement it in the 
Python core (there must be a change in the logic through which ""_d"" 
extensions are picked up since they would become optional rather than 
required) and everywhere else it might be needed (eg: distutils).
-- 
Giovanni Bajo



------------------------------

Message: 4
Date: Sun, 17 Feb 2008 15:23:17 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows: debug mode
To: python-3000@python.org
Message-ID: <fp9g0m$oc3$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Giovanni Bajo wrote:
> Python's debug mode under Windows mandates an ABI change: the debug 
> version of dynamic libraries (_d) are linked against the CRT debug 
> runtime, which is not ABI-compatible to the release runtime. So you 
> either have the _d version of all the extensions you need or you can't 
> even start your program in debug mode. I believe this started back in the 
> days where Python programs were small, had only a couple of dependencies, 
> and most developers were also core developers (core developers are 
> probably the only ones that can succesfully use the current debug mode).

[snip]

Python's Py_DEBUG mode adds lots of extra checks which require an ABI
change. For example in debug mode memory allocation and and reference
counting do extra checks etc. In release mode those extra checks are
either disabled or they are replaced by much simpler and faster macros.

It *may* be possible to add the extra functions to the Python library so
that a debug build can also load release libraries. It's a complex and
time consuming task.If you want to invest your time I'm fine with
enhancing the situation for Windows developers. But keep in mind that
any change must neither slow down Python in release mode nor make the
debug mode harder to use for a core developer! Windows issue must not
place an extra burden on Unix users.

Christian



------------------------------

Message: 5
Date: Sun, 17 Feb 2008 10:10:59 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] weakrefs of bound methods
To: Nick Craig-Wood <nick@craig-wood.com>, Guido van Rossum
	<guido@python.org>
Cc: Python-3000@python.org
Message-ID: <20080217151045.C3CC93A40A5@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 09:29 AM 2/17/2008 +0000, Nick Craig-Wood wrote:
>On Fri, Feb 15, 2008 at 01:20:03PM -0800, Guido van Rossum wrote:
> > But maybe given how rare the use case is, it would be easier to just
> > create a custom class in weakref.py that does what Nick requested.
>
>I still don't like the silent failure, but a noisy failure and a
>custom class would be great.
>
>FYI here is the class I was writing which tripped me up.  I created
>this to untangle some spaghetti code in a reasonably complex GUI
>application I'm writing.
>
>Instead of there being lots of hardcoded callbacks in the GUI objects
>I made a central registry which made the code a lot cleaner.  The
>weakrefs avoided registration and deregistration.

You might want to check this out:

http://pypi.python.org/pypi/PyDispatcher

""""""Included in the package are the robustapply and saferef modules, 
which provide the ability to selectively apply arguments to callable 
objects and to reference instance methods using weak-references.""""""



------------------------------

Message: 6
Date: Sun, 17 Feb 2008 10:15:22 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Windows: debug mode
To: Christian Heimes <lists@cheimes.de>, python-3000@python.org
Message-ID: <20080217151509.1C7A33A40A5@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 03:23 PM 2/17/2008 +0100, Christian Heimes wrote:
>Giovanni Bajo wrote:
> > Python's debug mode under Windows mandates an ABI change: the debug
> > version of dynamic libraries (_d) are linked against the CRT debug
> > runtime, which is not ABI-compatible to the release runtime. So you
> > either have the _d version of all the extensions you need or you can't
> > even start your program in debug mode. I believe this started back in the
> > days where Python programs were small, had only a couple of dependencies,
> > and most developers were also core developers (core developers are
> > probably the only ones that can succesfully use the current debug mode).
>
>[snip]
>
>Python's Py_DEBUG mode adds lots of extra checks which require an ABI
>change. For example in debug mode memory allocation and and reference
>counting do extra checks etc. In release mode those extra checks are
>either disabled or they are replaced by much simpler and faster macros.
>
>It *may* be possible to add the extra functions to the Python library so
>that a debug build can also load release libraries.

Actually, I think Giovanni simply wants to be able to build extension 
modules with debugging information, *without* needing to use a Py_DEBUG build.

That is, this is about using debug extensions with a release Python, 
not the other way 'round.  And if I understand correctly, this could 
be done by additions to the distutils.



------------------------------

Message: 7
Date: Sun, 17 Feb 2008 18:09:18 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Giovanni Bajo <rasky@develer.com>
Cc: python-3000@python.org
Message-ID: <47B86A3E.2090503@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

> Are you doing this work on some public branch?

Yes, on the Py3k branch, and the trunk.

Regards,
Martin


------------------------------

Message: 8
Date: Sun, 17 Feb 2008 18:09:51 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows: debug mode
To: python-3000@python.org
Message-ID: <fp9ppd$lc7$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Phillip J. Eby wrote:
> Actually, I think Giovanni simply wants to be able to build extension 
> modules with debugging information, *without* needing to use a Py_DEBUG build.
> 
> That is, this is about using debug extensions with a release Python, 
> not the other way 'round.  And if I understand correctly, this could 
> be done by additions to the distutils.

Ah, I see. It's about building an extension with debug symbols but
without a Py_DEBUG build. That's possible with some minor adjustments to
PC/pyconfig.h and PCbuild/debug.vsprops. One has to decouple _DEBUG from
Py_DEBUG. Currently _DEBUG implies Py_DEBUG.

A debug build without Py_DEBUG is semi useful. Bugs and memory leaks are
usually caused by reference counting issues.

Christian



------------------------------

Message: 9
Date: Sun, 17 Feb 2008 18:13:32 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Giovanni Bajo <rasky@develer.com>
Cc: python-3000@python.org
Message-ID: <47B86B3C.3080400@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

>> I have plans to reduce usage of the CRT as much as possible. I don't
>> believe that linking statically would actually work very well.
> 
> Given a reduced usage of CRT, why statically linking should not work?

When this project is complete (say, in 2015), there won't be a need
to link statically. Until then, various things might fail. For example,
setting the locale through setlocale might not have the desired effect
on a different module.

In addition, there is the size increase - you would easily get multiple
copies of stdio in the distribution. It's fairly tricky not to link
stdio in static linking, even if you don't call any stdio functions.

Regards,
Martin


------------------------------

Message: 10
Date: Sun, 17 Feb 2008 18:19:30 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows: debug mode
To: Giovanni Bajo <rasky@develer.com>
Cc: python-3000@python.org
Message-ID: <47B86CA2.7090908@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Thus, I'm hereby proposing that we change this in Py3k so that Python's 
> debug mode does not mandate any ABI change anymore.

It seems people still debate what it is that you *actually* want. This
sentence suggests Christian's interpretation, i.e. you might be unaware
that the debug mode not only adds debug symbols, but also changes the
layout of objects. That is *very* useful, and should not be dropped.

> This means that a 
> programmer will be able to mixmatch release-mode extensions and compile-
> mode extensions, thus getting debuggability only of those extensions he 
> really cares.

Whereas this suggests Phillip's interpretation, i.e. you merely want
debug symbols on a single DLL.

You can get that today - just enable debug information for your 
extension module, and the compiler will emit the PDB files you need
for debugging.

> If people agree on this goal, I'm willing to actually implement it in the 
> Python core (there must be a change in the logic through which ""_d"" 
> extensions are picked up since they would become optional rather than 
> required) and everywhere else it might be needed (eg: distutils).

See above. Don't drop what Python calls the debug mode. Instead, just
learn to build your extension with debugging, for Python's release mode.

Regards,
Martin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 44
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 43","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   2. Re: Windows, sys.argv and unicode (Martin v. L?wis)
   3. Re: Windows, sys.argv and unicode (Martin v. L?wis)
   4. Re: Windows, sys.argv and unicode (Paul Moore)
   5. Re: malloc on Windows (Was: Windows,	sys.argv and unicode)
      (Martin v. L?wis)
   6. Re: weakrefs of bound methods (Nick Craig-Wood)
   7. Re: weakrefs of bound methods (Nick Craig-Wood)


----------------------------------------------------------------------

Message: 1
Date: Sat, 16 Feb 2008 19:08:54 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp7cc6$s0c$4@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 18:29:07 +0000, Paul Moore wrote:

>> >>BTW: is there a long-time plan to make the Python core *not* link
>> >>against msvcrt dll anymore but only rely on Windows APIs (or maybe
>> >>also the static C runtime, I don't really care)?
>> >
>> > How would this affect using MinGW to build Python extensions?
>>
>> AFAICT, it would make python.dll not depend on any msvcrt.dll, and thus
>> being compatible with any extension, compiled with any compiler (with
>> any version of msvcrt, or without msvcrt at all).
>>
>> Putting an end to this annoying ""what version of Visual Studio / msvcrt
>> do I need for this version of Python?"" is a sensible goal, IMHO.
> 
> Actually, it would mean that there was no way of building extensions, as
> Python would be using a static C runtime, which extensions wouldn't have
> access to (so a FILE* from an extension would be totally incompatible
> with the core CRT, a memory block malloc'd in an extension couldn't be
> freed by the core, etc...)

Yes. In fact, what I really meant was to get rid of any C-ism from the 
Python API, so that these problems you are listing simply do not arise.

For instance, memory allocation is not a problem as far as I can see, as 
extensions always use core calls to allocate objects (and those objects 
get freed through core calls too).

But yes, one would have to get rid of the APIs with FILE* and a few 
others (I wonder if anybody has already made a list). It does not seem 
like a terrible big deal to me in practice, but I don't know how hard it 
would be implementation-wise.

Consider for instance that it was even proposed to rewrite fileobject.c 
to use OS native file support (eg: CreateFile on Windows), as the 
theoretically-portable C API has too many quirks in small details which 
makes it hard to really provide a Python fileobject consistent across 
operating systems. In such a scenario, an API like PyFile_FromFile() does 
not make much sense (but a PyFile_FromDescriptor() might still be useful 
of course).
-- 
Giovanni Bajo



------------------------------

Message: 2
Date: Sat, 16 Feb 2008 20:58:51 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Giovanni Bajo <rasky@develer.com>
Cc: python-3000@python.org
Message-ID: <47B7407B.2080006@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

> BTW: is there a long-time plan to make the Python core *not* link against 
> msvcrt dll anymore but only rely on Windows APIs (or maybe also the 
> static C runtime, I don't really care)?

I have plans to reduce usage of the CRT as much as possible. I don't
believe that linking statically would actually work very well.

Regards,
Martin


------------------------------

Message: 3
Date: Sat, 16 Feb 2008 21:01:10 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Paul Moore <p.f.moore@gmail.com>
Cc: Giovanni Bajo <rasky@develer.com>, python-3000@python.org
Message-ID: <47B74106.1060102@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> If you avoided the static CRT, and only used Windows APIs, that would
> avoid this issue, but that means reimplementing everything -
> malloc/free, FILE*, stdin/stdout/stderr, etc etc. I don't think anyone
> is contemplating that.

Actually, I am. Py3k will already remove usage of stdio, for file input
and output. I would also like to remove CRT file handles, and replace
them with platform file handles. As for malloc and free, using the Heap
API might be an option.

Regards,
Martin


------------------------------

Message: 4
Date: Sat, 16 Feb 2008 20:20:28 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Giovanni Bajo <rasky@develer.com>, python-3000@python.org
Message-ID:
	<79990c6b0802161220k6c3e5e6u56fd0d828ac1b9a7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 16/02/2008, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > If you avoided the static CRT, and only used Windows APIs, that would
> > avoid this issue, but that means reimplementing everything -
> > malloc/free, FILE*, stdin/stdout/stderr, etc etc. I don't think anyone
> > is contemplating that.
>
> Actually, I am.

I stand corrected :-) If you need any help, I'd be willing to assist.

Paul.


------------------------------

Message: 5
Date: Sat, 16 Feb 2008 21:45:39 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] malloc on Windows (Was: Windows,	sys.argv
	and unicode)
To: Paul Moore <p.f.moore@gmail.com>
Cc: Giovanni Bajo <rasky@develer.com>, python-3000@python.org
Message-ID: <47B74B73.3010300@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>>> If you avoided the static CRT, and only used Windows APIs, that would
>>> avoid this issue, but that means reimplementing everything -
>>> malloc/free, FILE*, stdin/stdout/stderr, etc etc. I don't think anyone
>>> is contemplating that.
>> Actually, I am.
> 
> I stand corrected :-) If you need any help, I'd be willing to assist.

It's a long-term project. If you are curious, I would recommend you
look into memory management. At a minimum, pymalloc should use 
VirtualAlloc instead of malloc - as that can guarantee page alignment
out of the box (at the same time, mmap should be used on Unix).

For variable-sized blocks, you could try HeapAlloc, probably on
the process heap. My only concern would be whether HeapAlloc can
compete with the CRT's malloc performance-wise. However, during the
implementation, additional issues might come up.

Regards,
Martin


------------------------------

Message: 6
Date: Sun, 17 Feb 2008 09:29:56 +0000
From: Nick Craig-Wood <nick@craig-wood.com>
Subject: Re: [Python-3000] weakrefs of bound methods
To: Guido van Rossum <guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, Python-3000@python.org
Message-ID: <20080217092956.GA17269@craig-wood.com>
Content-Type: text/plain; charset=us-ascii

On Fri, Feb 15, 2008 at 01:20:03PM -0800, Guido van Rossum wrote:
> But maybe given how rare the use case is, it would be easier to just
> create a custom class in weakref.py that does what Nick requested.

I still don't like the silent failure, but a noisy failure and a
custom class would be great.

FYI here is the class I was writing which tripped me up.  I created
this to untangle some spaghetti code in a reasonably complex GUI
application I'm writing.

Instead of there being lots of hardcoded callbacks in the GUI objects
I made a central registry which made the code a lot cleaner.  The
weakrefs avoided registration and deregistration.

Since this is used from GUI code all the callback functions I needed
to add are bound methods.

(The last time I got tripped by this was a similar case involving 3rd
parties registering interests in other classes changing.)

------------------------------------------------------------

class Callback(object):
    """"""
    A holder for functions which need to be called back at some specific point

    Silently fails if you pass in bound methods!
    """"""
    def __init__(self):
        self.fns = WeakKeyDictionary()
    def add(self, fn):
        """"""Add function to be called later.""""""
        self.fns[fn] = True
    def call(self):
        """"""Call all the registered functions""""""
        for fn in self.fns.keys():
            fn()

------------------------------------------------------------

Here is my explicit (no introspection) work-around - there are
obviously better solutions!

class Callback(object):
    """"""
    A holder for functions which need to be called back at some specific point
    """"""
    def __init__(self):
        self.fns = WeakKeyDictionary()
    def add(self, fn, attribute=None):
        """"""
        Add function to be called later.  Either pass in a function,
        or an object and an attribute to call.  Don't pass in bound
        methods since you can't take a weakref of a bound method. It
        holds weakrefs so doesn't need to be deregistered.
        """"""
        self.fns[fn] = attribute
    def call(self):
        """"""Call all the registered functions""""""
        for fn, attribute in self.fns.iteritems():
            if attribute is not None:
                fn = getattr(fn, attribute)
            fn()


-- 
Nick Craig-Wood <nick@craig-wood.com> -- http://www.craig-wood.com/nick


------------------------------

Message: 7
Date: Sun, 17 Feb 2008 09:33:18 +0000
From: nick@craig-wood.com (Nick Craig-Wood)
Subject: Re: [Python-3000] weakrefs of bound methods
To: Greg Ewing <greg.ewing@canterbury.ac.nz>, Python-3000@python.org
Message-ID: <20080217093318.0A59A14C62F@irishsea.home.craig-wood.com>

Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
>  Guido van Rossum wrote:
> > But maybe given how rare the use case is, it would be easier to just
> > create a custom class in weakref.py that does what Nick requested.
> 
>  Nick would still forget to use it and get strange bugs
>  in his code, though!

More than likely ;-)  Though an exception if I tried to add a bound
method to a weak dictionary would certainly remind me!

-- 
Nick Craig-Wood <nick@craig-wood.com> -- http://www.craig-wood.com/nick


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 43
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 42","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Windows, sys.argv and unicode (Giovanni Bajo)
   2. Re: Windows, sys.argv and unicode (Guido van Rossum)
   3. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   4. Re: Windows, sys.argv and unicode (Christian Heimes)
   5. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   6. Re: Windows, sys.argv and unicode (Phillip J. Eby)
   7. Re: Windows, sys.argv and unicode (Giovanni Bajo)
   8. Re: Windows, sys.argv and unicode (Paul Moore)
   9. Re: Windows, sys.argv and unicode (Paul Moore)


----------------------------------------------------------------------

Message: 1
Date: Sat, 16 Feb 2008 15:20:28 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp6uvs$p9$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

Hello,

CPython 2.x (and 3.x) under Win32 has an issue with sys.argv. The list is 
computed using the ANSI version of the windows APIs[*]. The problem is 
apparent when you have a file/directory which can't be represented in the 
system encoding (eg: a japanese-named file or directory on a Western 
Windows), because the Windows ANSI API will encode the filename to the 
system encoding using what we call the ""replace"" policy, and sys.argv[] 
will contain an entry like ""c:\\foo\\??????????????.dat"".

At the moment, there's simply no way of passing such a file to a Python 
script/application as an argument (eg: if you double-click on that file, 
and the file is associated to a Python application). This is a wide-
spread problem among Python applications; eg. if you click on a 
Japanese .torrent file, ABC (a Bittorent client written in Python) won't 
be able to open it and will complain ""cannot access 
file ??????????.torrent"".

I understand that fixing this properly in the 2.x serie might have 
backward compatibility issues, but I propose that this be fixed at least 
in the Python 3.x serie, and I volunteer to write a patch. I would be 
glad if someone expert with ANSI/Unicode/Windows (MvL?) would show me 
what he believes being the correct way of approaching this problem. 

My suggestion is that:

* At the Python level, we still expose a single sys.argv[], which will 
contain unicode strings. I think this exactly matches what Py3k does now. 
(Back in the time, there were proposals to add a sys.argvu, but I guess 
it does not make sense right now).
* At the C level, I believe it involves using GetCommandLineW() and 
CommandLineToArgvW() in WinMain.c, but should Py_Main/PySys_SetArgv() be 
changed to also accept wchar_t** arguments? Or is it better to allow for 
NULL to be passed (under Windows at least), so that the Windows code-path 
in there can use GetCommandLineW()/CommandLineToArgvW() to get the 
current process' arguments?

Thanks!

[*] In detail: it actually comes from __argc/__argv (see WinMain.c), 
which in turn are computed by the CRT startup code, which would adapt to 
user's choice but Python is being compiled in ANSI mode.
-- 
Giovanni Bajo



------------------------------

Message: 2
Date: Sat, 16 Feb 2008 07:49:22 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: ""Giovanni Bajo"" <rasky@develer.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802160749q2f958322ve21e60a97e838def@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thanks for reminding us of this!

Is there any chance that you can submit a patch (or even the
beginnings of one) for this?

At the very least, can you add the issue to the tracker so we'll have
a permanent reminder until it's resolved?

On Feb 16, 2008 7:20 AM, Giovanni Bajo <rasky@develer.com> wrote:
> Hello,
>
> CPython 2.x (and 3.x) under Win32 has an issue with sys.argv. The list is
> computed using the ANSI version of the windows APIs[*]. The problem is
> apparent when you have a file/directory which can't be represented in the
> system encoding (eg: a japanese-named file or directory on a Western
> Windows), because the Windows ANSI API will encode the filename to the
> system encoding using what we call the ""replace"" policy, and sys.argv[]
> will contain an entry like ""c:\\foo\\??????????????.dat"".
>
> At the moment, there's simply no way of passing such a file to a Python
> script/application as an argument (eg: if you double-click on that file,
> and the file is associated to a Python application). This is a wide-
> spread problem among Python applications; eg. if you click on a
> Japanese .torrent file, ABC (a Bittorent client written in Python) won't
> be able to open it and will complain ""cannot access
> file ??????????.torrent"".
>
> I understand that fixing this properly in the 2.x serie might have
> backward compatibility issues, but I propose that this be fixed at least
> in the Python 3.x serie, and I volunteer to write a patch. I would be
> glad if someone expert with ANSI/Unicode/Windows (MvL?) would show me
> what he believes being the correct way of approaching this problem.
>
> My suggestion is that:
>
> * At the Python level, we still expose a single sys.argv[], which will
> contain unicode strings. I think this exactly matches what Py3k does now.
> (Back in the time, there were proposals to add a sys.argvu, but I guess
> it does not make sense right now).
> * At the C level, I believe it involves using GetCommandLineW() and
> CommandLineToArgvW() in WinMain.c, but should Py_Main/PySys_SetArgv() be
> changed to also accept wchar_t** arguments? Or is it better to allow for
> NULL to be passed (under Windows at least), so that the Windows code-path
> in there can use GetCommandLineW()/CommandLineToArgvW() to get the
> current process' arguments?
>
> Thanks!
>
> [*] In detail: it actually comes from __argc/__argv (see WinMain.c),
> which in turn are computed by the CRT startup code, which would adapt to
> user's choice but Python is being compiled in ANSI mode.
> --
> Giovanni Bajo
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Sat, 16 Feb 2008 16:32:43 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp737b$s0c$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 07:49:22 -0800, Guido van Rossum wrote:

> Thanks for reminding us of this!
> 
> Is there any chance that you can submit a patch (or even the beginnings
> of one) for this?

Sure, during next week. I'd appreciate if, meanwhile, a core developer 
commented on my proposal at the C level, so that I don't write a totally 
wrong patch to begin with. I'm not really familiar with CPython hacking.

> At the very least, can you add the issue to the tracker so we'll have a
> permanent reminder until it's resolved?

Done: issue 2128. I didn't find a way to mark it Windows-only in the 
metadata (I guess there is not one).
-- 
Giovanni Bajo



------------------------------

Message: 4
Date: Sat, 16 Feb 2008 17:51:08 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Giovanni Bajo <rasky@develer.com>
Cc: python-3000@python.org
Message-ID: <47B7147C.10506@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Giovanni Bajo wrote:
> Sure, during next week. I'd appreciate if, meanwhile, a core developer 
> commented on my proposal at the C level, so that I don't write a totally 
> wrong patch to begin with. I'm not really familiar with CPython hacking.

We have dropped support for 9x, ME and NT4 for the 2.6 and 3.0 series.
This allows us to use wide API methods without restrictions. IIRC Win2k
and newer versions of CE have full support for wide unicode.

Several places need an update to support unicode on Windows. This
includes argv, the environment variables and file names / path handling.
 See http://bugs.python.org/issue1342 for another example.

In the last months Amaury, Martin von L?wis and I have done most of the
Windows work. Any help from an experienced Windows developer is greatly
appreciated! We *need* an additional Windows developer.

So if you are interested in getting the problems fixed I welcome you on
board. I suggest that you start by writing down a list of required
changes (file names, function names) and a proposal how to pursue the
issues.

Christian


------------------------------

Message: 5
Date: Sat, 16 Feb 2008 17:06:45 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp7575$s0c$2@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 17:51:08 +0100, Christian Heimes wrote:

> In the last months Amaury, Martin von L?wis and I have done most of the
> Windows work. Any help from an experienced Windows developer is greatly
> appreciated! We *need* an additional Windows developer.

I would really like to help you out on these wide-API tasks, but it is 
unlikely I will ever have much time in the next weeks (till May, let's 
say). Is there a todo list, a wiki, a keyword to use when searching for 
bugs, etc.? Anything to see what still needs to be done, who's doing it, 
etc.

BTW: is there a long-time plan to make the Python core *not* link against 
msvcrt dll anymore but only rely on Windows APIs (or maybe also the 
static C runtime, I don't really care)?
 
> So if you are interested in getting the problems fixed I welcome you on
> board. I suggest that you start by writing down a list of required
> changes (file names, function names) and a proposal how to pursue the
> issues.

OK. I'll have a look at issue 2128 during next week and come back with 
something. 
-- 
Giovanni Bajo



------------------------------

Message: 6
Date: Sat, 16 Feb 2008 12:40:52 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: Giovanni Bajo <rasky@develer.com>, python-3000@python.org
Message-ID: <20080216174039.826583A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 05:06 PM 2/16/2008 +0000, Giovanni Bajo wrote:
>BTW: is there a long-time plan to make the Python core *not* link 
>against msvcrt dll anymore but only rely on Windows APIs (or maybe 
>also the static C runtime, I don't really care)?

How would this affect using MinGW to build Python extensions?



------------------------------

Message: 7
Date: Sat, 16 Feb 2008 17:55:00 +0000 (UTC)
From: Giovanni Bajo <rasky@develer.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: python-3000@python.org
Message-ID: <fp781k$s0c$3@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

On Sat, 16 Feb 2008 12:40:52 -0500, Phillip J. Eby wrote:

>>BTW: is there a long-time plan to make the Python core *not* link
>>against msvcrt dll anymore but only rely on Windows APIs (or maybe also
>>the static C runtime, I don't really care)?
> 
> How would this affect using MinGW to build Python extensions?

AFAICT, it would make python.dll not depend on any msvcrt.dll, and thus 
being compatible with any extension, compiled with any compiler (with any 
version of msvcrt, or without msvcrt at all).

Putting an end to this annoying ""what version of Visual Studio / msvcrt 
do I need for this version of Python?"" is a sensible goal, IMHO.
-- 
Giovanni Bajo



------------------------------

Message: 8
Date: Sat, 16 Feb 2008 18:29:07 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: ""Giovanni Bajo"" <rasky@develer.com>
Cc: python-3000@python.org
Message-ID:
	<79990c6b0802161029h48c47819k3b997afb88e4aa2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 16/02/2008, Giovanni Bajo <rasky@develer.com> wrote:
> On Sat, 16 Feb 2008 12:40:52 -0500, Phillip J. Eby wrote:
>
> >>BTW: is there a long-time plan to make the Python core *not* link
> >>against msvcrt dll anymore but only rely on Windows APIs (or maybe also
> >>the static C runtime, I don't really care)?
> >
> > How would this affect using MinGW to build Python extensions?
>
> AFAICT, it would make python.dll not depend on any msvcrt.dll, and thus
> being compatible with any extension, compiled with any compiler (with any
> version of msvcrt, or without msvcrt at all).
>
> Putting an end to this annoying ""what version of Visual Studio / msvcrt
> do I need for this version of Python?"" is a sensible goal, IMHO.

Actually, it would mean that there was no way of building extensions,
as Python would be using a static C runtime, which extensions wouldn't
have access to (so a FILE* from an extension would be totally
incompatible with the core CRT, a memory block malloc'd in an
extension couldn't be freed by the core, etc...)

In practice, it's possible to take a more relaxed view (differing CRTs
can be used, but only as long as nothing CRT-dependent gets passed
across the boundaries) but it's not completely clear what is affected,
and so the official policy is strict.

If you avoided the static CRT, and only used Windows APIs, that would
avoid this issue, but that means reimplementing everything -
malloc/free, FILE*, stdin/stdout/stderr, etc etc. I don't think anyone
is contemplating that.

Paul.


------------------------------

Message: 9
Date: Sat, 16 Feb 2008 18:37:45 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Windows, sys.argv and unicode
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: Giovanni Bajo <rasky@develer.com>, python-3000@python.org
Message-ID:
	<79990c6b0802161037n3f2f8462vaff0b7484ab4afdb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 16/02/2008, Christian Heimes <lists@cheimes.de> wrote:
> In the last months Amaury, Martin von L?wis and I have done most of the
> Windows work. Any help from an experienced Windows developer is greatly
> appreciated! We *need* an additional Windows developer.

Is there a list anywhere of tasks that need a Windows C developer? I
may be able to have a go at picking a few up, but unfortunately, I
don't have the time to find what needs to be done.

If you point me at something, I'll see what I can pick up.

Paul.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 42
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 41","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Does Py3k's print offer any unicode encoding help?
      (Greg Ewing)
   2. Re: PEP 3102 (Greg Ewing)
   3. Re: Does Py3k's print offer any unicode encoding help?
      (Greg Ewing)
   4. Weakref protocol? (Re: weakrefs of bound methods) (Greg Ewing)
   5. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
   6. Re: weakrefs of bound methods (Greg Ewing)
   7. Re: weakrefs of bound methods (Greg Ewing)
   8. Re: Does Py3k's print offer any unicode encoding help?
      (Martin v. L?wis)
   9. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
  10. Re: PEP 3102 (Talin)


----------------------------------------------------------------------

Message: 1
Date: Sat, 16 Feb 2008 13:13:25 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: python-3000@python.org
Message-ID: <47B62AA5.20508@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> It would be better
> if TextIOWrapper didn't explicitly close() when deleted. 
> Maybe __del__() should just flush() instead of close()?

Sounds good to me.

-- 
Greg



------------------------------

Message: 2
Date: Sat, 16 Feb 2008 13:19:01 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <47B62BF5.90501@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Dj Gilcrease wrote:
> Positional only args would be arguments that you cannot specify by
> keyword, so having a positional only arg that has a default value,
> thus making it optional just seems broken to me.

There's no logical problem with optional positional-only
args -- it just means you have to supply all the previous
args as well.

E.g. if the third arg of foo is positional-only and
optional, you can call it as either

    foo(a, b)
    foo(a, b, c)

-- 
Greg


------------------------------

Message: 3
Date: Sat, 16 Feb 2008 13:21:12 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: python-3000@python.org
Message-ID: <47B62C78.3050609@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Adam Olsen wrote:
> That'd rely on prompt deletion for correct behaviour.  Why not an
> explicit detach method?
> 
> buf = sys.stdout.buffer
> sys.stdout.detach()
> sys.stdout = io.TextIOWrapper(buf, ""utf-8"")

Or keep an explicit count of the number of unclosed
wrappers that are referencing a buffer.

-- 
Greg


------------------------------

Message: 4
Date: Sat, 16 Feb 2008 13:26:41 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: [Python-3000] Weakref protocol? (Re: weakrefs of bound
	methods)
To: Python-3000@python.org
Message-ID: <47B62DC1.4070606@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Phillip J. Eby wrote:
> So, Nick's query is (in effect), can we either:
> 
> 1. make ref(method) create a ""weak method"" instead, or
> 
> 2. make ref(method) an error instead of useless behavior that gives 
> you the illusion of working code

Maybe what we want here is a weakref protocol. So instead
of weakref() directly creating a weak ref object, it would
call __weakref__ on its argument.

Most objects would respond by creating a standard weak
ref object, but special cases such as bound methods
could do something different.

-- 
Greg


------------------------------

Message: 5
Date: Fri, 15 Feb 2008 16:36:34 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802151636q221da660n503dabb3e45c7629@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 4:21 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Adam Olsen wrote:
>  > That'd rely on prompt deletion for correct behaviour.  Why not an
>  > explicit detach method?
>  >
>  > buf = sys.stdout.buffer
>  > sys.stdout.detach()
>  > sys.stdout = io.TextIOWrapper(buf, ""utf-8"")
>
>  Or keep an explicit count of the number of unclosed
>  wrappers that are referencing a buffer.

Yuck. We have to do this for sockets and it's a mess.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sat, 16 Feb 2008 13:34:07 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] weakrefs of bound methods
To: Python-3000@python.org
Message-ID: <47B62F7F.2070906@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Phillip J. Eby wrote:
> The part I'm not 
> immediately sure of is where to call it *from*, so that you can still 
> subclass weakref.ref and not end up in a strange delegation loop.

The function for creating a weak ref would need to be
different from the weakref class itself. One of them
would have to be renamed (unless you want to do something
magical and potentially confusing).

--
Greg


------------------------------

Message: 7
Date: Sat, 16 Feb 2008 13:35:35 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] weakrefs of bound methods
To: Python-3000@python.org
Message-ID: <47B62FD7.5060409@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> But maybe given how rare the use case is, it would be easier to just
> create a custom class in weakref.py that does what Nick requested.

Nick would still forget to use it and get strange bugs
in his code, though!

-- 
Greg


------------------------------

Message: 8
Date: Sat, 16 Feb 2008 02:03:33 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <47B63665.6020808@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> I think you're on to something. There's an API to access the
> underlying (buffered) binary stream: sys.stdout.buffer. It's possible
> to create a new TextIOWrapper on top of that:
> 
> sys.stdout = io.TextIOWrapper(sys.stdout.buffer, ""utf-8"")

While it might be possible to switch an output stream that way, it's
fairly difficult to do that correctly for input, no? The wrapper
may have already read data from the underlying stream which have not
been given to the application. If you don't want to lose these
data, you either need to copy them over to the new stream, or unread
them from the underlying buffer. That's tricky as some of the data might
be in the codec.

Regards,
Martin


------------------------------

Message: 9
Date: Fri, 15 Feb 2008 18:11:39 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802151811g15830745ica8ddfdd3179aafc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

In general these things are only safe when done before any I/O happens.

But even so it's only a stop-gap measure; the app shouldn't have to do
this, we should fix the guessing algorithm.

On Fri, Feb 15, 2008 at 5:03 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > I think you're on to something. There's an API to access the
>  > underlying (buffered) binary stream: sys.stdout.buffer. It's possible
>  > to create a new TextIOWrapper on top of that:
>  >
>  > sys.stdout = io.TextIOWrapper(sys.stdout.buffer, ""utf-8"")
>
>  While it might be possible to switch an output stream that way, it's
>  fairly difficult to do that correctly for input, no? The wrapper
>  may have already read data from the underlying stream which have not
>  been given to the application. If you don't want to lose these
>  data, you either need to copy them over to the new stream, or unread
>  them from the underlying buffer. That's tricky as some of the data might
>  be in the codec.
>
>  Regards,
>  Martin
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 10
Date: Fri, 15 Feb 2008 20:32:57 -0800
From: Talin <talin@acm.org>
Subject: Re: [Python-3000] PEP 3102
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <47B66779.8000905@acm.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Raymond Hettinger wrote:
> I've been exercising the new keyword-only arguments syntax.  It is absolutely wonderful.  I'm amazed at how many long standing problems it solves elegantly.
> 
> Thanks Talin!

Well, that made my day :)

-- Talin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 41
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 40","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: PEP 3102 (Joel Bender)
   2. Re: weakrefs of bound methods (Phillip J. Eby)
   3. Re: weakrefs of bound methods (Guido van Rossum)
   4. Re: PEP 3102 (Joel Bender)
   5. Re: PEP 3102 (Georg Brandl)
   6. Re: weakrefs of bound methods (Phillip J. Eby)
   7. Re: weakrefs of bound methods (Guido van Rossum)
   8. Re: Drop list.reverse()? (Nicko van Someren)


----------------------------------------------------------------------

Message: 1
Date: Fri, 15 Feb 2008 11:46:28 -0500
From: Joel Bender <jjb5@cornell.edu>
Subject: Re: [Python-3000] PEP 3102
To: Dj Gilcrease <digitalxero@gmail.com>
Cc: python-3000@python.org
Message-ID: <47B5C1E4.3000808@cornell.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Dj Gilcrease wrote:
> On Thu, Feb 14, 2008 at 6:04 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
>> Guido van Rossum wrote:
>>  > Now can you come up with a syntax for positional-only
>>  > arguments? So far everybody has failed at that, and there are some use
>>  > cases where it's useful too.
> 
> 
> throwing some ideas around...

How about a BNFish notation?  Use brackets around optional parameters.

     def test([arg1, [arg2,]] arg3):
         ...

I haven't found an example of what the value of an unspecified 
positional only argument would be, I think it should be required:

     def test([arg1=1,] arg2): return (arg1, arg2)

This could also accommodate trailing positional only args, even though 
the existing syntax already has it (but keep reading):

     def test(arg1 [, arg2=2]): return (arg1, arg2)
     assert test(1) == (1, 2)
     assert test(1,3) == (1, 3)

If both were provided:

     def test([arg1=1,] arg2 [, arg3=3]): ... # error

I would expect it to be an ""ambiguous combination of optional 
positional-only arguments"" syntax error (as opposed to runtime error).

If you wanted arg2 specified when arg1 is:

     def test([arg1=1, arg2=2,] arg3): return (arg1, arg2, arg3)
     assert test(9) == (1, 2, 9)
     assert test(7, 8, 9) == (7, 8, 9)

     test(8, 9)                   # error

With nesting you can specify which one is more optional:

     def test([[arg1=1,] arg2=2,] arg3): return (arg1, arg2, arg3)
     assert test(9) == (1, 2, 9)
     assert test(8, 9) == (1, 8, 9)

     def test([arg1=1, [arg2=2,]] arg3): return (arg1, arg2, arg3)
     assert test(8, 9) == (8, 2, 9)

Capturing all of the args except the last one:

     def test([*arg1,] arg2): return (arg1, arg2)
     assert test(9) == ((), 9)
     assert test(8, 9) == ((8,), 9)
     assert test(7, 8, 9) == ((7, 8), 9)

First is a little more important:

     def test([arg1=1, *arg2,] arg3): return (arg1, arg2, arg3)
     assert test(9) == (1, (), 9)
     assert test(8, 9) == (8, (), 9)
     assert test(7, 8, 9) == (7, (8,), 9)

Force the end of positional arguments to switch to keywords:

     def test([*arg1,] arg2, *, arg3=3): return (arg1, arg2, arg3)

Specifying more than one dumping spot for additional positional 
parameters is ambiguous:

     def test([arg1=1, *arg2,] arg3, *arg4): ... # error

Specifying default values for a positional argument may make it ambiguous:

     def test([arg1=1,] arg2, arg3=3): return (arg1, arg2, arg3)

This is OK, but not recommended, it's more complicated than it needs to be:

     def test(arg1 [, arg2=1 [, arg3=2]]): return (arg1, arg2, arg3)

And now for something completely different:

     def test(arg1 [[, arg2=2], arg3=3]): return (arg1, arg2, arg3)
     assert test(8) == (8, 2, 3)
     assert test(8, 9) == (8, 2, 9)
     assert test(7, 8, 9) == (7, 8, 9)

Like the other dumping spot:

     def test(arg1 [[, *arg2], arg3=3]): return (arg1, arg2, arg3)
     assert test(8) == (8, (), 3)
     assert test(8, 9) == (8, (), 9)
     assert test(7, 8, 9) == (7, (8,), 9)

Nested galore:

     def test([arg1=1, [[*arg2,] arg3=3,]] arg4):
         return (arg1, arg2, arg3, arg4)
     assert test(7) = (1, (), 3, 7)
     assert test(7, 8) = (7, (), 3, 8)
     assert test(7, 8, 9) = (7, (), 8, 9)
     assert test(7, 8, 9, 10) = (7, (8,), 9, 10)

The notation for an optional tuple that gets ripped apart seems busy, 
but is still grokable:

     def test([(arg1, arg2)=(1, 2),] arg3): return (arg1, arg2, arg3)
     assert test(8) == (1, 2, 8)
     assert test((7, 8), 9) == (7, 8, 9)


Joel


------------------------------

Message: 2
Date: Fri, 15 Feb 2008 13:26:21 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] weakrefs of bound methods
To: ""Guido van Rossum"" <guido@python.org>,	""Nick Craig-Wood""
	<nick@craig-wood.com>
Cc: Python-3000@python.org
Message-ID: <20080215182609.0251A3A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 09:35 AM 2/15/2008 -0800, Guido van Rossum wrote:
>On Fri, Feb 15, 2008 at 2:12 AM, Nick Craig-Wood <nick@craig-wood.com> wrote:
> > I've just been bitten yet again by the fact you can't have a weakref
> >  to a bound method!  I find myself wanting to do this whenever I have a
> >  registry of callback functions.
> >
> >  Could we in py3k either
> >
> >  1) make weakrefs to bound methods work?  A weakref to a bound method
> >  should mean hold the weakref on the instance and bind the method at
> >  the last moment.
>
>I think you're somehow confused about how weakrefs are supposed to
>work. They work fine!

The use case here is actually to keep the callback around only so 
long as the object exists.

There are various ways to do this, of course, that don't require 
changing the language or stdlib.  One of the simplest (for 2.4 and 
up) is to create a callable weakref subclass that emulates a bound 
method.  Another is to create a bound method whose im_self is a weakref proxy.

I've never actually encountered a usecase for keeping a standard 
weakref to a standard bound method, though.  It's pretty useless, 
because bound methods are nearly always immediately disposed of, and 
there's no logical place (or reason) to store them.  So, Nick's query 
is (in effect), can we either:

1. make ref(method) create a ""weak method"" instead, or

2. make ref(method) an error instead of useless behavior that gives 
you the illusion of working code



------------------------------

Message: 3
Date: Fri, 15 Feb 2008 11:41:14 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] weakrefs of bound methods
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Python-3000@python.org
Message-ID:
	<ca471dc20802151141o1f6e090cl888ae560976643cb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 10:26 AM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 09:35 AM 2/15/2008 -0800, Guido van Rossum wrote:
>  >On Fri, Feb 15, 2008 at 2:12 AM, Nick Craig-Wood <nick@craig-wood.com> wrote:
>  > > I've just been bitten yet again by the fact you can't have a weakref
>  > >  to a bound method!  I find myself wanting to do this whenever I have a
>  > >  registry of callback functions.
>  > >
>  > >  Could we in py3k either
>  > >
>  > >  1) make weakrefs to bound methods work?  A weakref to a bound method
>  > >  should mean hold the weakref on the instance and bind the method at
>  > >  the last moment.
>  >
>  >I think you're somehow confused about how weakrefs are supposed to
>  >work. They work fine!
>
>  The use case here is actually to keep the callback around only so
>  long as the object exists.

Ah, I see. Nick actually wrote this but because I'm so familiar with
the concept of a bound method object I didn't see what his actual
issue was. Sorry Nick!

>  There are various ways to do this, of course, that don't require
>  changing the language or stdlib.  One of the simplest (for 2.4 and
>  up) is to create a callable weakref subclass that emulates a bound
>  method.  Another is to create a bound method whose im_self is a weakref proxy.
>
>  I've never actually encountered a usecase for keeping a standard
>  weakref to a standard bound method, though.  It's pretty useless,
>  because bound methods are nearly always immediately disposed of, and
>  there's no logical place (or reason) to store them.  So, Nick's query
>  is (in effect), can we either:
>
>  1. make ref(method) create a ""weak method"" instead, or
>
>  2. make ref(method) an error instead of useless behavior that gives
>  you the illusion of working code

#2 is easily implemented (just remove the machinery to support weak
refs from the bound method object) but the question is, will it break
anybody's code -- and if so, do we care enough to break it? (In Py3k,
that is.)

#1 isn't so easy in terms of how you'd implement it -- I don't think
the weakref.ref() call currently has a way to customize what kind of
thing you get back. I'd be open for a patch containing working code
that can be generalized to other cases.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Fri, 15 Feb 2008 14:55:46 -0500
From: Joel Bender <jjb5@cornell.edu>
Subject: Re: [Python-3000] PEP 3102
To: Dj Gilcrease <digitalxero@gmail.com>
Cc: python-3000@python.org
Message-ID: <47B5EE42.9000001@cornell.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Dj Gilcrease wrote:

> If I understand right, positional only arguments would not be optional
> in any way shape or form, thats what default arguments are for.

I have been expecting that by providing a default value to an argument 
in the definition that you are making it optional, be it keyword or 
positional.  The PEP doesn't have an example of what this means:

     def f(a, b, *, c): ...

Is 'c' a keyword only argument that must be specified?  In that case I 
don't consider the following confusing, there is a clear indication of 
which arguments are positional and which ones are keyword only.

     def f(a, b=2, *, c=3): ...

Given this definition, which isn't in the PEP but maybe it should be:

     def f(x, *):

I would be perfectly happy if there was an exception for f(x=3), just as 
there is for math.sin(x=3).

> Positional only args would be arguments that you cannot specify by
> keyword, so having a positional only arg that has a default value,
> thus making it optional just seems broken to me.

I think this is a case of differing viewpoints.  When I see a definition 
like this:

     def f(a, b=3): ...

I think of 'b' being an optional argument, you seem to see it 
differently.  I don't use keywords when I specify the values of 
positional arguments, so if I see this in documentation:

     min(iterable[, key=func]) -> value

I don't call min(iterable=[3]) because it returns a TypeError.  So when 
I see something like this:

     def f(x, y):

I've never gotten in the habit of even trying f(y=2, x=3), and I would 
consider it confusing even if and when it works.  Then again, perhaps 
it's because I've never felt compelled to reorder the sequence of values 
of positional parameters when I call a function.


Joel


------------------------------

Message: 5
Date: Fri, 15 Feb 2008 21:25:33 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <fp4sfk$dlc$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Dj Gilcrease schrieb:
> On Fri, Feb 15, 2008 at 8:46 AM, Joel Bender <jjb5@cornell.edu> wrote:
>>  How about a BNFish notation?  Use brackets around optional parameters.
>>
>>      def test([arg1, [arg2,]] arg3):
>>          ...
> 
> If I understand right, positional only arguments would not be optional
> in any way shape or form, thats what default arguments are for.
> Positional only args would be arguments that you cannot specify by
> keyword, so having a positional only arg that has a default value,
> thus making it optional just seems broken to me.

Being positional-only and having a default value does not conflict.
There's nothing at all broken with

def foo(!x, !y='bar'):
     pass

where !x and !y would be positional-only arguments. You can't of course
have something like

def foo(!x, !y='bar', z):
     pass

but you can't have that today either.

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 6
Date: Fri, 15 Feb 2008 15:52:43 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] weakrefs of bound methods
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python-3000@python.org
Message-ID: <20080215205231.93DD43A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 11:41 AM 2/15/2008 -0800, Guido van Rossum wrote:
>On Fri, Feb 15, 2008 at 10:26 AM, Phillip J. Eby 
><pje@telecommunity.com> wrote:
> >  I've never actually encountered a usecase for keeping a standard
> >  weakref to a standard bound method, though.  It's pretty useless,
> >  because bound methods are nearly always immediately disposed of, and
> >  there's no logical place (or reason) to store them.  So, Nick's query
> >  is (in effect), can we either:
> >
> >  1. make ref(method) create a ""weak method"" instead, or
> >
> >  2. make ref(method) an error instead of useless behavior that gives
> >  you the illusion of working code
>
>#2 is easily implemented (just remove the machinery to support weak
>refs from the bound method object) but the question is, will it break
>anybody's code -- and if so, do we care enough to break it? (In Py3k,
>that is.)

It's hard to imagine what could be using it, but I guess it's possible.


>#1 isn't so easy in terms of how you'd implement it -- I don't think
>the weakref.ref() call currently has a way to customize what kind of
>thing you get back. I'd be open for a patch containing working code
>that can be generalized to other cases.

Well, one could allow for a __weaken__ method that would be called if 
present, instead of the default constructor.  The part I'm not 
immediately sure of is where to call it *from*, so that you can still 
subclass weakref.ref and not end up in a strange delegation loop.  I 
guess you could call it if and only if weakref.ref.__new__ was passed 
weakref.ref as the class to construct.



------------------------------

Message: 7
Date: Fri, 15 Feb 2008 13:20:03 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] weakrefs of bound methods
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Python-3000@python.org
Message-ID:
	<ca471dc20802151320l7c3074i2ae72178e5a3fe66@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 12:52 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 11:41 AM 2/15/2008 -0800, Guido van Rossum wrote:
>  >On Fri, Feb 15, 2008 at 10:26 AM, Phillip J. Eby
>  ><pje@telecommunity.com> wrote:
>
> > >  I've never actually encountered a usecase for keeping a standard
>  > >  weakref to a standard bound method, though.  It's pretty useless,
>  > >  because bound methods are nearly always immediately disposed of, and
>  > >  there's no logical place (or reason) to store them.  So, Nick's query
>  > >  is (in effect), can we either:
>  > >
>  > >  1. make ref(method) create a ""weak method"" instead, or
>  > >
>  > >  2. make ref(method) an error instead of useless behavior that gives
>  > >  you the illusion of working code
>  >
>  >#2 is easily implemented (just remove the machinery to support weak
>  >refs from the bound method object) but the question is, will it break
>  >anybody's code -- and if so, do we care enough to break it? (In Py3k,
>  >that is.)
>
>  It's hard to imagine what could be using it, but I guess it's possible.
>
>
>
>  >#1 isn't so easy in terms of how you'd implement it -- I don't think
>  >the weakref.ref() call currently has a way to customize what kind of
>  >thing you get back. I'd be open for a patch containing working code
>  >that can be generalized to other cases.
>
>  Well, one could allow for a __weaken__ method that would be called if
>  present, instead of the default constructor.  The part I'm not
>  immediately sure of is where to call it *from*, so that you can still
>  subclass weakref.ref and not end up in a strange delegation loop.  I
>  guess you could call it if and only if weakref.ref.__new__ was passed
>  weakref.ref as the class to construct.

I think str() does this.

But maybe given how rare the use case is, it would be easier to just
create a custom class in weakref.py that does what Nick requested.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Fri, 15 Feb 2008 22:53:18 +0000
From: Nicko van Someren <nicko@nicko.org>
Subject: Re: [Python-3000] Drop list.reverse()?
To: python-3000@python.org
Cc: python@rcn.com
Message-ID: <D34AADFF-E2B8-4C72-B71F-57C7C188D581@nicko.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On 15 Feb 2008, at 17:37, Guido van Rossum wrote:

> On Thu, Feb 14, 2008 at 4:52 PM, Raymond Hettinger <python@rcn.com>  
> wrote:
>> Would it be worthwhile to leave reversed(s) and s[::-1] as the two  
>> obvious ways to do it (ways that work with any Sequence, not just  
>> lists)?
>
> I think we should keep it. There's no faster way to reverse a list  
> in place.

Out of curiosity, I checked just how much faster it really is.  The  
answer is that for in place reversal it's more than an order of  
magnitude faster than using either of the suggested alternatives:
   >>> timeit.Timer('s.reverse()', setup='s=range(1000)').timeit()
   0.80964398384094238
   >>> timeit.Timer('s[:] = s[::-1]', setup='s=range(1000)').timeit()
   9.2884359359741211
   >>> timeit.Timer('s[:] = reversed(s)',  
setup='s=range(1000)').timeit()
   16.757926940917969

Not surprising, given that no objects were created or harmed in the  
reversal of this list...

Interestingly, it's not the fastest way to make a reverse copy:
   >>> timeit.Timer('s2 = list(s); s2.reverse()',  
setup='s=range(1000)').timeit()
   6.4023230075836182
   >>> timeit.Timer('s2 = s[::-1]', setup='s=range(1000)').timeit()
   5.3177969455718994
   >>> timeit.Timer('s2 = list(reversed(s))',  
setup='s=range(1000)').timeit()
   12.906921148300171

(Times take on an Intel Mac, Python 2.5.1)

	Nicko



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 40
*******************************************
??????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 39","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows gui vs. console (Niki Spahiev)
   2. Re: Windows gui vs. console (Phillip J. Eby)
   3. Re: Does Py3k's print offer any unicode encoding help?
      (Ronald Oussoren)
   4. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
   5. Re: weakrefs of bound methods (Guido van Rossum)
   6. Re: Drop list.reverse()? (Guido van Rossum)
   7. Re: Does Py3k's print offer any unicode encoding help?
      (Adam Olsen)
   8. Re: PEP 3102 (Dj Gilcrease)
   9. Re: PEP 3102 (Dj Gilcrease)


----------------------------------------------------------------------

Message: 1
Date: Fri, 15 Feb 2008 14:18:21 +0200
From: Niki Spahiev <niki.spahiev@gmail.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: python-3000@python.org
Message-ID: <fp3vu9$uag$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Phillip J. Eby wrote:
> That's actually a separate problem from the one Paul and I are 
> talking about, one that I'm not even going to *try* to solve.  (Being 
> as I already have, and failed miserably.)  Hell, I'm not sure Windows 
> even has a way to *tell* whether your app was launched from the 
> command line or otherwise.  I couldn't find one for Win2K, anyway; 
> there might be a way to do it in XP and Vista.

Checking for attached console is one possibility.
AttachConsole(ATTACH_PARENT_CONSOLE)

Remarks
The calling application can call any of the console functions. For 
example, a graphical application can use the console to display 
debugging output.

A process can be attached to one console. If the calling process is 
already attached to a console, AttachConsole fails with ERROR_ACCESS_DENIED.

Niki Spahiev



------------------------------

Message: 2
Date: Fri, 15 Feb 2008 09:34:41 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: Niki Spahiev <niki.spahiev@gmail.com>, python-3000@python.org
Message-ID: <20080215143429.92C563A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 02:18 PM 2/15/2008 +0200, Niki Spahiev wrote:
>Phillip J. Eby wrote:
> > That's actually a separate problem from the one Paul and I are
> > talking about, one that I'm not even going to *try* to solve.  (Being
> > as I already have, and failed miserably.)  Hell, I'm not sure Windows
> > even has a way to *tell* whether your app was launched from the
> > command line or otherwise.  I couldn't find one for Win2K, anyway;
> > there might be a way to do it in XP and Vista.
>
>Checking for attached console is one possibility.
>AttachConsole(ATTACH_PARENT_CONSOLE)

That requires XP, but while I was looking it up I ran across an 
article that suggested using both .com and .exe versions of the same 
program, where the .com is a console version, and the .exe is the GUI 
version linked to by any installed shortcuts.  Apparently, you can 
have a .com file whose contents are actually an .exe.



------------------------------

Message: 3
Date: Fri, 15 Feb 2008 15:26:02 +0100
From: Ronald Oussoren <ronaldoussoren@mac.com>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID: <DEE01B33-9245-4410-97CA-1617369E4254@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes


On 14 Feb, 2008, at 23:21, Martin v. L?wis wrote:

>> The code that guesses the default stdout encoding isn't very good,
>> especially not on OSX. Suggestions are welcome.
>
> Unfortunately, Apple isn't very cooperative here. There is no way
> of determining the encoding of a Terminal.app window, AFAIK
> (it's normally UTF-8, unless the user has changed it).

On OSX 10.5 Terminal sets the LANG environment variable, which  
pythonrun.c picks up to set the encoding of sys.stdout when that's  
connected to a tty.  Printing arbitary unicode strings therefore works  
fine on my system (at least using python 2.5, I haven't used 3.0 yet).

I haven't checked if other OS releases behave simularly.

Ronald

>
>
> Regards,
> Martin
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/ronaldoussoren%40mac.com



------------------------------

Message: 4
Date: Fri, 15 Feb 2008 09:24:40 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802150924u7628f33fw999b60bc1946525b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 14, 2008 at 5:02 PM,  <skip@pobox.com> wrote:
>     Guido> You can hack around this for now by doing (before printing
>     Guido> anything)
>
>     Guido>   sys.stdout._encoding = 'utf-8'
>
>     Guido> but that ought to be a temporary hack until we've figured out the
>     Guido> right way to set it.
>
>  How about being able to reopen() an open file object, e.g.:
>
>     print(..., file=sys.stdout.reopen(encoding=""utf-8"")
>
>  ?

I think you're on to something. There's an API to access the
underlying (buffered) binary stream: sys.stdout.buffer. It's possible
to create a new TextIOWrapper on top of that:

sys.stdout = io.TextIOWrapper(sys.stdout.buffer, ""utf-8"")

The only problem is that if the original TextIOWrapper is deleted or
closed, its close() method will close the underlying buffer object,
rendering sys.stdout useless. (Well, actually, the lowest-level raw
I/O object refuses to be closed if the file descriptor is 0, 1 or 2,
but is issues a warning and this is a close call. It would be better
if TextIOWrapper didn't explicitly close() when deleted. That requires
some redesign of the interaction between __del__() and close() in the
IOBase class. Maybe __del__() should just flush() instead of close()?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Fri, 15 Feb 2008 09:35:42 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] weakrefs of bound methods
To: ""Nick Craig-Wood"" <nick@craig-wood.com>
Cc: Python-3000@python.org
Message-ID:
	<ca471dc20802150935g3173f54qe86fe8feda2197ba@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 2:12 AM, Nick Craig-Wood <nick@craig-wood.com> wrote:
> I've just been bitten yet again by the fact you can't have a weakref
>  to a bound method!  I find myself wanting to do this whenever I have a
>  registry of callback functions.
>
>  Could we in py3k either
>
>  1) make weakrefs to bound methods work?  A weakref to a bound method
>  should mean hold the weakref on the instance and bind the method at
>  the last moment.

I think you're somehow confused about how weakrefs are supposed to
work. They work fine!

Python 3.0a2+ (py3k:60836, Feb 15 2008, 09:21:45)
[GCC 4.0.3 (Ubuntu 4.0.3-1ubuntu5)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> import weakref
>>> class C:
...  def __init__(self, x=0): self.x = x
...  def f(self): return self.x
...
>>> f = C(42).f
>>> r = weakref.ref(f)
>>> r
<weakref at 0xf7be8fcc; to 'method' at 0xf7f0c48c (f)>
>>> r()
<bound method C.f of <__main__.C object at 0xf7bfc4ac>>
>>> r()()
42
>>> del f
>>> r()
>>> r
<weakref at 0xf7be8fcc; dead>
>>>

>  or
>
>  2) throw an exception when you attempt to take a weak reference of a
>  bound method?  Maybe only when it has a single refcount?
>
>  Eg
>
>   Python 3.0a2+ (py3k:60831, Feb 15 2008, 09:52:40)
>   [GCC 4.2.3 20071123 (prerelease) (Debian 4.2.2-4)] on linux2
>   Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>   >>> from weakref import WeakKeyDictionary
>   >>> d=WeakKeyDictionary()
>   >>> class A(object):
>   ...     def f(self): print(""hello"")
>   ...
>   >>> a=A()
>   >>> a.f()
>   hello
>   >>> d[a.f] = True
>   >>> d.keys()
>   []
>   >>>
>
>  I know how to work around the problem.  The fact that it passes
>  completely silently uses up lots of developer time debugging it
>  though!

Sorry, you don't seem to understand how weak references work.The bound
method object a.f goes away because you're not keeping any other
reference to it. Try this instead:

>>> d = weakref.WeakKeyDictionary()
>>> f = C(100).f
>>> d[f] = 200
>>> d
<WeakKeyDictionary at 4156538988>
>>> d.keys()
[<bound method C.f of <__main__.C object at 0xf7bfc54c>>]
>>> del f
>>> d.keys()
[<bound method C.f of <__main__.C object at 0xf7bfc54c>>]
>>>
>>> 1
1
>>> d.keys()
[]
>>>

(The second time I printed d.keys() it wasn't gone yet because the
hidden variable '_' was holding on to the last object printed, which
was the list of d's keys.)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Fri, 15 Feb 2008 09:37:43 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Drop list.reverse()?
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802150937h222d67e7xf742bdaca16f521c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 14, 2008 at 4:52 PM, Raymond Hettinger <python@rcn.com> wrote:
> Would it be worthwhile to leave reversed(s) and s[::-1] as the two obvious ways to do it (ways that work with any Sequence, not just lists)?

I think we should keep it. There's no faster way to reverse a list in place.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Fri, 15 Feb 2008 10:42:04 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0802150942k6811c617y4cc88f9e4693cd4a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 10:24 AM, Guido van Rossum <guido@python.org> wrote:
> On Thu, Feb 14, 2008 at 5:02 PM,  <skip@pobox.com> wrote:
>  >     Guido> You can hack around this for now by doing (before printing
>  >     Guido> anything)
>  >
>  >     Guido>   sys.stdout._encoding = 'utf-8'
>  >
>  >     Guido> but that ought to be a temporary hack until we've figured out the
>  >     Guido> right way to set it.
>  >
>  >  How about being able to reopen() an open file object, e.g.:
>  >
>  >     print(..., file=sys.stdout.reopen(encoding=""utf-8"")
>  >
>  >  ?
>
>  I think you're on to something. There's an API to access the
>  underlying (buffered) binary stream: sys.stdout.buffer. It's possible
>  to create a new TextIOWrapper on top of that:
>
>  sys.stdout = io.TextIOWrapper(sys.stdout.buffer, ""utf-8"")
>
>  The only problem is that if the original TextIOWrapper is deleted or
>  closed, its close() method will close the underlying buffer object,
>  rendering sys.stdout useless. (Well, actually, the lowest-level raw
>  I/O object refuses to be closed if the file descriptor is 0, 1 or 2,
>  but is issues a warning and this is a close call. It would be better
>  if TextIOWrapper didn't explicitly close() when deleted. That requires
>  some redesign of the interaction between __del__() and close() in the
>  IOBase class. Maybe __del__() should just flush() instead of close()?

That'd rely on prompt deletion for correct behaviour.  Why not an
explicit detach method?

buf = sys.stdout.buffer
sys.stdout.detach()
sys.stdout = io.TextIOWrapper(buf, ""utf-8"")

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 8
Date: Fri, 15 Feb 2008 09:42:39 -0800
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID:
	<e9764b730802150942q548c4e71pbaa4bfc1438aba46@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 9:37 AM, Dj Gilcrease <digitalxero@gmail.com> wrote:
>  The intent is to make it so (Assuming arg1 and arg2 are positional
>  only) you cannot do test(arg3=9, arg1=7, arg2=8), thus you would be
>  required to do test(7, 8, 9) {since doing test(7, 8, arg3=9) would
>  raise an error of positional arg being set by position and keyword at
>  the same time}
>

Little correction, test(7, 8, arg3=9) should work and does not raise
the error I though it did


------------------------------

Message: 9
Date: Fri, 15 Feb 2008 09:37:50 -0800
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID:
	<e9764b730802150937x2d7fec49o93c6291603e303ac@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Feb 15, 2008 at 8:46 AM, Joel Bender <jjb5@cornell.edu> wrote:
>  How about a BNFish notation?  Use brackets around optional parameters.
>
>      def test([arg1, [arg2,]] arg3):
>          ...

If I understand right, positional only arguments would not be optional
in any way shape or form, thats what default arguments are for.
Positional only args would be arguments that you cannot specify by
keyword, so having a positional only arg that has a default value,
thus making it optional just seems broken to me.

The notation you recommended just confuses the hell outa me when
reading it, it is neither clean nor elegant for the stated intent,
which is a method of defining positional only arguments.

eg.
def test([arg1=1, arg2=2,] arg3): return (arg1, arg2, arg3)
    assert test(9) == (1, 2, 9)
    assert test(7, 8, 9) == (7, 8, 9)
    test(8, 9) == Exception
    test(arg3=9) == ???

This example clearly shows what confuses me about this notation. arg1
and arg2 are supposed to be positional only, but your first example
the first argument you set end up in the 3rd position for no reason
other then you defined default arguments before the positional
arguments, which should and does raise ""SyntaxError: non-default
argument follows default argument""


The intent is to make it so (Assuming arg1 and arg2 are positional
only) you cannot do test(arg3=9, arg1=7, arg2=8), thus you would be
required to do test(7, 8, 9) {since doing test(7, 8, arg3=9) would
raise an error of positional arg being set by position and keyword at
the same time}


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 39
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 38","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Drop list.reverse()? (Raymond Hettinger)
   2. Re: Drop list.reverse()? (Steven Bethard)
   3. Re: Drop list.reverse()? (Raymond Hettinger)
   4. Re: Drop list.reverse()? (skip@pobox.com)
   5. Re: Drop list.reverse()? (Raymond Hettinger)
   6. Re: Does Py3k's print offer any unicode encoding help?
      (skip@pobox.com)
   7. Re: PEP 3102 (Greg Ewing)
   8. Re: Drop list.reverse()? (Greg Ewing)
   9. Re: Does Py3k's print offer any unicode encoding help?
      (Greg Ewing)
  10. Re: Drop list.reverse()? (Greg Ewing)
  11. Re: PEP 3102 (Dj Gilcrease)
  12. weakrefs of bound methods (Nick Craig-Wood)


----------------------------------------------------------------------

Message: 1
Date: Thu, 14 Feb 2008 19:52:43 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Drop list.reverse()?
To: python-3000@python.org
Message-ID: <20080214195243.AGZ07721@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

Would it be worthwhile to leave reversed(s) and s[::-1] as the two obvious ways to do it (ways that work with any Sequence, not just lists)?


Raymond


------------------------------

Message: 2
Date: Thu, 14 Feb 2008 17:59:59 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Drop list.reverse()?
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0802141659j54cfe7f3x54320b4504d19e5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Thu, Feb 14, 2008 at 5:52 PM, Raymond Hettinger <python@rcn.com> wrote:
> Would it be worthwhile to leave reversed(s) and s[::-1] as the two obvious ways to do it (ways that work with any Sequence, not just lists)?

But .reverse() is in-place, while the other two create new sequences, no?

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
 --- Bucky Katt, Get Fuzzy


------------------------------

Message: 3
Date: Thu, 14 Feb 2008 20:06:32 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Drop list.reverse()?
To: Steven Bethard <steven.bethard@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080214200632.AGZ09351@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Steven]
> But .reverse() is in-place, while the other two create new sequences, no? 

reversed(s) creates an iterator and s[::-1] creates a new list.  They are not the same as s.reverse() but the use cases overlap quite a bit.


Raymond


------------------------------

Message: 4
Date: Thu, 14 Feb 2008 19:33:22 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Drop list.reverse()?
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <18356.60386.774541.55072@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    >> But .reverse() is in-place, while the other two create new sequences, no? 

    Raymond> reversed(s) creates an iterator and s[::-1] creates a new list.
    Raymond> They are not the same as s.reverse() but the use cases overlap
    Raymond> quite a bit.

If s.reverse() is dumped shouldn't s.sort() be as well?

Skip


------------------------------

Message: 5
Date: Thu, 14 Feb 2008 20:44:07 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Drop list.reverse()?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID: <20080214204407.AGZ13523@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Skip]
> If s.reverse() is dumped shouldn't s.sort() be as well?

I don't think so.  When you run reversed(s), the s argument
can be any Sequence (either mutable or immutable) and the
return value is an iterator that doesn't copy the whole
dataset.

In contrast, sorted() takes any iterable and makes a full
copy of it before sorting it.

So reversed(s) can be done without doubling memory
consumption (and is just as fast as iterating forward),
but sorted() is a much heavier operation.

Since reversed() and sorted() were introduced, I've almost
never had occasion to want list.reverse() but I still use
list.sort().

One other reason for keeping list.sort() is that sort
stability lets you make multiple passes:

  mylist.sort(key=attrgetter('name')
  mylist.sort(key=attrgetter('score', reverse=True)
  # Now, it's sorted by reverse score, then alphabetically.

There's not a parallel use case for successive reverses.

Raymond


------------------------------

Message: 6
Date: Thu, 14 Feb 2008 19:02:11 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <18356.58515.512592.321048@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii

    Guido> You can hack around this for now by doing (before printing
    Guido> anything)

    Guido>   sys.stdout._encoding = 'utf-8'

    Guido> but that ought to be a temporary hack until we've figured out the
    Guido> right way to set it.

How about being able to reopen() an open file object, e.g.:

    print(..., file=sys.stdout.reopen(encoding=""utf-8"")

?

Skip


------------------------------

Message: 7
Date: Fri, 15 Feb 2008 15:04:55 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <47B4F347.7050102@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Guido van Rossum wrote:
> Now can you come up with a syntax for positional-only
> arguments? So far everybody has failed at that, and there are some use
> cases where it's useful too.

def foo(*(a, b,c)):
   ...

i.e. catch them in a * arg which is unpacked in-place.

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 8
Date: Fri, 15 Feb 2008 15:09:21 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Drop list.reverse()?
To: python-3000@python.org
Message-ID: <47B4F451.3070707@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Raymond Hettinger wrote:
> Would it be worthwhile to leave reversed(s) and s[::-1] 
 > as the two obvious ways to do it?

But that would leave us without an efficient way of
reversing in-place.

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 9
Date: Fri, 15 Feb 2008 15:11:21 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: python-3000@python.org
Message-ID: <47B4F4C9.3020402@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

skip@pobox.com wrote:

> How about being able to reopen() an open file object, e.g.:
> 
>     print(..., file=sys.stdout.reopen(encoding=""utf-8"")

But reopening implies a lot more than just changing the
encoding.

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 10
Date: Fri, 15 Feb 2008 15:16:14 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Drop list.reverse()?
To: python-3000@python.org
Message-ID: <47B4F5EE.8000800@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Raymond Hettinger wrote:
> When you run reversed(s), the s argument
> can be any Sequence (either mutable or immutable) and the
> return value is an iterator that doesn't copy the whole
> dataset.

If reversed() became a *view* (a mutable one) rather than
an iterator, there might be more of a case for dropping
list.reverse(), although I'm still not sure.

It might still be a good idea to make reversed() a view
(maybe mutable, maybe not).

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 11
Date: Thu, 14 Feb 2008 18:28:28 -0800
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] PEP 3102
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<e9764b730802141828t45c04fb8k5c834ba24269e196@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 14, 2008 at 6:04 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
>  > Now can you come up with a syntax for positional-only
>  > arguments? So far everybody has failed at that, and there are some use
>  > cases where it's useful too.
>
>  def foo(*(a, b,c)):
>    ...
>
>  i.e. catch them in a * arg which is unpacked in-place.

I thought the ability to do that was being removed in py3?


throwing some ideas around, for all examples arg1 and arg2 would be
positional only

def test(<arg1, arg2>, arg3, *arg4):
   ...

It's ok, since it clearly groups the positional only args, but the
parser might not be able to handle this.

def test(|arg1, |arg2, arg3, *, arg4):
    ...

Simple, but inelegant. In just looking at the code it seems wrong.

def test(arg1, arg2, |, arg3, *, arg4):
    ...

I like this idea better, use the pipe as a separator for positional
only, and normal arguments.


------------------------------

Message: 12
Date: Fri, 15 Feb 2008 10:12:19 +0000
From: Nick Craig-Wood <nick@craig-wood.com>
Subject: [Python-3000] weakrefs of bound methods
To: Python-3000@python.org
Message-ID: <20080215101219.GA29219@craig-wood.com>
Content-Type: text/plain; charset=us-ascii

I've just been bitten yet again by the fact you can't have a weakref
to a bound method!  I find myself wanting to do this whenever I have a
registry of callback functions.

Could we in py3k either

1) make weakrefs to bound methods work?  A weakref to a bound method
should mean hold the weakref on the instance and bind the method at
the last moment.

or

2) throw an exception when you attempt to take a weak reference of a
bound method?  Maybe only when it has a single refcount?

Eg

  Python 3.0a2+ (py3k:60831, Feb 15 2008, 09:52:40)
  [GCC 4.2.3 20071123 (prerelease) (Debian 4.2.2-4)] on linux2
  Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
  >>> from weakref import WeakKeyDictionary
  >>> d=WeakKeyDictionary()
  >>> class A(object):
  ...     def f(self): print(""hello"")
  ...
  >>> a=A()
  >>> a.f()
  hello
  >>> d[a.f] = True
  >>> d.keys()
  []
  >>> 

I know how to work around the problem.  The fact that it passes
completely silently uses up lots of developer time debugging it
though!

Thanks!
-- 
Nick Craig-Wood <nick@craig-wood.com> -- http://www.craig-wood.com/nick


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 38
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 37","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (VanL)
   2. Does Py3k's print offer any unicode encoding help?
      (skip@pobox.com)
   3. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
   4. Re: Does Py3k's print offer any unicode encoding help?
      (Martin v. L?wis)
   5. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
   6. PEP 3102 (Raymond Hettinger)
   7. Re: Does Py3k's print offer any unicode encoding help?
      (Martin v. L?wis)
   8. Re: PEP 3102 (Guido van Rossum)
   9. Re: Does Py3k's print offer any unicode encoding help?
      (Guido van Rossum)
  10. Re: Does Py3k's print offer any unicode encoding help?
      (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Thu, 14 Feb 2008 09:13:22 -0600
From: VanL <van.lindberg@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <fp1lqj$qgr$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Daniel Stutzbach wrote:
> Okay, but turn it around for a minute.  Which types should have a 
> .copy() method and why?

I would argue that it's not about mappings, it's about mutability. I 
always thought the .copy method on dicts was to allow functions to work 
on a passed-in dict without causing spooky action at a distance due to 
mutability issues. (See the silly example at the end of the post.) Sets, 
being by default mutable, got the same treatment.

Other types (other than lists) aren't susceptible to this sort of 
problem. The default idiom for lists,  copy = list[:], is a workaround 
for the lack of a .copy() method.

I would argue that if you want to make some sort of ABC, make it a 
'Mutable' ABC and put the .copy method in *there*. \

- Van

*For example, you can get into this problem when using dicts for string 
substitution:

def fragment1(vars, boilerplate=''):
    if boilerplate: vars['extra'] = boilerplate
    return ""%(sentence)s with %(something)s %(extra)s."" % vars

def fragment2(vars, boilerplate=''):
    if boilerplate: vars['extra'] = boilerplate
    return ""%(another)s %(sentence)s with %(extra)s."" % vars

def statement():
    # vars is a dict built from a database query
    vars = get_dict_from_db()
    return '%s %s' % (fragment1(vars, 'extra'), fragment2(vars))

Because of mutability, the 'extra' in fragment1 will also show up in 
fragment2. The solution to this is to make a .copy(). The susceptibility 
of newbies to this 'spooky action at a distance' problem is one of the 
reasons why mutability and immutability have to be addressed almost at 
the very start of many learning Python books.







------------------------------

Message: 2
Date: Thu, 14 Feb 2008 15:09:05 -0600
From: skip@pobox.com
Subject: [Python-3000] Does Py3k's print offer any unicode encoding
	help?
To: python-3000@python.org
Message-ID: <18356.44529.51137.327615@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii

A thread on the Python Mac sig got me to wondering if there is any magic in
Python 3's print function for printing Unicode.  Nope, no magic:

    >>> print(""\xef"")
    Traceback (most recent call last):
      File ""<stdin>"", line 1, in <module>
      File ""/Users/skip/local/lib/python3.0/io.py"", line 1246, in write
        b = encoder.encode(s)
      File ""/Users/skip/local/lib/python3.0/encodings/ascii.py"", line 22, in encode
        return codecs.ascii_encode(input, self.errors)[0]
    UnicodeEncodeError: 'ascii' codec can't encode character '\xef' in position 0: ordinal not in range(128)

Which kind of confuses me because on my system my default encoding is utf-8:

    >>> sys.getdefaultencoding()
    'utf-8'

Well, then how about an encoding arg?  Nope again:

    >>> print(""\xef"", encoding=""utf-8"")
    Traceback (most recent call last):
      File ""<stdin>"", line 1, in <module>
    TypeError: 'encoding' is an invalid keyword argument for this function

help(print) doesn't offer any suggestions either.  Any chance that maybe an
encoding keyword arg could make it into an upcoming 3.0aN release?
(Or... Am I missing a simple solution to the problem?)  It seems that
printing Unicode ought to be easier in Python 3 than it is.

Skip


------------------------------

Message: 3
Date: Thu, 14 Feb 2008 14:02:31 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802141402k12c48c4bia64cc16a9d6d9457@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

The encoding is a file property, not a print parameter.

The code that guesses the default stdout encoding isn't very good,
especially not on OSX. Suggestions are welcome.

You can hack around this for now by doing (before printing anything)

  sys.stdout._encoding = 'utf-8'

but that ought to be a temporary hack until we've figured out the
right way to set it.

--Guido

On Thu, Feb 14, 2008 at 1:09 PM,  <skip@pobox.com> wrote:
> A thread on the Python Mac sig got me to wondering if there is any magic in
>  Python 3's print function for printing Unicode.  Nope, no magic:
>
>     >>> print(""\xef"")
>     Traceback (most recent call last):
>       File ""<stdin>"", line 1, in <module>
>       File ""/Users/skip/local/lib/python3.0/io.py"", line 1246, in write
>         b = encoder.encode(s)
>       File ""/Users/skip/local/lib/python3.0/encodings/ascii.py"", line 22, in encode
>         return codecs.ascii_encode(input, self.errors)[0]
>     UnicodeEncodeError: 'ascii' codec can't encode character '\xef' in position 0: ordinal not in range(128)
>
>  Which kind of confuses me because on my system my default encoding is utf-8:
>
>     >>> sys.getdefaultencoding()
>     'utf-8'
>
>  Well, then how about an encoding arg?  Nope again:
>
>     >>> print(""\xef"", encoding=""utf-8"")
>     Traceback (most recent call last):
>       File ""<stdin>"", line 1, in <module>
>     TypeError: 'encoding' is an invalid keyword argument for this function
>
>  help(print) doesn't offer any suggestions either.  Any chance that maybe an
>  encoding keyword arg could make it into an upcoming 3.0aN release?
>  (Or... Am I missing a simple solution to the problem?)  It seems that
>  printing Unicode ought to be easier in Python 3 than it is.
>
>  Skip
>  _______________________________________________
>  Python-3000 mailing list
>  Python-3000@python.org
>  http://mail.python.org/mailman/listinfo/python-3000
>  Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Thu, 14 Feb 2008 23:21:40 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <47B4BEF4.5040206@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> The code that guesses the default stdout encoding isn't very good,
> especially not on OSX. Suggestions are welcome.

Unfortunately, Apple isn't very cooperative here. There is no way
of determining the encoding of a Terminal.app window, AFAIK
(it's normally UTF-8, unless the user has changed it).

Regards,
Martin


------------------------------

Message: 5
Date: Thu, 14 Feb 2008 14:38:44 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802141438s77555923va80239bab5145d3d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

In Leopard (OSX 10.5), it looks like LANG is set to convey this: it
has the value en_US.UTF-8 for me, and I haven't done anything to
change it. The Preferences dialog is completely changed from 10.4 and
there's a checkbox (on by default AFAIK) to set the LANG variable.
(However I've noticed that it doesn't set an encoding when I specify
another encoding other than UTF-8 -- perhaps because there is
interaction with the Language choice.)

In 10.4 LANG isn't set at all. The effect is that in 10.5,
sys.stdout.encoding defaults to UTF-8 but in 10.4 to US-ASCII.

Maybe a decent rule of thumb would be:

- if LANG is set, use the encoding it specifies; if there's no
encoding in it, assume it's ASCII.

- if LANG is *not* set, default to UTF-8 instead of to US-ASCII; UTF-8
is much more likely to be correct and useful for 10.4 and before.

--Guido

On Thu, Feb 14, 2008 at 2:21 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > The code that guesses the default stdout encoding isn't very good,
>  > especially not on OSX. Suggestions are welcome.
>
>  Unfortunately, Apple isn't very cooperative here. There is no way
>  of determining the encoding of a Terminal.app window, AFAIK
>  (it's normally UTF-8, unless the user has changed it).
>
>  Regards,
>  Martin
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Thu, 14 Feb 2008 17:48:12 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] PEP 3102
To: python-3000@python.org
Message-ID: <20080214174812.AGY90177@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

I've been exercising the new keyword-only arguments syntax.  It is absolutely wonderful.  I'm amazed at how many long standing problems it solves elegantly.

Thanks Talin!


Raymond


------------------------------

Message: 7
Date: Thu, 14 Feb 2008 23:59:04 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <47B4C7B8.7020009@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Maybe a decent rule of thumb would be:
> 
> - if LANG is set, use the encoding it specifies; if there's no
> encoding in it, assume it's ASCII.
> 
> - if LANG is *not* set, default to UTF-8 instead of to US-ASCII; UTF-8
> is much more likely to be correct and useful for 10.4 and before.

You mean, on OSX? Sounds fine to me.

Some people will see moji-bake with this surely; they'll have to set
LANG themselves.

(IOW, ASCII is more likely to be correct, but UTF-8 is more likely
to be useful).

Regards,
Martin


------------------------------

Message: 8
Date: Thu, 14 Feb 2008 15:13:21 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] PEP 3102
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802141513i1f62c9d9mea4deb8d16f10b65@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 14, 2008 at 2:48 PM, Raymond Hettinger <python@rcn.com> wrote:
> I've been exercising the new keyword-only arguments syntax.  It is absolutely wonderful.  I'm amazed at how many long standing problems it solves elegantly.

Agreed. Now can you come up with a syntax for positional-only
arguments? So far everybody has failed at that, and there are some use
cases where it's useful too.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Thu, 14 Feb 2008 15:14:34 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802141514x30b4381bm9ac6ab25766410d6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Feb 14, 2008 at 2:59 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > Maybe a decent rule of thumb would be:
>  >
>  > - if LANG is set, use the encoding it specifies; if there's no
>  > encoding in it, assume it's ASCII.
>  >
>  > - if LANG is *not* set, default to UTF-8 instead of to US-ASCII; UTF-8
>  > is much more likely to be correct and useful for 10.4 and before.
>
>  You mean, on OSX? Sounds fine to me.

Right.

>  Some people will see moji-bake with this surely; they'll have to set
>  LANG themselves.
>
>  (IOW, ASCII is more likely to be correct, but UTF-8 is more likely
>  to be useful).

Right. You can't completely rule out moji-bake -- people can set LANG
to an incorrect value too.

Can anyone supply a patch to open() in io.py?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 10
Date: Fri, 15 Feb 2008 09:06:27 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Does Py3k's print offer any unicode
	encoding help?
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <87abm36q2k.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Guido van Rossum writes:

 > The code that guesses the default stdout encoding isn't very good,
 > especially not on OSX. Suggestions are welcome.

FWIW XEmacs 21.5 (still unreleased) was changed to set all system
codecs (path, stdin, and stdout) to UTF-8 at startup if it's running
on Mac OS (a build-time constant) some months ago, and I haven't seen
a complaint yet from the testers.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 37
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 36","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: ABC for Inequalities (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Thu, 14 Feb 2008 12:34:47 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] ABC for Inequalities
To: python-3000@python.org
Message-ID: <47B37E97.5010409@canterbury.ac.nz>
Content-Type: text/plain; charset=windows-1250; format=flowed

Neil Toronto wrote:

> The problem is that, like all the binary operators, ""orderable"" is only 
> defined for pairs of types.

I'm loathe to mention it, but it sounds like what's
needed for this is generic functions on types...

-- 
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 36
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 35","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Daniel Stutzbach)
   2. Re: Nix dict.copy() (Greg Ewing)
   3. Re: Nix dict.copy() (Guido van Rossum)
   4. Re: Nix dict.copy() (Daniel Stutzbach)
   5. Re: Nix dict.copy() (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Tue, 12 Feb 2008 16:40:10 -0600
From: ""Daniel Stutzbach"" <daniel@stutzbachenterprises.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Guido van Rossum"" <guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org,
	Raymond Hettinger <python@rcn.com>
Message-ID:
	<eae285400802121440k2c1c544dpeea4bcc9b7dbbbd4@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On Feb 12, 2008 11:56 AM, Guido van Rossum <guido@python.org> wrote:

> Here's another way to look at it, maybe it'll help. My hunch is that
> whenever someone writes x = copy(y), they actually know more about the
> type of y than just that it is an object! Because if they knew
> *nothing* about it, they wouldn't know whether copying was (a)
> pointless (as it is for immutable objects), (b) impossible (e.g. for
> sockets), or (c) useful (e.g. for lists).


Based on the same reasoning, when we see x = copy(y) we can tentatively
assume that y is a type that can usefully be copied.  Unless we don't trust
the author of the code to be sensible.


> Seeing x=copy(y) provides no new information about y, since
> all (well, most) objects can be copied. OTOH seeing x=y.copy() *does*
> provide new information about y; it must be a type that has a .copy()
> method.


What useful information do we get by knowing that a type has a .copy()
method?

If I took the last sentence out of context, I would assume that having a
.copy() method informs you that the type is copyable.  Except you've just
said that all (well, most) objects in Python can be copied--so I'm not sure
new information a .copy() method conveys.

Normally I might assume that it does a special kind of copying that doesn't
fit the definition of copy.copy() nor copy.deepcopy(), except that for dict
and set types, .copy() and .__copy__() are identical.

-- 
Daniel Stutzbach, Ph.D.             President, Stutzbach Enterprises LLC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080212/525d4a0e/attachment-0001.htm 

------------------------------

Message: 2
Date: Wed, 13 Feb 2008 11:39:13 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47B22011.7070906@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> I used Google Code Search to find examples of copy.copy().
> Many were hard to understand because there was no clue about the
> argument passed it, and the copy() call doesn't help me infer its type
> either. Contrast this with example code using iter() -- it tells me
> that the argument is an iterable. That rules out lots of
> possibilities, like numbers.

Hmmm. Personally I'm not sure that such ad-hoc piecemeal
type inference is all that useful. Just knowing that
something is an iterable still doesn't tell me anything
about the type of the items it contains, which is
likely to be of much more interest to me.

Similarly, just knowing that something has a copy()
method doesn't narrow things down all that much. It
might be a dict, or a set, or something else the user
has come up with, which could be just about anything.

--
Greg



------------------------------

Message: 3
Date: Tue, 12 Feb 2008 14:52:04 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Daniel Stutzbach"" <daniel@stutzbachenterprises.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org,
	Raymond Hettinger <python@rcn.com>
Message-ID:
	<ca471dc20802121452n76a55ab1g1e07bb22c1383753@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 12, 2008 2:40 PM, Daniel Stutzbach
<daniel@stutzbachenterprises.com> > Based on the same reasoning, when
we see x = copy(y) we can tentatively
> assume that y is a type that can usefully be copied.  Unless we don't trust
> the author of the code to be sensible.

My point is that (almost) any type is copyable so we can't tell what
the author is assuming. Maybe they believe they had either a list or a
dict -- or maybe they know they have an arbitrary class instance.

> > Seeing x=copy(y) provides no new information about y, since
> > all (well, most) objects can be copied. OTOH seeing x=y.copy() *does*
> > provide new information about y; it must be a type that has a .copy()
> > method.
>
> What useful information do we get by knowing that a type has a .copy()
> method?

It rules out all classes that don't have one. That's nearly all types.

> If I took the last sentence out of context, I would assume that having a
> .copy() method informs you that the type is copyable.  Except you've just
> said that all (well, most) objects in Python can be copied--so I'm not sure
> new information a .copy() method conveys.

Only dict and a few mapping-like types (and a vanishingly small number
of user-defined classes) define copy().

> Normally I might assume that it does a special kind of copying that doesn't
> fit the definition of copy.copy() nor copy.deepcopy(), except that for dict
> and set types, .copy() and .__copy__() are identical.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Tue, 12 Feb 2008 17:11:09 -0600
From: ""Daniel Stutzbach"" <daniel@stutzbachenterprises.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Guido van Rossum"" <guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org,
	Raymond Hettinger <python@rcn.com>
Message-ID:
	<eae285400802121511r6872ca26hd4c45843688f0997@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On Feb 12, 2008 4:52 PM, Guido van Rossum <guido@python.org> wrote:

> > What useful information do we get by knowing that a type has a .copy()
> > method?
>
> It rules out all classes that don't have one. That's nearly all types.
>

Okay, but turn it around for a minute.  Which types should have a .copy()
method and why?

If I'm making a new copyable type, is there a rule of thumb that helps me
decide on .copy(), .__copy__(), or both?

Rules of ""dict and set have a .copy() method"" or ""mapping types have a
.copy() method"" seem... arbitrary.

-- 
Daniel Stutzbach, Ph.D.             President, Stutzbach Enterprises LLC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080212/b0f2e170/attachment-0001.htm 

------------------------------

Message: 5
Date: Tue, 12 Feb 2008 15:15:31 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Daniel Stutzbach"" <daniel@stutzbachenterprises.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802121515m3df83a9epcd6e205286d0428b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 12, 2008 3:11 PM, Daniel Stutzbach
<daniel@stutzbachenterprises.com> wrote:
> On Feb 12, 2008 4:52 PM, Guido van Rossum <guido@python.org> wrote:
>
> >
> > > What useful information do we get by knowing that a type has a .copy()
> > > method?
> >
> > It rules out all classes that don't have one. That's nearly all types.
> >
>
> Okay, but turn it around for a minute.  Which types should have a .copy()
> method and why?
>
> If I'm making a new copyable type, is there a rule of thumb that helps me
> decide on .copy(), .__copy__(), or both?
>
> Rules of ""dict and set have a .copy() method"" or ""mapping types have a
> .copy() method"" seem... arbitrary.

I can't answer those questions in the abstract; I'd have to see the
type you are trying to create and the use case for creating copies.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 35
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 34","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Guido van Rossum)
   2. Re: ABC for Inequalities (Guido van Rossum)
   3. Re: ABC for Inequalities (Guido van Rossum)
   4. Preventing merges into Py3k (Guido van Rossum)
   5. Re: Location of UserDict, UserList, and UserString
      (Steven Bethard)
   6. Re: Preventing merges into Py3k (Christian Heimes)
   7. Re: Nix dict.copy() (Greg Ewing)
   8. Re: Nix dict.copy() (Greg Ewing)
   9. Re: Nix dict.copy() (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Tue, 12 Feb 2008 09:56:58 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID:
	<ca471dc20802120956h73a339cbw5c169677904084a1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 10:20 PM, Raymond Hettinger <python@rcn.com> wrote:
> >> I don't think we'll ever get another chance to clean-up the mapping API and to remove duplicate functionality (the code for
> >> dict.__copy__ and dict.copy share the same implementation).
> >
> > I find the use of a copy operation that purports to copy any object
> > suspect (regardless whether it's a module or a builtin), and that I'd
> > rather have a copy() method on the MutableMapping API.
>
> Should I revert the -3 warning on copy() methods that I checked-in a few days ago?

Yes, I think we jumped the gun here a bit.

> > I think my objection against the fully generic copy operation is that
> > it's type is useless -- all we know that it is supposed to return the
> > same type as its argument, but our type system can't express that.
>
> I'm not sure I follow you here.  The definition of Iterator.__iter__
> is to return self, so it doesn't seem like much of a leap to express
> a signature with a return type of type(self).

Actually, __iter__ is defined on any Iterable, and it returns an
Iterator; so after x = y.__iter__() (or x = iter(y) of course) you
know that x is an Iterator, even if you know nothing about y's type
(though if y is not an Iterable, the expresion may raise an
exception).

OTOH if you see x = copy(y), you don't know anything about x unless
you know something about y; without knowing anything about y, all you
know is that x is an object.

Here's another way to look at it, maybe it'll help. My hunch is that
whenever someone writes x = copy(y), they actually know more about the
type of y than just that it is an object! Because if they knew
*nothing* about it, they wouldn't know whether copying was (a)
pointless (as it is for immutable objects), (b) impossible (e.g. for
sockets), or (c) useful (e.g. for lists).

When thinking about these kind of things I often place myself in the
position of a static type checker that happens to know something about
the types of some variables and is trying to gather more information.
Seeing x=iter(y) can provide new information about y (it must be an
Iterable). Seeing x=copy(y) provides no new information about y, since
all (well, most) objects can be copied. OTOH seeing x=y.copy() *does*
provide new information about y; it must be a type that has a .copy()
method. Now seeing x=len(y) *does* provide new information about y
(since we know which types support .__len__()).

I realize I'm doing a lousy job of explaining me. Please trust me that
there's something here. I will eventually get to it (maybe not today).

> Or, were you saying that the actual problem is that we can't know
> in advance the signature of  type(self).__init__()?

No, the __copy__ GF takes care of that concern.

> > The
> > type of the more constrained (but still generic in the sense of PEP
> > 3124) copy operation on mutable sequences is better defined -- it
> > returns another mutable sequence, with the understanding that it
> > typically returns something of the same type as its input, though not
> > always -- e.g. if I subclass dict but don't override .copy(), the
> > inherited .copy() method returns a dict, not my subclass.
>
> The part I'm not following in this paragraph is how a d.copy()
> method is any different from the d.__copy__() method that
> is called by the copy() function.  Both share the same underlying
> implementation and both have the same effects when overridden.

The difference is that *every* object has a .__copy__() method (it is
inherited from object, at least conceptually), but not every object
has a .copy() method.

> If all we want a guaranteed dict, why not write dict(obj)?
> This already works with all the dict lookalikes because they
> define obj.keys() and obj.__getitem__().

Well, the whole point of this discussion that dict(obj) is what you
should write if you want a guaranteed dict, and obj.copy() is what you
should write if you want a guaranteed mutable mapping of the same type
as obj. Just like you write list(obj) if you want a list and obj[:] if
you want a sequence of the same type as obj.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Tue, 12 Feb 2008 09:57:45 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC for Inequalities
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802120957r3e39ab71u21e3b14c6f778ef5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 10:38 PM, Raymond Hettinger <python@rcn.com> wrote:
> That's a lot of firepower for such a little problem ;-)

Indeed, which is why it was not adopted. ;-)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Tue, 12 Feb 2008 10:02:25 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC for Inequalities
To: ""Neil Toronto"" <ntoronto@cs.byu.edu>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802121002v5ee24227g667546de4b748c4c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 10:40 PM, Neil Toronto <ntoronto@cs.byu.edu> wrote:
> The problem is that, like all the binary operators, ""orderable"" is only
> defined for pairs of types. A single declaration of orderable-ness
> necessarily lacks information needed for type safety.

Actually, lots of languages have ways to express that the values of a
given type are orderable. E.g. in C++ you can create a template that
takes a single type argument which must define a total ordering using
'<'.

> Besides probably not being ""worth it"" (as you say), forcing the classes
> into an inheritance hierarchy doesn't seem Pythonic. (I may not have the
> Python-fu to make such declarations, but I'll call 'em as I see 'em.)

You're forgetting about virtual inheritance.

> Also, x objects and y objects may be orderable homogeneously, but not
> heterogeneously. I could impose a total order on sets of circles and
> another on sets of squares without imposing an order on sets of both
> circles and squares, and not be able to spell this under the inheritance
> approach.

Yes, that was what I explained at length.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Tue, 12 Feb 2008 10:10:53 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: [Python-3000] Preventing merges into Py3k
To: ""Thomas Heller"" <theller@ctypes.org>
Cc: Python 3000 <python-3000@python.org>, Python Dev
	<python-dev@python.org>
Message-ID:
	<ca471dc20802121010i3bddd22bq2ed73537d67c443@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 12, 2008 9:44 AM, thomas.heller <python-3000-checkins@python.org> wrote:
> Author: thomas.heller
> Date: Tue Feb 12 18:44:23 2008
> New Revision: 60746
>
> Modified:
>    python/branches/py3k/Modules/_ctypes/_ctypes.c
> Log:
> Revert the last svnmerge (r60681) from trunk to _ctypes.c, it should
> not have been merged as was noticed in the commit message.

There is a way to prevent merging a particular revision by instructing
svnmerge properly. I believe the syntax is svnmerge block (svnmerge
help block will explain you more).

Christian has been using this -- Christian, care to post a detailed example?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Tue, 12 Feb 2008 11:30:30 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0802121030u24e85257q723adcc018797c6d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 11, 2008 9:10 PM, Raymond Hettinger <python@rcn.com> wrote:
> Was the concensus on this to move UserList into the collections module and to remove UserString?
> Any objections?

No objections here either.

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 6
Date: Tue, 12 Feb 2008 20:41:43 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Preventing merges into Py3k
To: python-3000@python.org
Cc: python-dev@python.org
Message-ID: <fosspr$k4k$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> There is a way to prevent merging a particular revision by instructing
> svnmerge properly. I believe the syntax is svnmerge block (svnmerge
> help block will explain you more).
> 
> Christian has been using this -- Christian, care to post a detailed example?

Yes, svnmerge.py block is correct. In order to prevent a merge you have
to use svnmerge.py in a local copy of the py3k branch. Don't forget to
submit the change! ;)

cd .../py3k
svnmerge.py block -r12345
svn ci -m ""block r12345""

Christian



------------------------------

Message: 7
Date: Wed, 13 Feb 2008 11:05:10 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47B21816.7050505@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Raymond Hettinger wrote:
> The part I'm not following in this paragraph is how a d.copy()
> method is any different from the d.__copy__() method that
> is called by the copy() function.  Both share the same underlying
> implementation and both have the same effects when overridden.

Having it a function/special method pair appears to make a
strong statement that it's a very important operation that
a large number of types ought to implement. As Guido said,
it's not really a generic enough operation to warrant that.

--
Greg


------------------------------

Message: 8
Date: Wed, 13 Feb 2008 11:20:54 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47B21BC6.9060309@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:

> Here's another way to look at it, maybe it'll help. My hunch is that
> whenever someone writes x = copy(y), they actually know more about the
> type of y than just that it is an object!

I don't see how this is much different than the situation
with __iter__. If you know that y is a sequence of items
of type Y, then you know that iter(y) probably produces
an object with a next() method that returns objects of
type Y.

If you're talking about programmers doing type analysis
in their heads, I think the type system they use is quite
a sophisticated one, certainly a parametric one that has
no trouble coping with things like this.

> I realize I'm doing a lousy job of explaining me.

What's confusing is that you're talking about static
typing issues in a language that has no static type
system. I'm having trouble seeing the relevance.

--
Greg



------------------------------

Message: 9
Date: Tue, 12 Feb 2008 14:32:30 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802121432r72165f2ek1047a4e32ab01420@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 12, 2008 2:20 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
>
> > Here's another way to look at it, maybe it'll help. My hunch is that
> > whenever someone writes x = copy(y), they actually know more about the
> > type of y than just that it is an object!
>
> I don't see how this is much different than the situation
> with __iter__. If you know that y is a sequence of items
> of type Y, then you know that iter(y) probably produces
> an object with a next() method that returns objects of
> type Y.
>
> If you're talking about programmers doing type analysis
> in their heads, I think the type system they use is quite
> a sophisticated one, certainly a parametric one that has
> no trouble coping with things like this.

It depends. I used Google Code Search to find examples of copy.copy().
Many were hard to understand because there was no clue about the
argument passed it, and the copy() call doesn't help me infer its type
either. Contrast this with example code using iter() -- it tells me
that the argument is an iterable. That rules out lots of
possibilities, like numbers.

> > I realize I'm doing a lousy job of explaining me.
>
> What's confusing is that you're talking about static
> typing issues in a language that has no static type
> system. I'm having trouble seeing the relevance.

Trust me, there is a relevance to it in my head! It has to do with
Python's ancestry from ABC, which did static type inference.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 34
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 33","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: ABC for Inequalities (Neil Toronto)


----------------------------------------------------------------------

Message: 1
Date: Mon, 11 Feb 2008 23:40:35 -0700
From: Neil Toronto <ntoronto@cs.byu.edu>
Subject: Re: [Python-3000] ABC for Inequalities
To: python-3000@python.org
Message-ID: <47B13F63.9010302@cs.byu.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Feb 11, 2008 7:31 PM, Raymond Hettinger <python@rcn.com> wrote:
>> [GvR]
>>> The problem is that if you have two instance x,
>>> y such that isinstance(x, TotalOrdering) and isinstance(y,
>>> TotalOrdering) you still don't know if x < y is defined. (For example,
>>> if x is a string and y is a number.)
>> So, ordering only makes sense when ""other"" is known to be
>> of the same type as ""self"".
> 
> No, that's too far in the other direction. E.g. two instances of Real
> but of different implementations should still be comparable. (Though I
> expect there's some higher math involved to prove this for all reals.
> :-)

The problem is that, like all the binary operators, ""orderable"" is only 
defined for pairs of types. A single declaration of orderable-ness 
necessarily lacks information needed for type safety.

>>> There's a useful definition in there somewhere but
>>> it's elusive. We'll eventually figure it out.
>> I hope so. I'm less interested in the mixin and more interested in
>> a way for a class to have a way to tell you whether it is sortable.
>> Right now, the presence or absence of __le__ doesn't tell
>> you much.
> 
> Yeah, this is one area where a leap of faith (a.k.a. duck typing :-)
> may still be the best approach.
> 
> I think you can probably get something that is reasonable given the
> kind of assumptions that prevail in an ABC world by having a
> ""Sortable"" metaclass (itself a subclass of ABCMeta) with the implied
> semantics that objects x and y can be sorted if the nearest common
> ancestor of x.__class__ and y.__class__ is an instance of Sortable.

Besides probably not being ""worth it"" (as you say), forcing the classes 
into an inheritance hierarchy doesn't seem Pythonic. (I may not have the 
Python-fu to make such declarations, but I'll call 'em as I see 'em.) 
Also, x objects and y objects may be orderable homogeneously, but not 
heterogeneously. I could impose a total order on sets of circles and 
another on sets of squares without imposing an order on sets of both 
circles and squares, and not be able to spell this under the inheritance 
approach.

To do it properly beyond duck typing, there should be a way to ask 
whether (and declare that) a *pair* of types implements an interface 
such as Orderable. This is analogous to how the binary operators 
currently work, though those are decentralized: the op/rop methods 
jointly decide what's legal.

A little voice in my head is shouting ""icky!"" at the prospects.

IIRC, one major motivation for ABCs was to avoid calling potentially 
destructive methods by allowing interface queries first. Does anyone 
expect comparisons to be destructive?

Where would an ""Orderable"" query happen? Not before sorting a list - 
you'd have to scan the list to see what types are in it. (And declaring 
orderability for just pairs of types may not be enough then. Is 
orderability transitive?) Before each comparison? If that's the case, 
the only reason I can see for checking for Orderable is to keep people 
from doing dumb things.

Neil


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 33
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 32","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Raymond Hettinger)
   2. Re: Location of UserDict, UserList, and UserString
      (Raymond Hettinger)
   3. Re: ABC for Inequalities (Guido van Rossum)
   4. Re: Nix dict.copy() (Guido van Rossum)
   5. Re: Location of UserDict, UserList, and UserString
      (Guido van Rossum)
   6. Re: Location of UserDict, UserList, and UserString
      (Christian Heimes)
   7. Re: Location of UserDict, UserList, and UserString (Brett Cannon)
   8. Re: Nix dict.copy() (Raymond Hettinger)
   9. Re: ABC for Inequalities (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Mon, 11 Feb 2008 19:58:55 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Steven Bethard"" <steven.bethard@gmail.com>,	""Guido van Rossum""
	<guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <006d01c86d2b$975bdb60$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""UTF-8"";
	reply-type=original

Where did we end-up on dict.copy()?

Is the copy(obj) function sufficiently universal to replace the obj.copy() method used in sets and in dict imitators?  Or does the 
need for import preclude it from consideration?

To me it seems that relationship between __copy__ and the copy() function is just as universal as the relationship between __len__ 
and len(). Am I missing something that makes d.copy() preferable to copy(d)?

I don't think we'll ever get another chance to clean-up the mapping API and to remove duplicate functionality (the code for 
dict.__copy__ and dict.copy share the same implementation).


Raymond


------------------------------

Message: 2
Date: Mon, 11 Feb 2008 20:10:29 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: python-3000@python.org
Message-ID: <008c01c86d2d$34aba840$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""UTF-8"";
	reply-type=original

Was the concensus on this to move UserList into the collections module and to remove UserString?
Any objections?


Raymond



---------------------------------------------------
>> [Brett]
>> > +1 on collections.
>>
>> [Steven Bethard]
>> > +1 for putting them in the collections module.
>>
>> How about UserString?
>> Is there a reason for it to continue to exist?
> 
> Like Brett, I've never found a use for it, so I'm happy to see it go.
> 
> Steve
> -- 
> I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
> tiny blip on the distant coast of sanity.
>        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 3
Date: Mon, 11 Feb 2008 20:41:55 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC for Inequalities
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802112041n76caededp6e3e275c2891378d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 7:31 PM, Raymond Hettinger <python@rcn.com> wrote:
> [GvR]
> > Hold on. We went down that road quite a bit and then discovered it
> > wasn't going to work.
>
> I figured that it was missing for a reason.
>
> > The problem is that if you have two instance x,
> > y such that isinstance(x, TotalOrdering) and isinstance(y,
> > TotalOrdering) you still don't know if x < y is defined. (For example,
> > if x is a string and y is a number.)
>
> So, ordering only makes sense when ""other"" is known to be
> of the same type as ""self"".

No, that's too far in the other direction. E.g. two instances of Real
but of different implementations should still be comparable. (Though I
expect there's some higher math involved to prove this for all reals.
:-)

> > There's a useful definition in there somewhere but
> > it's elusive. We'll eventually figure it out.
>
> I hope so. I'm less interested in the mixin and more interested in
> a way for a class to have a way to tell you whether it is sortable.
> Right now, the presence or absence of __le__ doesn't tell
> you much.

Yeah, this is one area where a leap of faith (a.k.a. duck typing :-)
may still be the best approach.

I think you can probably get something that is reasonable given the
kind of assumptions that prevail in an ABC world by having a
""Sortable"" metaclass (itself a subclass of ABCMeta) with the implied
semantics that objects x and y can be sorted if the nearest common
ancestor of x.__class__ and y.__class__ is an instance of Sortable.
E.g.

class S(metaclass=Sortable): ...

class S0(S):
  def __lt__(self, other): ...
  def __le__(self, other): ...
  ...etc...

class S1(S0): ...

class S2(S0): ...

x = S1()
y = S2()

Now x<y should work: the nearest common ancestor of S1 and S2 is S0,
which is a subclass of S, which is an instance of Sortable. (If S is
an instance of Sortable, so is S0 -- that's how metaclasses are
inherited.)

But I'm not sure this is worth it; we don't have an easy way to add
this to an argument annotation, since the argument annotations are
(usually) assumed to be type expressions so that f(x:T) means
isinstance(x,T) -- but here we want to express isinstance(x.__class__,
Sortable). The best I can think of is to say that if the annotation is
a lambda (not just any callable, since classes are callable) it must
evaluate to true when called on the actual argument: then we'd write
f(x: (lambda x: isinstance(x.__class__, Sortable))). Very ugly, but
could of course be abbreviated with a suitable helper function to f(x:
metaclass_is(Sortable)).

PS. ""Sortable"" is perhaps not the best name, as one would perhaps
think that a list of numbers is sortable because it has a .sort()
method... Maybe Orderable or Ordered or TotallyOrdered?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Mon, 11 Feb 2008 20:47:10 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID:
	<ca471dc20802112047q4e4e8fc5w74f982e1de0aebc1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 7:58 PM, Raymond Hettinger <python@rcn.com> wrote:
> Where did we end-up on dict.copy()?
>
> Is the copy(obj) function sufficiently universal to replace the obj.copy() method used in sets and in dict imitators?  Or does the
> need for import preclude it from consideration?
>
> To me it seems that relationship between __copy__ and the copy() function is just as universal as the relationship between __len__
> and len(). Am I missing something that makes d.copy() preferable to copy(d)?
>
> I don't think we'll ever get another chance to clean-up the mapping API and to remove duplicate functionality (the code for
> dict.__copy__ and dict.copy share the same implementation).

I find the use of a copy operation that purports to copy any object
suspect (regardless whether it's a module or a builtin), and that I'd
rather have a copy() method on the MutableMapping API.

I think my objection against the fully generic copy operation is that
it's type is useless -- all we know that it is supposed to return the
same type as its argument, but our type system can't express that. The
type of the more constrained (but still generic in the sense of PEP
3124) copy operation on mutable sequences is better defined -- it
returns another mutable sequence, with the understanding that it
typically returns something of the same type as its input, though not
always -- e.g. if I subclass dict but don't override .copy(), the
inherited .copy() method returns a dict, not my subclass.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Mon, 11 Feb 2008 20:48:27 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802112048n25895961hae0ecd1638a8dfe2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I don't know about consensus, but personally I'm +1 on this.

On Feb 11, 2008 8:10 PM, Raymond Hettinger <python@rcn.com> wrote:
> Was the concensus on this to move UserList into the collections module and to remove UserString?
> Any objections?
>
>
> Raymond
>
>
>
> ---------------------------------------------------
>
> >> [Brett]
> >> > +1 on collections.
> >>
> >> [Steven Bethard]
> >> > +1 for putting them in the collections module.
> >>
> >> How about UserString?
> >> Is there a reason for it to continue to exist?
> >
> > Like Brett, I've never found a use for it, so I'm happy to see it go.
> >
> > Steve
> > --
> > I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
> > tiny blip on the distant coast of sanity.
> >        --- Bucky Katt, Get Fuzzy
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Tue, 12 Feb 2008 06:41:36 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: python-3000@python.org
Message-ID: <forbig$7b4$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Raymond Hettinger wrote:
> Was the concensus on this to move UserList into the collections module and to remove UserString?
> Any objections?

You have my +1 as well.

Christian



------------------------------

Message: 7
Date: Mon, 11 Feb 2008 22:10:34 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100802112210v6123d0adh7ec91d898cdf03c2@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 11, 2008 8:10 PM, Raymond Hettinger <python@rcn.com> wrote:
> Was the concensus on this to move UserList into the collections module and to remove UserString?
> Any objections?

I ain't going to object.

-Brett


------------------------------

Message: 8
Date: Mon, 11 Feb 2008 22:20:31 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Guido van Rossum"" <guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <00bb01c86d3f$5f610460$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

>> I don't think we'll ever get another chance to clean-up the mapping API and to remove duplicate functionality (the code for
>> dict.__copy__ and dict.copy share the same implementation).
> 
> I find the use of a copy operation that purports to copy any object
> suspect (regardless whether it's a module or a builtin), and that I'd
> rather have a copy() method on the MutableMapping API.

Should I revert the -3 warning on copy() methods that I checked-in a few days ago?



> I think my objection against the fully generic copy operation is that
> it's type is useless -- all we know that it is supposed to return the
> same type as its argument, but our type system can't express that.

I'm not sure I follow you here.  The definition of Iterator.__iter__
is to return self, so it doesn't seem like much of a leap to express 
a signature with a return type of type(self).

Or, were you saying that the actual problem is that we can't know
in advnace the signature of  type(self).__init__()?

> The
> type of the more constrained (but still generic in the sense of PEP
> 3124) copy operation on mutable sequences is better defined -- it
> returns another mutable sequence, with the understanding that it
> typically returns something of the same type as its input, though not
> always -- e.g. if I subclass dict but don't override .copy(), the
> inherited .copy() method returns a dict, not my subclass.

The part I'm not following in this paragraph is how a d.copy()
method is any different from the d.__copy__() method that
is called by the copy() function.  Both share the same underlying
implementation and both have the same effects when overridden.

If all we want a guaranteed dict, why not write dict(obj)?  
This already works with all the dict lookalikes because they
define obj.keys() and obj.__getitem__().


Raymond


------------------------------

Message: 9
Date: Mon, 11 Feb 2008 22:38:58 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] ABC for Inequalities
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <00d801c86d41$f2f36b80$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[GvR]
> I think you can probably get something that is reasonable given the
> kind of assumptions that prevail in an ABC world by having a
> ""Sortable"" metaclass (itself a subclass of ABCMeta) with the implied
> semantics that objects x and y can be sorted if the nearest common
> ancestor of x.__class__ and y.__class__ is an instance of Sortable.
> E.g.
> 
> class S(metaclass=Sortable): ...
> 
> class S0(S):
>  def __lt__(self, other): ...
>  def __le__(self, other): ...
>  ...etc...
> 
> class S1(S0): ...
> 
> class S2(S0): ...
> 
> x = S1()
> y = S2()
> 
> Now x<y should work: the nearest common ancestor of S1 and S2 is S0,
> which is a subclass of S, which is an instance of Sortable. (If S is
> an instance of Sortable, so is S0 -- that's how metaclasses are
> inherited.)
> 
> But I'm not sure this is worth it; we don't have an easy way to add
> this to an argument annotation, since the argument annotations are
> (usually) assumed to be type expressions so that f(x:T) means
> isinstance(x,T) -- but here we want to express isinstance(x.__class__,
> Sortable). The best I can think of is to say that if the annotation is
> a lambda (not just any callable, since classes are callable) it must
> evaluate to true when called on the actual argument: then we'd write
> f(x: (lambda x: isinstance(x.__class__, Sortable))). Very ugly, but
> could of course be abbreviated with a suitable helper function to f(x:
> metaclass_is(Sortable)).

Wow!

That's a lot of firepower for such a little problem ;-)



Raymond


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 32
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 31","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Phillip J. Eby)
   2. Re: Thoughts on collections.Container and
      collections.Iterable (Lisandro Dalcin)
   3. ABC for Inequalities (Raymond Hettinger)
   4. Re: ABC for Inequalities (Guido van Rossum)
   5. Re: ABC for Inequalities (Raymond Hettinger)
   6. What is numbers.Integral used for? (Raymond Hettinger)
   7. Re: ABC for Inequalities (Guido van Rossum)
   8. Re: What is numbers.Integral used for? (Guido van Rossum)
   9. Re: ABC for Inequalities (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Mon, 11 Feb 2008 12:56:15 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: Greg Ewing <greg.ewing@canterbury.ac.nz>, python-3000@python.org
Message-ID: <20080211175606.4AE1C3A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 05:23 PM 2/11/2008 +1300, Greg Ewing wrote:
>Aahz wrote:
> > On Mon, Feb 11, 2008, Greg Ewing wrote:
> >
> >>There are bound to be things that you *don't* want to copy from
> >>the original order, e.g. the order ID, the date...
> >
> > Certainly -- that's why __copy__() exists, right?
>
>Yes, but then I don't see the advantage over just
>giving the object a copy() method and calling it
>directly.
>
>In other words, I see little benefit in having
>copy() be a generic function.

Well, in the current circumstance, it helps because third parties can 
implement copying for things that didn't implement it themselves.



------------------------------

Message: 2
Date: Mon, 11 Feb 2008 20:19:54 -0300
From: ""Lisandro Dalcin"" <dalcinl@gmail.com>
Subject: Re: [Python-3000] Thoughts on collections.Container and
	collections.Iterable
To: ""Neil Toronto"" <ntoronto@cs.byu.edu>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<e7ba66e40802111519g9517305p12e99e65123122bd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

itertools.count() maybe ? Well not really infinite, it stops with
OverflowError...

But then (don't try this at home)...

>>> 4 in itertools.cycle(range(3)) # ups!

I seems that implicitely supporting containment testing for any
iterable is not always good idea.

On 2/9/08, Neil Toronto <ntoronto@cs.byu.edu> wrote:
> Neil Toronto wrote:
> > Guido van Rossum wrote:
> >> I would need to think more about this. I'm tempted not to do this, and
> >> let these ABCs denote the *explicit* presence of __contains__ and
> >> __iter__, respectively. Something that's iterable but doesn't
> >> implement __contains__ supports the 'in' operator very inefficiently
> >> (through linear search) which we might not want to encourage.
> > It could be worse. Is a container necessarily finite?
>
> I meant an iterable, of course, not a container.
>
> Neil
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/dalcinl%40gmail.com
>


-- 
Lisandro Dalc?n
---------------
Centro Internacional de M?todos Computacionales en Ingenier?a (CIMEC)
Instituto de Desarrollo Tecnol?gico para la Industria Qu?mica (INTEC)
Consejo Nacional de Investigaciones Cient?ficas y T?cnicas (CONICET)
PTLC - G?emes 3450, (3000) Santa Fe, Argentina
Tel/Fax: +54-(0)342-451.1594


------------------------------

Message: 3
Date: Mon, 11 Feb 2008 19:43:54 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] ABC for Inequalities
To: python-3000@python.org
Message-ID: <20080211194354.AGT26164@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

Was some thought given to providing a mixin for boolean inequalities in total orderings (define __le__ and get the rest for free)?

One of the motivating examples in the ABC pep was that the presence of __getitem__ was insufficient to distinguish between a sequence and a mapping.  By registering one of the collections ABCs, a class can make an affirmative declaration that it is either a mapping or a sequence.

It seems that there is a similar issue with inequalities.  If something defines __le__, you don't necessarily know whether it returns a boolean (it could return an array of bools for a vector comparison).  Even if a bool is returned, it is not clear whether it implies sortable ordering or whether is something with a completely different meaning (i.e. set.issubset).


Raymond


------------------------------

Message: 4
Date: Mon, 11 Feb 2008 17:02:27 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC for Inequalities
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802111702q300db03bief4d5d29ad13a313@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 4:43 PM, Raymond Hettinger <python@rcn.com> wrote:
> Was some thought given to providing a mixin for boolean inequalities in total orderings (define __le__ and get the rest for free)?

I think it was briefly mentioned but we didn't get beyond the stage of
""you can do this with a tiny metaclass"". There should be a way to
avoid getting the rest for free too though, as the example of sets
shows. There was also the issue of what to do if a subclass defines
only __le__ and a superclass already defined all 6 operators. And
there's also the issue that because of the way it's mapped to a single
tp_richcompare slot in C, 'object' defines all 6 operators, but 4 of
these raise exceptions. IOW it's messy.

> One of the motivating examples in the ABC pep was that the presence of __getitem__ was insufficient to distinguish between a sequence and a mapping.  By registering one of the collections ABCs, a class can make an affirmative declaration that it is either a mapping or a sequence.
>
> It seems that there is a similar issue with inequalities.  If something defines __le__, you don't necessarily know whether it returns a boolean (it could return an array of bools for a vector comparison).  Even if a bool is returned, it is not clear whether it implies sortable ordering or whether is something with a completely different meaning (i.e. set.issubset).

I'm not sure I follow the connection with the above query, but I
believe that for now the best approach here is to document the
requirements for  the comparisons. E.g. for Real numbers we require a
total ordering based on the standard ordering for mathematical reals
(insofar as practical in the light of inexactness and NaNs, of
course), for Sequences I believe we specify that it should order
item-wise, and for Sets we redefine the comparisons as set inclusion
operators.

A class whose __le__ returns an array or results should probably not
derive directly from one of those standard ABCs. (Possibly the numpy
folks might be interested in defining a different ABC for arrays whose
'+' operator does elementwise addition instead of concatenation; but
that's up to them.)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Mon, 11 Feb 2008 20:45:01 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] ABC for Inequalities
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080211204501.AGT33998@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

>> Was some thought given to providing a mixin for boolean 
>> inequalities in total orderings (define __le__ and get 
>> the rest for free)

[GvR]
> IOW it's messy. 

Would it make sense to do something in numbers.py modeled
after Exact/InExact?  Those don't have any behavior; they
just make a statement about semantics.


Raymond


---------------------------
class TotalOrdering(object):
    '''Equality and inequality operations on this type are guaranteed to
    return boolean values and to imply a total ordering where the relations
    are transitive (a<b and b<c implies a<c) and the operators have the
    usual interrelationships:  (a<b) == (b>a) == (not a>=b) == (not b<=a).
    '''
    @abstractmethod
    def __eq__(self, other): pass

    @abstractmethod
    def __ne__(self, other): pass
    
    @abstractmethod
    def __lt__(self, other): pass

    @abstractmethod
    def __le__(self, other): pass

    @abstractmethod
    def __gt__(self, other): pass

    @abstractmethod
    def __ge__(self, other): pass


------------------------------

Message: 6
Date: Mon, 11 Feb 2008 21:58:27 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] What is numbers.Integral used for?
To: python-3000@python.org
Message-ID: <20080211215827.AGT42482@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

During the discussion of PEP 3141, what use cases were envisioned for the Integral type?  Were there some examples of concrete implementations other than <type 'int'> or <type 'long'??

I'm asking because I'm unclear about what a class is stating about itself when it registers as Integral.  I'm not sure that most finite fields would fit into the structure since they all Integrals support logical operations, are convertible into ints via __index__, andy the must support all of the operations defined for Reals.

I looked at the reference for Scheme's numeric tower to find guidance, but it seemed that the notion expressed solely through the ""integer?"" predicate which behaves differently than our inheritance tower.  For example, the spec says (rational? 6/10) ==> #t and (integer? 8/4) ==> #t but in our current implementation Rational(8,4) is not Integral like it is for Scheme.

Also, Scheme seems apply implement the notions of Exact/Inexact much differently
than we do: ""A number is exact if it was written as an exact constant or was derived from exact numbers using only exact operations.""  So, while all integers are exact, some floats and decimal constants could also be exact.  This matches how exactness is used in the decimal module -- all constants start as exact and operations can return either exact or inexact (and the module signals when this occurs).  Our module says Integrals are Exact and makes no further assertions.


Raymond



------------------------------

Message: 7
Date: Mon, 11 Feb 2008 19:08:58 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC for Inequalities
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802111908k6aed4fdaj2369ee1403c53dcf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hold on. We went down that road quite a bit and then discovered it
wasn't going to work. The problem is that if you have two instance x,
y such that isinstance(x, TotalOrdering) and isinstance(y,
TotalOrdering) you still don't know if x < y is defined. (For example,
if x is a string and y is a number.) We ended up deciding that such an
ABC was not useful. There's a useful definition in there somewhere but
it's elusive. We'll eventually figure it out.

On Feb 11, 2008 5:45 PM, Raymond Hettinger <python@rcn.com> wrote:
> >> Was some thought given to providing a mixin for boolean
> >> inequalities in total orderings (define __le__ and get
> >> the rest for free)
>
> [GvR]
> > IOW it's messy.
>
> Would it make sense to do something in numbers.py modeled
> after Exact/InExact?  Those don't have any behavior; they
> just make a statement about semantics.
>
>
> Raymond
>
>
> ---------------------------
> class TotalOrdering(object):
>     '''Equality and inequality operations on this type are guaranteed to
>     return boolean values and to imply a total ordering where the relations
>     are transitive (a<b and b<c implies a<c) and the operators have the
>     usual interrelationships:  (a<b) == (b>a) == (not a>=b) == (not b<=a).
>     '''
>     @abstractmethod
>     def __eq__(self, other): pass
>
>     @abstractmethod
>     def __ne__(self, other): pass
>
>     @abstractmethod
>     def __lt__(self, other): pass
>
>     @abstractmethod
>     def __le__(self, other): pass
>
>     @abstractmethod
>     def __gt__(self, other): pass
>
>     @abstractmethod
>     def __ge__(self, other): pass
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Mon, 11 Feb 2008 19:13:40 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] What is numbers.Integral used for?
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802111913r7b2bbfb5we12badfbcae16547@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 11, 2008 6:58 PM, Raymond Hettinger <python@rcn.com> wrote:
> During the discussion of PEP 3141, what use cases were envisioned for the Integral type?  Were there some examples of concrete implementations other than <type 'int'> or <type 'long'??

I believe numpy defines a whole slew of these of different sizes.

> I'm asking because I'm unclear about what a class is stating about itself when it registers as Integral.  I'm not sure that most finite fields would fit into the structure since they all Integrals support logical operations, are convertible into ints via __index__, andy the must support all of the operations defined for Reals.

An earlier version of the PEP talked about fields and all sort of
stuff, but we found nobody cared.

> I looked at the reference for Scheme's numeric tower to find guidance, but it seemed that the notion expressed solely through the ""integer?"" predicate which behaves differently than our inheritance tower.  For example, the spec says (rational? 6/10) ==> #t and (integer? 8/4) ==> #t but in our current implementation Rational(8,4) is not Integral like it is for Scheme.
>
> Also, Scheme seems apply implement the notions of Exact/Inexact much differently
> than we do: ""A number is exact if it was written as an exact constant or was derived from exact numbers using only exact operations.""  So, while all integers are exact, some floats and decimal constants could also be exact.  This matches how exactness is used in the decimal module -- all constants start as exact and operations can return either exact or inexact (and the module signals when this occurs).  Our module says Integrals are Exact and makes no further assertions.

I expect that there are separate useful notions of exactness and
inexactness, one solely based on the type, and one based on value.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Mon, 11 Feb 2008 19:31:14 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] ABC for Inequalities
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <003201c86d27$b94c5a00$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[GvR]
> Hold on. We went down that road quite a bit and then discovered it
> wasn't going to work. 

I figured that it was missing for a reason.

> The problem is that if you have two instance x,
> y such that isinstance(x, TotalOrdering) and isinstance(y,
> TotalOrdering) you still don't know if x < y is defined. (For example,
> if x is a string and y is a number.) 

So, ordering only makes sense when ""other"" is known to be
of the same type as ""self"".

> There's a useful definition in there somewhere but
> it's elusive. We'll eventually figure it out.

I hope so. I'm less interested in the mixin and more interested in
a way for a class to have a way to tell you whether it is sortable.
Right now, the presence or absence of __le__ doesn't tell
you much.


Raymond


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 31
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 30","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: __reduce__() and __reduce_ex__() (Christian Heimes)
   2. Re: Nix dict.copy() (Aahz)
   3. Re: Nix dict.copy() (Greg Ewing)
   4. Re: Nix dict.copy() (Larry Hastings)


----------------------------------------------------------------------

Message: 1
Date: Mon, 11 Feb 2008 02:14:19 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] __reduce__() and __reduce_ex__()
To: python-3000@python.org
Message-ID: <foo9hv$sn7$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Greg Ewing wrote:
> Hmmm, that convention isn't very scalable. What happens
> when you update the API again -- do you use an _ex_ex
> suffix? :-)

How about a _ng suffix (next generation)? *scnr*

Christian



------------------------------

Message: 2
Date: Sun, 10 Feb 2008 19:44:19 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <20080211034419.GA10737@panix.com>
Content-Type: text/plain; charset=us-ascii

On Mon, Feb 11, 2008, Greg Ewing wrote:
> Aahz wrote:
>> 
>> Let's suppose you have an object that represents an order.  And let's
>> suppose that this object needs to be copied to create a re-order (letting
>> the customer preserve the information from the original order).
> 
> In that case, I would give my Order class a copy() method (or
> re_order() or whatever name is appropriate) that does the right
> thing for orders in the context of that application.
> 
> There are bound to be things that you *don't* want to copy from
> the original order, e.g. the order ID, the date...

Certainly -- that's why __copy__() exists, right?
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 3
Date: Mon, 11 Feb 2008 17:23:26 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47AFCDBE.50804@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Aahz wrote:
> On Mon, Feb 11, 2008, Greg Ewing wrote:
> 
>>There are bound to be things that you *don't* want to copy from
>>the original order, e.g. the order ID, the date...
> 
> Certainly -- that's why __copy__() exists, right?

Yes, but then I don't see the advantage over just
giving the object a copy() method and calling it
directly.

In other words, I see little benefit in having
copy() be a generic function.

-- 
Greg




------------------------------

Message: 4
Date: Sun, 10 Feb 2008 23:55:43 -0800
From: Larry Hastings <larry@hastings.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <47AFFF7F.6090803@hastings.org>
Content-Type: text/plain; charset=""iso-8859-1""

Greg Ewing wrote:
> Yes, but then I don't see the advantage over just giving the object a copy() method and calling it directly.
>
> In other words, I see little benefit in having copy() be a generic function.
>   

So true!  Other candidates for not being generic functions: len(), 
repr(), str(), int(), complex(), dict(), list(), set()...

So what decides whether something should be a generic function or a 
commonly-defined member function?  Personally I find ""historical 
accident"" an unsatisfying answer.


/larry/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080210/ae20c536/attachment-0001.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 30
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 29","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Dj Gilcrease)
   2. Re: Nix dict.copy() (Greg Ewing)
   3. Re: __reduce__() and __reduce_ex__() (Greg Ewing)
   4. Re: Nix dict.copy() (Greg Ewing)
   5. Re: __reduce__() and __reduce_ex__() (Guido van Rossum)
   6. Re: Nix dict.copy() (Phillip J. Eby)
   7. Re: Nix dict.copy() (Larry Hastings)
   8. Re: Nix dict.copy() (Daniel Stutzbach)


----------------------------------------------------------------------

Message: 1
Date: Sun, 10 Feb 2008 16:29:12 -0800
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID:
	<e9764b730802101629q46290cc9mdf96a9fcb8beb188@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 3:46 PM, Paul Moore <p.f.moore@gmail.com> wrote:
> On the other hand, I'd imagine it would be difficult to write a good
> fixer for this. I'm not sure how much of a showstopper that might be.

Cant you just flag it as depreciated and have it actually call
copy.copy() when it is run. That way you dont need to write a fixer
for it and can remove it in 3.1


------------------------------

Message: 2
Date: Mon, 11 Feb 2008 13:54:21 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47AF9CBD.1050504@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Paul Moore wrote:

> Given the above, I see no case where I'd want to use dict.copy(). So
> I'm in favour of removing it.

Personally I don't think I would even notice if the entire
contents of the copy module disappeared. I've never used
either form of generic copying. In the rare cases when I
do want to copy something, I know what type I'm dealing
with and have specific ideas on how to copy it, so I
write code accordingly.

Generic copying in Python seems like an anti-pattern to
me, and not something that should be encouraged.

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 3
Date: Mon, 11 Feb 2008 13:57:18 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] __reduce__() and __reduce_ex__()
To: python-3000@python.org
Message-ID: <47AF9D6E.5080709@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Guido van Rossum wrote:
> Yeah -- the _ex suffix on the name suggests that that's the API we
> wanted but we'd already released a version with a suboptimal API...

Hmmm, that convention isn't very scalable. What happens
when you update the API again -- do you use an _ex_ex
suffix? :-)

Also it tends to make things look unpleasanty Microsoftish. :-(

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 4
Date: Mon, 11 Feb 2008 14:01:15 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47AF9E5B.8010902@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Aahz wrote:

> Let's suppose you have an object that represents an order.  And let's
> suppose that this object needs to be copied to create a re-order (letting
> the customer preserve the information from the original order).

In that case, I would give my Order class a copy() method (or
re_order() or whatever name is appropriate) that does the right
thing for orders in the context of that application.

There are bound to be things that you *don't* want to copy from
the original order, e.g. the order ID, the date...

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 5
Date: Sun, 10 Feb 2008 17:22:01 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] __reduce__() and __reduce_ex__()
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802101722j441d4aa1h9ba75e7cea0da861@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 4:57 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
> > Yeah -- the _ex suffix on the name suggests that that's the API we
> > wanted but we'd already released a version with a suboptimal API...
>
> Hmmm, that convention isn't very scalable. What happens
> when you update the API again -- do you use an _ex_ex
> suffix? :-)
>
> Also it tends to make things look unpleasanty Microsoftish. :-(

Whine, whine.

Do you have a better idea?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sun, 10 Feb 2008 21:02:22 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Paul Moore"" <p.f.moore@gmail.com>,	""Raymond Hettinger""
	<python@rcn.com>
Cc: python-3000@python.org
Message-ID: <20080211020218.E32A23A4075@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 11:46 PM 2/10/2008 +0000, Paul Moore wrote:
>If I want a copy of an arbitrary mapping (or any object) and I want to
>preserve type, I would use copy.copy(). This is just as polymorphic as
>a copy method (interesting that it is Phillip arguing for methods
>being the polymorphic choice, when copy.copy is a generic function,
>which he has previously argued as being better...)

Actually, the issue here is the import, not methods vs. 
functions.  Otherwise, I'd be arguing for ob.len().  :)

And if we were starting from square one with no existing code, I'd 
probably be okay with needing to import copy, as long as that was the 
publicized One Obvious Way to copy all things.

However, since existing code has to be migrated, and lots of things 
have copy() methods, and 2to3 isn't going to be able to tell, 
practicality (IMO) seems to favor keeping the existing method.



------------------------------

Message: 7
Date: Sun, 10 Feb 2008 18:24:56 -0800
From: Larry Hastings <larry@hastings.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47AFB1F8.8050803@hastings.org>
Content-Type: text/plain; charset=""iso-8859-1""

Christian Heimes wrote:
> Larry Hastings wrote:
>   
>> +1 for exactly the reasons cited.  I think copy() and deepcopy() should
>> both be ""essential"" built-in functions.
>>     
>
> I'm -0 on copy and -1 on deepcopy.
>
> If you need a copy or a deepcopy of an object (except dicts, lists and
> sets) you are most certainly using the wrong approach.

My +1 isn't based primarily on how often I would use copy/deepcopy, as I 
don't need them very often.  (Although I do use it *ever*, unlike many 
builtins--complex(), divmod(), and reversed() just to name three.)  
Instead, it's based on the observation that copy and deepcopy seem to be 
a first-class part of the language.  The following built-in classes 
implement __copy__; those that also implement __deepcopy__ are marked 
with an asterisk:
    array.array*
    collections.defaultdict
    collections.deque
    decimal.Decimal
    xml.etree.ElementTree*
    itertools.tee
    re.match*
    re.pattern*
All of those are implemented in C except for decimal.Decimal.  This list 
was compiled from Python 3.0a2.

I pass no judgment on programmers using copy/deepcopy.  Though I note 
that, if you are passed a merely dict-like / list-like / set-like 
object, I would feel more confident in using copy.copy() to copy it than 
using dict() / list() / set() to copy it; enforcing the type this way 
seems so un-duck-typing to me.  I suppose I could go fishing in the 
object to see if it implements a copy() method (dicts and sets do, lists 
don't), but then the deprecation/removal of .copy() methods in favor of 
copy.copy was how this whole thread got started.

And, needless to say, there is simply no substitute for copy.deepcopy(),


/larry/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080210/25f1d4f7/attachment-0001.htm 

------------------------------

Message: 8
Date: Sun, 10 Feb 2008 20:38:34 -0600
From: ""Daniel Stutzbach"" <daniel@stutzbachenterprises.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Raymond Hettinger <python@rcn.com>, python-3000@python.org
Message-ID:
	<eae285400802101838gdc4341bp15c34bd4fa7a8f5d@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On Feb 10, 2008 8:02 PM, Phillip J. Eby <pje@telecommunity.com> wrote:

> However, since existing code has to be migrated, and lots of things
> have copy() methods, and 2to3 isn't going to be able to tell,
> practicality (IMO) seems to favor keeping the existing method.
>

If it only converts dict and set .copy() methods, 2to3 can't tell, but it
wouldn't be too hard to respell all instances of foo.copy() as copy(foo).
Obviously, this is a bit more radical and has good and bad points.  It'd be
giving every class's .copy method a promotion to __copy__, basically.

Suggested 2to3 operation:

foo.copy() => copy(foo)
def copy(self):    =>  def __copy__(self):     (if within a class
definition)

If __copy__(self) is just ""self.copy()"", remove it.
If copy(self) is just ""self.__copy__()"" or ""copy.copy(self)"", remove it
If a class still defines both __copy__ and copy(), print a warning/error
(this should be rare).

If copy is called with arguments or defined with more than the ""self""
argument, make no change.
If copy is defined with more than the ""self"" argument, but all the arguments
are optional, print a warning/error.

-- 
Daniel Stutzbach, Ph.D.             President, Stutzbach Enterprises LLC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080210/f4ff421b/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 29
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 28","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Allocation of unicode objects (Martin v. L?wis)
   2. Re: Nix dict.copy() (Martin v. L?wis)
   3. Re: Nix dict.copy() (Raymond Hettinger)
   4. __reduce__() and __reduce_ex__() (Raymond Hettinger)
   5. Re: Nix dict.copy() (Adam Olsen)
   6. Re: Nix dict.copy() (Martin v. L?wis)
   7. Re: Nix dict.copy() (Raymond Hettinger)
   8. Re: Nix dict.copy() (Paul Moore)
   9. Re: __reduce__() and __reduce_ex__() (Guido van Rossum)
  10. Re: Nix dict.copy() (Aahz)


----------------------------------------------------------------------

Message: 1
Date: Sun, 10 Feb 2008 21:55:09 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Allocation of unicode objects
To: Antoine Pitrou <solipsis@pitrou.net>
Cc: python-3000@python.org
Message-ID: <47AF64AD.3040204@v.loewis.de>
Content-Type: text/plain; charset=UTF-8; format=flowed

> Since there are discussions going on on the topic of allocation algorithms for
> various built-in types, I thought I'd mention there's a patch for turning
> unicode objects into variable-sized objects (rather than using a
> separately-allocated buffer). The aim is to make allocation of those objects
> lighter, and relieve cache and memory pressure a bit.

I find that fairly reasonable, so I'm +1 for this approach (haven't 
studied the patch, though). I always wondered why Unicode objects
didn't work the way string objects work, to begin with.

Regards,
Martin


------------------------------

Message: 2
Date: Sun, 10 Feb 2008 22:01:42 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Nix dict.copy()
To: Raymond Hettinger <python@rcn.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <47AF6636.70104@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Raymond Hettinger wrote:
> [Phillip Eby]
>> I'm not fond of this idea. dict.copy() is polymorphic -- but dict(d) is...
> 
> Can't say dict.copy() is really polymorphic if only one other class defines the method.

Why do you say it's only one? I found atleast UserDict.copy, 
os._Environ.copy, WeakValueDictionary.copy, WeakKeyDictionary.copy,
and test.test_userdict.SeqDict. Notice that UserDict.copy is also
polymorphic in the sense that it may return instances of subclasses,
by using copy.copy.

Regards,
Martin



------------------------------

Message: 3
Date: Sun, 10 Feb 2008 13:10:48 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: "" ""Martin v. L?wis"" "" <martin@v.loewis.de>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <00e701c86c29$69745630$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=response

>> [Phillip Eby]
>>> I'm not fond of this idea. dict.copy() is polymorphic -- but dict(d) is...

[Raymond]
>> Can't say dict.copy() is really polymorphic if only one other class defines the method.

[Martin]
> Why do you say it's only one? I found atleast UserDict.copy, os._Environ.copy, WeakValueDictionary.copy, WeakKeyDictionary.copy,

It would have been better for me to say that copy() seems to appear only in variants of dicts, but __copy__() is a long-standing 
defined protocol that is supported across non-mapping types as well.

Underneath the hood, __copy__() and copy() have the same implementation, so it's really a question of whether we want two ways to 
say the same thing (with one of those ways being polymorphic across many objects and the other being used mainly for dict variants).

Had copy() been a builtin, we probably wouldn't be having this discussion.


Raymond


------------------------------

Message: 4
Date: Sun, 10 Feb 2008 13:01:00 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: [Python-3000] __reduce__() and __reduce_ex__()
To: <python-3000@python.org>
Message-ID: <00e201c86c28$0ae2b360$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

In Py3.0, would it be worth it to simplify this protocol by combining these two methods?  Always pass in a proto argument and the 
method can ignore it if it wants.


Raymond 


------------------------------

Message: 5
Date: Sun, 10 Feb 2008 14:39:22 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0802101339p66bc7851r8dde5cdc69a5083b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 1:49 PM, Christian Heimes <lists@cheimes.de> wrote:
> Larry Hastings wrote:
> > +1 for exactly the reasons cited.  I think copy() and deepcopy() should
> > both be ""essential"" built-in functions.
>
> I'm -0 on copy and -1 on deepcopy.
>
> If you need a copy or a deepcopy of an object (except dicts, lists and
> sets) you are most certainly using the wrong approach. Back when I was
> learning Python over 5 years ago I was using copy and deepcopy often.
> Nowadays I don't need the copy module anymore because I've learned how
> to design software without the need for copies.
>
> In my humble opinion the addition of copy to builtins leaves a bad mark.

-1 on both.

If a dict is wrong for some input, it's probably wrong for all inputs.
 If you're keeping this new dict for your own uses then you clearly
want to keep it as your preferred type, and if you're returning it to
your caller the preference for builtins is clearly want a single
standardized return type (even filter does this in 3.0).

I'm having a hard time imagining cases where you *really* want to
return a copy of whatever the original type was, and this makes me
think we shouldn't encourage that coding style.

dict(iterable) for the one, and only one, obvious way to do it.

-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 6
Date: Sun, 10 Feb 2008 22:51:44 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Nix dict.copy()
To: Raymond Hettinger <python@rcn.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <47AF71F0.4080301@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>>>> I'm not fond of this idea. dict.copy() is polymorphic -- but dict(d) 
>>>> is...
> 
> [Raymond]
>>> Can't say dict.copy() is really polymorphic if only one other class 
>>> defines the method.
> 
> [Martin]
>> Why do you say it's only one? I found atleast UserDict.copy, 
>> os._Environ.copy, WeakValueDictionary.copy, WeakKeyDictionary.copy,
> 
> It would have been better for me to say that copy() seems to appear only 
> in variants of dicts, but __copy__() is a long-standing defined protocol 
> that is supported across non-mapping types as well.

But that's Phillip's point: dict(d) is not polymorphic, yet d.copy()
is. That's important in applications where you want to copy a dict-like
object polymorphically. So indeed, your claim that .copy ""is [not]
really polymorphic"" is quite puzzling - we now seem to agree that it
*is* polymorphic.

So going back to your original message, you should remove dict(d)
from the list of alternatives for dict.copy() (or remark that this
will be a copy-to-basetype, so not quite the same thing).

> Had copy() been a builtin, we probably wouldn't be having this discussion.

Interestingly enough, dict.copy was added *after* copy.copy (in r8135),
which supported __copy__ right from the beginning (since r4555). Even
more interesting, it was added along with dict.absorb, which then
got renamed dict.update a week later. No rationale is given in the
checkin message on the purpose of the copy method.

Regards,
Martin


------------------------------

Message: 7
Date: Sun, 10 Feb 2008 14:14:51 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: "" ""Martin v. L?wis"" "" <martin@v.loewis.de>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID: <000701c86c32$5c0141d0$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=response

[Martin]
> So indeed, your claim that .copy ""is [not]
> really polymorphic"" is quite puzzling - we now seem to agree that it
> *is* polymorphic.

Yes, of course.  Every method used by dict imitators could be considered polymophic.  I was just observing copy.copy(obj) applies to 
many, many more object types than obj.copy().

The former works with lists, tuples, deques, strings, and all kinds of things.  The latter shows-up mainly in dict imitators.


> So going back to your original message, you should remove dict(d)
> from the list of alternatives for dict.copy() (or remark that this
> will be a copy-to-basetype, so not quite the same thing).

That makes sense.  You can never be sure of a constructor's signature.  It works most of the time but not all of the time.


>> Had copy() been a builtin, we probably wouldn't be having this discussion.
>
> Interestingly enough, dict.copy was added *after* copy.copy (in r8135),
> which supported __copy__ right from the beginning (since r4555). Even
> more interesting, it was added along with dict.absorb, which then
> got renamed dict.update a week later. No rationale is given in the
> checkin message on the purpose of the copy method.

Interesting history.

Now, we have one and only one chance to slim-down the mapping API, leaving the copy() function as the one, universal, preferred way 
to do it.  I don't think this chance will come again.


Raymond 


------------------------------

Message: 8
Date: Sun, 10 Feb 2008 23:46:25 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org
Message-ID:
	<79990c6b0802101546g11cceb6fn7d1208e9ef9ccbc7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 10/02/2008, Raymond Hettinger <python@rcn.com> wrote:
> Now, we have one and only one chance to slim-down the mapping API, leaving the copy()
> function as the one, universal, preferred way to do it.  I don't think this chance will come
> again.

This discussion confused me (largely because of the subtle differences
between the various ways of copying a dictionary).

If I want a builtin dictionary from an arbitrary mapping d, I'd use
dict(d.items()) - even if I knew d was a real dictionary. I wouldn't
use d.copy() as that would not guarantee I had a builtin dict, should
someone later pass me a user defined type.

If I want a copy of an arbitrary mapping (or any object) and I want to
preserve type, I would use copy.copy(). This is just as polymorphic as
a copy method (interesting that it is Phillip arguing for methods
being the polymorphic choice, when copy.copy is a generic function,
which he has previously argued as being better...) I'm not sure how
often I'd want to preserve type like this. It's never come up for me
in real code. So I don't mind importing the copy module to get the
functionality, it reminds me I'm doing something a little unusual. (On
the other hand, (shallow) copy seems fundamental enough to me to
qualify as a builtin, should someone care enough to argue for that).

Given the above, I see no case where I'd want to use dict.copy(). So
I'm in favour of removing it.

On the other hand, I'd imagine it would be difficult to write a good
fixer for this. I'm not sure how much of a showstopper that might be.

Paul.


------------------------------

Message: 9
Date: Sun, 10 Feb 2008 16:18:09 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] __reduce__() and __reduce_ex__()
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802101618l24d50139gd0a914c3f877f672@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 1:01 PM, Raymond Hettinger <python@rcn.com> wrote:
> In Py3.0, would it be worth it to simplify this protocol by combining these two methods?  Always pass in a proto argument and the
> method can ignore it if it wants.

Yeah -- the _ex suffix on the name suggests that that's the API we
wanted but we'd already released a version with a suboptimal API...
:-( There are other uses of 'ex' or 'Ex' on APIs too I believe (maybe
in the C API). It may well be a convention I borrowed from Microsoft.
Any of these that you find are likely cleanup candidates.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 10
Date: Sun, 10 Feb 2008 16:24:00 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <20080211002400.GA2720@panix.com>
Content-Type: text/plain; charset=us-ascii

On Sun, Feb 10, 2008, Christian Heimes wrote:
> Larry Hastings wrote:
>>
>> +1 for exactly the reasons cited.  I think copy() and deepcopy() should
>> both be ""essential"" built-in functions.
> 
> I'm -0 on copy and -1 on deepcopy.
> 
> If you need a copy or a deepcopy of an object (except dicts, lists and
> sets) you are most certainly using the wrong approach. Back when I was
> learning Python over 5 years ago I was using copy and deepcopy often.
> Nowadays I don't need the copy module anymore because I've learned how
> to design software without the need for copies.

Let's suppose you have an object that represents an order.  And let's
suppose that this object needs to be copied to create a re-order (letting
the customer preserve the information from the original order).  How do
you suggest that the re-order be created without copy(), and especially
deepcopy()?  What if an attribute of orders can be a list or dict?
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 28
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 27","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Allocation of unicode objects (Antoine Pitrou)
   2. Re: Nix dict.copy() (Chris Monson)
   3. Re: Nix dict.copy() (Guido van Rossum)
   4. Re: Nix dict.copy() (Guido van Rossum)
   5. Re: Allocation of unicode objects (Guido van Rossum)
   6. Re: Nix dict.copy() (Steven Bethard)
   7. Re: Nix dict.copy() (skip@pobox.com)
   8. Re: Nix dict.copy() (Raymond Hettinger)
   9. Re: Nix dict.copy() (Larry Hastings)
  10. Re: Nix dict.copy() (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Sun, 10 Feb 2008 12:53:53 +0000 (UTC)
From: Antoine Pitrou <solipsis@pitrou.net>
Subject: [Python-3000] Allocation of unicode objects
To: python-3000@python.org
Message-ID: <loom.20080210T124758-937@post.gmane.org>
Content-Type: text/plain; charset=utf-8

Hi,

Since there are discussions going on on the topic of allocation algorithms for
various built-in types, I thought I'd mention there's a patch for turning
unicode objects into variable-sized objects (rather than using a
separately-allocated buffer). The aim is to make allocation of those objects
lighter, and relieve cache and memory pressure a bit.

http://bugs.python.org/issue1943

Marc-Andr? Lemburg expressed skepticism, based on the fact that it made
subclassing unicode objects as part of C extensions more difficult.

And here is a microbenchmark of the thing:

Splitting a small string:
./python -m timeit -s ""s=open('INTBENCH', 'r').read()"" ""s.split()""
-> Unpatched py3k: 26.4 usec per loop
-> PyVarObject patch: 20.2 usec per loop

Splitting a medium-sized string:
./python -m timeit -s ""s=open('LICENSE', 'r').read()"" ""s.split()""
-> Unpatched py3k: 458 usec per loop
-> PyVarObject patch: 316 usec per loop

Splitting a long string:
./python -m timeit -s ""s=open('Misc/HISTORY', 'r').read()"" ""s.split()""
-> Unpatched py3k: 31.3 msec per loop
-> PyVarObject patch: 17.8 msec per loop

Even if the patch is rejected, I think it is important to remember that
implementation characteristics of the unicode type will be crucial for Py3k
performance :-)

Regards

Antoine.




------------------------------

Message: 2
Date: Sun, 10 Feb 2008 10:54:35 -0500
From: ""Chris Monson"" <shiblon@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Phillip J. Eby"" <pje@telecommunity.com>, python@rcn.com,
	python-3000@python.org
Message-ID:
	<da3f900e0802100754r5a3d1fccx1ca1c9a5c3062a6b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

- Original message -
I'm not fond of this idea. dict.copy() is polymorphic -- but dict(d) is...

Speaking of polymorphic, it seems like it would make sense to allow
classes to specify their own __copy__ method for cases where
specialized handling of copy is needed.  copy.copy is sometimes
overzealous, and therefore less efficient than necessary.

Copy is a pretty fundamental idea, and I routinely run up against the
fact that not only is there more than one way to do it (via
constructors, using copy.copy, or when supported, thing.copy), the
only ""standard"" approach requires an import and is weirdly one size
fits all.

Having a __copy__ slot and a builtin copy function with current
copy.copy behavior as a fallback would be great.

Just my accurately-valued 2 cents.

- C

Sent from Gmail for mobile

On 2/9/08, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 07:51 PM 2/8/2008 -0500, Raymond Hettinger wrote:
> >I recommend dropping the dict.copy() method from Py3.0.
> >
> >* We can already write:  newd = copy.copy(d).
> >* We can also write:     newd = dict(d)
> >* Both of those approaches also work for most other containers.
>
> I'm not fond of this idea.  dict.copy() is polymorphic -- but dict(d) isn't.
>
> copy.copy() is polymorphic, but requires an import, which means the
> path of least resistance will be to use dict(d)...  which will then
> turn non-dictionaries into dictionaries.
>
> If copy.copy() were a builtin and the ""one obvious way"" to copy
> containers, +1.  Otherwise, -0.5.
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/shiblon%40gmail.com
>

-- 
Sent from Gmail for mobile | mobile.google.com


------------------------------

Message: 3
Date: Sun, 10 Feb 2008 08:22:38 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20802100822ldc32325u89b9262604602800@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 9, 2008 8:58 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 07:51 PM 2/8/2008 -0500, Raymond Hettinger wrote:
> >I recommend dropping the dict.copy() method from Py3.0.
> >
> >* We can already write:  newd = copy.copy(d).
> >* We can also write:     newd = dict(d)
> >* Both of those approaches also work for most other containers.
>
> I'm not fond of this idea.  dict.copy() is polymorphic -- but dict(d) isn't.
>
> copy.copy() is polymorphic, but requires an import, which means the
> path of least resistance will be to use dict(d)...  which will then
> turn non-dictionaries into dictionaries.
>
> If copy.copy() were a builtin and the ""one obvious way"" to copy
> containers, +1.  Otherwise, -0.5.

On second thought, I'm with Phillip here, for exactly the reasons he
states. Let's leave copy() alone.

I'm of two minds about adding it to the MutableMapping and MutableSet
ABCs; requiring it might constrain implementations unnecessary, and
there isn't an easy way to provide a generic implementation. Now I
wish we had ""optional"" abstract methods. Maybe those can be added to
the ABC PEP yet?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Sun, 10 Feb 2008 08:24:32 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Chris Monson"" <shiblon@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802100824t57b6eebcl296dcc79c4c5a59a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 7:54 AM, Chris Monson <shiblon@gmail.com> wrote:
> Speaking of polymorphic, it seems like it would make sense to allow
> classes to specify their own __copy__ method for cases where
> specialized handling of copy is needed.  copy.copy is sometimes
> overzealous, and therefore less efficient than necessary.

Good idea! I've fired up the time machine, and fixed the world.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sun, 10 Feb 2008 08:27:52 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Allocation of unicode objects
To: ""Antoine Pitrou"" <solipsis@pitrou.net>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802100827i33eadfa0o36e76a1ab07b90dc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 10, 2008 4:53 AM, Antoine Pitrou <solipsis@pitrou.net> wrote:
> Since there are discussions going on on the topic of allocation algorithms for
> various built-in types, I thought I'd mention there's a patch for turning
> unicode objects into variable-sized objects (rather than using a
> separately-allocated buffer). The aim is to make allocation of those objects
> lighter, and relieve cache and memory pressure a bit.
>
> http://bugs.python.org/issue1943
>
> Marc-Andr? Lemburg expressed skepticism, based on the fact that it made
> subclassing unicode objects as part of C extensions more difficult.

Has anybody ever tried that? The same would apply to PyString and I've
never heard this complaint. I think that given the relative importance
of fast strings in Py3k vs. the convenience of subclassing PyUnicode,
the latter may have to suffer.

> And here is a microbenchmark of the thing:
>
> Splitting a small string:
> ./python -m timeit -s ""s=open('INTBENCH', 'r').read()"" ""s.split()""
> -> Unpatched py3k: 26.4 usec per loop
> -> PyVarObject patch: 20.2 usec per loop
>
> Splitting a medium-sized string:
> ./python -m timeit -s ""s=open('LICENSE', 'r').read()"" ""s.split()""
> -> Unpatched py3k: 458 usec per loop
> -> PyVarObject patch: 316 usec per loop
>
> Splitting a long string:
> ./python -m timeit -s ""s=open('Misc/HISTORY', 'r').read()"" ""s.split()""
> -> Unpatched py3k: 31.3 msec per loop
> -> PyVarObject patch: 17.8 msec per loop
>
> Even if the patch is rejected, I think it is important to remember that
> implementation characteristics of the unicode type will be crucial for Py3k
> performance :-)

Right. I haven't had enough time to review this (or any other patch),
but the idea is very appealing.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sun, 10 Feb 2008 10:33:21 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Guido van Rossum"" <guido@python.org>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org,
	python@rcn.com
Message-ID:
	<d11dcfba0802100933g715a6171g5833ccf667d9800c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 10, 2008 9:22 AM, Guido van Rossum <guido@python.org> wrote:
> On Feb 9, 2008 8:58 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> > At 07:51 PM 2/8/2008 -0500, Raymond Hettinger wrote:
> > >I recommend dropping the dict.copy() method from Py3.0.
> > >
> > >* We can already write:  newd = copy.copy(d).
> > >* We can also write:     newd = dict(d)
> > >* Both of those approaches also work for most other containers.
> >
> > I'm not fond of this idea.  dict.copy() is polymorphic -- but dict(d) isn't.
> >
> > copy.copy() is polymorphic, but requires an import, which means the
> > path of least resistance will be to use dict(d)...  which will then
> > turn non-dictionaries into dictionaries.
> >
> > If copy.copy() were a builtin and the ""one obvious way"" to copy
> > containers, +1.  Otherwise, -0.5.
>
> On second thought, I'm with Phillip here, for exactly the reasons he
> states. Let's leave copy() alone.

Maybe copy.copy() could become __builtin__.copy()?  I know everyone
hates adding builtins, but it is commonly needed functionality, it has
__special_method__ support, and putting it in builtins would allow us
to simplify the set() and dict() APIs...

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 7
Date: Sun, 10 Feb 2008 13:42:45 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python@rcn.com,
	python-3000@python.org
Message-ID: <18351.21429.600838.877694@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Steven> Maybe copy.copy() could become __builtin__.copy()?  

And what of copy.depcopy()?  Doesn't seem to be much else public defined in
the copy module:

    % python -c 'import copy ; print copy.__all__'
    ['Error', 'copy', 'deepcopy']

If copy.copy() migrates to builtin it should raise something other than
copy.Error as well.

Skip


------------------------------

Message: 8
Date: Sun, 10 Feb 2008 11:55:45 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Chris Monson"" <shiblon@gmail.com>,	""Phillip J. Eby""
	<pje@telecommunity.com>, <python-3000@python.org>
Message-ID: <00b101c86c1e$ed42dd20$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[Phillip Eby]
> I'm not fond of this idea. dict.copy() is polymorphic -- but dict(d) is...

Can't say dict.copy() is really polymorphic if only one other class defines the method.

The __copy__ method is more common.  The only wrinkle is that the copy() function isn't a builtin.


Raymond


------------------------------

Message: 9
Date: Sun, 10 Feb 2008 12:11:00 -0800
From: Larry Hastings <larry@hastings.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <47AF5A54.1020701@hastings.org>
Content-Type: text/plain; charset=""iso-8859-1""

Steven Bethard wrote:
> Maybe copy.copy() could become __builtin__.copy()?
+1 for exactly the reasons cited.  I think copy() and deepcopy() should 
both be ""essential"" built-in functions.


/larry/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080210/1be73f4b/attachment-0001.htm 

------------------------------

Message: 10
Date: Sun, 10 Feb 2008 21:49:03 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <fonnvv$dl0$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Larry Hastings wrote:
> +1 for exactly the reasons cited.  I think copy() and deepcopy() should
> both be ""essential"" built-in functions.

I'm -0 on copy and -1 on deepcopy.

If you need a copy or a deepcopy of an object (except dicts, lists and
sets) you are most certainly using the wrong approach. Back when I was
learning Python over 5 years ago I was using copy and deepcopy often.
Nowadays I don't need the copy module anymore because I've learned how
to design software without the need for copies.

In my humble opinion the addition of copy to builtins leaves a bad mark.

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 27
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 26","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Nix dict.copy() (Phillip J. Eby)


----------------------------------------------------------------------

Message: 1
Date: Sat, 09 Feb 2008 23:58:35 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Nix dict.copy()
To: python@rcn.com, python-3000@python.org
Message-ID: <20080210045826.651DD3A40B0@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 07:51 PM 2/8/2008 -0500, Raymond Hettinger wrote:
>I recommend dropping the dict.copy() method from Py3.0.
>
>* We can already write:  newd = copy.copy(d).
>* We can also write:     newd = dict(d)
>* Both of those approaches also work for most other containers.

I'm not fond of this idea.  dict.copy() is polymorphic -- but dict(d) isn't.

copy.copy() is polymorphic, but requires an import, which means the 
path of least resistance will be to use dict(d)...  which will then 
turn non-dictionaries into dictionaries.

If copy.copy() were a builtin and the ""one obvious way"" to copy 
containers, +1.  Otherwise, -0.5.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 26
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 25","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Thoughts on collections.Container	and
      collections.Iterable (Nick Coghlan)
   2. Re: Windows gui vs. console (Suraj Barkale)
   3. Location of UserDict, UserList, and UserString (Raymond Hettinger)
   4. Re: Location of UserDict, UserList, and UserString
      (Steven Bethard)
   5. Re: Nix dict.copy() (Brett Cannon)
   6. Re: Location of UserDict, UserList, and UserString (Brett Cannon)
   7. Re: Location of UserDict, UserList, and UserString
      (Raymond Hettinger)
   8. Re: Location of UserDict, UserList, and UserString (Brett Cannon)
   9. Re: Nix dict.copy() (James Y Knight)
  10. Re: Nix dict.copy() (Guido van Rossum)
  11. Re: Location of UserDict, UserList, and UserString
      (Steven Bethard)


----------------------------------------------------------------------

Message: 1
Date: Sat, 09 Feb 2008 23:08:07 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Thoughts on collections.Container	and
	collections.Iterable
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <47ADA5B7.9000408@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Raymond Hettinger wrote:
> Besides, for the ""gurus who are in the know"", the min() and max()
> functions can often be substituted directly for any() and all()
> and then you get the key= syntax for free ;-)
> 
>    any(x%2==0 for x in s)
>    max(x%2==0 for x in s)

Except that you lose the short-circuiting behaviour by using the latter 
form.

Anyway, for some reason the whole 'these work really well with generator 
expressions' aspect of any/all completely slipped my mind when I asked 
that question about a key argument. Sorry for the pointless noise...

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Fri, 8 Feb 2008 17:38:52 +0000 (UTC)
From: Suraj Barkale <suraj@barkale.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: python-3000@python.org
Message-ID: <loom.20080208T173715-184@post.gmane.org>
Content-Type: text/plain; charset=us-ascii

Greg Ewing <greg.ewing <at> canterbury.ac.nz> writes:
> 
> Paul Moore wrote:
> > On Windows, GUI vs Console is a property of the EXE file,
> > and the differing behaviour is built into the OS loader.
> 
> Would it be feasible for it to always start up as a gui
> app, and then create its own console window (a fake one
> if necessary) if it decides it needs one?
> 
This is not feasible if you are running default cmd.exe as your shell. See this
blog post for details
http://blogs.adobe.com/simplicity/2007/04/window_and_consolefriendly_win_1.html

Regards,
Suraj



------------------------------

Message: 3
Date: Sat, 9 Feb 2008 13:33:57 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: [Python-3000] Location of UserDict, UserList, and UserString
To: <python-3000@python.org>
Message-ID: <000501c86b63$7ac5d920$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

In the process of getting UserDict updated to subclass from MutableMapping, it ended-up in the collections module during the 
transistion.  Probably, all three should end-up in the same place, either in the collections module or in their own modules.  What 
do you guys think?  Do you like them in collections or as separate modules?

Also, I'm wondering if it is time for UserString to bite the dust. It isn't really useful in the same way a UserDict or UserList 
which have two principal use cases. One, for testing to make sure that simulated dicts and lists are substitutable for real lists 
and dicts.  Two, for convenience in subclassing  where it's easier to write ""self.data[k]"" than ""dict.__getitem__(self, k)"" 
throughout.

It seems that wherever people could have worked with UserString for a mutable string, in practice they prefer to work with lists and 
follow-up with a ''.join() afterwards.


Raymond 


------------------------------

Message: 4
Date: Sat, 9 Feb 2008 14:52:44 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0802091352i3e461d3av6560a1f5ff7ecd12@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 9, 2008 2:33 PM, Raymond Hettinger <python@rcn.com> wrote:
> In the process of getting UserDict updated to subclass from MutableMapping,
> it ended-up in the collections module during the transistion.  Probably, all three
> should end-up in the same place, either in the collections module or in their own
> modules.  What do you guys think?  Do you like them in collections or as
> separate modules?

+1 for putting them in the collections module.

> Also, I'm wondering if it is time for UserString to bite the dust. It isn't really
> useful in the same way a UserDict or UserList which have two principal use
> cases. One, for testing to make sure that simulated dicts and lists are
> substitutable for real lists and dicts.

I thought this was the point of DictMixin, not UserDict, no?

> Two, for convenience in subclassing  where it's easier to write ""self.data[k]""
> than ""dict.__getitem__(self, k)"" throughout.

Interesting.  I'd never seen this before, but a Google code search
reveals that it is reasonably common.  Too bad.  I was hoping that the
new ABCs would eliminated the need for UserDict and UserList
entirely...

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 5
Date: Sat, 9 Feb 2008 17:27:31 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<bbaeab100802091727t61d095cdx50300e4e0ccbc255@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 8, 2008 5:03 PM, Guido van Rossum <guido@python.org> wrote:
> On Feb 8, 2008 4:51 PM, Raymond Hettinger <python@rcn.com> wrote:
> > I recommend dropping the dict.copy() method from Py3.0.
> >
> > * We can already write:  newd = copy.copy(d).
> > * We can also write:     newd = dict(d)
> > * Both of those approaches also work for most other containers.
> > * The collections.Mapping ABC does not support copy().
> > * copy() is not a universal feature of mapping like objects
> > * Lists do not have a copy() method.
> > * If we drop dict.copy(), I'll can also drop set.copy() which is unneeded.
> >
> > Let's make the basic APIs as clean and parallel as possible.
>
> Makes sense.  I request that you also implement the transitional code:
> either a fixer for 2to3 or (perhaps more realistically) a warning to
> dict.copy() when -3 is given.

+1 on the warning over the fixer. Since 2to3 can't do it perfectly I
think it would be better to let users deal with it directly.

-Brett


------------------------------

Message: 6
Date: Sat, 9 Feb 2008 17:32:12 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100802091732i1f81fbb5g6bbbb335ad1b2a9d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 9, 2008 1:33 PM, Raymond Hettinger <python@rcn.com> wrote:
> In the process of getting UserDict updated to subclass from MutableMapping, it ended-up in the collections module during the
> transistion.  Probably, all three should end-up in the same place, either in the collections module or in their own modules.  What
> do you guys think?  Do you like them in collections or as separate modules?
>

+1 on collections.

-Brett


------------------------------

Message: 7
Date: Sat, 9 Feb 2008 17:43:04 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Brett Cannon"" <brett@python.org>
Cc: python-3000@python.org
Message-ID: <000c01c86b86$48393ec0$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""UTF-8"";
	reply-type=original

[Brett] 
> +1 on collections.

[Steven Bethard]
> +1 for putting them in the collections module.

How about UserString?
Is there a reason for it to continue to exist?


Raymond


------------------------------

Message: 8
Date: Sat, 9 Feb 2008 17:48:41 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100802091748n5c6f6d33u19affd4fb32197af@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 9, 2008 5:43 PM, Raymond Hettinger <python@rcn.com> wrote:
> [Brett]
> > +1 on collections.
>
> [Steven Bethard]
> > +1 for putting them in the collections module.
>
> How about UserString?
> Is there a reason for it to continue to exist?

I have never used it so I don't have an opinion on it. But you know
me, I am happy to trim the stdlib down. =)

-Brett


------------------------------

Message: 9
Date: Sat, 9 Feb 2008 20:52:41 -0500
From: James Y Knight <foom@fuhm.net>
Subject: Re: [Python-3000] Nix dict.copy()
To: Brett Cannon <brett@python.org>
Cc: python@rcn.com, python-3000@python.org
Message-ID: <39FB0D54-18FF-4B5C-B7A2-C10A8E16C564@fuhm.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Feb 9, 2008, at 8:27 PM, Brett Cannon wrote:

> On Feb 8, 2008 5:03 PM, Guido van Rossum <guido@python.org> wrote:
>> On Feb 8, 2008 4:51 PM, Raymond Hettinger <python@rcn.com> wrote:
>>> I recommend dropping the dict.copy() method from Py3.0.
>>>
>>> * We can already write:  newd = copy.copy(d).
>>> * We can also write:     newd = dict(d)
>>> * Both of those approaches also work for most other containers.
>>> * The collections.Mapping ABC does not support copy().
>>> * copy() is not a universal feature of mapping like objects
>>> * Lists do not have a copy() method.
>>> * If we drop dict.copy(), I'll can also drop set.copy() which is  
>>> unneeded.
>>>
>>> Let's make the basic APIs as clean and parallel as possible.
>>
>> Makes sense.  I request that you also implement the transitional  
>> code:
>> either a fixer for 2to3 or (perhaps more realistically) a warning to
>> dict.copy() when -3 is given.
>
> +1 on the warning over the fixer. Since 2to3 can't do it perfectly I
> think it would be better to let users deal with it directly.

Has anyone thought of making a execution-informed converter? If you  
have a comprehensive test suite, it seems that it ought be possible to  
use the actual execution of the test suite, under a trace hook  
perhaps, or something of that sort, to inform the converter and allow  
it to correctly make changes like this.

James


------------------------------

Message: 10
Date: Sat, 9 Feb 2008 18:35:51 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: ""James Y Knight"" <foom@fuhm.net>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20802091835ve3aab8eg2e9cf5c728360042@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 9, 2008 5:52 PM, James Y Knight <foom@fuhm.net> wrote:
> Has anyone thought of making a execution-informed converter? If you
> have a comprehensive test suite, it seems that it ought be possible to
> use the actual execution of the test suite, under a trace hook
> perhaps, or something of that sort, to inform the converter and allow
> it to correctly make changes like this.

Yes, but it seems an overwhelmingly complex task given the available
number of volunteers.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 11
Date: Sat, 9 Feb 2008 19:51:42 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Location of UserDict, UserList, and
	UserString
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0802091851n4bc575d7tdf692f3dd4bce86c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 9, 2008 6:43 PM, Raymond Hettinger <python@rcn.com> wrote:
> [Brett]
> > +1 on collections.
>
> [Steven Bethard]
> > +1 for putting them in the collections module.
>
> How about UserString?
> Is there a reason for it to continue to exist?

Like Brett, I've never found a use for it, so I'm happy to see it go.

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 25
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 24","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Mike Meyer)


----------------------------------------------------------------------

Message: 1
Date: Sat, 9 Feb 2008 01:35:13 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of those!
To: python-3000@python.org
Message-ID: <20080209013513.63a5a621@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Fri, 8 Feb 2008 18:45:35 -0800 ""Dj Gilcrease"" <digitalxero@gmail.com> wrote:
> On Feb 5, 2008 10:24 PM, Mike Meyer <mwm@mired.org> wrote:
> > Sure, there are *lots* of ways the user can screw up the system as
> > root. Doing a default python install from source is *not* one of them,
> > no matter what it does with those symlinks. If you know of a system
> > where things are otherwise, please warn me about it now.
> Ubuntu will screw up if you login as root and build a newer python
> version then 2.2. You wont be able to use it's GUI package installer
> and other issues.

Are you sure? The default Python install prefix is /usr/local.  Ubuntu
(at least on the admittedly aged system I have here) puts the system
python in /usr/bin. So that default python install shouldn't break the
system tools, providing they run the right python. For that matter,
even on this relatively old Ubuntu, they've got a 2.4 version
installed.

Of course, once you've got more than one python installed on the
system, chances are good that some - and possibly all - of your
scripts will break if you run them on the wrong python. But even if
the scripts run the default python (and system scripts shouldn't), the
above can be fixed by tweaking the environment - and root's
environment on my box is right.

    Thanks,
    <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 24
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 23","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Nix dict.copy() (Raymond Hettinger)
   2. Re: Nix dict.copy() (Guido van Rossum)
   3. Thoughts on collections.Container and	collections.Iterable
      (Raymond Hettinger)
   4. Re: Thoughts on collections.Container and
      collections.Iterable (Guido van Rossum)
   5. Re: Windows gui vs. console (Nick Coghlan)
   6. Re: Thoughts on collections.Container	and
      collections.Iterable (Nick Coghlan)
   7. Re: Thoughts on collections.Container and
      collections.Iterable (Raymond Hettinger)
   8. Re: Namespaces are one honking great idea -- let's do	more of
      those! (Dj Gilcrease)
   9. Re: Nix dict.copy() (Fred Drake)
  10. Re: Thoughts on collections.Container	and
      collections.Iterable (Neil Toronto)
  11. Re: Thoughts on	collections.Container	and
      collections.Iterable (Neil Toronto)


----------------------------------------------------------------------

Message: 1
Date: Fri,  8 Feb 2008 19:51:43 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Nix dict.copy()
To: python-3000@python.org
Message-ID: <20080208195143.AGP58228@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

I recommend dropping the dict.copy() method from Py3.0.

* We can already write:  newd = copy.copy(d).
* We can also write:     newd = dict(d)
* Both of those approaches also work for most other containers.
* The collections.Mapping ABC does not support copy().
* copy() is not a universal feature of mapping like objects
* Lists do not have a copy() method.
* If we drop dict.copy(), I'll can also drop set.copy() which is unneeded.

Let's make the basic APIs as clean and parallel as possible.

Raymond


------------------------------

Message: 2
Date: Fri, 8 Feb 2008 17:03:13 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802081703w1a73e0catbd1aaecbcf56fb28@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 8, 2008 4:51 PM, Raymond Hettinger <python@rcn.com> wrote:
> I recommend dropping the dict.copy() method from Py3.0.
>
> * We can already write:  newd = copy.copy(d).
> * We can also write:     newd = dict(d)
> * Both of those approaches also work for most other containers.
> * The collections.Mapping ABC does not support copy().
> * copy() is not a universal feature of mapping like objects
> * Lists do not have a copy() method.
> * If we drop dict.copy(), I'll can also drop set.copy() which is unneeded.
>
> Let's make the basic APIs as clean and parallel as possible.

Makes sense.  I request that you also implement the transitional code:
either a fixer for 2to3 or (perhaps more realistically) a warning to
dict.copy() when -3 is given.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Fri,  8 Feb 2008 20:35:57 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Thoughts on collections.Container and
	collections.Iterable
To: python-3000@python.org
Message-ID: <20080208203557.AGP62362@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

I'm wondering if collections.Iterable should inherit from collections.Container""?

In Python, anything that supports __iter__ automatically supports tests using the ""in"" operator:

   class A:
       def __iter__(self):
           for i in (1,2,3):
                yield i
   >>> 2 in A()
   True

The two concepts are deeply related.  Anywhere we can write ""for x in s: ..."" we can also write ""if x in s: ..."".

The new definition of Iterable would look like this:

    class Iterable(Container):
        __metaclass__ = ABCMeta

        @abstractmethod
        def __iter__(self):
            while False:
                yield None

        @classmethod
        def __subclasshook__(cls, C):
            if cls is Iterable:
                if any(""__iter__"" in B.__dict__ for B in C.__mro__):
                    return True
            return NotImplemented

        def __contains__(self, value):
            for v in self:
                if v == value:
                    return True
            return False


Raymond


------------------------------

Message: 4
Date: Fri, 8 Feb 2008 17:42:37 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Thoughts on collections.Container and
	collections.Iterable
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802081742y3c6c6790wa5cc9a0f61868dd3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I would need to think more about this. I'm tempted not to do this, and
let these ABCs denote the *explicit* presence of __contains__ and
__iter__, respectively. Something that's iterable but doesn't
implement __contains__ supports the 'in' operator very inefficiently
(through linear search) which we might not want to encourage.

--Guido

On Feb 8, 2008 5:35 PM, Raymond Hettinger <python@rcn.com> wrote:
> I'm wondering if collections.Iterable should inherit from collections.Container""?
>
> In Python, anything that supports __iter__ automatically supports tests using the ""in"" operator:
>
>    class A:
>        def __iter__(self):
>            for i in (1,2,3):
>                 yield i
>    >>> 2 in A()
>    True
>
> The two concepts are deeply related.  Anywhere we can write ""for x in s: ..."" we can also write ""if x in s: ..."".
>
> The new definition of Iterable would look like this:
>
>     class Iterable(Container):
>         __metaclass__ = ABCMeta
>
>         @abstractmethod
>         def __iter__(self):
>             while False:
>                 yield None
>
>         @classmethod
>         def __subclasshook__(cls, C):
>             if cls is Iterable:
>                 if any(""__iter__"" in B.__dict__ for B in C.__mro__):
>                     return True
>             return NotImplemented
>
>         def __contains__(self, value):
>             for v in self:
>                 if v == value:
>                     return True
>             return False
>
>
> Raymond
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sat, 09 Feb 2008 11:59:05 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47AD08E9.2010806@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Greg Ewing wrote:
> Daniel Stutzbach wrote:
>>     Hmmm. So maybe what's needed is a *third* kind of exe that
>>     gets launched when you double-click a .py file, that keeps
>>     its console open after the script finishes?
>>
>> Picture command-line usage of python.  You're sitting at your prompt, 
>> and you run a python script.  It pops up a *new* window and you have to 
>> interact with that.
> 
> That's why I just suggested a *third* exe. It wouldn't be
> used as the command line interpreter -- it would only get
> launched by double-clicking a .py file in the gui.
> 
> The current behaviour of having the gui launch the normal
> command line interpreter for .py files is almost useless,
> because the window disappears before you can see the output.

As far as I know, double-clicking in the GUI and typing the script name 
at a command prompt use the same mechanism to determine the file 
association. I'm not sure it is possible to separate them.

Cheers,
Nick.


-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 6
Date: Sat, 09 Feb 2008 12:23:24 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Thoughts on collections.Container	and
	collections.Iterable
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <47AD0E9C.4080805@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> I would need to think more about this. I'm tempted not to do this, and
> let these ABCs denote the *explicit* presence of __contains__ and
> __iter__, respectively. Something that's iterable but doesn't
> implement __contains__ supports the 'in' operator very inefficiently
> (through linear search) which we might not want to encourage.

I think a bigger conceptual problem with doing containment tests on 
arbitrary iterables is that you may end up consuming an iterator in the 
process of checking whether it contains the item you want (i.e. if 
Iterable defines __contains__, then Iterator will acquire it by 
inheritance).

So ""assert (x in obj) == (x in obj)"" may well fail in some cases if we 
adopt the idea that being iterable implies support for containment tests.

Random thought inspired by the __contains__ code in Raymond's post: does 
anyone else think a 'key' parameter on any() and all() would be useful?

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 7
Date: Fri,  8 Feb 2008 21:31:28 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Thoughts on collections.Container and
	collections.Iterable
To: Nick Coghlan <ncoghlan@gmail.com>, Guido van Rossum
	<guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080208213128.AGP67107@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Nick]
>  does anyone else think a 'key' parameter on any() and all() 
> would be useful?

Not really.  The key= function is useful whenever you need to
keep the original value around for some reason (i.e. sorting
it or getting the min/max value).  But with any() and all()
you don't keep anything.

Also, if you take examples of any() and all() and try them
with the key= syntax, you'll find that they become less readable.

Besides, for the ""gurus who are in the know"", the min() and max()
functions can often be substituted directly for any() and all()
and then you get the key= syntax for free ;-)

   any(x%2==0 for x in s)
   max(x%2==0 for x in s)

Raymond


------------------------------

Message: 8
Date: Fri, 8 Feb 2008 18:45:35 -0800
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of those!
To: python-3000@python.org
Message-ID:
	<e9764b730802081845r173ec350y34c8df55bd41eb61@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 5, 2008 10:24 PM, Mike Meyer <mwm@mired.org> wrote:
> Sure, there are *lots* of ways the user can screw up the system as
> root. Doing a default python install from source is *not* one of them,
> no matter what it does with those symlinks. If you know of a system
> where things are otherwise, please warn me about it now.

Ubuntu will screw up if you login as root and build a newer python
version then 2.2. You wont be able to use it's GUI package installer
and other issues.


------------------------------

Message: 9
Date: Fri, 8 Feb 2008 21:52:06 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] Nix dict.copy()
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <D6C2AD40-CF20-4AC5-B510-47582F718C71@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed

On Feb 8, 2008, at 7:51 PM, Raymond Hettinger wrote:
> I recommend dropping the dict.copy() method from Py3.0.


+1


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 10
Date: Fri, 08 Feb 2008 22:04:17 -0700
From: Neil Toronto <ntoronto@cs.byu.edu>
Subject: Re: [Python-3000] Thoughts on collections.Container	and
	collections.Iterable
To: python-3000@python.org
Message-ID: <47AD3451.6000609@cs.byu.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> I would need to think more about this. I'm tempted not to do this, and
> let these ABCs denote the *explicit* presence of __contains__ and
> __iter__, respectively. Something that's iterable but doesn't
> implement __contains__ supports the 'in' operator very inefficiently
> (through linear search) which we might not want to encourage.
It could be worse. Is a container necessarily finite?

Neil



------------------------------

Message: 11
Date: Fri, 08 Feb 2008 22:30:08 -0700
From: Neil Toronto <ntoronto@cs.byu.edu>
Subject: Re: [Python-3000] Thoughts on	collections.Container	and
	collections.Iterable
To: python-3000@python.org
Message-ID: <47AD3A60.40404@cs.byu.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Neil Toronto wrote:
> Guido van Rossum wrote:
>> I would need to think more about this. I'm tempted not to do this, and
>> let these ABCs denote the *explicit* presence of __contains__ and
>> __iter__, respectively. Something that's iterable but doesn't
>> implement __contains__ supports the 'in' operator very inefficiently
>> (through linear search) which we might not want to encourage.
> It could be worse. Is a container necessarily finite?

I meant an iterable, of course, not a container.

Neil


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 23
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 22","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows gui vs. console (Facundo Batista)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Mike Meyer)
   3. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Mike Meyer)
   4. Re: Windows gui vs. console (Christian Heimes)
   5. Re: Windows gui vs. console (Greg Ewing)
   6. Re: Windows gui vs. console (Greg Ewing)
   7. Re: Namespaces are one honking great idea --	let's	do	more of
      those! (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Fri, 8 Feb 2008 10:02:55 -0200
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: ""Daniel Stutzbach"" <agthorr@barsoom.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<e04bdf310802080402l5424ba95rfe0cdb2c39efc014@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/2/8, Daniel Stutzbach <agthorr@barsoom.org>:

> Picture command-line usage of python.  You're sitting at your prompt, and
> you run a python script.  It pops up a *new* window and you have to interact
> with that.  Not a great user experience.  Also, piping data to or from the
> script is impossible because stdin/stdout are tied to the new window.  (I
> use Python for windows and pipe data to scripts everyday, so this is pretty
> important to me :-) )

Not really following this discussion, but a detail regarding
stdin/stdout in windows.

When the process is issued as a Service, it don't even HAS
stdin/stdout (not that is redirected to NUL). It don't even exist.

Regards,

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 2
Date: Wed, 6 Feb 2008 14:07:43 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Nick Coghlan <ncoghlan@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080206140743.7aafa84b@mbook-fbsd>
Content-Type: text/plain; charset=US-ASCII

On Wed, 06 Feb 2008 21:09:11 +1000 Nick Coghlan <ncoghlan@gmail.com> wrote:
> Mike Meyer wrote:
> > On Wed, 06 Feb 2008 01:01:05 +1000 Nick Coghlan <ncoghlan@gmail.com> wrote:
> >> While I'm +1 on the idea of making altinstall the default for setup.py 
> >> and the Windows installer (forcing the administrator to explicitly 
> >> request that the new Python version be made the default Python 
> >> installation for the machine), I'm a pretty strong -1 on officially 
> >> blessing the idea of a python3 alias or a special py3 extension on 
> >> Windows (end users are obviously free to create those if they want, of 
> >> course).
> > I like the python3 alias (and python2 in 2.X), because it moves us
> > from a single default python to having a default python2 and python3,
> > which means scripts that care can ask for that without breaking the
> > ability to upgrade python2 or python3 without breaking those scripts,
> > while still allowing the default python to be either python2 or
> > python3.
> The main objection I have is that the executable name is only part of 
> the story - all of the PYTHON* environment variables may matter as well 
> (there are 9 listed in python -h, and I would have to check the code to 
> say with complete confidence that there aren't any others).

True, there are 9 of them, but most of them are version-neutral, in
that they change the behavior of python in some way, but *not* what
scripts it finds. While you may want different versions of them for
different python versions, 2 vs. 3 doesn't seem to be a factor (unless
it ignores them and uses others):

PYTHONOPTIMIZE, PYTHONDEBUG, PYTHONINSPECT, PYTHONUNBUFFERED, PYTHONVERBOSE
and PYTHONY2K

For that matter, all but PYTHON2K are an alternative to a command line
option. I think we can safely ignore all of them. That leaves:

PYTHONHOME - this tells python where to find it's standard
libraries. Setting it is bad for your health and sanity unless you
*really* know what you're doing. I think we can safely ignore it.

PYTHONSTARTUP - generally only set per user, and only for interactive
pythons. Anyone with the chops to set this up can make it work for
both by checking the version and importing an appropriate
version-specific module.

PYTHONPATH - this one is the real issue. It's used by people who can't
write to python library to point add third party modules to the
standard path. Personally, I tend to install Python (after all, if I
can install the modules, I can almost certainly install python) in
that case, but that doesn't help them. If they have both installed on
the system and can't write to their libraries, something has to be
done to deal with it.

> That said, while as a matter of purity I still think this is a platform 
> problem (one which all current platforms I know of handle poorly ;), as 
> a matter of practicality I'm seeing some benefits allowing a machine to 
> have full fledged ""Python 2"" and ""Python 3"" setups side by side.
> 
> If Guido does decide to go the route of changing the interpreter binary 
> to python3 (ala sqlite vs sqlite3), I would also suggest that we go the 
> whole way and insert a '3' into all of the environment variable names 
> that python3 looks for (PYTHON3PATH, PYTHON3STARTUP, etc). I'd even 
> concede the utility of accepting the py3 extension on modules as a 
> concession to extension based dispatching on Windows.

Actually, you can get that kind of behavior by using shell scripts
instead of symlinks for  python2 and python3 commands:

#!/bin/sh
PYTHONPATH=${PYTHON2PATH:-$PYTHONPATH} /usr/bin/python2.6

and similarly

#!/bin/sh
PYTHONPATH=${PYTHON3PATH:-$PYTHONPATH} /usr/bin/python3.0

Except you can't use #!/usr/bin/python2 in this case; you have to use
#!/usr/bin/env python2, which might be a problem.

> I still think it would be a bit of an ugly hack, but if it was followed 
> through to the point of being able to define separate Python 2 & 3 
> environments without the use of launch scripts (i.e. by changing the 
> environment variable names as described above), maybe it would still be 
> a worthwhile thing to do.

How about if we hide the ""launch scripts"" in the python2 and python3
commands, as above?

	  <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 3
Date: Thu, 7 Feb 2008 01:30:54 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: python-3000@python.org
Message-ID: <20080207013054.459233bc@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Thu, 07 Feb 2008 11:48:08 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
> Mike Meyer writes:
>  > On the other hand, if setup.py made setting up the symlinks easy,
>  > maybe I'd change my mind.
> I think this should be a separate tool, but either way I'd not object
> to making it easy to do, as long as it was not default.

And this is the real issue with your approach. If you're doing things
on systems you control, or where you're bundling in the python install
you're going to use, then we can do it however you want, and things
will be fine.

People building an app for distribution are going to want it to run in
an many places as possible. If the only name that python makes
available by default is ""python"", that's what they're going to use.

Removing the default for ""python"" is a step backwards. Most packagers
and installers will add it back anyway, so many app developers will
use it. Systems that fail to add it will appear broken. Apps that use
a more specific shebang will, at the *very* best, break on exactly the
same set of systems they'd break on using ""python"", and more likely
break on a lot more.

Leaving things as they are leaves things as they are. If we're going
to break backwards comparability in the language, I think we should
try and improve this situation.

Adding an install target or tool to create version-specific links (of
any flavor) suggests a solution, but I suspect it'll be ignored by a
large percentage of platforms. So packagers for platform that don't
ignore it can patch scripts to take advantage of it, but they tend to
handle multiple versions cleanly in any case, so it's not that big a
win for them. Developers wanting to distribute cross-platform scripts
are still pretty much where they are now.

Making the default install provide those links gives those developers
an expectation that they can use them. If some packagers breaks that -
well, the problem is that python on their system is broken. Yeah, some
developers will ignore the links and keep using ""python"". But some -
me, for instance - will provide a patch to users and tell them to
complain to the maintainers of that package for their system.

	 <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 4
Date: Fri, 08 Feb 2008 18:25:54 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Windows gui vs. console
To: python-3000@python.org
Message-ID: <foi3b2$bis$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Facundo Batista wrote:
> When the process is issued as a Service, it don't even HAS
> stdin/stdout (not that is redirected to NUL). It don't even exist.

GUI apps don't have standard streams stdin, stdout and stderr, too. The
variables are defined when the code is compiled but during runtime the
streams are not connected fileno(stdout) is -1.

Christian



------------------------------

Message: 5
Date: Sat, 09 Feb 2008 12:45:45 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Windows gui vs. console
To: Python 3000 <python-3000@python.org>
Message-ID: <47ACE9A9.10305@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Daniel Stutzbach wrote:
>     Hmmm. So maybe what's needed is a *third* kind of exe that
>     gets launched when you double-click a .py file, that keeps
>     its console open after the script finishes?
> 
> Picture command-line usage of python.  You're sitting at your prompt, 
> and you run a python script.  It pops up a *new* window and you have to 
> interact with that.

That's why I just suggested a *third* exe. It wouldn't be
used as the command line interpreter -- it would only get
launched by double-clicking a .py file in the gui.

The current behaviour of having the gui launch the normal
command line interpreter for .py files is almost useless,
because the window disappears before you can see the output.

--
Greg


------------------------------

Message: 6
Date: Sat, 09 Feb 2008 12:48:19 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Windows gui vs. console
To: Python 3000 <python-3000@python.org>
Message-ID: <47ACEA43.5050907@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Phillip J. Eby wrote:
> Hell, I'm not sure Windows even 
> has a way to *tell* whether your app was launched from the command line 
> or otherwise.

It wouldn't have to, if the .py extension were bound to
a different executable from the standard command line
interpreter, in the same way that .pyw is bound to the
pythonw executable.

--
Greg


------------------------------

Message: 7
Date: Sat, 09 Feb 2008 09:44:41 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: Mike Meyer <mwm@mired.org>
Cc: python-3000@python.org
Message-ID: <878x1vnekm.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Mike Meyer writes:
 > On Thu, 07 Feb 2008 11:48:08 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:

 > > I think this should be a separate tool, but either way I'd not object
 > > to making it easy to do, as long as it was not default.
 > 
 > And this is the real issue with your approach. If you're doing things
 > on systems you control, or where you're bundling in the python install
 > you're going to use, then we can do it however you want, and things
 > will be fine.

Please, give me some credit.  I'm talking about a default for systems
I don't control, but do want (a) to stop giving bad advice to and (b)
to stop abetting their bad practices.

So don't tell me that I'm mistaking my personal practices for a global
optimum.  I'm not.  I've thought pretty carefully about how this
applies in the context of presently widespread practices.

But now that you've put that fallacy on the table, let me point out
that it seems to apply to *you*.  It's just that lots of other people
have adopted the same global suboptimum, which makes it workable.  As
Opus the penguin says, ""If a million people do the same stupid thing,
it is still a stupid thing.""  Now, the ""python"" link is not *stupid*
in the context of the economics of networks, but we can do better, and
it won't cost much.

 > People building an app for distribution are going to want it to run in
 > an many places as possible. If the only name that python makes
 > available by default is ""python"", that's what they're going to use.

First, you're wrong, as you immediately pointed out yourself.  It's
not *Python-provided* defaults that matter.  It's the defaults
provided by common distro vendors, which for the market in question
dwarf installs from source as distributed by Python.

Second, my point is to change that default *and the bug-prone behavior
enabled by it*, so I'm not at all bothered by the fact that I'm
changing the default and thus am incompatible with bug-prone behavior.

 > Leaving things as they are leaves things as they are. If we're going
 > to break backwards comparability in the language, I think we should
 > try and improve this situation.

AFAICS my proposal *is* a technical improvement, in the sense that it
will work substantially better and at lower total cost in breakage,
debugging, and special-casing within communities that adopt it.  You
have made no argument against it except that it is a change and you
don't like change, and then you vastly exaggerate the likely annoyance
the removal of the ""python"" link creation step will cause, as well as
the potential for actual breakage.  True, it may get no uptake, and
then the small annoyances that will occasionally happen are for
nothing.  But the upside is quite large compared to the small
annoyances.

 > Adding an install target or tool to create version-specific links (of
 > any flavor) suggests a solution, but I suspect it'll be ignored by a
 > large percentage of platforms.

I doubt they'll ignore it.  They may decide not to implement it for
the reasons you gave (stipulated and omitted).  More likely, platforms
like Debian with its /etc/alternatives mechanism will find a way to
fit it into their existing alternatives mechanism.  Either way, if
Python adopts it for from-source installs, my proposal is compatible
with such systems.  If it works well, and as you suggest below app
vendors who use it press the platform maintainers (directly or through
customers as you suggest), platforms will adopt it -- we're talking a
couple dozen people who do watch each other and diffuse innovations
rapidly in the open source sector, and the proprietary vendors are
rapidly becoming more nimble (and watching the open source sector)
themselves.

 > Making the default install provide those links gives those developers
 > an expectation that they can use them. If some packagers breaks that -
 > well, the problem is that python on their system is broken. Yeah, some
 > developers will ignore the links and keep using ""python"". But some -
 > me, for instance - will provide a patch to users and tell them to
 > complain to the maintainers of that package for their system.

That's the way it's supposed to work.  I don't claim that my proposal
will be entirely painless, but it won't be very painful.  Application
developers who *do* use it can get benefits *without* any cooperation
from installed systems as long as users can install appropriate links
(or wrappers on Windows) on their executable search PATH.  The only
problem you'll face is if the systems are doing something really
insane like ""ln -s perl5.8 python2.2"".<wink>  And of course Python or
third parties can provide a link analysis tool for determining what
versions of Python are available and where the binaries live (eg,
borrow Zope's).


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 22
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 21","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Windows gui vs. console (Phillip J. Eby)


----------------------------------------------------------------------

Message: 1
Date: Thu, 07 Feb 2008 23:19:24 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: Greg Ewing <greg.ewing@canterbury.ac.nz>,	Python 3000
	<python-3000@python.org>
Message-ID: <20080208041917.4390C3A4076@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 03:59 PM 2/8/2008 +1300, Greg Ewing wrote:
>Paul Moore wrote:
> > As Phillip says. Windows console and GUI executables are completely
> > different in behaviour. Don't try to fight it. You need two distinct
> > EXEs.
>
>Hmmm. So maybe what's needed is a *third* kind of exe that
>gets launched when you double-click a .py file, that keeps
>its console open after the script finishes?

That's actually a separate problem from the one Paul and I are 
talking about, one that I'm not even going to *try* to solve.  (Being 
as I already have, and failed miserably.)  Hell, I'm not sure Windows 
even has a way to *tell* whether your app was launched from the 
command line or otherwise.  I couldn't find one for Win2K, anyway; 
there might be a way to do it in XP and Vista.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 21
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 20","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: ABC method mismatch (Alexander Belopolsky)
   2. Re: Should ABCMeta.register() do validation and emit	warnings
      (Christian Heimes)
   3. Re: Should ABCMeta.register() do validation and emit	warnings
      (Fred Drake)
   4. Re: Should ABCMeta.register() do validation and emit warnings
      (Greg Ewing)
   5. Re: Should ABCMeta.register() do validation and emit	warnings
      (Fred Drake)
   6. Windows gui vs. console (Greg Ewing)
   7. Re: Windows gui vs. console (Phillip J. Eby)
   8. Re: Windows gui vs. console (Paul Moore)
   9. Re: Windows gui vs. console (Greg Ewing)
  10. Re: Windows gui vs. console (Daniel Stutzbach)


----------------------------------------------------------------------

Message: 1
Date: Thu, 7 Feb 2008 15:18:05 +0000 (UTC)
From: Alexander Belopolsky <alexander.belopolsky@gmail.com>
Subject: Re: [Python-3000] ABC method mismatch
To: python-3000@python.org
Message-ID: <loom.20080207T145831-870@post.gmane.org>
Content-Type: text/plain; charset=us-ascii

Raymond Hettinger <python <at> rcn.com> writes:

> 
> [Fred Drake]
> > I'd be happy seeing these methods added to tuple; there's
> > no reason that they would only be useful on mutable sequences.
> 

Note that adding index and count to tuple will conflict with using these
names as attributes in classes generated by collections.namedtuple.
There is certain elegance in tuples and numbers having no non-
special methods.

What is the advantage of having count and index in Sequence ABC?
These methods are easily implementable as functions that take an
iterable (in fact, itertools.count already exists) and having them in
Sequence ABC puts an extra burden on implementors of concrete classes.



------------------------------

Message: 2
Date: Thu, 07 Feb 2008 17:27:42 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit	warnings
To: python-3000@python.org
Message-ID: <fofbhu$kq4$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> I think the Zope/Twisted interfaces have gone here before. I believe
> they have a separate validation call which is typically only invoked
> in unittests. The validation can be pretty expensive, so running the
> validation each time the interpreter is started would just slow things
> down. I've just not yet written the validation code. :-)

You are correct. Normally interfaces are only validated in unit tests.
The validation function of zope.interface checks if a class implements
or object provides the promised methods and attributes. It also compares
the method signatures.

Christian



------------------------------

Message: 3
Date: Thu, 7 Feb 2008 11:36:51 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit	warnings
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <0E557A86-41B2-495F-B610-68338F9FE47D@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On Feb 7, 2008, at 11:27 AM, Christian Heimes wrote:
> You are correct. Normally interfaces are only validated in unit tests.
> The validation function of zope.interface checks if a class implements
> or object provides the promised methods and attributes. It also  
> compares
> the method signatures.


Note also that checking the ""class implements"" is frequently  
problematic since the verification doesn't know what the factory does  
to the object (where the factory is the constructor provided by the  
class in most cases).  We frequently test instances this way in unit  
tests.


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 4
Date: Fri, 08 Feb 2008 09:34:01 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit warnings
To: python-3000@python.org
Message-ID: <47AB6B39.4090300@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Raymond Hettinger wrote:
>>I think the Zope/Twisted interfaces have gone here before.
>>I believe they have a separate validation call which is 
>>typically only invoked in unittests. 
> 
> +1 That seems like a good idea.

Or maybe this is a task for pylint?

--
Greg


------------------------------

Message: 5
Date: Thu, 7 Feb 2008 15:46:34 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit	warnings
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <842C9510-415B-4959-A036-5C08C31BA4BC@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On Feb 7, 2008, at 3:34 PM, Greg Ewing wrote:
> Or maybe this is a task for pylint?


Maybe a lint tool could help, but it's not unusual for this to be  
relevant only for specific instances, not necessarily all instances.   
Certainly with zope.interface, you can create objects that provide a  
particular interface (and are recognized as providing it) without it  
being tied to their class.

This is an important strength of the zope.interface module.  Since  
it's entirely dependent on the dynamic behavior of the application, a  
lint tool will probably have a hard time with that.


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 6
Date: Fri, 08 Feb 2008 09:52:18 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: [Python-3000] Windows gui vs. console
To: Python 3000 <python-3000@python.org>
Message-ID: <47AB6F82.4070308@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Paul Moore wrote:
> On Windows, GUI vs Console is a property of the EXE file,
> and the differing behaviour is built into the OS loader.

Would it be feasible for it to always start up as a gui
app, and then create its own console window (a fake one
if necessary) if it decides it needs one?

Doing things this way might make it possible to be a
bit smarter and not have the console window go away
the moment the script ends. That tends to make
console-mode scripts rather useless...

Also, it would be very handy if in all cases it would
display a traceback somehow in the event of an uncaught
exception. It's frustrating when a gui app fails to start
up and just vanishes into a black hole leaving no clue
what went wrong.

--
Greg


------------------------------

Message: 7
Date: Thu, 07 Feb 2008 17:10:36 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: Greg Ewing <greg.ewing@canterbury.ac.nz>,	Python 3000
	<python-3000@python.org>
Message-ID: <20080207221027.261D33A40D7@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 09:52 AM 2/8/2008 +1300, Greg Ewing wrote:
>Would it be feasible for it to always start up as a gui
>app, and then create its own console window (a fake one
>if necessary) if it decides it needs one?

No, because that would make it impossible to write a sane 
command-line app.  Imagine if running 'ls' always created a *new* 
console window into which its results would be written...  following 
which that console window would immediately close.

That's what happens if a Windows GUI app creates its own console later. 



------------------------------

Message: 8
Date: Thu, 7 Feb 2008 22:21:37 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] Windows gui vs. console
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<79990c6b0802071421r151bf89ci13cf0666c3a3edc8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 07/02/2008, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 09:52 AM 2/8/2008 +1300, Greg Ewing wrote:
> >Would it be feasible for it to always start up as a gui
> >app, and then create its own console window (a fake one
> >if necessary) if it decides it needs one?
>
> No, because that would make it impossible to write a sane
> command-line app.  Imagine if running 'ls' always created a *new*
> console window into which its results would be written...  following
> which that console window would immediately close.
>
> That's what happens if a Windows GUI app creates its own console later.

As Phillip says. Windows console and GUI executables are completely
different in behaviour. Don't try to fight it. You need two distinct
EXEs.

(I can argue the pros and cons of Unix vs Windows behaviour all night.
I'll take whichever side you prefer. The only thing that I am sure of
is that trying to ignore the differences is always going to give you
problems.)

Paul.


------------------------------

Message: 9
Date: Fri, 08 Feb 2008 15:59:23 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Windows gui vs. console
To: Python 3000 <python-3000@python.org>
Message-ID: <47ABC58B.7010608@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Paul Moore wrote:
> As Phillip says. Windows console and GUI executables are completely
> different in behaviour. Don't try to fight it. You need two distinct
> EXEs.

Hmmm. So maybe what's needed is a *third* kind of exe that
gets launched when you double-click a .py file, that keeps
its console open after the script finishes?

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 10
Date: Thu, 7 Feb 2008 21:19:09 -0600
From: ""Daniel Stutzbach"" <agthorr@barsoom.org>
Subject: Re: [Python-3000] Windows gui vs. console
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<eae285400802071919t7f2831e1w1fc7d06d766e79ee@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On Feb 7, 2008 8:59 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:

> Paul Moore wrote:
> > As Phillip says. Windows console and GUI executables are completely
> > different in behaviour. Don't try to fight it. You need two distinct
> > EXEs.
>
> Hmmm. So maybe what's needed is a *third* kind of exe that
> gets launched when you double-click a .py file, that keeps
> its console open after the script finishes?
>

Picture command-line usage of python.  You're sitting at your prompt, and
you run a python script.  It pops up a *new* window and you have to interact
with that.  Not a great user experience.  Also, piping data to or from the
script is impossible because stdin/stdout are tied to the new window.  (I
use Python for windows and pipe data to scripts everyday, so this is pretty
important to me :-) )

I agree with Paul and Phillip that having two EXEs is necessary.

-- 
Daniel Stutzbach, Ph.D.             President, Stutzbach Enterprises LLC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080207/b8e5c46d/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 20
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 19","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Should ABCMeta.register() do validation and emit warnings
      (Raymond Hettinger)
   2. Re: ABC method mismatch (Aahz)
   3. Re: ABC method mismatch (Guido van Rossum)
   4. Re: Should ABCMeta.register() do validation and emit	warnings
      (Guido van Rossum)
   5. Re: Should ABCMeta.register() do validation and emit warnings
      (Raymond Hettinger)
   6. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Stephen J. Turnbull)
   7. Re: Free list for small longs (Martin v. L?wis)
   8. Re: Free list for small longs (Martin v. L?wis)
   9. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Paul Moore)


----------------------------------------------------------------------

Message: 1
Date: Wed,  6 Feb 2008 20:17:12 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Should ABCMeta.register() do validation and
	emit warnings
To: python-3000@python.org
Message-ID: <20080206201712.AGL89528@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

It's interesting that tuples could be registered as Sequences without having all the requisite methods.  Should the register() method to some sort of validation that all public methods in the ABC are in the class/type being registered?


Raymond


------------------------------

Message: 2
Date: Wed, 6 Feb 2008 17:21:16 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] ABC method mismatch
To: python-3000@python.org
Message-ID: <20080207012116.GB11221@panix.com>
Content-Type: text/plain; charset=us-ascii

On Wed, Feb 06, 2008, Guido van Rossum wrote:
> On Feb 6, 2008 2:58 PM, Fred Drake <fdrake@acm.org> wrote:
>> 
>> I'd be happy seeing these methods added to tuple; there's no reason
>> that they would only be useful on mutable sequences.
> 
> Sounds like this is the consensus. Go for it, Raymond!

Far be it from me to act the grinch (and I honestly don't care), but I'm
curious what caused you to change your mind at this point.  You have
argued against this for years:

http://www.python.org/search/hypermail/python-1992/0285.html

More recently, your argument has revolved around the fact that you don't
want tuples used as a ""poor man's list"" -- they are intended to be used
for heterogeneous data.  (Assuming I'm rephrasing you correctly.)

(My purpose in poking you is to get better at channeling you rather than
because this particular decision has much significance.)
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 3
Date: Wed, 6 Feb 2008 18:28:05 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC method mismatch
To: Aahz <aahz@pythoncraft.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802061828r5265c2c4mb499eac39062fccd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 6, 2008 5:21 PM, Aahz <aahz@pythoncraft.com> wrote:
> On Wed, Feb 06, 2008, Guido van Rossum wrote:
> > On Feb 6, 2008 2:58 PM, Fred Drake <fdrake@acm.org> wrote:
> >>
> >> I'd be happy seeing these methods added to tuple; there's no reason
> >> that they would only be useful on mutable sequences.
> >
> > Sounds like this is the consensus. Go for it, Raymond!
>
> Far be it from me to act the grinch (and I honestly don't care), but I'm
> curious what caused you to change your mind at this point.  You have
> argued against this for years:
>
> http://www.python.org/search/hypermail/python-1992/0285.html
>
> More recently, your argument has revolved around the fact that you don't
> want tuples used as a ""poor man's list"" -- they are intended to be used
> for heterogeneous data.  (Assuming I'm rephrasing you correctly.)
>
> (My purpose in poking you is to get better at channeling you rather than
> because this particular decision has much significance.)

Well, I guess I changed my mind when I made tuple a virtual subclass
of Sequence. That meant basically accepting it is *also* usable as an
immutable sequence. It is accepting what everybody has been saying for
a long time.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Wed, 6 Feb 2008 18:29:59 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit	warnings
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802061829t2dc2923ex666a54e0a1f824f3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 6, 2008 5:17 PM, Raymond Hettinger <python@rcn.com> wrote:
> It's interesting that tuples could be registered as Sequences without having all the requisite methods.  Should the register() method to some sort of validation that all public methods in the ABC are in the class/type being registered?

I think the Zope/Twisted interfaces have gone here before. I believe
they have a separate validation call which is typically only invoked
in unittests. The validation can be pretty expensive, so running the
validation each time the interpreter is started would just slow things
down. I've just not yet written the validation code. :-)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Wed,  6 Feb 2008 21:35:37 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Should ABCMeta.register() do validation and
	emit warnings
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080206213537.AGL98594@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> I think the Zope/Twisted interfaces have gone here before.
> I believe they have a separate validation call which is 
> typically only invoked in unittests. 

+1 That seems like a good idea.



Raymond


------------------------------

Message: 6
Date: Thu, 07 Feb 2008 11:48:08 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: python-3000@python.org
Message-ID: <87prv9iis7.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Mike Meyer writes:

 > Personally, I think *this* [proposal to link 2.x to 2.y for y < x]
 > is a crock. But if you're going to advocate that people lie about
 > what versions they have installed,

If you insist on that interpretation, consider that it's no different
from the common cc -> gcc link.  Anyway, your favored solution of
""python2"" tells exactly the same ""lie"" (""Python 2"" is not installed!),
but in a way that cannot be interpreted satisfactorily for as many
apps that have specific version preferences without changing the apps.
Also, it doesn't tell what version of Python is actually recommended
by the developers, which is a potential support issue.  Finally, the
developers who use ""python2"" shebangs *are* lying (no quotes!) unless
they use only features present in Python 2.0.

You asked whether I oppose making things easy.  Not everything, but I
sure do oppose making such inaccuracy easy!

As I interpret it, in my proposal you aren't telling anyone that you
have that version of Python installed; you are telling applications
that you have installed *some* version of Python that can handle that
version of the API.  Eg, an admin can determine which Python version
will deal with ""python2.2"" simply by doing ""ls -l `which python2.2`"".

Again, it's not correct to interpret ""python2"" that way; ""python2"" is
the sysadmin's preferred version of Python 2 at the moment, which in
my experience is unlikly to be 2.x.0 for any x, and might be
substantially older if the mission-critical apps run satisfactorily on
that older version.  Implying that ""'python2' can handle any Python 2
script"" is likely to remain a lie until the release of 2.x.1 at least,
and possibly indefinitely.

 > With python2, [if there's a problem with 2.x's initial release] you
 > set the python2 link back to the previous version. Yeah, you may
 > have to fix the apps that require the new version,

Which is (a) unnecessary in my scheme and (b) a long-term maintenance
burden when upgrading the apps that require the new version.  The
second is a serious annoyance in my experience.

 > Personally, I think that's a *lot* easier than running around creating
 > or re-creating a bunch of symlinks every time I install or upgrade
 > python,

Huh?  Eminently automatable.  Why do you think it would be hard?

Also, do you really install or upgrade Python more often than you
install or upgrade apps that run on Python, each time risking annoying
breakage that requires hacking the app to fix?  And since the app may
not even tell you which versions you already have available that might
be satisfactory, you have to test them yourself, and possibly install
and uninstall several versions!

Finally, do you really uninstall old versions that often?  It seems
likely to me that there probably would be no need at all to fiddle
with symlinks based on upgrading Python 2.4.3 to Python 2.4.4, and no
*pressing* need to update the symlinks upon installing Python 2.5.1
alongside Python 2.4.4.  Rather you'd do that at a later time, after
Python 2.5 ""shakes down"" and you've tested all your important apps
with 2.5.

Yes, it's a matter of balance, and YMMV.  But between the theoretical
deficiencies of ""python2"" and the degree to which I believe you're
exaggerating the frequency (or lack thereof) that you would encounter
the relevant situations under the two plans, I really don't see a good
argument for ""python2"".

 > much less trying to figure out when I really can declare that
 > I no longer need some version under those conditions.

This is a real issue with the scheme I proposed, although modern
versions of file will tell you the whole shebang, I think.  It's also
a problem that modern PMSes will help you with, as well as being one
faced only by those who run an unusually tight ship in my experience.
Again, I would imagine it's not hard to automate.

 > On the other hand, if setup.py made setting up the symlinks easy,
 > maybe I'd change my mind.

I think this should be a separate tool, but either way I'd not object
to making it easy to do, as long as it was not default.



------------------------------

Message: 7
Date: Thu, 07 Feb 2008 06:04:12 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47AA914C.8020402@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

>> Both. Let (a,b,c) equal gc.get_threshold(), then a full gc happens
>> after a*b*c object allocations (roughly; early object deallocations
>> are deducted from that number). Currently, this product is 70000.
> 
> I see. 70k is a large number. Do you have some real world experience how
> often a a full gc takes place?

Not from a real world application, no. If you run the program below with

python /tmp/a.py 2>&1|grep ""generation 2""

you'll see it does one ""regular"" generation-2-collection; on my machine,
it takes 0.23s for that to happen. Notice that this application doesn't
use reference counting at all (i.e. objects are released here only
through GC, not because their refcount goes zero before the GC
triggers).

What are you aiming at? Is it a good thing or a bad thing that 70k is
a large number?

> I was referring to Python 2.x as well. Your proposed solution would make
> it easier to maintain a small free list but it may also make allocation
> slower. How old are the int and float blocks? Where they implemented
> before Python got pymalloc?

I don't remember; try to find out for yourself.

I think it will be very difficult to demonstrate that releasing the
freelists has a significant effect when it's run along with GC. The
time for running the GC should dominate the time spend in releasing
the freelists, and any application for which the freelists help (i.e.
which periodically allocate many similar object and then return them)
will rebuild the freelist to the required size quickly.

Regards,
Martin



------------------------------

Message: 8
Date: Thu, 07 Feb 2008 06:44:12 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47AA9AAC.8000106@v.loewis.de>
Content-Type: text/plain; charset=""iso-8859-1""

> Not from a real world application, no. If you run the program below with

And now for the program below...

Regards,
Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: a.py
Type: text/x-python
Size: 211 bytes
Desc: not available
Url : http://mail.python.org/pipermail/python-3000/attachments/20080207/1023dad9/attachment-0001.py 

------------------------------

Message: 9
Date: Thu, 7 Feb 2008 09:15:16 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>,	Python 3000
	<python-3000@python.org>
Message-ID:
	<79990c6b0802070115g44636852hc45024da9141d845@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 06/02/2008, Christian Heimes <lists@cheimes.de> wrote:
> Nice, it's an elegant and easy solution to the problem. I like to get a
> quite similar solution into the core but I propose a slightly different
> path.
>
> Like your launcher.c, spam.exe looks for spam.py. It additionally looks
> for spam.pyw first giving .pyw files a higher priority.
>
> The first line of the file is read and parsed. The line must start with
> a shebang (#!). Contrary to your script it doesn't look for a complete
> path but searches for pythonX.Y. ""#!python2.5"" or ""#!/usr/bin/python2.5""
> both work.
>
> Then the launcher executable queries the installation path of Python X.Y
> from the registry (first HKCU, then HKLM). At last the script is
> executed with the Python binary: python.exe for .py and pythonw.exe for
> .pyw. The working directory is the absolute path of spam.exe. This way
> we neither have to change the paths for Windows scripts nor quote the
> path name.
>
> Comments?

One major issue: The same launcher cannot be used for py and pyw
files. The launcher for py files needs to be compiled as a console
app, whereas the launcher for pyw (GUI) files needs to be compiled as
a GUI app. On Windows, GUI vs Console is a property of the EXE file,
and the differing behaviour is built into the OS loader. You may not
like the fact (at times, I certainly don't) but you can't fight it.

Trying to avoid this is what makes GUI apps with consoles that flash
up quickly before disappearing, and other similar nastiness.

Also, be aware that Python does not *have* to register itself in the
registry (AIUI). But other things (like bdist_wininst IIRC) expect it,
so as long as you don't fail too horribly if there's no registry
entries, you should be OK.

Finally, you don't want to change the current directory. Suppose I had
a simple program listdir.py that displayed the contents of the current
directory. Using your wrapper would break it. Why do you think
changing directory is needed, as opposed to making sys.path look like
you want - oh, hang on, you're running python.exe so you have no
access to sys.path. Hmm, your proposal may have a more serious problem
than I realised.

Paul.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 19
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 18","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Thomas Heller)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Phillip J. Eby)
   3. Re: Free list for small longs (Christian Heimes)
   4. ABC method mismatch (Raymond Hettinger)
   5. Re: ABC method mismatch (Guido van Rossum)
   6. Re: ABC method mismatch (Raymond Hettinger)
   7. Re: ABC method mismatch (Fred Drake)
   8. Re: ABC method mismatch (Guido van Rossum)
   9. Re: Free list for small longs (Martin v. L?wis)
  10. Re: ABC method mismatch (Raymond Hettinger)
  11. Re: Free list for small longs (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Wed, 06 Feb 2008 21:04:16 +0100
From: Thomas Heller <theller@ctypes.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fod3s0$lm8$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Christian Heimes schrieb:
> Phillip J. Eby wrote:
>> FYI, setuptools uses and supports #! lines on Windows, with the 
>> executable path in quotes if it contains spaces.  For a given script 
>> ""foo"", it generates two files:
>> 
>>      foo.exe
>>      foo-script.py
>> 
>> And the .exe is just a standardized .exe file that looks in an 
>> adjacent -script.py file of the same name for the #! line.
> 
> Nice, it's an elegant and easy solution to the problem. I like to get a
> quite similar solution into the core but I propose a slightly different
> path.
> 
> Like your launcher.c, spam.exe looks for spam.py. It additionally looks
> for spam.pyw first giving .pyw files a higher priority.

Why give a higher priority to .pyw if the .py also exists?  Shouldn't there
be a way to select one or the other, maybe with a command line flag or whatever?

And, while we're at it:  What IMO needs to be fixed is that there is no way
for a .pyw file to show exceptions to the user.  Maybe the console window
is not such a bad idea.  Maybe it could be opened on demand, as soon as there
is something printed to stderr?
 
> The first line of the file is read and parsed. The line must start with
> a shebang (#!). Contrary to your script it doesn't look for a complete
> path but searches for pythonX.Y. ""#!python2.5"" or ""#!/usr/bin/python2.5""
> both work.

You mean you parse this string to get the version number?
 
> Then the launcher executable queries the installation path of Python X.Y
> from the registry (first HKCU, then HKLM). At last the script is
> executed with the Python binary: python.exe for .py and pythonw.exe for
> .pyw. The working directory is the absolute path of spam.exe. This way
> we neither have to change the paths for Windows scripts nor quote the
> path name.

What if there are no registry entries (svn checkout)?

Thomas



------------------------------

Message: 2
Date: Wed, 06 Feb 2008 15:28:25 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <20080206202817.2950F3A40AF@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 07:38 PM 2/6/2008 +0100, Christian Heimes wrote:
>The first line of the file is read and parsed. The line must start with
>a shebang (#!). Contrary to your script it doesn't look for a complete
>path but searches for pythonX.Y. ""#!python2.5"" or ""#!/usr/bin/python2.5""
>both work.
>
>Then the launcher executable queries the installation path of Python X.Y
>from the registry (first HKCU, then HKLM). At last the script is
>executed with the Python binary: python.exe for .py and pythonw.exe for
>.pyw. The working directory is the absolute path of spam.exe. This way
>we neither have to change the paths for Windows scripts nor quote the
>path name.
>
>Comments?

I intentionally didn't do it that way because it won't work right for 
Python applications that bundle their own not-in-the-registry Python. 



------------------------------

Message: 3
Date: Wed, 06 Feb 2008 22:35:28 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: python-3000@python.org
Message-ID: <fod971$eq5$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
> I wonder whether such a thing should run as a side effect of a full 
> garbage collection, also. GC has a chance to free up arenas for good,
> and allocated-but-unused blocks on arenas prevent Python from returning
> them to the OS.

Under which condition does a full garbage collection take place? Does
the interpreter run a full gc once in a while or is it started by
gc.collect()?

I'm more concerned about the int and float memory blocks. They should
get freed when more than a couple of hundred blocks are allocated. The
other free lists are much smaller. But memory fragmentation is an issue
for them, too.

Christian



------------------------------

Message: 4
Date: Wed,  6 Feb 2008 17:29:39 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] ABC method mismatch
To: python-3000@python.org
Message-ID: <20080206172939.AGL65745@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

The tuple class is registered to the collections.Sequence ABC, but it does not support count() and index() as required by the ABC.

Do you want to drop those methods from the ABC or add them to tuple?


Raymond


------------------------------

Message: 5
Date: Wed, 6 Feb 2008 14:40:39 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC method mismatch
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802061440v2f943be1n89a09bbd5c904104@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 6, 2008 2:29 PM, Raymond Hettinger <python@rcn.com> wrote:
> The tuple class is registered to the collections.Sequence ABC, but it does not support count() and index() as required by the ABC.

Good catch!

> Do you want to drop those methods from the ABC or add them to tuple?

I'm not sure, but I'm tempted to add them to the ABC. What's your
hunch? Do others have an opinion? They shouldn't be a burden for
implementers who use real inheritance from Sequence, as they are
concrete methods there. And it doesn't make sense to move them to
MutableSequence, because there's nothing in them that requires the
sequence to be mutable.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Wed,  6 Feb 2008 17:55:36 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] ABC method mismatch
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080206175536.AGL69941@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

>> Do you want to drop those methods from the ABC or add them to tuple?

> I'm not sure, but I'm tempted to add them to the ABC.
> What's your hunch?

My hunch is that adding count() and index() to tuple is at
harmless at worst and sometimes helpful at best (I've
occasionally needed them and felt mild annoyance at having
coerce tuples to lists just to get them).

Also, if you add them now, you won't spend the rest of your
life turning down requests to add them as people periodically
discover the mismatch with strings and lists.


Raymond


------------------------------

Message: 7
Date: Wed, 6 Feb 2008 17:58:24 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] ABC method mismatch
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <0F448ACD-8670-40E2-B823-638143B75E49@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On Feb 6, 2008 2:29 PM, Raymond Hettinger <python@rcn.com> wrote:
> Do you want to drop those methods from the ABC or add them to tuple?


On Feb 6, 2008, at 5:40 PM, Guido van Rossum wrote:
> I'm not sure, but I'm tempted to add them to the ABC. What's your
>


Is Guido having a bad typing day?  ;-)

I'd be happy seeing these methods added to tuple; there's no reason  
that they would only be useful on mutable sequences.


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 8
Date: Wed, 6 Feb 2008 15:01:41 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] ABC method mismatch
To: ""Fred Drake"" <fdrake@acm.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20802061501u3029dad1j750eae0b41800d13@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 6, 2008 2:58 PM, Fred Drake <fdrake@acm.org> wrote:
> On Feb 6, 2008 2:29 PM, Raymond Hettinger <python@rcn.com> wrote:
> > Do you want to drop those methods from the ABC or add them to tuple?
>
>
> On Feb 6, 2008, at 5:40 PM, Guido van Rossum wrote:
> > I'm not sure, but I'm tempted to add them to the ABC. What's your

> Is Guido having a bad typing day?  ;-)

Ever since I turned 50, every day seems to be a bad typing day. :-(

> I'd be happy seeing these methods added to tuple; there's no reason
> that they would only be useful on mutable sequences.

Sounds like this is the consensus. Go for it, Raymond!

--Guido

>    -Fred
>
> --
> Fred Drake   <fdrake at acm.org>
>
>
>
>
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Thu, 07 Feb 2008 00:04:01 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <47AA3CE1.40501@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes wrote:
> Martin v. L?wis wrote:
>> I wonder whether such a thing should run as a side effect of a full 
>> garbage collection, also. GC has a chance to free up arenas for good,
>> and allocated-but-unused blocks on arenas prevent Python from returning
>> them to the OS.
> 
> Under which condition does a full garbage collection take place? Does
> the interpreter run a full gc once in a while or is it started by
> gc.collect()?

Both. Let (a,b,c) equal gc.get_threshold(), then a full gc happens
after a*b*c object allocations (roughly; early object deallocations
are deducted from that number). Currently, this product is 70000.

> I'm more concerned about the int and float memory blocks. They should
> get freed when more than a couple of hundred blocks are allocated. The
> other free lists are much smaller. But memory fragmentation is an issue
> for them, too.

Ain't we talking about Python 3? There aren't any int memory blocks 
around. As for float objects - sure, we should do something about them.
I propose to change them into a freelist as well, and allocate float
objects through pymalloc.

I'd be curious whether any real-world application allocates tons of
float objects temporarily, and whether such an application would improve
by using the Numeric extensions.

Regards,
Martin


------------------------------

Message: 10
Date: Wed,  6 Feb 2008 18:05:29 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] ABC method mismatch
To: Fred Drake <fdrake@acm.org>, Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080206180529.AGL71523@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Fred Drake]
> I'd be happy seeing these methods added to tuple; there's
> no reason that they would only be useful on mutable sequences.

That reminds me, I've always thought Sequence.__contains__().
should always be accompanied by Sequence.index().  Their
use cases are strongly related:

  Good news: I searched your house and found your keys
  Bad news: I don't have method to tell you where I found them


Raymond


------------------------------

Message: 11
Date: Thu, 07 Feb 2008 00:46:02 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: ""Martin v. L?wis"" <martin@v.loewis.de>,	Python 3000
	<python-3000@python.org>
Message-ID: <47AA46BA.6080900@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
> Both. Let (a,b,c) equal gc.get_threshold(), then a full gc happens
> after a*b*c object allocations (roughly; early object deallocations
> are deducted from that number). Currently, this product is 70000.

I see. 70k is a large number. Do you have some real world experience how
often a a full gc takes place?

> Ain't we talking about Python 3? There aren't any int memory blocks 
> around. As for float objects - sure, we should do something about them.
> I propose to change them into a freelist as well, and allocate float
> objects through pymalloc.

I was referring to Python 2.x as well. Your proposed solution would make
it easier to maintain a small free list but it may also make allocation
slower. How old are the int and float blocks? Where they implemented
before Python got pymalloc?

I found another place that may gain some speedup from free lists.
Currently list and dict aren't using a real free list. The code
pre-allocates 80 objects each. I've modified the code to free list
without pre-allocated objects. I also added some debug code to measure
how many objects are reused or allocated:

./python setup build

List allocations: 1046
List reuse through freelist: 15746
Dict allocations: 770
Dict reuse through freelist: 1307

A simple startup of Python

List allocations: 59
List reuse through freelist: 644
Dict allocations: 239
Dict reuse through freelist: 223

Christian


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 18
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 17","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Nick Coghlan)
   2. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Mike Meyer)
   3. Re: Namespaces are one honking great idea -- let's do	more of
      those! (nathan binkert)
   4. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   6. Re: Free list for small longs (Martin v. L?wis)


----------------------------------------------------------------------

Message: 1
Date: Wed, 06 Feb 2008 21:09:11 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Mike Meyer <mwm@mired.org>
Cc: python-3000@python.org
Message-ID: <47A99557.2000303@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Mike Meyer wrote:
> On Wed, 06 Feb 2008 01:01:05 +1000 Nick Coghlan <ncoghlan@gmail.com> wrote:
>> While I'm +1 on the idea of making altinstall the default for setup.py 
>> and the Windows installer (forcing the administrator to explicitly 
>> request that the new Python version be made the default Python 
>> installation for the machine), I'm a pretty strong -1 on officially 
>> blessing the idea of a python3 alias or a special py3 extension on 
>> Windows (end users are obviously free to create those if they want, of 
>> course).
> 
> I like the python3 alias (and python2 in 2.X), because it moves us
> from a single default python to having a default python2 and python3,
> which means scripts that care can ask for that without breaking the
> ability to upgrade python2 or python3 without breaking those scripts,
> while still allowing the default python to be either python2 or
> python3.

The main objection I have is that the executable name is only part of 
the story - all of the PYTHON* environment variables may matter as well 
(there are 9 listed in python -h, and I would have to check the code to 
say with complete confidence that there aren't any others).

That said, while as a matter of purity I still think this is a platform 
problem (one which all current platforms I know of handle poorly ;), as 
a matter of practicality I'm seeing some benefits allowing a machine to 
have full fledged ""Python 2"" and ""Python 3"" setups side by side.

If Guido does decide to go the route of changing the interpreter binary 
to python3 (ala sqlite vs sqlite3), I would also suggest that we go the 
whole way and insert a '3' into all of the environment variable names 
that python3 looks for (PYTHON3PATH, PYTHON3STARTUP, etc). I'd even 
concede the utility of accepting the py3 extension on modules as a 
concession to extension based dispatching on Windows.

I still think it would be a bit of an ugly hack, but if it was followed 
through to the point of being able to define separate Python 2 & 3 
environments without the use of launch scripts (i.e. by changing the 
environment variable names as described above), maybe it would still be 
a worthwhile thing to do.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Wed, 6 Feb 2008 01:24:35 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: python-3000@python.org
Message-ID: <20080206012435.44bd22b7@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Wed, 06 Feb 2008 10:32:53 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
> Mike Meyer writes:
>  > On Tue, 05 Feb 2008 08:20:00 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
>  > > Mike Meyer writes:
>  > >  > On Mon, 04 Feb 2008 20:22:04 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
>  > >  > Wrong. The recommend ""make install"" overwrites the ""python"" link.
>  > > Irrelevant.  That ""python"" link is *not involved* in the shebang
>  > > quoted above, and it is not part of any Python installation, precisely
>  > The python link is part of the python install on every system I've
>  > dealt with - including from the source tarballs - as they all install
>  > it, and the vast majority of software that needs python to run expect
>  > to find it there.
> And your point might be?  Did you snip the part where I explained that
> that is irrelevant to my point before reading it?  If not, please

It's not irrelevant, because you're basic assumption is wrong. Or
maybe you're just engaged in wishful thinking. The default python
install includes the python link, and overwrites, much as you might
wish it otherwise.

> To paraphrase the good Samuel Clemens, I think the reports of
> impending Python irrelvancy are vastly overblown. 

So do I. That doesn't mean the situation can't be improved.

> Finally, I have been arguing that the right way is precisely to leave
> it up to the packagers because they have the knowledge and the
> technology to deal with dependencies.

You mean the people you described this way:

> GNUbies *will* ignore you.  ""GNU maintainers"" do not care, by
> Stallman's definition, about the ""right way"" for any system but the
> GNU System.  Unfortunately, there is no such thing as The GNU System,
> so each packager feels free to define what's right for the GNU System
> in terms of their own practices.

Right - they all do it however they feel like, and there's not much we
can do about it. That's not *quite* the same as nothing we can do
about it.

> Python (the project) does not.

Correct. On the other hand, the collective of people here certainly
have more experience at dealing with multiple python installations on
one system than any other group in the world. And you suggest that the
advice from that collective experience that setup.py should offer
packagers on how to deal with this situation is - none?

> As Nick Coghlan put it, ""you're pushing for a language level solution
> to a system level problem: how do we reliably associate files with an
> application that understands them?""

I'm not suggesting any changes to the language. Like you, I'm
suggesting a change to the default install. I happen to believe it
will make most peoples lives easier. 

> This is paradigmatic for why ""python3"" is a nonsolution.

Just because it doesn't solve your solutions doesn't mean it doesn't
solve anyones. And it's sure as hell better than doing nothing.

>  > So you want the default behavior after installing python to be that
>  > the ""python"" command not be found?
> Maybe.  It wouldn't be hard to detect that there is no ""python"" on
> $PATH and finish either the configuration stage or the install stage
> with the warning,
>     **** There is no 'python' on $PATH. ****
>     If you want this version of Python to become your default ""python"",
>     run ""setup.py installdefault"" now.
>     (You may need Administrator or root privileges to do so.)

Yup. So what's the problem with doing the same thing for
python<MAJORVERSIONNUMBER> at the same time?

Personally, I'd rather it just check the install directory and not
$PATH, because you pretty much have to do that if you need different
installs of the same X.Y version. I'd also favor more automation, and
have it offer to run that script rather than just suggest it.

>  > > Sure, both are good things.  But having setup.py provide them is not.
>  > > If the user and/or the distro is providing the link, setup.py should
>  > > assume that they know what they are doing.
>  > If the users are using a packaging system, then what setup.py does -
>  > or does not do - is largely irrelevant. Users will get what the
>  > packagers want them to have, and there's not jack that the people
>  > actually writing the software can do about it.
> No.  If the user is root installing Python as support for system
> software, then what setup.py does can mess up the packaging system,
> and this is the most likely result of having ""python"" and/or ""python2""
> and/or ""python3"" links made by default.

Sure, there are *lots* of ways the user can screw up the system as
root. Doing a default python install from source is *not* one of them,
no matter what it does with those symlinks. If you know of a system
where things are otherwise, please warn me about it now.

>  > If the users get what setup.py provides, then they built from source,
>  > so they at least know how to install and deal with a build
>  > environment, and it's reasonable to assume that they may know a little
>  > bit more than that.
> That's exactly what I just wrote.  I don't understand why you draw the
> conclusion you do, that a ""python3"" link somehow becomes a good idea

I draw that conclusion based on a decade and a half of installing,
maintaining and upgrading python software.

> (rather than a crock pandering to lazy developers downstream).

Damn straight I'm lazy. Computers - all of them - suck bad enough as
it is. Anything I can do to make my life easier is a win.

>  > We can either determine a good way to deal with the issues this
>  > raises,
> Nick's point, and my point, is that all the good ways require either
> downstream developer discipline in use of shebangs that are adequate,
> or system-level support.

True. But you act like making it *easy* for people is somehow
criminal.

>  > and nudge package builders and people doing installs from
>  > source in that direction by making those things the default, or at
>  > least easy;
> Although we disagree on what the semantics should be, what could be
> easier than ""setup.py installdefault"", and still retain some semblance
> of providing minimal opportunity for exercise of responsibility by the
> sysadmin?

I don't really have a problem with that; I just think we should be
looking beyond the end of our noses - uh, 3.0 - and trying to set
things up to make things easier for the system administrator.

>  > or we can do what was done in the 1->2 transition and let
>  > them all work it out for themselves,
> The whole problem is that the RightThang[tm] has nothing to do with
> Python package builders and people who install Python from source.
> The problem is entirely downstream from Python: it is that app
> developers target a specific feature set but are unwilling to make the
> miniscule effort to announce it with a properly specific shebang.

But of course they don't. Your ""properly specific shebang"" will break
on every version of python *after* the one they target, even though
the script would otherwise work. No developer in their right mind
wants to deal with the extra support work that would generate.

> If in fact the Python 2.x for x in 0, ..., 6 are nearly always
> backward compatible, then a better way (but still not perfect) for the
> system or user to solve the problem is for the system to create a
> ""python2.y"" alias for python2.x, for y in 0, ..., x-1. 

Personally, I think *this* is a crock. But if you're going to advocate
that people lie about what versions they have installed, then please
advocate having setup.py do something to encourage people to create
systems that look like this, so that app developers have a reason to
use the shebang line you want them to.

> If you detect a bug (eg, the one that came in with the introduction
> of boolean True), then you can simply override the alias with an
> installation of the needed version.  *This doesn't work with
> ""python2"" shebangs.*

Right. It's not identical, so you have to do something *different* to
solve this problem. With python2, you set the python2 link back to the
previous version. Yeah, you may have to fix the apps that require the
new version, but oddly enough, the more of those scripts there are,
the less likely it is that one of your old apps will barf on that new
version.

Personally, I think that's a *lot* easier than running around creating
or re-creating a bunch of symlinks every time I install or upgrade
python, much less trying to figure out when I really can declare that
I no longer need some version under those conditions. On the other
hand, if setup.py made setting up the symlinks easy, maybe I'd change
my mind.

>  > and risk once again having some popular distro on which ""python"" is
>  > obsolete for the next N years.
> Huh?  Python 1.5.2 was then, and remains now, a better language for my
> purposes than any version of awk, FORTRAN, or Perl I've ever used. :-)
> I only wrote about 10 Python scripts on Red Hat systems, but none of
> them barfed because ""python"" was ""obsolete.""  Red Hat had *lots* of
> other problems, which is why I abandoned it.  Having to type
> ""python2.2"" occasionally was the least of my complaints about RHL
> (which I have been pronouncing ""are hell"" since the last millennium: I
> was shocked, SHOCKED, I tell you, when they chose to make that
> pronunciation the official name of their flagship certified product!)

Much as RHEL may work to remind you that GNU means GNUs Not Unix, it's
still one of the most popular distributions around, and hence liable
to be many people's first exposure to python in a Unix-oid
environment. The more we can do to make that part of their experience
not suck, the more likely they are to consider doing more work in
Python. Not to mention making life better for those of us who have
clients that won't let us include the depenguinator in our list of
required software packages.

	 <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 3
Date: Wed, 6 Feb 2008 09:40:25 -0800
From: ""nathan binkert"" <nate@binkert.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of those!
To: python-3000@python.org
Message-ID:
	<217accd40802060940t627548e2i2b2a32b0a7b42656@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

This is very similar to the #! idea and is really just an extension.

Python 2 clearly cannot execute python 3 code, but how hard would it
be to require something like a
__pyversion__ = 3 statement at the top of the file.  If the line does
not exist, the python3 binary would dlopen libpython2.x and execute
the code.  I understand that the syntax of the two versions are not
compatible, but couldn't the tokenizers be compatible?  Imagine the
python3 binary tokenizing the code, searching for the __pyversion__
line and if it does not exist, doing the dlopen and passing the
tokenized code to the python2.x binary (with some potential
translation to fix any token incompatibility).  if the libpython2.x.so
doesn't exist, then a VersionError could be raised.  If the initial
file does have a __pyversion__ and subsequent files do, then a
VersionError exception could be raised.  This solution could help deal
with code that requires new features.  For example, say I want to use
a with clause, I could require 2.6 or 3.0.

Sorry to prolong an already long conversation.

  Nate


------------------------------

Message: 4
Date: Wed, 06 Feb 2008 19:37:47 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A9FE7B.7090405@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Phillip J. Eby wrote:
> FYI, setuptools uses and supports #! lines on Windows, with the 
> executable path in quotes if it contains spaces.  For a given script 
> ""foo"", it generates two files:
> 
>      foo.exe
>      foo-script.py
> 
> And the .exe is just a standardized .exe file that looks in an 
> adjacent -script.py file of the same name for the #! line.

Nice, it's an elegant and easy solution to the problem. I like to get a
quite similar solution into the core but I propose a slightly different
path.

Like your launcher.c, spam.exe looks for spam.py. It additionally looks
for spam.pyw first giving .pyw files a higher priority.

The first line of the file is read and parsed. The line must start with
a shebang (#!). Contrary to your script it doesn't look for a complete
path but searches for pythonX.Y. ""#!python2.5"" or ""#!/usr/bin/python2.5""
both work.

Then the launcher executable queries the installation path of Python X.Y
from the registry (first HKCU, then HKLM). At last the script is
executed with the Python binary: python.exe for .py and pythonw.exe for
.pyw. The working directory is the absolute path of spam.exe. This way
we neither have to change the paths for Windows scripts nor quote the
path name.

Comments?

Christian


------------------------------

Message: 5
Date: Wed, 06 Feb 2008 19:38:49 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A9FEB9.70701@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Phillip J. Eby wrote:
> FYI, setuptools uses and supports #! lines on Windows, with the 
> executable path in quotes if it contains spaces.  For a given script 
> ""foo"", it generates two files:
> 
>      foo.exe
>      foo-script.py
> 
> And the .exe is just a standardized .exe file that looks in an 
> adjacent -script.py file of the same name for the #! line.

Nice, it's an elegant and easy solution to the problem. I like to get a
quite similar solution into the core but I propose a slightly different
path.

Like your launcher.c, spam.exe looks for spam.py. It additionally looks
for spam.pyw first giving .pyw files a higher priority.

The first line of the file is read and parsed. The line must start with
a shebang (#!). Contrary to your script it doesn't look for a complete
path but searches for pythonX.Y. ""#!python2.5"" or ""#!/usr/bin/python2.5""
both work.

Then the launcher executable queries the installation path of Python X.Y
from the registry (first HKCU, then HKLM). At last the script is
executed with the Python binary: python.exe for .py and pythonw.exe for
.pyw. The working directory is the absolute path of spam.exe. This way
we neither have to change the paths for Windows scripts nor quote the
path name.

Comments?

Christian



------------------------------

Message: 6
Date: Wed, 06 Feb 2008 20:20:13 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <47AA086D.60904@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> My new
> sys._compact_freelists() deallocates the float and int blocks which do
> not contain a referenced object.

I wonder whether such a thing should run as a side effect of a full 
garbage collection, also. GC has a chance to free up arenas for good,
and allocated-but-unused blocks on arenas prevent Python from returning
them to the OS.

Regards,
Martin


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 17
*******************************************
?","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 16","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Namespaces are one honking great idea --	let's	do	more of
      those! (Stephen J. Turnbull)
   2. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Ralf W. Grosse-Kunstleve)
   3. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Wed, 06 Feb 2008 10:32:53 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: Mike Meyer <mwm@mired.org>
Cc: python-3000@python.org
Message-ID: <87r6fquawq.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Mike Meyer writes:
 > On Tue, 05 Feb 2008 08:20:00 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
 > > Mike Meyer writes:
 > >  > On Mon, 04 Feb 2008 20:22:04 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
 > >  > Wrong. The recommend ""make install"" overwrites the ""python"" link.
 > > Irrelevant.  That ""python"" link is *not involved* in the shebang
 > > quoted above, and it is not part of any Python installation, precisely
 > 
 > The python link is part of the python install on every system I've
 > dealt with - including from the source tarballs - as they all install
 > it, and the vast majority of software that needs python to run expect
 > to find it there.

And your point might be?  Did you snip the part where I explained that
that is irrelevant to my point before reading it?  If not, please
explain; I've already explained (better expressed as ""setup.py
installdefault"", see below) how I propose that practical issue be
dealt with both sanely and compatibly.

 > Right. And the packaging system is what most people deal with in the
 > real world. Ignoring the real world is a good way to become
 > irrelevant. And while we can't control them (GNU/Linux packagers have
 > a really nasty habit of installing software configured in ways the
 > author doesn't want to support), we can at least nudge them in the
 > right direction by making it easy to do things in what we consider to
 > be the best way.

GNUbies *will* ignore you.  ""GNU maintainers"" do not care, by
Stallman's definition, about the ""right way"" for any system but the
GNU System.  Unfortunately, there is no such thing as The GNU System,
so each packager feels free to define what's right for the GNU System
in terms of their own practices.  This is paradigmatic for why
""python3"" is a nonsolution.

To paraphrase the good Samuel Clemens, I think the reports of
impending Python irrelvancy are vastly overblown.  As my friend Tom
Lord puts it, the vast majority of software doesn't exist yet.  The
battleground for relevancy lies in the future.

Finally, I have been arguing that the right way is precisely to leave
it up to the packagers because they have the knowledge and the
technology to deal with dependencies.  Python (the project) does not.
As Nick Coghlan put it, ""you're pushing for a language level solution
to a system level problem: how do we reliably associate files with an
application that understands them?""

 > So you want the default behavior after installing python to be that
 > the ""python"" command not be found?

Maybe.  It wouldn't be hard to detect that there is no ""python"" on
$PATH and finish either the configuration stage or the install stage
with the warning,

    **** There is no 'python' on $PATH. ****
    If you want this version of Python to become your default ""python"",
    run ""setup.py installdefault"" now.
    (You may need Administrator or root privileges to do so.)

 > > Sure, both are good things.  But having setup.py provide them is not.
 > > If the user and/or the distro is providing the link, setup.py should
 > > assume that they know what they are doing.
 > 
 > If the users are using a packaging system, then what setup.py does -
 > or does not do - is largely irrelevant. Users will get what the
 > packagers want them to have, and there's not jack that the people
 > actually writing the software can do about it.

No.  If the user is root installing Python as support for system
software, then what setup.py does can mess up the packaging system,
and this is the most likely result of having ""python"" and/or ""python2""
and/or ""python3"" links made by default.

OTOH, if they're installing into a non-system location, the text above
is more than sufficient warning to those with the ability and courage
to successfully run ""setup.py install"" from tarballs.

 > If the users get what setup.py provides, then they built from source,
 > so they at least know how to install and deal with a build
 > environment, and it's reasonable to assume that they may know a little
 > bit more than that.

That's exactly what I just wrote.  I don't understand why you draw the
conclusion you do, that a ""python3"" link somehow becomes a good idea
(rather than a crock pandering to lazy developers downstream).

 > We can either determine a good way to deal with the issues this
 > raises,

Nick's point, and my point, is that all the good ways require either
downstream developer discipline in use of shebangs that are adequate,
or system-level support.

 > and nudge package builders and people doing installs from
 > source in that direction by making those things the default, or at
 > least easy;

Although we disagree on what the semantics should be, what could be
easier than ""setup.py installdefault"", and still retain some semblance
of providing minimal opportunity for exercise of responsibility by the
sysadmin?

 > or we can do what was done in the 1->2 transition and let
 > them all work it out for themselves,

The whole problem is that the RightThang[tm] has nothing to do with
Python package builders and people who install Python from source.
The problem is entirely downstream from Python: it is that app
developers target a specific feature set but are unwilling to make the
miniscule effort to announce it with a properly specific shebang.

If in fact the Python 2.x for x in 0, ..., 6 are nearly always
backward compatible, then a better way (but still not perfect) for the
system or user to solve the problem is for the system to create a
""python2.y"" alias for python2.x, for y in 0, ..., x-1.  If you detect
a bug (eg, the one that came in with the introduction of boolean
True), then you can simply override the alias with an installation of
the needed version.  *This doesn't work with ""python2"" shebangs.*  You
must also fix the app's shebangs.  If you upgrade the app, you must
remember to fix the shebangs again.  (""Remember"" includes maintaining
local and vendor branches in a SCM of course.)

 > and risk once again having some popular distro on which ""python"" is
 > obsolete for the next N years.

Huh?  Python 1.5.2 was then, and remains now, a better language for my
purposes than any version of awk, FORTRAN, or Perl I've ever used. :-)

I only wrote about 10 Python scripts on Red Hat systems, but none of
them barfed because ""python"" was ""obsolete.""  Red Hat had *lots* of
other problems, which is why I abandoned it.  Having to type
""python2.2"" occasionally was the least of my complaints about RHL
(which I have been pronouncing ""are hell"" since the last millennium: I
was shocked, SHOCKED, I tell you, when they chose to make that
pronunciation the official name of their flagship certified product!)



------------------------------

Message: 2
Date: Tue, 5 Feb 2008 19:53:25 -0800 (PST)
From: ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: python-3000@python.org
Message-ID: <865955.18383.qm@web31106.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii

Stephen J. Turnbull wrote:

> Some, 
like 
the 
""field 
heavyweight"" 
quoted 
by 
the 
OP, 
are 
refreshingly
> pragmatic 
about 
it.  
They're 
quite 
happy 
to 
use 
a 
language 
that 
is
> pretty 
crappy 
for 
most 
purposes 
today 
considered 
practical 
because 
it
> does 
a 
great 
job 
of 
continuing 
to 
run 
the 
programs 
written 
to 
address
> the 
""practical 
purposes"" 
of 
three 
decades 
ago 
(if 
I 
interpret 
the 
""76""
> in 
""SHELX-76"" 
correctly).

He is one of the brightest people you'll find on this planet. His set
of programs still is a de-facto standard, used to solve the vast majority
of (small molecule) crystal structures. To know what that means,
consider that without his work, you wouldn't be sitting in front of
*that* computer. It would be a different computer in a different world.

> Others, 
like 
the 
OP, 
want 
to 
freeze 
Python 
and 
request 
that 
updated
> versions 
be 
considered 
an 
internal 
fork 
in 
the 
project 
rather 
than
> evolutionary[1] 
progress 
whenever 
their 
inconvenience 
tolerance 
(which
> is 
clearly 
high 
in 
the 
OP's 
case, 
let's 
not 
belittle 
that!) 
is
> exceeded.

It remains to be seen if your idea of ""evolution"" will still be
remembered in 30 years. From all I've seen, arbitrarily introducing
hardships in the name of progress doesn't work out in practice.
Look around. C++ is dirty but got big because it never seriously broke
with the C heritage. Microsoft is the biggest software company in the world
even though the OS is dirty, but my DOS Turbo C compiler from 1990
probably still runs on a Windows XP system. Apple's market share
in the OS market is still tiny in comparison, I'd argue to a significant
degree because they were constantly ""innovating"".

I'm not at all convinced Python 3 will succeed, although I'm hoping
for it. Introducing a break like that without at the same time
introducing new technologies is in stark violation of
""practicality beats purity.""

My personal battle is to not see my own work die a slow death because
everybody in my field thinks I must be crazy to base my work on something
that is one day this and the next day something incompatible. If you
give it a new name at least, it will be much easier for me to explain
and stand my ground. Also, look at the sqlite experience:

http://mail.python.org/pipermail/python-3000/2008-February/011991.html

You really need to be able to have both the old and the new in the same
environment indefinitely, and it has to be easily predictable what you get
when you run ""python"".

Ralf





------------------------------

Message: 3
Date: Wed, 06 Feb 2008 15:39:50 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com>
Cc: python-3000@python.org
Message-ID: <87lk5ytwp5.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Ralf W. Grosse-Kunstleve writes:

 > Stephen J. Turnbull wrote:

[really butchered quotes omitted]

 > [Prof. George Sheldrick] is one of the brightest people you'll find
 > on this planet.

Ad hominem argument.  My point is simply that he knows what he needs
and said so.  He doesn't need a language able to evolve with the
times.  Good for him.

 > It remains to be seen if your idea of ""evolution"" will still be
 > remembered in 30 years.

It will, if only because it's not mine, but rather Stephen Jay
Gould's.

 > From all I've seen, arbitrarily introducing hardships in the name
 > of progress doesn't work out in practice.

Who's introducing hardships?  The hardships are inherent in progress
in a language.  All I've argued is that the way you want to deal with
these hardships is fundamentally broken in the face of a rapidly
evolving language.  The right way is for the app to declare the API it
needs, and for the system to point to a version that provides that
API.

A quick and dirty but basically right solution is available for
systems that understand the shebang: put the fully-versioned name in
the shebang, and make links from the ""best"" version available to all
versions it can support.

 > My personal battle is to not see my own work die a slow death because
 > everybody in my field thinks I must be crazy to base my work on something
 > that is one day this and the next day something incompatible.

If so, I feel for you.  Nevertheless, even if they do,
that's not Python's problem to solve.

 > If you give it a new name at least, it will be much easier for me
 > to explain and stand my ground.

What's wrong with ""Python 2.4"" (or whatever)?  It's not like the
vendor is going to go out of business or strategically stop
distributing it.  It's not like all the programmers familiar with
Python 2 idioms are going to get their brains wiped.  It's not like
all the familiar modules will suddenly stop working with Python 2.
It's not like the community will suddenly refuse to answer your
questions because you're working with Python 2.

And it's not like Python 2 will stop being a language far more suited
to rapid evolution of your application than FORTRAN.

 > You really need to be able to have both the old and the new in the
 > same environment indefinitely, and it has to be easily predictable
 > what you get when you run ""python"".

If you think you depend on predictability of ""what you get when you
run 'python'"", I hope you're wrong, because it's not dependable unless
you ""own"" the OS distribution that your users run on and all of their
other applications, too.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 16
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 15","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Free list for small longs (Christian Heimes)
   2. Re: Free list for small longs (Christian Heimes)
   3. Re: Free list for small longs (Martin v. L?wis)
   4. Re: Free list for small longs (Christian Heimes)
   5. Re: pickle, cPickle, and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Jesus Cea)
   6. Re: Free list for small longs (Martin v. L?wis)
   7. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Charles Merriam)
   8. Re: Free list for small longs (Brett Cannon)
   9. Re: Free list for small longs (Christian Heimes)
  10. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Tue, 05 Feb 2008 21:26:44 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: skip@pobox.com
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A8C684.20002@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

skip@pobox.com wrote:
> I'm not sure what you mean by ""size of 1 or -1"".  Do you mean you only keep
> the numbers 1 and -1 on the free list?  It's not obvious to me what a size
> of -1 is.  Do you mean positive and negative numbers which fit in one byte
> or one long word?

I should have explained how longs use the object size. The absolute
value of Python long is stored is an array of digits (unsigned short).
For Negative values Python longs set the ob_size to a negative value.

>From Include/longintpr.h:

/* Long integer representation.
   The absolute value of a number is equal to
        SUM(for i=0 through abs(ob_size)-1) ob_digit[i] * 2**(SHIFT*i)
   Negative numbers are represented with ob_size < 0;
   zero is represented by ob_size == 0.
   In a normalized number, ob_digit[abs(ob_size)-1] (the most significant
   digit) is never zero.  Also, in all cases, for all valid i,
        0 <= ob_digit[i] <= MASK.
   The allocation function takes care of allocating extra memory
   so that ob_digit[0] ... ob_digit[abs(ob_size)-1] are actually available.

   CAUTION:  Generic code manipulating subtypes of PyVarObject has to
   aware that longs abuse  ob_size's sign bit.
*/

Christian


------------------------------

Message: 2
Date: Tue, 05 Feb 2008 21:31:17 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: Brett Cannon <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A8C795.10001@cheimes.de>
Content-Type: text/plain; charset=UTF-8

Brett Cannon wrote:
> I think Christian means single digit integers. But I thought we
> already did this for positive numbers? So is the proposal to also
> cover negative numbers?

Ne, we don't use a free list for longs. In the 2.x series floats and
ints are allocated in blocks of 1000 objects. The 3.x series uses the
approach for floats only. Longs are always allocated with a free list
unless the value is in between -5 and +256. These longs are statically
allocated using an array.

> And obviously having a single loop that explicitly tests the
> optimization is not exactly indicative of real-world use. =)

Damn, you got me  ;)

Christian




------------------------------

Message: 3
Date: Tue, 05 Feb 2008 21:44:50 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A8CAC2.2070609@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Since the free list is limited to small longs, it will consume less than
> 1,5 MB on a 64bit OS and less than 900kb on a 32bit OS in a worst case
> scenario (2 * (1<<15) ~ 65k objects with a size of 14 / 22 byte each).

I'm puzzled as to how you arrive at this upper bound. You can surely
have more than 2**16 integer objects whose abs values are all
below 2**15, no?

smallints=[]
for i in range(2**20):
   smallints.append(i % 30000)

Regards,
Martin


------------------------------

Message: 4
Date: Tue, 05 Feb 2008 22:47:11 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: python-3000@python.org
Message-ID: <foalh0$60e$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis wrote:
> I'm puzzled as to how you arrive at this upper bound. You can surely
> have more than 2**16 integer objects whose abs values are all
> below 2**15, no?

Oh ... I see. You are right and I did a mistake by confusing the amount
of objects with the range. I'd better add an upper bound check.



------------------------------

Message: 5
Date: Tue, 05 Feb 2008 22:58:20 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] pickle, cPickle, and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: Python 3000 <python-3000@python.org>
Message-ID: <47A8DBFC.5090704@argo.es>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jim Fulton wrote:
| On Jan 25, 2008, at 12:07 AM, Guido van Rossum wrote:
|> (*) I can only speculate that it's because Jim, whose ZODB is probably
|> pickle's most intensive user,
|
| Maybe, but I'm not sure.

Any persistence system is pickle intensive. Aside ZODB, we have Durus
also. Do not forget remote call systems, like Pyro or most instances of
parallel python attempts.

pickle/cpickle performance is important.

In fact, I find ""disturbing"" that ""bencode"" (from BitTorrent), done 100%
in python, is faster that cPickle. Yes, ""bencode"" can't encode arbitrary
objects, but still...

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
~                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR6jb+5lgi5GaxT1NAQLhnAP8COAFON7zALBX+4peFKH6LwlxA65IptqW
Xg40Z3UZUo5bi67vkCvI/SuNLYpcvez2S5LTBrrlCHTWu4DSdI7/K9KPzQ8rbIdn
EfCwuvSWOAKJ/mvTFA1LP0RixNd/+MTllFq+9TbOIe8EYZ/UbNLj4StqQBNGydjY
KAmntN4VBnE=
=C+TR
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Tue, 05 Feb 2008 23:30:14 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Free list for small longs
To: Brett Cannon <brett@python.org>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>
Message-ID: <47A8E376.8000308@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> I think Christian means single digit integers. But I thought we
> already did this for positive numbers? So is the proposal to also
> cover negative numbers?

We don't have a free list, but a cache for them, and only for numbers
between -5 and +256. Christian proposes a freelist, similar to the
special allocate in 2.x.

Regards,
Martin


------------------------------

Message: 7
Date: Tue, 5 Feb 2008 14:39:36 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Jim Jewett"" <jimjjewett@gmail.com>
Cc: Python 3000 <python-3000@python.org>, Nick Coghlan
	<ncoghlan@gmail.com>
Message-ID:
	<b8c6f6c40802051439o2d4b87cm33f0db72e234a4d0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I agree.  A wiki page for ""leaving just the head of the snake"" would
be the correct solution.

On Feb 4, 2008 4:34 PM, Jim Jewett <jimjjewett@gmail.com> wrote:
> On 2/4/08, Charles Merriam <charles.merriam@gmail.com> wrote:
> > What about a formal dependency plan instead?
>
> > Python would remain 'batteries included', perhaps verging on 'kitchen
> > sink included'.
>
> > Those users working to embed Python or work in other situations where
> > a large set of available libraries is a problem would have some help
> > in cutting down the footprint in an particular installation.  That is,
> > one could freely delete some set of libraries and be fairly sure the
> > resulting library set would still run.  What was left would be a
> > smaller footprint interpreted language, just not 'Python'.
>
> > Under what circumstances is this a poor idea?   ""Hard drive space is
> > expensive"" is not an acceptable argument.
>
> (1)   Many library modules *use* other modules, but don't really
> *rely* on them.  Only a little functionality would be lost.  That sort
> of roadmap would encourage the functionality to get left out entirely,
> and would certainly increase the amount of fallback boilerplate.
>
> (2)  In bureaucratic environments, the libraries are OK because they
> are standard; if a more minimal distribution becomes equally standard,
> that will cause problems.  (It wouldn't be nearly as bad as taking
> them out and requiring downloads, but it would still be a problem,
> because of the need to justify the non-minimal version.)
>
> (3)  If storage footprint is important, then it is also important for
> deployed applications -- and it becomes awkward if you have to
> sprinkle your own code with fallbacks and workarounds in case the
> standard library was clipped.
>
> That said, it might be useful if it were kept at unofficial status,
> such as a wiki page.
>
> -jJ
>


------------------------------

Message: 8
Date: Tue, 5 Feb 2008 15:05:29 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Free list for small longs
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>
Message-ID:
	<bbaeab100802051505l37d23a87p5d8af58c317db63c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 5, 2008 2:30 PM, ""Martin v. L?wis"" <martin@v.loewis.de> wrote:
> > I think Christian means single digit integers. But I thought we
> > already did this for positive numbers? So is the proposal to also
> > cover negative numbers?
>
> We don't have a free list, but a cache for them, and only for numbers
> between -5 and +256. Christian proposes a freelist, similar to the
> special allocate in 2.x.

Gotcha.

Well, I am a little leery of another free list. I personally don't
love the fact that there are various caches and free lists laying
about in the code without a central place to turn them off or clear
them (or at least list them in a comment somewhere). And the problem
with the free lists that the caches don't have is that they assume
everyone gets a performance perk from them when there is a chance no
one will ever touch a thing in the free lists.

-Brett

------------------------------

Message: 9
Date: Wed, 06 Feb 2008 00:51:20 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Free list for small longs
To: python-3000@python.org
Message-ID: <foaspo$tbc$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8

Brett Cannon wrote:
> Well, I am a little leery of another free list. I personally don't
> love the fact that there are various caches and free lists laying
> about in the code without a central place to turn them off or clear
> them (or at least list them in a comment somewhere). And the problem
> with the free lists that the caches don't have is that they assume
> everyone gets a performance perk from them when there is a chance no
> one will ever touch a thing in the free lists.

I understand your objection. Most free lists and caches are limited but
some are not. I'm worried about the float and int blocks. Python's
memory management never frees an int or float block. Code like

>>> x = [float(i) for i in list(range(1000000))]
>>> del x

creates a million float and int objects but *never* frees the memory
until Python exists. It's a pathologic case but it shows a problem. I've
started to implement an API to compact the free lists,
PyNAME_CompactFreelist() and sys._compact_freelists(). My new
sys._compact_freelists() deallocates the float and int blocks which do
not contain a referenced object.

Most free lists are limited except the int (2.x only ) and float blocks.
The overview may not be complete and 2.x may have more free lists.

bytesobject
-----------
no free list, only a single nullbyte

classobject
-----------
unlimited *free_list of PyMethodObject

dictobject
----------
*free_dicts[] limited to 80 entries

frameobject
-----------
a zombie frame on each code object
limited *free_list (linked list) with 200 entries max

floatobject
-----------
unlimited blocks of allocated floats with 1000 entries each
The blocks are a single linked list and the free floats are
linked by ob_type (ob_type points to the next free float).

intobject (2.x)
---------------
same as floatobject

listobject
----------
*free_lists[] limited to 80 entries

longobject
----------
cache for small number between -5 and +256
my patch for a limited free list

methodobject
------------
unlimited *free_list of PyCFunctionObject

setobject
---------
*free_sets[] limited to 80 entries

stringobject
------------
cache for nullstring and strings with one entry
interned strings (2.x only)

tupleobject
-----------
20 free lists for tuples with up to 20 entries. Each free list is
limited to 2000 entries.

unicodeobject
-------------
*unicode_freelist limited to 1024 entries


Christian



------------------------------

Message: 10
Date: Wed, 06 Feb 2008 09:32:59 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Adam Olsen"" <rhamph@gmail.com>
Cc: ""Phillip J. Eby"" <pje@telecommunity.com>, python-3000@python.org,
	Mike Meyer <mwm@mired.org>
Message-ID: <87sl06udok.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Adam Olsen writes:

 > > Setuptools [pybang] works with versions 2.3 through 2.5, but of
 > > course that's because of the .exe wrappers.

As independent corroboration, this is basically the same way that
DJGPP (the DOS-extended version of GCC) provides Unix-y features like
access to the environment variables and command line parsing
(including redirection and pipes).  Of course since DJGPP produces
.exes, all it requires to use the feature is an #include.

 > Sounds good enough to me.  Maybe the only thing ""wrong"" is people
 > aren't sufficiently informed of how to be version-specific?

I think it's worse than that.  People don't *want* to be version-
specific (rather, they feel it is being ""imposed"" on them), and they
generally believe that their particular feature dependencies are quite
general and deserve conservation across version changes.

Some, like the ""field heavyweight"" quoted by the OP, are refreshingly
pragmatic about it.  They're quite happy to use a language that is
pretty crappy for most purposes today considered practical because it
does a great job of continuing to run the programs written to address
the ""practical purposes"" of three decades ago (if I interpret the ""76""
in ""SHELX-76"" correctly).

Others, like the OP, want to freeze Python and request that updated
versions be considered an internal fork in the project rather than
evolutionary[1] progress whenever their inconvenience tolerance (which
is clearly high in the OP's case, let's not belittle that!) is
exceeded.

Footnotes: 
[1]  Cf. ""punctuated equilibrium"" for my notion of ""evolution.""



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 15
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 14","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Mike Meyer)
   2. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Adam Olsen)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Phillip J. Eby)
   4. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Adam Olsen)
   5. Re: Namespaces are one honking great idea -- let's do	more of
      those! (Robert Brewer)
   6. Free list for small longs (Christian Heimes)
   7. Re: Free list for small longs (skip@pobox.com)
   8. Re: Free list for small longs (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Tue, 5 Feb 2008 11:22:32 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Nick Coghlan <ncoghlan@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080205112232.34bc5c80@mbook-fbsd>
Content-Type: text/plain; charset=US-ASCII

On Wed, 06 Feb 2008 01:01:05 +1000 Nick Coghlan <ncoghlan@gmail.com> wrote:

> Ralf W. Grosse-Kunstleve wrote:
> > Nick Coghlan wrote:
> > 
> >> I personally haven't seen anything to convince me that the 2.x -> 3.0 
> >> upgrade cycle is going to be significantly worse from a deployment point 
> >> of view than a 2.x -> 2.(x+2) upgrade cycle where breakages are also 
> >> possible (e.g. code using 'with' or 'as' as identifiers runs just fine 
> >> on 2.4 or 2.5, but that code is going to break in 2.6).
> > 
> > The 2.x -> 3.0 transition will be *very* different. We're using Python
> > since 2000, version 1.5.2. I've always upgraded to the latest release
> > and got it working with a few fairly minor tweaks. Importantly, I
> > could do this without breaking backward compatibility if I wanted to.
> > At some point we had to give up on 1.5.2 compatibility, but that was
> > just because of Boost.Python requirements (only works with new-style
> > classes).
> > 
> > IIUC, there is no conservative upgrade path for Python 3.0. Once the
> > transition is done, the code will only work with 3.0. The bridge to
> > older Python versions is completely broken. Python 2.x will not even
> > parse most Python 3 scripts and vice versa. That's a situation we never
> > had before.
> 
> I still see this as a difference in degree rather than a difference in 
> kind. As soon as a developer puts ""from __future__ import 
> absolute_imports"" or ""from __future__ import with_statement"" in their 
> script every version of Python prior to 2.5 is going to refuse to even 
> compile it. If they provide an old script which uses an identifier which 
> is now a keyword, it is the more recent versions which are going to 
> object violently.

The one real difference is that you can generally go from 2.X to 2.Y>X
without mucking with your scripts so long as you update all the
modules you use as well. In an environment managed with package
systems, this is usually easy.

> Either way, the solution is the same: run that particular script with a 
> version of the interpreter that can handle it correctly. Make that 
> happen by whatever means your platform makes available (on Windows it 
> usually means batch files, on Unix'y systems a version specific shebang 
> line or a shell script).

Version-specific shebangs break the above property. It's possible to
have multiple versions installed and have everything work without
going to that. But your system vendor probably won't support it :-(.

> (Note again that all of these issues are only particularly difficult to 
> deal with in the case of applications which are written in Python and 
> intended to be used on a system someone else controls. When the same 
> entity controls both the application and the runtime environment - such 
> as web services, embedded systems, or applications that bundle their own 
> Python interpreter - it is merely necessary that the environment is kept 
> in sync as the needs of the code change)

Right. I live in the last world, because I've found that it's nearly
impossible to get ""someone else"" to provide adequate python builds.

> > As Python developers you have to realize that for many people Python is
> > ""just"" a core around which they build much bigger applications.
> 
> Strange as it may seem, at least some of us do exactly that as part of 
> our day jobs ;)

Yup.

> > If the
> > success of Python is to continue, you have to give your large user
> > base a clear path to working with two co-existing Python versions,
> > so that installing a Python 3 application doesn't break all Python 2
> > applications (some of which may never be converted since the original
> > developers have moved on).
> 
> You mean the way you can already have Python 1.5, 2.0, 2.1, 2.2, 2.3, 
> 2.4 and 2.5 all installed on the same machine, and invoke different 
> versions for different applications?
> 
> Yes, only one of them can be the 'default Python' for the machine,

Actually, that's not *quite* true.

One of the reasons you can install Python from source on most systems
- even using the default install - without breaking all the tools that
depend on the system's anointed version is because it install
/usr/local/bin/python. A system required version almost always lives
in /usr/bin, and is invoked with that path. Even systems that don't
have Python in the default install generally put packages somewhere
other than /usr/local (FreeBSD is the one exception I know of).

For one client, we had /usr/bin/python, a 64-bit 2.3 python;
/oap/bin/python, a 32-bit 2.4 python without ssl support (from the IT
support group, because they wanted the same language ""everywhere""),
and /home/<application>/bin/python, a 64-bit 2.4 python with the ssl
support we required. The scripts all invoked the python they needed by
absolute path. The biggest problem we had was getting the developers
environment set up so they invoked the right python at the command
line for testing.

> language interpreter. To choose an example which affected me relatively 
> recently, how many shell scripts did the Ubuntu folks break when they 
> decided to change their default shell from bash to dash ""because it is 
> faster"" instead of explicitly invoking dash for the particular scripts 
> they wanted to speed up? That was one configuration change I reverted 
> pretty darn quickly, because there are a hell of a lot of shell scripts 
> out there which rely on bash extensions, even if the developers didn't 
> realise it when they wrote the scripts.

And those of use who use systems where bash *isn't* the default shell,
and never has been, wish all those developers would get a clue, and
write ""#!/usr/bin/env bash"" (or at least ""#!/bin/bash"") instead of
""#!/bin/sh"", and reserve the latter for scripts that really are
*shell* scripts. Sorry, that's a sore spot...

> While I'm +1 on the idea of making altinstall the default for setup.py 
> and the Windows installer (forcing the administrator to explicitly 
> request that the new Python version be made the default Python 
> installation for the machine), I'm a pretty strong -1 on officially 
> blessing the idea of a python3 alias or a special py3 extension on 
> Windows (end users are obviously free to create those if they want, of 
> course).

I like the python3 alias (and python2 in 2.X), because it moves us
from a single default python to having a default python2 and python3,
which means scripts that care can ask for that without breaking the
ability to upgrade python2 or python3 without breaking those scripts,
while still allowing the default python to be either python2 or
python3.

> Who knows, with the rate at which virtual machine technology is 
> improving, this whole thing may become a non-issue by the time the 3.x 
> series is even ready for production use. One VM with a 2.x default 
> Python, another VM with a 3.x default Python, various applications 
> associated with each, and seamless integration into the underlying 
> platform so the user never even notices a VM is involved.

That just changes the environment from one where you have to find the
right python to one where you have to find the right VM. But you don't
have to go to that extreme; just keeping the different pythons
separated by directory, and making sure the scripts specify the right
directory as part of the shebang works (at lest for Unix).

	  <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 2
Date: Tue, 5 Feb 2008 10:43:40 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Mike Meyer"" <mwm@mired.org>
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0802050943r54e7d926o6c93019453b50756@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 4, 2008 4:56 PM, Mike Meyer <mwm@mired.org> wrote:
> On Mon, 4 Feb 2008 15:34:56 -0800 (PST) ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com> wrote:
> > As Python developers you have to realize that for many people Python is
> > ""just"" a core around which they build much bigger applications. If the
> > success of Python is to continue, you have to give your large user
> > base a clear path to working with two co-existing Python versions,
> > so that installing a Python 3 application doesn't break all Python 2
> > applications (some of which may never be converted since the original
> > developers have moved on). For example, I really need to be able
> > to use wxPython based on Python 2 and wxPython based on Python 3
> > simultaneously on my Windows machine. I'm thinking this is only
> > possible if Python 3 uses a new file extension.
>
> I think the key word here is ""Windows"". I have no trouble doing all of
> this on a Unix system without changing the extensions, but it's a lot
> less dependent on file extensions.

So why don't we add a windows equivalent of the shebang?  Files could
then start like this:

#!/usr/bin/python2.3
#?C:/python23/python

Of course, something better than ? needs to be chosen.

A problem with this approach is that, if you only had 2.3 and 2.5
installed, both it'd be completely ignored.  You'd need to install a
newer version (2.6 or 3.0) to force the use of 2.3.


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 3
Date: Tue, 05 Feb 2008 12:57:58 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Adam Olsen"" <rhamph@gmail.com>, ""Mike Meyer"" <mwm@mired.org>
Cc: python-3000@python.org
Message-ID: <20080205175802.3FBF93A409E@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""iso-8859-1""; format=flowed

At 10:43 AM 2/5/2008 -0700, Adam Olsen wrote:
>So why don't we add a windows equivalent of the shebang?  Files could
>then start like this:
>
>#!/usr/bin/python2.3
>#?C:/python23/python

FYI, setuptools uses and supports #! lines on Windows, with the 
executable path in quotes if it contains spaces.  For a given script 
""foo"", it generates two files:

     foo.exe
     foo-script.py

And the .exe is just a standardized .exe file that looks in an 
adjacent -script.py file of the same name for the #! line.

(This is of course only for scripts generated using 
setuptools-specific features.)


>A problem with this approach is that, if you only had 2.3 and 2.5
>installed, both it'd be completely ignored.  You'd need to install a
>newer version (2.6 or 3.0) to force the use of 2.3.

Setuptools works with versions 2.3 through 2.5, but of course that's 
because of the .exe wrappers.



------------------------------

Message: 4
Date: Tue, 5 Feb 2008 11:13:11 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org, Mike Meyer <mwm@mired.org>
Message-ID:
	<aac2c7cb0802051013y6b389da8w8af07beb9b117b0d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 5, 2008 10:57 AM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 10:43 AM 2/5/2008 -0700, Adam Olsen wrote:
> >So why don't we add a windows equivalent of the shebang?  Files could
> >then start like this:
> >
> >#!/usr/bin/python2.3
> >#?C:/python23/python
>
> FYI, setuptools uses and supports #! lines on Windows, with the
> executable path in quotes if it contains spaces.  For a given script
> ""foo"", it generates two files:
>
>      foo.exe
>      foo-script.py
>
> And the .exe is just a standardized .exe file that looks in an
> adjacent -script.py file of the same name for the #! line.
>
> (This is of course only for scripts generated using
> setuptools-specific features.)
>
>
> >A problem with this approach is that, if you only had 2.3 and 2.5
> >installed, both it'd be completely ignored.  You'd need to install a
> >newer version (2.6 or 3.0) to force the use of 2.3.
>
> Setuptools works with versions 2.3 through 2.5, but of course that's
> because of the .exe wrappers.

Sounds good enough to me.  Maybe the only thing ""wrong"" is people
aren't sufficiently informed of how to be version-specific?


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 5
Date: Tue, 5 Feb 2008 10:34:22 -0800
From: ""Robert Brewer"" <fumanchu@aminus.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of those!
To: <python-3000@python.org>
Message-ID:
	<F1962646D3B64642B7C9A06068EE1E6402075467@ex10.hostedexchange.local>
Content-Type: text/plain;	charset=""US-ASCII""

I took the liberty of asking DRH's advice based on his experiences with
sqlite/2/3, and he graciously replied:

> -----Original Message-----
> From: drh@hwaci.com [mailto:drh@hwaci.com]
> Sent: Tuesday, February 05, 2008 10:02 AM
> To: Robert Brewer
> Subject: Re: Python 3 needs your help
> 
> ""Robert Brewer"" <fumanchu@aminus.org> wrote:
> > Hello,
> >
> > There has been some discussion [1] lately on whether to rename the
> > ""python"" interpreter to ""python3"" for Python 3.0. I immediately
> > thought of ""sqlite3"" of course, and wondered if you had any advice
> > for the Python developers about the benefits or hardships of your
> > naming choices for sqlite. If you had just a couple minutes to add
> > your experience to the discussion, it'd be a big help.
> 
> The primary reason from going from ""sqlite"" to ""sqlite3"" was to
> allow the same application to link against both libraries at the
> same time.  This was important during the transition period since
> some programs needed to be able to read an SQLite v2 database then
> write the content over to an SQLite v3 database as part of the
> upgrade process.  Even today, three years into version 3, there
> still exist important programs (ex: PHP) which link against both
> libraries by default.
> 
> I do not recall encountering any problems with the ""sqlite3"" name.
> Nobody has complained.  And we have not had any negative experiences.
> Everything has worked out well.
> 
> If you are referring to the name of the SQLite CLI program as opposed
> to the library, it is convenient to have a separate name for the
> version 3 CLI since we often need to both the older version 2 and
> new version 3 programs at the same time.  For example, to upgrade a
> legacy database:
> 
>     sqlite olddatabase .dump | sqlite3 newdatbase
> 
> There are still many sqlite version 2 databases around, and so it
> is important to be able to have both older ""sqlite"" and newer
""sqlite3""
> binaries in your PATH.  I can imagine that it will similarly be
> convenient to have both ""python"" and ""python3"" in your PATH at the
> same time.
> 
> I think calling it ""python3"" is probably a good idea.
> 
> --
> D. Richard Hipp <drh@hwaci.com>



------------------------------

Message: 6
Date: Tue, 05 Feb 2008 21:04:25 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: [Python-3000] Free list for small longs
To: Python 3000 <python-3000@python.org>
Message-ID: <47A8C149.1020407@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

I've implemented a free list for small long objects with a size of 1 or
-1. I wanted to test how large the malloc overhead is. The result was
astonishing. The free list quadrupled the speed of a simple test:

$ ./python -m timeit ""for i in range(100): list(range(1000))""

Without patch:
10 loops, best of 3: 79 msec per loop

With patch:
10 loops, best of 3: 20.8 msec per loop

Since the free list is limited to small longs, it will consume less than
1,5 MB on a 64bit OS and less than 900kb on a 32bit OS in a worst case
scenario (2 * (1<<15) ~ 65k objects with a size of 14 / 22 byte each).

http://bugs.python.org/issue2013

Christian


------------------------------

Message: 7
Date: Tue, 5 Feb 2008 14:13:29 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Free list for small longs
To: Christian Heimes <lists@cheimes.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <18344.50025.175774.601181@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Christian> I've implemented a free list for small long objects with a
    Christian> size of 1 or -1.

I'm not sure what you mean by ""size of 1 or -1"".  Do you mean you only keep
the numbers 1 and -1 on the free list?  It's not obvious to me what a size
of -1 is.  Do you mean positive and negative numbers which fit in one byte
or one long word?

Skip


------------------------------

Message: 8
Date: Tue, 5 Feb 2008 12:23:07 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Free list for small longs
To: skip@pobox.com
Cc: Python 3000 <python-3000@python.org>, Christian Heimes
	<lists@cheimes.de>
Message-ID:
	<bbaeab100802051223i3c10fe7ep9505ef63473594df@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 5, 2008 12:13 PM,  <skip@pobox.com> wrote:
>
>     Christian> I've implemented a free list for small long objects with a
>     Christian> size of 1 or -1.
>
> I'm not sure what you mean by ""size of 1 or -1"".  Do you mean you only keep
> the numbers 1 and -1 on the free list?  It's not obvious to me what a size
> of -1 is.  Do you mean positive and negative numbers which fit in one byte
> or one long word?

I think Christian means single digit integers. But I thought we
already did this for positive numbers? So is the proposal to also
cover negative numbers?

And obviously having a single loop that explicitly tests the
optimization is not exactly indicative of real-world use. =)

-Brett


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 14
*******************************************
?????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 13","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Nick Coghlan)
   2. PYTHONPATH in Python 3.0 (was: Namespaces are one	honking
      ...) (skip@pobox.com)
   3. Re: Namespaces are one honking great idea -- let's do more of
      those! (Mike Meyer)
   4. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Mike Meyer)
   5. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Mike Meyer)


----------------------------------------------------------------------

Message: 1
Date: Wed, 06 Feb 2008 01:01:05 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com>
Cc: python-3000@python.org
Message-ID: <47A87A31.8070208@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Ralf W. Grosse-Kunstleve wrote:
> Nick Coghlan wrote:
> 
>> I personally haven't seen anything to convince me that the 2.x -> 3.0 
>> upgrade cycle is going to be significantly worse from a deployment point 
>> of view than a 2.x -> 2.(x+2) upgrade cycle where breakages are also 
>> possible (e.g. code using 'with' or 'as' as identifiers runs just fine 
>> on 2.4 or 2.5, but that code is going to break in 2.6).
> 
> The 2.x -> 3.0 transition will be *very* different. We're using Python
> since 2000, version 1.5.2. I've always upgraded to the latest release
> and got it working with a few fairly minor tweaks. Importantly, I
> could do this without breaking backward compatibility if I wanted to.
> At some point we had to give up on 1.5.2 compatibility, but that was
> just because of Boost.Python requirements (only works with new-style
> classes).
> 
> IIUC, there is no conservative upgrade path for Python 3.0. Once the
> transition is done, the code will only work with 3.0. The bridge to
> older Python versions is completely broken. Python 2.x will not even
> parse most Python 3 scripts and vice versa. That's a situation we never
> had before.

I still see this as a difference in degree rather than a difference in 
kind. As soon as a developer puts ""from __future__ import 
absolute_imports"" or ""from __future__ import with_statement"" in their 
script every version of Python prior to 2.5 is going to refuse to even 
compile it. If they provide an old script which uses an identifier which 
is now a keyword, it is the more recent versions which are going to 
object violently.

Either way, the solution is the same: run that particular script with a 
version of the interpreter that can handle it correctly. Make that 
happen by whatever means your platform makes available (on Windows it 
usually means batch files, on Unix'y systems a version specific shebang 
line or a shell script).

> Even though the scripts look very similar at face value,
> at the parsing level they are as incompatible as e.g. perl and Python.

While there is almost certainly going to be incompatibility at the 
module level, it is perfectly possible to have compatibility at the 
application level. Granted, obtaining it won't be anywhere near as easy 
as it is when staying within the 2.x series, but it is far from a lost 
cause.

Specifically, the application may need a launcher module that fiddles 
with sys.path or package __path__ entries based on the running Python 
version. Alternatively, the application may be installed into 
site-packages and executed using the -m switch so that the interpreter 
automatically picks up the correct version of the application for the 
interpreter which is running.

(Note again that all of these issues are only particularly difficult to 
deal with in the case of applications which are written in Python and 
intended to be used on a system someone else controls. When the same 
entity controls both the application and the runtime environment - such 
as web services, embedded systems, or applications that bundle their own 
Python interpreter - it is merely necessary that the environment is kept 
in sync as the needs of the code change)

> As Python developers you have to realize that for many people Python is
> ""just"" a core around which they build much bigger applications.

Strange as it may seem, at least some of us do exactly that as part of 
our day jobs ;)

> If the
> success of Python is to continue, you have to give your large user
> base a clear path to working with two co-existing Python versions,
> so that installing a Python 3 application doesn't break all Python 2
> applications (some of which may never be converted since the original
> developers have moved on).

You mean the way you can already have Python 1.5, 2.0, 2.1, 2.2, 2.3, 
2.4 and 2.5 all installed on the same machine, and invoke different 
versions for different applications?

Yes, only one of them can be the 'default Python' for the machine, and 
changing that can be an interesting exercise, but that is hardly a 
problem that is limited to Python - it's the case for *any* scripting 
language interpreter. To choose an example which affected me relatively 
recently, how many shell scripts did the Ubuntu folks break when they 
decided to change their default shell from bash to dash ""because it is 
faster"" instead of explicitly invoking dash for the particular scripts 
they wanted to speed up? That was one configuration change I reverted 
pretty darn quickly, because there are a hell of a lot of shell scripts 
out there which rely on bash extensions, even if the developers didn't 
realise it when they wrote the scripts.

While I'm +1 on the idea of making altinstall the default for setup.py 
and the Windows installer (forcing the administrator to explicitly 
request that the new Python version be made the default Python 
installation for the machine), I'm a pretty strong -1 on officially 
blessing the idea of a python3 alias or a special py3 extension on 
Windows (end users are obviously free to create those if they want, of 
course).

Who knows, with the rate at which virtual machine technology is 
improving, this whole thing may become a non-issue by the time the 3.x 
series is even ready for production use. One VM with a 2.x default 
Python, another VM with a 3.x default Python, various applications 
associated with each, and seamless integration into the underlying 
platform so the user never even notices a VM is involved.

(OK, I don't actually hold out much hope of that particular scenario 
coming to pass in the next few years, but I'm trying to point out here 
that you're pushing for a language level solution to a system level 
problem: how do we reliably associate files with an application that 
understands them? What do we do when different versions of that 
application permit the files to contain different things? Yes, these 
issues matter for the 2.x->3.x transition, but moving to a new 
interpreter name and a new file extension is nothing more than a 
bandaid, and a pretty ugly one that we would have to live with for a 
long time)

> For example, I really need to be able
> to use wxPython based on Python 2 and wxPython based on Python 3
> simultaneously on my Windows machine. I'm thinking this is only
> possible if Python 3 uses a new file extension.

And how much trouble do you have using wxPython with 2.4 and 2.5 on the 
same machine? They're completely different extension modules, and they 
can live side by side on one machine quite happily (it's one of the main 
benefits of installing things to site-packages). That behaviour won't 
change just because one of those Python version numbers now has a 3 at 
the start.

Making heavy use of PYTHONPATH can cause problems, but again that's the 
result of a platform limitation, where it isn't easy to get different 
applications to see different values for environment variables without 
the use of launch scripts.

> Ideally, I'd even want to have both Python 2 and Python 3 scripts in
> the same directory, while incrementally converting our applications.
> I'd want to cp script.py script.py3, then edit the .py3 version
> until it works, while still being able to run the old version during
> the migration period.

Sure, you can do it that way if you really want to, but that isn't the 
recommended way.

And invoking Python 3 for the scripts that need it would be the same as 
invoking any other specific Python version (batch file or shortcut on 
Windows, version-specific shebang line or shell script on POSIX).

> Of course, I could also start a new Python 3
> specific directory structure, but then I'd have to jump back and
> forth between two complex trees all the time, which is very annoying
> and time consuming; and I may have to copy many non-Python files that
> I wouldn't have to maintain in two copies otherwise.

The intent is that you should never need to edit files directly in both 
trees - instead, it should be possible to work almost entirely in the 
Python 2 tree, with the 2to3 tool automatically creating the Python 3 
tree for you (kind of like a cross-compilation step that accepts valid 
Python 2 code and emits the corresponding Python 3 code). Any test 
failures (or other problems) in the Python 3 version would be fixed by 
modifying the Python 2 source and reconverting.

Having an option to ask the 2to3 tool to automatically copy any 
non-Python files it finds might be an interesting idea, although using 
an existing file synchronisation tool like rsync or a version control 
branch (and then running 2to3 to make modifications after the other 
files are in sync) would probably be a better one.

> I think it will be essential to give the Python 3 interpreter a new
> name and the scripts a new extension. I suggest using ""py3"" for both.

And I think that would be an ugly hack that we would then be stuck with 
for the life of the 3.x series.

Would the renamed python3 still be looking at all the same environment 
variables (PYTHONPATH, PYTHONHOME, etc)? Or would all those have to be 
renamed as well? Should import change to accept .py3 files? If not, why 
not (after all, the line between execution and import gets pretty blurry 
where the -m switch and the runpy module are concerned)? If yes, should 
import be changed to not accept .py files? When python3 was asked to 
execute a directory or zipfile, would it look for __main__.py3, 
__main__.py or either?

Also note that while it currently will be feasible to write quite 
substantial programs that run on both Python 2 and Python 3 without 
modification (albeit only with a total avoidance of the print statement 
and function, as well as taking a great deal of care in remaining 
str/unicode agnostic), some of the possible answers to the questions 
posed in the previous paragraph would make it downright impossible.

The mechanisms that have been used to date to support multiple Python 
versions on a single system have worked pretty well, and I don't believe 
that they're suddenly going to start failing horribly just because the 
permitted degree of backward incompatibility between 2.x and 3.0 is 
higher than that between 2.x and 2.(x+2).

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Tue, 5 Feb 2008 07:37:34 -0600
From: skip@pobox.com
Subject: [Python-3000] PYTHONPATH in Python 3.0 (was: Namespaces are
	one	honking ...)
To: James Y Knight <foom@fuhm.net>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <18344.26270.730092.20238@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    James> Not much fun for users of the PYTHONPATH env var though, eh?

PYTHONPATH3 anyone?  Or maybe .pth files are sufficient.  So far I've been
able to mangle my PYTHONSTARTUP file to work with both Python 2 and Python
3.  That's not very sophisticated code though.

Skip


------------------------------

Message: 3
Date: Mon, 4 Feb 2008 12:30:57 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do more of	those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: python-3000@python.org
Message-ID: <20080204123057.1004e485@mbook-fbsd>
Content-Type: text/plain; charset=US-ASCII

On Mon, 04 Feb 2008 20:22:04 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
> Marcin ___Qrczak___ Kowalczyk writes:
>  > Dnia 03-02-2008, N o godzinie 10:24 +0900, Stephen J. Turnbull pisze:
>  > > I don't see any need to shorten ""python3.0"" to ""python3"".
>  > There is a need. Using #!/usr/bin/python3.0 would break as soon as
>  > python3.1 is released, while #!/usr/bin/python3 would be fine, at
>  > least in the next few years.
> First of all, under current policy, installing Python 3.1 would not
> uninstall or overwrite Python 3.0

Wrong. The recommend ""make install"" overwrites the ""python"" link.

> so nothing ""breaks"" when the user uses #!/usr/bin/python3.0.

Unless, of course, the user used their systems packaging software to
upgrade the default python install, and that's been moved to the newer
version. In that case, every packaging system I've ever used will
remove the old version, thus breaking any scripts that were foolish
enough to use that form.

Which is why those packaging systems pretty much all install python
scripts using ""python"" for the executable.

> On the contrary, Python 3.1 itself may be buggy.  I do not think is
> it appropriate for the Python installer to make that decision for
> the user by creating a link to the most recent python3.x.

Except it currently does, both during the install from source *and* as
installed by most packaging systems. If the packaging system does
things right, this isn't really a problem - until you get to 3.0,
because it breaks backwards compatibility.

> What I see no need for is a policy statement *by Python* that there
> ""should"" be a ""python3"" link, or which python3.x is should point to.

So do you think we should do away with the ""python"" link as well?

> I don't think that Python providing a simple tool to help the user do
> it is a good idea, either, because most OS distributions already
> provide them, and they tend to be rather obnoxious about ""rogue"" users
> who do it by hand or use 3d party (including upstream) tools to do it.

The reason OS distributions are hard on ""rogue"" users who change the
meaning of ""python"" is because their system tools quit working when
you do that, as they all use ""python"". So when they start shipping
python3, they'll tend to make ""python"" invoke the old version until
they convert all their scrips, as RH did with 1 and 2. Except RH still
has a python2 alias, so they can easily switch their scripts to
python2 if they chose to do so. Personally, I'd rather they do the
latter than the former, so people will get a modern version of python
when they ask for python on that OS.

Most of the time, having a default for both python and python of a
specific major version is pointless, because you're only going to have
one major version installed, even if you have multiple minor versions
installed, so they're both the same. The exception is when a new major
version arrives breaking backwards compatibility. At that time, it's
nice to have a default for the major versions so scripts can pick the
major version if they're not picky about minor versions (and given how
much work we do making sure the language is backwards compatible at
that level, there are a lot of those) at the same time as users pick
what they want to get when they say ""python"".

Having the python install provide the major version link as well as
the versionless ""python"" link means it becomes reasonable to
distribute scripts that use link, because most installs will have
it. It encourages vendors to use that link in their system-specific
scripts, so they can provide a backwards-incompatible version of
python, and make ""python"" invoke it for users. Both of these are good
things.

	<mike

-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 4
Date: Mon, 4 Feb 2008 18:38:07 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: python-3000@python.org
Message-ID: <20080204183807.412b14d8@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Tue, 05 Feb 2008 08:20:00 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
> Mike Meyer writes:
>  > On Mon, 04 Feb 2008 20:22:04 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
>  > > Marcin ___Qrczak___ Kowalczyk writes:
>  > >  > Dnia 03-02-2008, N o godzinie 10:24 +0900, Stephen J. Turnbull pisze:
>  > >  > > I don't see any need to shorten ""python3.0"" to ""python3"".
>  > >  > There is a need. Using #!/usr/bin/python3.0 would break as soon as
>  > >  > python3.1 is released, while #!/usr/bin/python3 would be fine, at
>  > >  > least in the next few years.
>  > > First of all, under current policy, installing Python 3.1 would not
>  > > uninstall or overwrite Python 3.0
>  > Wrong. The recommend ""make install"" overwrites the ""python"" link.
> Irrelevant.  That ""python"" link is *not involved* in the shebang
> quoted above, and it is not part of any Python installation, precisely

The python link is part of the python install on every system I've
dealt with - including from the source tarballs - as they all install
it, and the vast majority of software that needs python to run expect
to find it there.

>  > > so nothing ""breaks"" when the user uses #!/usr/bin/python3.0.
>  > Unless, of course, the user used their systems packaging software
> Making that decision is the distro's prerogative, nay, its sacred
> duty.  But here, we're discussing what Python should do, not what
> distros should do.

[...]

>  > *and* as installed by most packaging systems.
> Different issue.  That *is* a packaging system's prerogative IMO.

Right. And the packaging system is what most people deal with in the
real world. Ignoring the real world is a good way to become
irrelevant. And while we can't control them (GNU/Linux packagers have
a really nasty habit of installing software configured in ways the
author doesn't want to support), we can at least nudge them in the
right direction by making it easy to do things in what we consider to
be the best way.

>  > > What I see no need for is a policy statement *by Python* that there
>  > > ""should"" be a ""python3"" link, or which python3.x is should point to.
>  > So do you think we should do away with the ""python"" link as well?
> Yes.  The decision to have one should be made by the user or the
> distro.  This doesn't mean that Python shouldn't provide an install
> target that makes one, but it should require more typing than the
> default install (and thus an explicit decision).

So you want the default behavior after installing python to be that
the ""python"" command not be found? So that people who see software
that ""needs python"" will grab and install python, and then have the
software not work because they it no longer installs that link by
default? Or do you expect everyone who installs python software to fix
the executables to refer to the version of python they have installed?
Or maybe just install every version some software author was using
when they wrote the software?

>  > Having the python install provide the major version link as well as
>  > the versionless ""python"" link means it becomes reasonable to
>  > distribute scripts that use link, because most installs will have
>  > it. It encourages vendors to use that link in their system-specific
>  > scripts, so they can provide a backwards-incompatible version of
>  > python, and make ""python"" invoke it for users. Both of these are good
>  > things.
> Sure, both are good things.  But having setup.py provide them is not.
> If the user and/or the distro is providing the link, setup.py should
> assume that they know what they are doing.

If the users are using a packaging system, then what setup.py does -
or does not do - is largely irrelevant. Users will get what the
packagers want them to have, and there's not jack that the people
actually writing the software can do about it.

If the users get what setup.py provides, then they built from source,
so they at least know how to install and deal with a build
environment, and it's reasonable to assume that they may know a little
bit more than that.

We can either determine a good way to deal with the issues this
raises, and nudge package builders and people doing installs from
source in that direction by making those things the default, or at
least easy; or we can do what was done in the 1->2 transition and let
them all work it out for themselves, and risk once again having some
popular distro on which ""python"" is obsolete for the next N years.

    <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 5
Date: Mon, 4 Feb 2008 18:56:42 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080204185642.73659254@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Mon, 4 Feb 2008 15:34:56 -0800 (PST) ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com> wrote:
> As Python developers you have to realize that for many people Python is
> ""just"" a core around which they build much bigger applications. If the
> success of Python is to continue, you have to give your large user
> base a clear path to working with two co-existing Python versions,
> so that installing a Python 3 application doesn't break all Python 2
> applications (some of which may never be converted since the original
> developers have moved on). For example, I really need to be able
> to use wxPython based on Python 2 and wxPython based on Python 3
> simultaneously on my Windows machine. I'm thinking this is only
> possible if Python 3 uses a new file extension.

I think the key word here is ""Windows"". I have no trouble doing all of
this on a Unix system without changing the extensions, but it's a lot
less dependent on file extensions.

> Ideally, I'd even want to have both Python 2 and Python 3 scripts in
> the same directory, while incrementally converting our applications.
> I'd want to cp script.py script.py3, then edit the .py3 version
> until it works, while still being able to run the old version during
> the migration period. Of course, I could also start a new Python 3
> specific directory structure, but then I'd have to jump back and
> forth between two complex trees all the time, which is very annoying
> and time consuming; and I may have to copy many non-Python files that
> I wouldn't have to maintain in two copies otherwise.

Now, let me throw in my requirements. Most modern packaging systems
can handle the upgrade from 2.x to 2.y; they'll automatically upgrade
all the packages that depend on python, meaning you'll get versions
installed for 2.y after the upgrade process is done, and anything that
uses only packages from the packaging system will keep on working.

I don't want the solution for 3.0 to break the ability to do 2.x
upgrades that way. Further, I want the same solution to work for 3.0
to 3.1.

> I think it will be essential to give the Python 3 interpreter a new
> name and the scripts a new extension. I suggest using ""py3"" for both.

I really, really hate this idea. But if it's the only workable
solution on Windows, then it's the only workable solution.

Question: how many of the editor packages for editing python files
will work properly on both python and python 3.0 files?

     <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 13
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 12","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Namespaces are one honking great idea -- let's do more of
      those! (Stephen J. Turnbull)
   2. Re: Namespaces are one honking great idea -- let's do	more of
      those! (Barry Warsaw)
   3. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Ralf W. Grosse-Kunstleve)
   4. Re: Does anyone remember the Red Hat 1.5->2.x fiasco?
      (Stephen J. Turnbull)
   5. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Jim Jewett)
   6. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Andrew McNabb)
   7. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (James Y Knight)


----------------------------------------------------------------------

Message: 1
Date: Tue, 05 Feb 2008 08:20:00 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do more of	those!
To: Mike Meyer <mwm@mired.org>
Cc: Marcin, python-3000@python.org
Message-ID: <87wspkwbq7.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Mike Meyer writes:
 > On Mon, 04 Feb 2008 20:22:04 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
 > > Marcin ___Qrczak___ Kowalczyk writes:
 > >  > Dnia 03-02-2008, N o godzinie 10:24 +0900, Stephen J. Turnbull pisze:
 > >  > > I don't see any need to shorten ""python3.0"" to ""python3"".
 > >  > There is a need. Using #!/usr/bin/python3.0 would break as soon as
 > >  > python3.1 is released, while #!/usr/bin/python3 would be fine, at
 > >  > least in the next few years.
 > > First of all, under current policy, installing Python 3.1 would not
 > > uninstall or overwrite Python 3.0
 > 
 > Wrong. The recommend ""make install"" overwrites the ""python"" link.

Irrelevant.  That ""python"" link is *not involved* in the shebang
quoted above, and it is not part of any Python installation, precisely
because it is designed (nowadays) to point to a real installed python
somewhere else.  (What I mean is that even though setup.py does make
one, that doesn't mean that version of Python has any ownership rights
to it.)

 > > so nothing ""breaks"" when the user uses #!/usr/bin/python3.0.
 > 
 > Unless, of course, the user used their systems packaging software
 > to upgrade the default python install, and that's been moved to the
 > newer version.  In that case, every packaging system I've ever used
 > will remove the old version,

Making that decision is the distro's prerogative, nay, its sacred
duty.  But here, we're discussing what Python should do, not what
distros should do.

 > > On the contrary, Python 3.1 itself may be buggy.  I do not think is
 > > it appropriate for the Python installer to make that decision for
 > > the user by creating a link to the most recent python3.x.
 > 
 > Except it currently does, both during the install from source

Then altinstall should be made the default.

 > *and* as installed by most packaging systems.

Different issue.  That *is* a packaging system's prerogative IMO.

 > > What I see no need for is a policy statement *by Python* that there
 > > ""should"" be a ""python3"" link, or which python3.x is should point to.
 > 
 > So do you think we should do away with the ""python"" link as well?

Yes.  The decision to have one should be made by the user or the
distro.  This doesn't mean that Python shouldn't provide an install
target that makes one, but it should require more typing than the
default install (and thus an explicit decision).

 > The reason OS distributions are hard on ""rogue"" users who change the
 > meaning of ""python"" is because their system tools quit working when
 > you do that, as they all use ""python"".

No, it's a more general policy.  That is an important justification in
the case of python, but the tools generally do blow up if users mess
with other ""virtualized"" files, too, because the metadata is incorrect.

 > Having the python install provide the major version link as well as
 > the versionless ""python"" link means it becomes reasonable to
 > distribute scripts that use link, because most installs will have
 > it. It encourages vendors to use that link in their system-specific
 > scripts, so they can provide a backwards-incompatible version of
 > python, and make ""python"" invoke it for users. Both of these are good
 > things.

Sure, both are good things.  But having setup.py provide them is not.
If the user and/or the distro is providing the link, setup.py should
assume that they know what they are doing.

""How can setup.py know that?"" you ask.  Yes, *that is precisely the
problem.*  setup.py doesn't and can't know whether the user, the
distro, or a previous avatar of setup.py created that link.  Odds are
very good that the distro knows far more about what the user wants
than the user does (ie, it knows the dependency graph in detail, and
the user just wants that graph satisfied), but setup.py does not know.
And should not know.  That's the distro's job.


------------------------------

Message: 2
Date: Mon, 4 Feb 2008 18:20:28 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of	those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: Marcin@bag.python.org, python-3000@python.org, Mike Meyer
	<mwm@mired.org>
Message-ID: <A5E4827A-BAE7-4FE1-B5F3-984EEDFE2DFA@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Feb 4, 2008, at 6:20 PM, Stephen J. Turnbull wrote:

>>> On the contrary, Python 3.1 itself may be buggy.  I do not think is
>>> it appropriate for the Python installer to make that decision for
>>> the user by creating a link to the most recent python3.x.
>>
>> Except it currently does, both during the install from source
>
> Then altinstall should be made the default.

I think this is the best solution.   +1

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (Darwin)

iQCVAwUBR6edvXEjvBPtnXfVAQLaaAQApF4obEK27TTEy71pigvMnNdd4rhd5Vnp
AV+kvyPGaaFY0u5Eq4Q1HZlxyoQ32FEvCKqwpFLl9OQ+Bb16qcLVbXfycAxQFONA
ITUuxYPBDSeyBV8pQnggQkJXEi1ziuSiYk/KgabZi5fOV+kGWoRF+wZSdDbgMS1M
M0miCaXtFog=
=S7kE
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Mon, 4 Feb 2008 15:34:56 -0800 (PST)
From: ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <448576.20652.qm@web31111.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii

Nick Coghlan wrote:

> I personally haven't seen anything to convince me that the 2.x -> 3.0 
> upgrade cycle is going to be significantly worse from a deployment point 
> of view than a 2.x -> 2.(x+2) upgrade cycle where breakages are also 
> possible (e.g. code using 'with' or 'as' as identifiers runs just fine 
> on 2.4 or 2.5, but that code is going to break in 2.6).

The 2.x -> 3.0 transition will be *very* different. We're using Python
since 2000, version 1.5.2. I've always upgraded to the latest release
and got it working with a few fairly minor tweaks. Importantly, I
could do this without breaking backward compatibility if I wanted to.
At some point we had to give up on 1.5.2 compatibility, but that was
just because of Boost.Python requirements (only works with new-style
classes).

IIUC, there is no conservative upgrade path for Python 3.0. Once the
transition is done, the code will only work with 3.0. The bridge to
older Python versions is completely broken. Python 2.x will not even
parse most Python 3 scripts and vice versa. That's a situation we never
had before. Even though the scripts look very similar at face value,
at the parsing level they are as incompatible as e.g. perl and Python.

It is a given that you have to plan for a transition period that is
measured in years: if you have dependencies on 3rd-party packages
(e.g. wxPython) you cannot start using Python 3 until all 3rd-party
packages have gone through the transition. We are using a ton of
3rd-party packages. That's what open source and object-orientation is
all about. The millions of lines of sources that have accumulated over
the years cannot be converted over night. My *optimistic* time horizon
for our project is five years before I can realistically think of
giving up on Python 2, and start *a few weeks of work* to push all
our stuff over to Python 3. During that time, all serious development
work will have to be postponed.

My pessimistic time horizon is ""forever"". Python 3 has the potential
to become the software version of the Itanium if the deployment isn't
handled carefully. Worse, it could even reflect badly on Python 2
if the naive user just knows that ""python script"" usually ends in a
syntax error unless he thinks twice about what machine he is using
to run which script.

As Python developers you have to realize that for many people Python is
""just"" a core around which they build much bigger applications. If the
success of Python is to continue, you have to give your large user
base a clear path to working with two co-existing Python versions,
so that installing a Python 3 application doesn't break all Python 2
applications (some of which may never be converted since the original
developers have moved on). For example, I really need to be able
to use wxPython based on Python 2 and wxPython based on Python 3
simultaneously on my Windows machine. I'm thinking this is only
possible if Python 3 uses a new file extension.

Ideally, I'd even want to have both Python 2 and Python 3 scripts in
the same directory, while incrementally converting our applications.
I'd want to cp script.py script.py3, then edit the .py3 version
until it works, while still being able to run the old version during
the migration period. Of course, I could also start a new Python 3
specific directory structure, but then I'd have to jump back and
forth between two complex trees all the time, which is very annoying
and time consuming; and I may have to copy many non-Python files that
I wouldn't have to maintain in two copies otherwise.

I think it will be essential to give the Python 3 interpreter a new
name and the scripts a new extension. I suggest using ""py3"" for both.

Ralf





------------------------------

Message: 4
Date: Tue, 05 Feb 2008 09:04:47 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: Neal Becker <ndbecker2@gmail.com>
Cc: python-3000@python.org
Message-ID: <87ve54w9nk.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Neal Becker writes:

 > Would be even nicer if python could say: require python_version >=
 > x.y or some such.

The starting point of this discussion was that Python 3 proves this to
be impossible.  The app cannot be sure at write time that no Python
released in the future will make the app illegal.

The sensible thing for the app to say is ""I require <named API>"" and
the sensible reply for the python executable is one of ""Yo! I can do
that!"" or ""Take this note over to X.Y, and he'll take care of it for
you"" or ""sorry, I dunno nobody that can do that for ya.""

A way to implement this would be for apps to use #!/usr/bin/pythonX.Y
shebangs, and for Python W.Z to install a link pythonX.Y -> pythonW.Z
if (a) pythonX.Y isn't already a real file and (b) W.Z does provide
the full X.Y API.  Crude, but it can be done *now* *without* support
from the Python language itself.  It would take care of breaks in
backward compatibility nicely.  Eg, 3.0 simply wouldn't install any
python2.X -> python3.0 links.  (Yes, I know users won't retrofit, and
it's even worse for the distros.  But that's true of any scheme like
this.)

Dunno if this can be applied to Windows, unfortunately.


------------------------------

Message: 5
Date: Mon, 4 Feb 2008 19:34:21 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: Python 3000 <python-3000@python.org>, Nick Coghlan
	<ncoghlan@gmail.com>
Message-ID:
	<fb6fbf560802041634q4f4d5f6cje60eac1a1309e0a1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 2/4/08, Charles Merriam <charles.merriam@gmail.com> wrote:
> What about a formal dependency plan instead?

> Python would remain 'batteries included', perhaps verging on 'kitchen
> sink included'.

> Those users working to embed Python or work in other situations where
> a large set of available libraries is a problem would have some help
> in cutting down the footprint in an particular installation.  That is,
> one could freely delete some set of libraries and be fairly sure the
> resulting library set would still run.  What was left would be a
> smaller footprint interpreted language, just not 'Python'.

> Under what circumstances is this a poor idea?   ""Hard drive space is
> expensive"" is not an acceptable argument.

(1)   Many library modules *use* other modules, but don't really
*rely* on them.  Only a little functionality would be lost.  That sort
of roadmap would encourage the functionality to get left out entirely,
and would certainly increase the amount of fallback boilerplate.

(2)  In bureaucratic environments, the libraries are OK because they
are standard; if a more minimal distribution becomes equally standard,
that will cause problems.  (It wouldn't be nearly as bad as taking
them out and requiring downloads, but it would still be a problem,
because of the need to justify the non-minimal version.)

(3)  If storage footprint is important, then it is also important for
deployed applications -- and it becomes awkward if you have to
sprinkle your own code with fallbacks and workarounds in case the
standard library was clipped.

That said, it might be useful if it were kept at unofficial status,
such as a wiki page.

-jJ


------------------------------

Message: 6
Date: Mon, 4 Feb 2008 20:06:34 -0700
From: Andrew McNabb <amcnabb@mcnabbs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080205030634.GA2267@mcnabbs.org>
Content-Type: text/plain; charset=""us-ascii""

I really like your point about how Python should give a better error
than a SyntaxError when a Python 2 script is run on a Python 3
interpreter.  I agree that the cause of problems should be pointed out
clearly to end users.  However, I disagree that adding a new file
extension is necessary.

On Mon, Feb 04, 2008 at 03:34:56PM -0800, Ralf W. Grosse-Kunstleve wrote:
> 
> If the success of Python is to continue, you have to give your large
> user base a clear path to working with two co-existing Python
> versions, so that installing a Python 3 application doesn't break all
> Python 2 applications (some of which may never be converted since the
> original developers have moved on). For example, I really need to be
> able to use wxPython based on Python 2 and wxPython based on Python 3
> simultaneously on my Windows machine. I'm thinking this is only
> possible if Python 3 uses a new file extension.

In Python 2, ""import wxPython"" will import wxPython based on Python 2,
and on Python 3, it will import wxPython based on Python 3.  There
wouldn't be a Python 2 version of wxPython in the python3.0
site-packages.


> Ideally, I'd even want to have both Python 2 and Python 3 scripts in
> the same directory, while incrementally converting our applications.
> I'd want to cp script.py script.py3, then edit the .py3 version until
> it works, while still being able to run the old version during the
> migration period.

I kind of like the idea of doing the following:

import sys
major_version = sys.version_info[0]
if major_version == 2:
    import script2
    script2.main()
elif major_version == 3:
    import script3
    script3.main()

It really shouldn't be too bad, I think.


-- 
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mail.python.org/pipermail/python-3000/attachments/20080204/e1a27d8b/attachment-0001.pgp 

------------------------------

Message: 7
Date: Tue, 5 Feb 2008 01:15:42 -0500
From: James Y Knight <foom@fuhm.net>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: Python 3000 <python-3000@python.org>
Message-ID: <7AACD2AB-5732-4EED-A2B2-60A9C5C7C3C8@fuhm.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed

On Feb 4, 2008, at 10:06 PM, Andrew McNabb wrote:

> In Python 2, ""import wxPython"" will import wxPython based on Python 2,
> and on Python 3, it will import wxPython based on Python 3.  There
> wouldn't be a Python 2 version of wxPython in the python3.0
> site-packages.

Not much fun for users of the PYTHONPATH env var though, eh?

James


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 12
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 11","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Namespaces are one honking great idea -- let's do	more of
      those! (Bill Janssen)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Ron Adam)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   4. Re: Does anyone remember the Red Hat 1.5->2.x fiasco?
      (Guido van Rossum)
   5. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Charles Merriam)
   6. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Charles Merriam)
   7. Re: Does anyone remember the Red Hat 1.5->2.x fiasco?
      (Neal Becker)
   8. Re: Does anyone remember the Red Hat 1.5->2.x fiasco? (Leif Walsh)
   9. Re: Does anyone remember the Red Hat 1.5->2.x fiasco?
      (Nick Coghlan)


----------------------------------------------------------------------

Message: 1
Date: Mon, 4 Feb 2008 07:39:21 PST
From: Bill Janssen <janssen@parc.com>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: python-3000@python.org
Message-ID: <08Feb4.073927pst.""58696""@synergy1.parc.xerox.com>

> First of all, under current policy, installing Python 3.1 would not
> uninstall or overwrite Python 3.0, so nothing ""breaks"" when the user

What policy?

Bill


------------------------------

Message: 2
Date: Mon, 04 Feb 2008 09:45:53 -0600
From: Ron Adam <rrr@ronadam.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org, Mark Hammond <mark@enfoldsystems.com>
Message-ID: <47A73331.4050000@ronadam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed



Christian Heimes wrote:
> Mike Meyer wrote:
>> -2 on using the shebang line for this. The 2.X version-specific
>> binaries are python2.X, so to use that, you'd have to make the shebang
>> line invoke python2.X. Right now, if you upgrade an installation from
>> 2.X to 2.X+1, you can expect most of the scripts to work assuming you
>> take do care to install the same module set. Requiring explicit minor
>> versions breaks that.
> 
> I'm on Mike's side here. There is no need to fix the Unix (and Mac OS X)
> side of the problem because it was never broken in the first place.
> 
> The only problematic environment is (as usual) Windows. Windows has no
> shebang and python.exe is most likely not in PATH. One has to go through
> the registry to find Python 2.x and its executable.
> 
> For Windows the Python stdlib should get some means of starting a script
> with a well defined Python version without relying on the file
> extension. One possible way is to assign the .py and .pyw extension with
> a small wrapper program written in C which parses the #! shebang line,
> gets the right python.exe from the registry and starts the script with it.
> 
> Another way is a new Python extension (maybe .pys for python start) for
> ini file like startup files:

I like .pst better,  or maybe reuse .pth files?

Ron

> ---
> [Python]
> version=2.5,2.6
> module=myprogram.main
> gui=True
> 
> [Env]
> pythonpath=..
> ---
> 
> The file causes the startup program to search for 2.5 and 2.6 in the
> registry. It sets the env var PYTHONPATH to .. (relative to the location
> of the file) and starts the program with pythonw.exe -m ""myprogram.main"".
> 
> Christian
> 
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/rrr%40ronadam.com
> 


------------------------------

Message: 3
Date: Mon, 04 Feb 2008 16:53:42 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: rrr@ronadam.com
Cc: python-3000@python.org
Message-ID: <47A73506.60401@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Ron Adam wrote:
> I like .pst better,  or maybe reuse .pth files?

MS Outlook uses the file extension .pst. Python has a history to ""claim""
the .py? namespace. I like to stick to the tradition.

Christian


------------------------------

Message: 4
Date: Mon, 4 Feb 2008 08:20:15 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802040820p279b4fd3ueb1445c7dea5d900@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 4, 2008 5:52 AM,  <skip@pobox.com> wrote:
> This discussion of what to install Python 3.0 as reminded me that we've
> already encountered this problem before.  As I recall, when Python 2.0 was
> released Red Hat steadfastly refused to ship it with their then current
> version of Linux.  It wasn't until the next RH product came out that they
> shipped Python 2.x, and then the executable was called (I think) python2.
>
> I no longer remember the details very well, but I wonder if there's
> a lesson to be learned from that experience as we decide how to install
> Python 3.0.

IMO the lesson to be learned is that that was a bad idea -- other
vendors have not followed suit. It also gave Python a bad name because
for years, typing ""python"" on Red Hat systems gave you an ancient
version.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Mon, 4 Feb 2008 10:04:27 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Gregory P. Smith"" <greg@krypto.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<b8c6f6c40802041004h376e1295kd75ed614abd85051@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

How about the ellipses as a Python 3 marker?

>From a previous discussion, the error messages on this null-op should
be made better in Python 3.0 anyway.

If ellipses are allowed as a stand-alone statement, much like pass,
then we could just have these messages:

Python 2.6:  ""Unexpected '...'.   Ellipses not supported until Python
3.0.   Another cause might be pasting in code from within the IDLE
interpreter.

Python 3.0:  'Unexpected '...'.  Might be caused by pasting in code
from within the IDLE interpreter.

An idiom that might be used during the early transition period:

   ...    # Require python 3.x
   print (""I'm Pythonic!"")

The idiom would disappear with time, not add special cruft to the
language, and would give a reasonable compile-time error message.

Just a thought,

Charles
---
Charles Merriam
e:  charles.merriam@gmail.com
u:  http://www.charlesmerriam.com
q:  ""Crufty solutions make crufty curmudgeons.""


On Feb 2, 2008 11:47 PM, Gregory P. Smith <greg@krypto.org> wrote:
> yep we've already been through that problem in the past when list
> comprehensions, generators and with were added to name a few.  since python
> 3 code is highly unlikely to even parse with a 2.x interpreter much of the
> time thats a reason to consider a .py3 extension if this precedent of not
> caring is to be broken.
>
> -0 on using .py3 instead of .py for python 3.  i think its slightly silly
> but i won't object.
>
> +1 on devising a way (to appear starting in 2.6 and 3.0) of marking the
> minimum language version required by a file near the top so that the parser
> can bail with a useful error message instead of one confusing to the lay
> person.  similar to a from future import type of thing perhaps?  or should
> python parse a #! line and magically notice a required major version number
> in the python binary name (evil but it would work and magically annotate a
> bunch of existing code as 2 vs 3)?
>
> also yes python 3 should build and install as 'python3' as the short form of
> its name though realistically anyone sane will write their code with #!
> lines specifying the actual version in the executable name and have shell
> aliases setup if they want an even shorter name.
>
>
>
> On 2/2/08, skip@pobox.com <skip@pobox.com> wrote:
> >
> >
> >
> >
> >     Leif> There is already an idiom with other packages (pygtk etc.) that
> >     Leif> suggests syntax like
> >
> >     Leif> try:
> >     Leif>     python.require('3.1')
> >     Leif> except:
> >     Leif>     print('Some warning about version incompatibility')
> >     Leif>     exit(1)
> >
> > It won't work in this case.  Compilation of the module might well fail
> > because of Python2/Python3 syntax differences.
> >
> > Skip


------------------------------

Message: 6
Date: Mon, 4 Feb 2008 11:24:55 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<b8c6f6c40802041124p35c0474do419d682783098f61@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

What about a formal dependency plan instead?

Python would remain 'batteries included', perhaps verging on 'kitchen
sink included'.

Those users working to embed Python or work in other situations where
a large set of available libraries is a problem would have some help
in cutting down the footprint in an particular installation.  That is,
one could freely delete some set of libraries and be fairly sure the
resulting library set would still run.  What was left would be a
smaller footprint interpreted language, just not 'Python'.

Under what circumstances is this a poor idea?   ""Hard drive space is
expensive"" is not an acceptable argument.

Charles
---------
Charles Merriam
e:  charles.merriam@gmail.com
u:  http://charlesmerriam.com
q:  ""Toolboxes have more tools than just a hammer.""


On Feb 4, 2008 1:28 AM, Nick Coghlan <ncoghlan@gmail.com> wrote:
> Brett Cannon wrote:
> > If you want to trim more then
> > push for stuff to be removed on a module-to-module basis. But going
> > from ""batteries included"" to ""batteries easily downloaded"" is quite a
> > shift for Python.
>
> Not to mention it being a serious pain in the rear for those of us who
> have to get licenses vetted by our contracts department before we're
> allowed to copy open source code across to isolated networks with no
> direct access to stuff that is ""in the cloud"".
>
> A batteries-included standard library is a *huge* boon in that kind of
> environment - one license to vet and one installer to copy across,
> instead of suffering a death of a thousand cuts as we have to retrieve
> different bits and pieces from PyPI (or rewrite our own versions from
> scratch).
>
> We-don't-all-work-in-web-app-development-ly,
> Nick.
>
> --
> Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
> ---------------------------------------------------------------
>              http://www.boredomandlaziness.org
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/charles.merriam%40gmail.com
>


------------------------------

Message: 7
Date: Mon, 04 Feb 2008 14:34:31 -0500
From: Neal Becker <ndbecker2@gmail.com>
Subject: Re: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: python-3000@python.org
Message-ID: <fo7pc8$498$1@ger.gmane.org>
Content-Type: text/plain; charset=us-ascii

Guido van Rossum wrote:

> On Feb 4, 2008 5:52 AM,  <skip@pobox.com> wrote:
>> This discussion of what to install Python 3.0 as reminded me that we've
>> already encountered this problem before.  As I recall, when Python 2.0
>> was released Red Hat steadfastly refused to ship it with their then
>> current
>> version of Linux.  It wasn't until the next RH product came out that they
>> shipped Python 2.x, and then the executable was called (I think) python2.
>>
>> I no longer remember the details very well, but I wonder if there's
>> a lesson to be learned from that experience as we decide how to install
>> Python 3.0.
> 
> IMO the lesson to be learned is that that was a bad idea -- other
> vendors have not followed suit. It also gave Python a bad name because
> for years, typing ""python"" on Red Hat systems gave you an ancient
> version.
> 

That was unfortunate.  What they should have done, IMO, is install python as
a link to the latest version.  Where they had tools that had not been
ported, those tools should have explicitly said #!/usr/bin/python1.5.

Would be even nicer if python could say:
require python_version >= x.y
or some such.



------------------------------

Message: 8
Date: Mon, 4 Feb 2008 16:12:42 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: ""Neal Becker"" <ndbecker2@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<cc7430500802041312h7ad3506apc7b4809fd9cc6804@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 4, 2008 2:34 PM, Neal Becker <ndbecker2@gmail.com> wrote:
> That was unfortunate.  What they should have done, IMO, is install python as
> a link to the latest version.  Where they had tools that had not been
> ported, those tools should have explicitly said #!/usr/bin/python1.5.
>
> Would be even nicer if python could say:
> require python_version >= x.y
> or some such.

I already had this suggestion shot down in the ""Namespaces are etc.""
thread.  The argument goes a bit like ""if the os calls the wrong
version of python to compile and run the code, it might not even
compile, in which case the 'require version whatever' line of python
code will never be executed"".

--
Cheers,
Leif


------------------------------

Message: 9
Date: Tue, 05 Feb 2008 08:01:18 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: Leif Walsh <adlaiff6@gmail.com>
Cc: Neal Becker <ndbecker2@gmail.com>, python-3000@python.org
Message-ID: <47A78B2E.70706@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Leif Walsh wrote:
> On Feb 4, 2008 2:34 PM, Neal Becker <ndbecker2@gmail.com> wrote:
>> Would be even nicer if python could say:
>> require python_version >= x.y
>> or some such.
> 
> I already had this suggestion shot down in the ""Namespaces are etc.""
> thread.  The argument goes a bit like ""if the os calls the wrong
> version of python to compile and run the code, it might not even
> compile, in which case the 'require version whatever' line of python
> code will never be executed"".

Not only that, but applications which wish to provide a user-friendly 
error message when run with an incompatible version of the interpreter 
can already do so by checking sys.version_info in a main module that 
steps around the compilation issue by only using very limited constructs 
(more on that in my contribution to the namespaces thread).

This approach has the virtue of being able to give a nice error message 
with versions of the interpreter all the way back to 2.0 (when 
version_info was added) instead of relying on something that would at 
best be added in 2.6.

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 11
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 10","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Namespaces are one honking great idea -- let's	do	more of
      those! (Stephen J. Turnbull)
   2. Re: [Python-ideas] Namespaces are one	honking	great	idea --
      let's do more of those! (Mike Meyer)
   3. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Mike Meyer)
   4. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Mike Meyer)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Nick Coghlan)
   6. Does anyone remember the Red Hat 1.5->2.x fiasco? (skip@pobox.com)
   7. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Mon, 04 Feb 2008 20:22:04 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's	do	more of	those!
To: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Cc: python-3000@python.org
Message-ID: <87ve55m0f7.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=iso-8859-7

Marcin ?Qrczak? Kowalczyk writes:

 > Dnia 03-02-2008, N o godzinie 10:24 +0900, Stephen J. Turnbull pisze:
 > 
 > > I don't see any need to shorten ""python3.0"" to ""python3"".
 > 
 > There is a need. Using #!/usr/bin/python3.0 would break as soon as
 > python3.1 is released, while #!/usr/bin/python3 would be fine, at
 > least in the next few years.

First of all, under current policy, installing Python 3.1 would not
uninstall or overwrite Python 3.0, so nothing ""breaks"" when the user
uses #!/usr/bin/python3.0.  On the contrary, Python 3.1 itself may be
buggy.  I do not think is it appropriate for the Python installer to
make that decision for the user by creating a link to the most recent
python3.x.

Second, the point here is not whether any given user has such a need.
I may disagree with your reasoning above, but you apparently feel such
a need, and that's good enough for me.  I have no objection if you
make a link python3 -> python3.0.

What I see no need for is a policy statement *by Python* that there
""should"" be a ""python3"" link, or which python3.x is should point to.
I don't think that Python providing a simple tool to help the user do
it is a good idea, either, because most OS distributions already
provide them, and they tend to be rather obnoxious about ""rogue"" users
who do it by hand or use 3d party (including upstream) tools to do it.



------------------------------

Message: 2
Date: Sat, 2 Feb 2008 20:20:44 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one	honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080202202044.5177a6e2@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Sun, 03 Feb 2008 11:45:38 +1300 Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:

> Mike Meyer wrote:
> 
> > And - at least in my experience - chances are good that nothing but
> > the simplest scripts will work on multiple versions anyway, because
> > they don't have the same set of third party - or possibly even builtin
> > - modules installed, unless someone took care to make sure that
> > exactly that happened, and even then the scripts generally only moved
> > one direction.
> But at least you *can* set things up and write scripts
> so that the same code works across versions.

Upwards, anyway. But I find that, unless one organization is
maintaining all of them (meaning either your system has no stock
python install, or you're using it), you wind up with multiple python
installations and scripts that only work on one as a matter of course,
because that's easier than trying to make real applications work on
all of them.

> It's going to be impossible, or at least very difficult, to write
> code that works unchanged in both 2.x and 3.x.

Which in practice - at least on the applications I work on - is more a
matter of semantics than anything else. When we decide to switch to
3.x, we'll do exactly what we do for going to a new 2.Y, or a new
version of some third party library we use: create a new python build
with the libraries and tools we need, and a new application
distribution to go with it, then run them both through the qa cycle
until they pass, and we can put them in production.

    <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 3
Date: Sun, 3 Feb 2008 13:27:51 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080203132751.79169d2c@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Sat, 2 Feb 2008 23:47:50 -0800 ""Gregory P. Smith"" <greg@krypto.org> wrote:

> +1 on devising a way (to appear starting in 2.6 and 3.0) of marking the
> minimum language version required by a file near the top so that the parser
> can bail with a useful error message instead of one confusing to the lay
> person.  similar to a from future import type of thing perhaps? 

-1 on any such programmer-maintained marking. The key phrase is
""programmer-maintained."" I think the confusion caused by this being
*wrong*, while less common than simply trying to use the wrong
version, will be much more painful because the user will start with
the assumption that they have a good enough version.

If the goal is to lower user confusion, how about having the 2.X line
issue better warnings if it sees 3.0 features? Just checking syntax
errors against that list and tweaking the warning?

> or should
> python parse a #! line and magically notice a required major version number
> in the python binary name (evil but it would work and magically annotate a
> bunch of existing code as 2 vs 3)?

-2 on using the shebang line for this. The 2.X version-specific
binaries are python2.X, so to use that, you'd have to make the shebang
line invoke python2.X. Right now, if you upgrade an installation from
2.X to 2.X+1, you can expect most of the scripts to work assuming you
take do care to install the same module set. Requiring explicit minor
versions breaks that.

> also yes python 3 should build and install as 'python3' as the short form of
> its name though realistically anyone sane will write their code with #!
> lines specifying the actual version in the executable name and have shell
> aliases setup if they want an even shorter name.

+1, so long as we keep the python alias as well (maybe with the
altinstall target only creating python3 if it doesn't exist). This
will help with the transition from 2 to 3, and then later from 3 to 4,
as we can use python3 vs. python4 in scripts where we now can't use
python2, because it isn't setup by default.

     <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 4
Date: Mon, 4 Feb 2008 00:54:13 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080204005413.5ba02566@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Mon, 04 Feb 2008 12:55:29 +0900 ""Stephen J. Turnbull"" <stephen@xemacs.org> wrote:
> Greg Ewing writes:
> I wonder how many people out there will be ""surprised"" by sudden
> changes in the version of Python installed.

It's happened in the past. I've been dealing with supporting multiple
incompatible versions on the same hosts for the last two years, and
users running the ""wrong"" python was a regular occurrence until I
convinced people that it really mattered.

> On Mac OS X 10.4 + MacPorts, MacPorts does not install an
> /opt/local/bin/python at all, so that although /opt/local/bin takes
> precedence over /usr/bin, you get the default Mac OS X install of
> Python 2.3 as ""python"".

Actually, Leopard comes with 2.5.1. Kudos to jkh & his team for the
upgrade. Also, /opt/local/bin should only take precedence for users;
commands run via sudo and from OS X applications that didn't come from
MacPorts should ignore /opt/local/bin.

> Linux distributions (at least Debian and Gentoo) ""anoint"" a
> particular Python version as the one that infrastructure software
> uses and that is the default unless the user explicitly sets a
> different version as ""python"".

And Red Hat. And - since all three provide (well, I haven't checked
Gentoo in a while) system tools that use their ""anointed"" python - any
distribution that uses those tools (most notably Ubuntu). Further,
those tools depend on third party modules that may only be available
as part of that OS release, so replacing the system python is a
seriously bad idea.

> Installing multiple versions of Python does not reset the ""python""
> link.

Depends on how you do the install. The standard python source
distribution will install the python link with ""make install"", but
installs things in by default /usr/local, so won't break the system
python, or most of the system tools (some do use #!/usr/bin/env python
instead of #!/usr/bin/python). If you do ""make altinstall"", it won't
install that symlink. If you configure it to install in /usr instead
of /usr/local and do ""make install"", the python symlink will get reset
(and if you're on one of those Linux systems, your life is about to
get really, really unpleasant).

I haven't looked at the macports version in a while, but suspect that
it used the altinstall target to avoid surprises. On the other hand, I
had no problems on Tiger adding the symlink to /opt/local/bin, and
making sure it was first on my path (but not roots!).

> So it seems to me that this particular issue can easily be handled if
> Python source builds by default only install a ""python"" link if (a)
> there is none or (b) the newly installed version is an upgrade of the
> current ""python"".

Neither of those is really good enough. How do you decide that ""there
is none""? leaving it in the hands of the installers is the only sure
solution. For the second part, if you upgrade the python without
making sure you've upgraded *all* the third party modules in the
python library, you'll break scripts that depend on the modules you
didn't upgrade.

Living with multiple python installs isn't really a problem. Upgrading
an existing installation isn't really a problem, either. Both work
fine if done with a bit of care. It's up to the person building the
distribution (or doing the install) to make provide that care. But
we've been doing it for a while now, and it's not a serious issue.

      <mike
-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 5
Date: Tue, 05 Feb 2008 00:09:47 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>,	""Ralf W. Grosse-Kunstleve""
	<rwgk@yahoo.com>
Message-ID: <47A71CAB.8040303@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> This should be brought up on the python-3000 list; I'm moving it there
> using a Bcc to python-ideas.
> 
> To some extent it is up to the vendors who distribute binaries -- they
> decide what to call it.
> 
> Perhaps we should only install ""python3.0"" and not ""python"". That is a
> valid choice already and always has been (python2.1, python2.2, etc.
> are always installed by default, ""python"" is just a convenient alias).
> 
> I think that worries about Python becoming the laughingstock of the
> language world are highly exaggerated. The post you refer to sounds to
> me like the typical cynical one-liner from someone who doesn't really
> care, not about a position of someone who is influential in the world
> of language users.

I personally haven't seen anything to convince me that the 2.x -> 3.0 
upgrade cycle is going to be significantly worse from a deployment point 
of view than a 2.x -> 2.(x+2) upgrade cycle where breakages are also 
possible (e.g. code using 'with' or 'as' as identifiers runs just fine 
on 2.4 or 2.5, but that code is going to break in 2.6).

Yes, the breakages in 3.0 are more significant and more widespread, but 
the tools to support migration and the time allowed for migration are 
correspondingly increased. I would also expect nearly all systems to 
stay with a 2.x release as the default python at least until after 3.1 
comes out.

The only question is what to do about applications that want to declare 
themselves as python 3 applications so that the platform knows how to 
handle them correctly, but also want to fail gracefully if someone tries 
to run them with the wrong version. And really, that problem already 
exists for 2.x applications that require a certain minimum version (e.g. 
if you use with statements or conditional expressions in your main 
module, even with a future statement, then it will fail to compile on 
all versions prior to 2.5).

I think the general solution is the same in all such cases: the affected 
application or library (not the language) should include a short and 
simple entry point module that uses the bare minimum amount of code 
needed to ensure the correct runtime environment. Something like:

import sys
REQUIRED_VERSION = (3, 0, 0)
if sys.version_info < REQUIRED_VERSION:
   sys.exit(""Require Python version %d.%d.%d, using version %d.%d.%d""
            % (REQUIRED_VERSION + sys.version_info[:3]))
import real_main
real_main.main()

For environments where the default version of Python doesn't meet the 
application's requirements, then it will be up to the owner of that 
environment to work out how to get that specific application to run with 
the correct version (e.g. add a python3 alias and modify the main 
script's shebang line or use a wrapper script or GUI shortcut that 
explicitly invokes the correct python version).

Actually adding a python3 alias as part of the default py3k installation 
would bother me a little, as we'd then be stuck with providing it for 
the life of the 3.x series - adding cruft while trying to remove it 
seems like a backwards step.

And for in-house development, web-based applications or embedded devices 
where the developers have control of the run-time environment as well as 
the application code, then there is absolutely no problem at all, as the 
system will be configured to use the right version of the interpreter no 
matter which version it happens to be.

Cheers,
Nick.

P.S. Good thing we decided to keep string mod-formatting despite the 
addition of the format method ;)

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 6
Date: Mon, 4 Feb 2008 07:52:01 -0600
From: skip@pobox.com
Subject: [Python-3000] Does anyone remember the Red Hat 1.5->2.x
	fiasco?
To: python-3000@python.org 
Message-ID: <18343.6273.636210.6919@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii

This discussion of what to install Python 3.0 as reminded me that we've
already encountered this problem before.  As I recall, when Python 2.0 was
released Red Hat steadfastly refused to ship it with their then current
version of Linux.  It wasn't until the next RH product came out that they
shipped Python 2.x, and then the executable was called (I think) python2.

I no longer remember the details very well, but I wonder if there's
a lesson to be learned from that experience as we decide how to install
Python 3.0.

Skip


------------------------------

Message: 7
Date: Mon, 04 Feb 2008 16:21:46 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Cc: Mark Hammond <mark@enfoldsystems.com>
Message-ID: <47A72D8A.3030700@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Mike Meyer wrote:
> -2 on using the shebang line for this. The 2.X version-specific
> binaries are python2.X, so to use that, you'd have to make the shebang
> line invoke python2.X. Right now, if you upgrade an installation from
> 2.X to 2.X+1, you can expect most of the scripts to work assuming you
> take do care to install the same module set. Requiring explicit minor
> versions breaks that.

I'm on Mike's side here. There is no need to fix the Unix (and Mac OS X)
side of the problem because it was never broken in the first place.

The only problematic environment is (as usual) Windows. Windows has no
shebang and python.exe is most likely not in PATH. One has to go through
the registry to find Python 2.x and its executable.

For Windows the Python stdlib should get some means of starting a script
with a well defined Python version without relying on the file
extension. One possible way is to assign the .py and .pyw extension with
a small wrapper program written in C which parses the #! shebang line,
gets the right python.exe from the registry and starts the script with it.

Another way is a new Python extension (maybe .pys for python start) for
ini file like startup files:

---
[Python]
version=2.5,2.6
module=myprogram.main
gui=True

[Env]
pythonpath=..
---

The file causes the startup program to search for 2.5 and 2.6 in the
registry. It sets the env var PYTHONPATH to .. (relative to the location
of the file) and starts the program with pythonw.exe -m ""myprogram.main"".

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 10
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 9","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Brett Cannon)
   2. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Paul Moore)
   3. Re: Set literal (Greg Ewing)
   4. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Stephen J. Turnbull)
   5. Re: pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Stephen J. Turnbull)
   6. Re: pickle, cPickle, and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Nick Coghlan)
   7. Re: Namespaces are one honking great idea -- let's do	more of
      those! (Marcin ?Qrczak? Kowalczyk)


----------------------------------------------------------------------

Message: 1
Date: Sun, 3 Feb 2008 14:33:51 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<bbaeab100802031433r186e8b21td7598cace019b7@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Feb 3, 2008 1:37 PM, Jim Fulton <jim@zope.com> wrote:
>
> On Jan 25, 2008, at 12:07 AM, Guido van Rossum wrote:
>
> > On Jan 24, 2008 8:59 PM, Aahz <aahz@pythoncraft.com> wrote:
> >> On Thu, Jan 24, 2008, Jim Fulton wrote:
> >>>
> >>> I don't know what that means.  I don't know that Jython or
> >>> IronPython
> >>> need to support cPickle. Honestly, I'd be happy to see a *much*
> >>> smaller standard library and, IMO, the standard library doesn't need
> >>> to include pickle or cPickle.
> >>
> >> While it's easy enough to work around, my company would be unhappy if
> >> pickle were removed, and so would my previous company.
> >
> > I don't know why Jim is saying this (*),
>
> I think the standard library is bloated.  I'd much prefer to see a
> leaner standard library that really provides features that are close
> to the language and provide a packaging system that make it easy to
> install other packages as needed.  I think setuptools is a pretty good
> start at this.
>

But we need a solution, not a start. While the stdlib is bloated, it
is being trimmed down in Py3K already. If you want to trim more then
push for stuff to be removed on a module-to-module basis. But going
from ""batteries included"" to ""batteries easily downloaded"" is quite a
shift for Python. And as of right now I really don't see how that
level of a shift can be coded, discussed, and put into Py3K before it
is released. Let alone how difficult it would be to get the manpower
lined up to maintain a server that is going to get hammered by module
downloads (PyPI still goes down on occasion and this would just
increase the strain on the server by a good amount).

> > but it's not going to happen.
> > pickle is here to stay. cPickle is a different story; 99% of programs
> > shouldn't be bothered with the choice between the two.
>
> IMO, the programs the people who care about cPickle don't want to
> sacrifice speed to get the same flexibility as pickle. Similarly, I
> don't want to lose pickles flexibility in the interest of unification.
>

Flexibility is not going anywhere; the C implementation is the one
that needs to change. If the speed is not fast enough then patches are
welcome. But I know I am tired of maintaining two test suites, two
sets of docs, explaining to users why they can't subclass stuff from
cPickle, etc. Plus alternative Python implementations should not have
to say ""we are incompatible with the stdlib because we don't have
cPickle and its quirks"".

-Brett


------------------------------

Message: 2
Date: Sun, 3 Feb 2008 22:55:43 +0000
From: ""Paul Moore"" <p.f.moore@gmail.com>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<79990c6b0802031455i75eeabf1jfd916a9c71561a41@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Whoops, that was meant to go to the list. Sorry.

On 03/02/2008, Brett Cannon <brett@python.org> wrote:
> But we need a solution, not a start. While the stdlib is bloated, it
> is being trimmed down in Py3K already. If you want to trim more then
> push for stuff to be removed on a module-to-module basis. But going
> from ""batteries included"" to ""batteries easily downloaded"" is quite a
> shift for Python.

Absolutely. For a nice example of a ""worst case"" scenario, I'm behind
a corporate filewall which doesn't even let out HTTP except via the
Windows APIs (Windows ISA proxy, or some such). I know there are
workarounds for this, but that's not the point. Add to that no
compiler available plus a restrictive corporate policy, and there's
pretty much nothing that isn't in the core that would ever be ""easily
downloaded"".

I've no idea how representative I am, or what I might be
representative of (:-)) but for some of us, a large core is a real
benefit.

Paul.


------------------------------

Message: 3
Date: Mon, 04 Feb 2008 12:15:22 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <47A64B0A.6050306@canterbury.ac.nz>
Content-Type: text/plain; charset=us-ascii; format=flowed

Larry Hastings wrote:
> When compiling a mutable type with an immutable equivalent, does Python 
> generate create-empty-object/insert-each-item bytecodes, or does it 
> create an immutable constant then cast it to the appropriate type?

Last time I looked, for lists and dicts it creates an empty
object and adds items to it one at a time, and for tuples it
pushes all the items onto the stack and then uses a special
create-tuple bytecode.

For frozenset constructors it could use a similar technique as
for tuples. If set comprehensions were to produce frozen sets,
something else would need to be done, such as creating it
mutable initially and freezing it after construction, or
having a special bytecode that's allowed to add an item to
a frozenset.

> p.s. or maybe the create-empty-object takes an optional parameter of 
> ""and reserve this much space inside""?

That wouldn't work for set comprehensions, since there's no
way of telling ahead of time how many items it will contain.
It mightn't help much anyway, given Python's proportional
reallocation strategy.

-- 
Greg Ewing, Computer Science Dept, +--------------------------------------+
University of Canterbury,	   | Carpe post meridiem!          	  |
Christchurch, New Zealand	   | (I'm not a morning person.)          |
greg.ewing@canterbury.ac.nz	   +--------------------------------------+


------------------------------

Message: 4
Date: Mon, 04 Feb 2008 12:55:29 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <873as98jf2.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Greg Ewing writes:

 > I just think the python2 and python3 worlds should be
 > kept separate by default, seeing as there are both forwards
 > and backwards incompatibilities.

I'm afraid that's exactly what will happen: the two worlds will tend
to be *kept* separate despite the common ground.

 > A specified app seems quite a likely reason to me.

My point is that they'll install that Python for use only by the app.
They won't want to change their default Python.

 > And if they've gotten used to ""python"" taking them to python3.x,
 > they'll get a surprise when it suddenly starts pointing to 2.x
 > after they installed an older Python for what to them was meant to
 > be a restricted purpose.

I wonder how many people out there will be ""surprised"" by sudden
changes in the version of Python installed.  On Mac OS X 10.4 +
MacPorts, MacPorts does not install an /opt/local/bin/python at all,
so that although /opt/local/bin takes precedence over /usr/bin, you
get the default Mac OS X install of Python 2.3 as ""python"".  Linux
distributions (at least Debian and Gentoo) ""anoint"" a particular
Python version as the one that infrastructure software uses and that
is the default unless the user explicitly sets a different version as
""python"".  Installing multiple versions of Python does not reset the
""python"" link.

So it seems to me that this particular issue can easily be handled if
Python source builds by default only install a ""python"" link if (a)
there is none or (b) the newly installed version is an upgrade of the
current ""python"".




------------------------------

Message: 5
Date: Mon, 04 Feb 2008 13:16:56 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] pickle, cPickle,	and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: ""Brett Cannon"" <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <871w7t8ifb.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Brett Cannon writes:
 > On Feb 3, 2008 1:37 PM, Jim Fulton <jim@zope.com> wrote:

 > > I think the standard library is bloated.  I'd much prefer to see a
 > > leaner standard library that really provides features that are close
 > > to the language and provide a packaging system that make it easy to
 > > install other packages as needed.  I think setuptools is a pretty good
 > > start at this.
 > 
 > But we need a solution, not a start. While the stdlib is bloated, it
 > is being trimmed down in Py3K already. If you want to trim more then
 > push for stuff to be removed on a module-to-module basis. But going
 > from ""batteries included"" to ""batteries easily downloaded"" is quite a
 > shift for Python.

Trimming the standard library does not necessarily mean ""batteries not
included"".  It could mean that instead of getting form-fitting super-
high-output custom <whatever the current technology is>, you get a
pair of AA Duracell alkalines that you can buy by the gross at CostCo.

In other words, take whatever the module maintainer is recommending,
run the full test suite, and if everything outside of the ""official
stdlib"" passes its own unit tests and any random cross-module tests
that happen to touch it, ship it with the main distribution.

This is conceptually a substantial step down in quality control.  But
in practice, is it really so different from what happens now?


------------------------------

Message: 6
Date: Mon, 04 Feb 2008 19:28:38 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] pickle, cPickle, and the standard library
	(was Re: [Python-Dev] inst_persistent_id)
To: Brett Cannon <brett@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A6DAC6.3000301@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon wrote:
> If you want to trim more then
> push for stuff to be removed on a module-to-module basis. But going
> from ""batteries included"" to ""batteries easily downloaded"" is quite a
> shift for Python.

Not to mention it being a serious pain in the rear for those of us who 
have to get licenses vetted by our contracts department before we're 
allowed to copy open source code across to isolated networks with no 
direct access to stuff that is ""in the cloud"".

A batteries-included standard library is a *huge* boon in that kind of 
environment - one license to vet and one installer to copy across, 
instead of suffering a death of a thousand cuts as we have to retrieve 
different bits and pieces from PyPI (or rewrite our own versions from 
scratch).

We-don't-all-work-in-web-app-development-ly,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 7
Date: Mon, 04 Feb 2008 11:00:19 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] Namespaces are one honking great idea --
	let's do	more of	those!
To: python-3000@python.org
Message-ID: <1202119219.21638.4.camel@qrnik>
Content-Type: text/plain

Dnia 03-02-2008, N o godzinie 10:24 +0900, Stephen J. Turnbull pisze:

> I don't see any need to shorten ""python3.0"" to ""python3"".

There is a need. Using #!/usr/bin/python3.0 would break as soon as
python3.1 is released, while #!/usr/bin/python3 would be fine, at least
in the next few years.

Using #!/usr/bin/python is not fine in an environment with both Python 2
and Python 3 installed, and such an environment is reasonable if one has
Python 2 programs running in production which have not been updated to
Python 3 yet, while he wants to start using Python 3 for other programs.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 9
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 8","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Larry Hastings)
   2. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Bill Janssen)
   3. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Leif Walsh)
   4. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (skip@pobox.com)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Greg Ewing)
   6. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Greg Ewing)
   7. Re: [Python-Dev]  inst_persistent_id (Jim Fulton)
   8. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Ron Adam)
   9. pickle, cPickle,	and the standard library (was Re:
      [Python-Dev] inst_persistent_id) (Jim Fulton)


----------------------------------------------------------------------

Message: 1
Date: Sun, 03 Feb 2008 03:21:22 -0800
From: Larry Hastings <larry@hastings.org>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <47A5A3B2.5090805@hastings.org>
Content-Type: text/plain; charset=""iso-8859-1""

Nicko van Someren wrote:
> Do we really want set literals at all, given that set(...) exists?
>
> If we are going to have one then, it seems to make sense to have  
> both.  If we are going to have both, I would rather that they generate  
> the same type of set.


Maybe the postings crossed in the ether, but Guido said as much on the 
30th; either they'd both change or neither would change.

Personally I like the idea of changing them to frozensets; a) it's easy 
to cast to set() if you want mutability, b) it makes the

    if x in { 1, 2, 5 }: # three, sir!

idiom faster.  Yeah, it's a bit ticklish wrt dict 
literals/comprehensions returning mutable types, but at least tuple() 
would have company in the immutable constants department.  So +1 from 
me... for what little that is worth.

When compiling a mutable type with an immutable equivalent, does Python 
generate create-empty-object/insert-each-item bytecodes, or does it 
create an immutable constant then cast it to the appropriate type?  My 
intuition is that the latter would be faster; given the professionalism 
of the Python development community, I assume both approaches have been 
tried, and the faster one was switched to long ago?  A coworker of mine 
got a tiny--but measurable--speedup by applying that style of 
optimization to PHP arrays.


/larry/

p.s. or maybe the create-empty-object takes an optional parameter of 
""and reserve this much space inside""?  That would probably even the 
playing field.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080203/e3d481cf/attachment-0001.htm 

------------------------------

Message: 2
Date: Sun, 3 Feb 2008 10:31:57 PST
From: Bill Janssen <janssen@parc.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: Thomas Lee <tom@vector-seven.com>
Cc: python-3000@python.org
Message-ID: <08Feb3.103157pst.""58696""@synergy1.parc.xerox.com>

> skip@pobox.com wrote:
> >     Leif> There is already an idiom with other packages (pygtk etc.) that
> >     Leif> suggests syntax like
> >
> >     Leif> try:
> >     Leif>     python.require('3.1')
> >     Leif> except:
> >     Leif>     print('Some warning about version incompatibility')
> >     Leif>     exit(1)
> >
> > It won't work in this case.  Compilation of the module might well fail
> > because of Python2/Python3 syntax differences.
> >
> >   
> Ah, of course. Scratch my last email. :)
> 
> Cheers,
> T

Does that mean you'd need a new keyword, something like

     requireversion 3.1

Bill


------------------------------

Message: 3
Date: Sun, 3 Feb 2008 13:45:27 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: skip@pobox.com
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<cc7430500802031045q312df430k5766ba7a907f41ae@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 2, 2008 10:58 PM,  <skip@pobox.com> wrote:
>
>     Leif> There is already an idiom with other packages (pygtk etc.) that
>     Leif> suggests syntax like
>
>     Leif> try:
>     Leif>     python.require('3.1')
>     Leif> except:
>     Leif>     print('Some warning about version incompatibility')
>     Leif>     exit(1)
>
> It won't work in this case.  Compilation of the module might well fail
> because of Python2/Python3 syntax differences.

Well, then this isn't something to be implemented for python 2, it's
something to consider for python 3 and greater.  I see what you're
saying though, and perhaps in the interim, a shebang fix will suffice.

-- 
Cheers,
Leif


------------------------------

Message: 4
Date: Sun, 3 Feb 2008 14:10:26 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <18342.8114.345326.669792@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    >> It won't work in this case.  Compilation of the module might well
    >> fail because of Python2/Python3 syntax differences.

    Leif> Well, then this isn't something to be implemented for python 2,
    Leif> it's something to consider for python 3 and greater.  

It won't work there either.  It's quite possible that a module written for
Python 2 won't compile under Python 3.  Compilation is currently the only
route to execution.  You'd have to come up with some other scheme.  Someone
suggested something akin to a ""from __future__"" facility or the #! trick you
and others mentioned, but that would only work for Python 2.6 and above.

Skip



------------------------------

Message: 5
Date: Mon, 04 Feb 2008 09:41:35 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A626FF.9050008@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

> Leif Walsh wrote:

>>try:
>>    python.require('3.1')

A run-time test isn't sufficient, because not all 2.x
code will even parse in 3.x. Something syntactic is
needed.

--
Greg


------------------------------

Message: 6
Date: Mon, 04 Feb 2008 09:47:27 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A6285F.90008@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Stephen J. Turnbull wrote:

> If somebody's introduction to Python is Python 3, I don't see why
> they'd want to go back except for a specific app.

A specified app seems quite a likely reason to me. And
if they've gotten used to ""python"" taking them to python3.x,
they'll get a surprise when it suddenly starts pointing to
2.x after they installed an older Python for what to them
was meant to be a restricted purpose.

I just think the python2 and python3 worlds should be
kept separate by default, seeing as there are both forwards
and backwards incompatibilities.

--
Greg


------------------------------

Message: 7
Date: Sun, 3 Feb 2008 16:27:56 -0500
From: Jim Fulton <jim@zope.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Alexandre Vassalotti <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <832CE438-9760-4DAE-95FD-34DF1ACF8871@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Jan 24, 2008, at 9:25 PM, Alexandre Vassalotti wrote:

> On Jan 24, 2008 9:47 AM, Jim Fulton <jim@zope.com> wrote:
>>
>> On Jan 23, 2008, at 4:30 PM, Alexandre Vassalotti wrote:
>>> I am not sure what you mean by ""cPickle.Pickler and  
>>> cPickle.Unpickler
>>> subclassible in the same way as the pickle classes."" It is  
>>> possible to
>>> subclass the C implementation. However, the C implementation does  
>>> not
>>> expose pickle ""private"" methods, such as Pickler.save_int and
>>> Unpickler.load_tuple. This is fine because these were never  
>>> documented
>>> as part of the interface of pickle.
>>
>> That doesn't mean that they aren't overridden.  I've overridden them
>> in specialized applications.  I suspect that others have as well.
>>
>
> Well even in pickle.py, you can't override the save_* and load_*
> methods (at least, directly), since they are called via a dispatch
> dictionary.

You have to override the dictionary too. :)

>> I'm not really looking for anything that isn't there already.  The
>> python pickle version is more extensible that cPickle and I find that
>> valuable.  I don't want to make cPickle more flexible.  I'd willing  
>> to
>> trade off speed and flexibility depending on the application.  I  
>> don't
>> want to lose either in the interest of unification.
>
> How much of cPickle is really speed critical?

cPickle is all about speed.

> Personally, I think
> built-in types pickling should be optimized as much as possible and
> other things, such as user-defined classes and extension types
> pickling, could be done in Python.

The whole reduce dance should be in C, after all, it already is.

Most user-defined types inherit the reduce method(s) provided by  
object, which is already written in C.

>> Having said that, I would agree that there are certain aspects of
>> their external APIs that ought to be unified.  A good example is
>> handling of globals.
>
> Could you elaborate about this, please; how the handling of globals by
> cPickle is different from pickle?


pickle.Unpickler has a find_class method that loads globals. This can  
be overridden in a subclass to provide alternate behavior.

cPickle.Unpickler has a find_global attribute that can be assigned to  
provide alternate behavior. (Internally, a find_class C member is used  
for hysterical reasons. :)

Jim

--
Jim Fulton
Zope Corporation




------------------------------

Message: 8
Date: Sun, 03 Feb 2008 15:09:29 -0600
From: Ron Adam <rrr@ronadam.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: skip@pobox.com
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <47A62D89.6020202@ronadam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed



skip@pobox.com wrote:
>     >> It won't work in this case.  Compilation of the module might well
>     >> fail because of Python2/Python3 syntax differences.
> 
>     Leif> Well, then this isn't something to be implemented for python 2,
>     Leif> it's something to consider for python 3 and greater.  
> 
> It won't work there either.  It's quite possible that a module written for
> Python 2 won't compile under Python 3.  Compilation is currently the only
> route to execution.  You'd have to come up with some other scheme.  Someone
> suggested something akin to a ""from __future__"" facility or the #! trick you
> and others mentioned, but that would only work for Python 2.6 and above.
> 
> Skip

The tokenizer.c file has the routines to detect encoding specifiers before 
the file is compiled.  So it could be done there right after the file 
encoding is detected.

Ron











------------------------------

Message: 9
Date: Sun, 3 Feb 2008 16:37:18 -0500
From: Jim Fulton <jim@zope.com>
Subject: [Python-3000] pickle, cPickle,	and the standard library (was
	Re: [Python-Dev] inst_persistent_id)
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <2939553A-422C-4222-8DFB-4734BB31CB8E@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Jan 25, 2008, at 12:07 AM, Guido van Rossum wrote:

> On Jan 24, 2008 8:59 PM, Aahz <aahz@pythoncraft.com> wrote:
>> On Thu, Jan 24, 2008, Jim Fulton wrote:
>>>
>>> I don't know what that means.  I don't know that Jython or  
>>> IronPython
>>> need to support cPickle. Honestly, I'd be happy to see a *much*
>>> smaller standard library and, IMO, the standard library doesn't need
>>> to include pickle or cPickle.
>>
>> While it's easy enough to work around, my company would be unhappy if
>> pickle were removed, and so would my previous company.
>
> I don't know why Jim is saying this (*),

I think the standard library is bloated.  I'd much prefer to see a  
leaner standard library that really provides features that are close  
to the language and provide a packaging system that make it easy to  
install other packages as needed.  I think setuptools is a pretty good  
start at this.

> but it's not going to happen.
> pickle is here to stay. cPickle is a different story; 99% of programs
> shouldn't be bothered with the choice between the two.

IMO, the programs the people who care about cPickle don't want to  
sacrifice speed to get the same flexibility as pickle. Similarly, I  
don't want to lose pickles flexibility in the interest of unification.

> (*) I can only speculate that it's because Jim, whose ZODB is probably
> pickle's most intensive user,

Maybe, but I'm not sure.

> would like to ""own"" it

Not particularly.

> and would like to
> evolve it much faster than the nearly frozen version in the standard
> library.

Fortunately, that's not the case anymore. (Except maybe for settling  
the inst_persistent_id optimization.)

> I would like to suggest that Jim can evolve pickle without
> removing it from the standard library -- he could just include a fork
> in the Zope package.

Of course. No need to suggest it. :)

As I said earlier, I have a general desire to see a smaller standard  
library.

Jim

--
Jim Fulton
Zope Corporation




------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 8
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 7","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Gregory P. Smith)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Thomas Lee)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Thomas Lee)
   4. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Thomas Lee)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Stephen J. Turnbull)


----------------------------------------------------------------------

Message: 1
Date: Sat, 2 Feb 2008 23:47:50 -0800
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""skip@pobox.com"" <skip@pobox.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<52dc1c820802022347n45d830dag6964f299a3a5617d@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

yep we've already been through that problem in the past when list
comprehensions, generators and with were added to name a few.  since python
3 code is highly unlikely to even parse with a 2.x interpreter much of the
time thats a reason to consider a .py3 extension if this precedent of not
caring is to be broken.

-0 on using .py3 instead of .py for python 3.  i think its slightly silly
but i won't object.

+1 on devising a way (to appear starting in 2.6 and 3.0) of marking the
minimum language version required by a file near the top so that the parser
can bail with a useful error message instead of one confusing to the lay
person.  similar to a from future import type of thing perhaps?  or should
python parse a #! line and magically notice a required major version number
in the python binary name (evil but it would work and magically annotate a
bunch of existing code as 2 vs 3)?

also yes python 3 should build and install as 'python3' as the short form of
its name though realistically anyone sane will write their code with #!
lines specifying the actual version in the executable name and have shell
aliases setup if they want an even shorter name.

On 2/2/08, skip@pobox.com <skip@pobox.com> wrote:
>
>
>     Leif> There is already an idiom with other packages (pygtk etc.) that
>     Leif> suggests syntax like
>
>     Leif> try:
>     Leif>     python.require('3.1')
>     Leif> except:
>     Leif>     print('Some warning about version incompatibility')
>     Leif>     exit(1)
>
> It won't work in this case.  Compilation of the module might well fail
> because of Python2/Python3 syntax differences.
>
> Skip
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/greg%40krypto.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080202/4bbec1cf/attachment-0001.htm 

------------------------------

Message: 2
Date: Sun, 03 Feb 2008 19:22:08 +1100
From: Thomas Lee <tom@vector-seven.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A579B0.60208@vector-seven.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed


Leif Walsh wrote:
> On Feb 2, 2008 8:38 PM, Ron Adam <rrr@ronadam.com> wrote:
>  
>> Instead of a shebang which depends on the shell, maybe a version 
>> specifier
>> of some sort could be used?
>>
>>     # -*- pyversions: 2.5, 2.6 -*-
>>
>> So if a python 3.x detects a too low a version, maybe it can try to 
>> restart
>> the program with the highest installed version specified.  (Or some
>> variation of this.)
>>     
>
> There is already an idiom with other packages (pygtk etc.) that
> suggests syntax like
>
> try:
>     python.require('3.1')
> except:
>     print('Some warning about version incompatibility')
>     exit(1)
>
> This concern seems better addressed within the language itself, rather
> than in the shebang (which would make the decision depend on the shell
> and the packaging involved).
>
>   
Great idea. Since we've already got everything we need in version_info, 
this would be trivial and could address most of the issues raised ... 
something like this?

 >>> def checkversion(maj, min, rel):
...     version = sys.version_info
...     if version[0] < maj or version[1] < min or version[2] < rel:
...             raise Exception('Version %d.%d.%d of Python is required 
for this program' % (maj, min, rel))
...
 >>> checkversion(2, 5, 0)
 >>> checkversion(3, 0, 0)
Traceback (most recent call last):
 File ""<stdin>"", line 1, in <module>
 File ""<stdin>"", line 4, in checkversion
Exception: Version 3.0.0 of Python is required for this program
 >>>

Cheers,
T




------------------------------

Message: 3
Date: Sun, 03 Feb 2008 19:23:20 +1100
From: Thomas Lee <tom@vector-seven.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A579F8.5080302@vector-seven.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

skip@pobox.com wrote:
>     Leif> There is already an idiom with other packages (pygtk etc.) that
>     Leif> suggests syntax like
>
>     Leif> try:
>     Leif>     python.require('3.1')
>     Leif> except:
>     Leif>     print('Some warning about version incompatibility')
>     Leif>     exit(1)
>
> It won't work in this case.  Compilation of the module might well fail
> because of Python2/Python3 syntax differences.
>
>   
Ah, of course. Scratch my last email. :)

Cheers,
T



------------------------------

Message: 4
Date: Sun, 03 Feb 2008 19:02:02 +1100
From: Thomas Lee <tom@vector-seven.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A574FA.9010308@vector-seven.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed


Leif Walsh wrote:
> On Feb 2, 2008 8:38 PM, Ron Adam <rrr@ronadam.com> wrote:
>   
>> Instead of a shebang which depends on the shell, maybe a version specifier
>> of some sort could be used?
>>
>>     # -*- pyversions: 2.5, 2.6 -*-
>>
>> So if a python 3.x detects a too low a version, maybe it can try to restart
>> the program with the highest installed version specified.  (Or some
>> variation of this.)
>>     
>
> There is already an idiom with other packages (pygtk etc.) that
> suggests syntax like
>
> try:
>     python.require('3.1')
> except:
>     print('Some warning about version incompatibility')
>     exit(1)
>
> This concern seems better addressed within the language itself, rather
> than in the shebang (which would make the decision depend on the shell
> and the packaging involved).
>
>   
Great idea. Since we've already got everything we need in version_info, 
this would be trivial and could address most of the issues raised ... 
something like this?

 >>> def checkversion(maj, min, rel):
...     version = sys.version_info
...     if version[0] < maj or version[1] < min or version[2] < rel:
...             raise Exception('Version %d.%d.%d of Python is required 
for this program' % (maj, min, rel))
...
 >>> checkversion(2, 5, 0)
 >>> checkversion(3, 0, 0)
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""<stdin>"", line 4, in checkversion
Exception: Version 3.0.0 of Python is required for this program
 >>>

Cheers,
T



------------------------------

Message: 5
Date: Sun, 03 Feb 2008 18:15:33 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <87hcgq8kp6.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Greg Ewing writes:
 > Stephen J. Turnbull wrote:
 > 
 > > I don't see any need to shorten ""python3.0"" to ""python3"".
 > 
 > I was thinking that ""python3"" would be the 3.x series
 > equivalent of what ""python"" is now, i.e. installation
 > of 3.0 would create links called ""python3.0"" and (unless
 > you're doing altinstall) also ""python3"".

Well, yes, I understood that.  I just don't see a need for it.  At any
given time I have a preferred Python, and I alias python to that.
When I need one of the others, I invoke them as ""pythonX.Y"".  Even on
a shared system, most people will be allowed to have a private ~/bin
directory or shell aliases.

 > > Also, another exception should be if there is no other Python
 > > installed.  Then installing a link at ""python"" should be OK.
 > 
 > Until you subsequently go to install one of the 2.x
 > versions.

If somebody's introduction to Python is Python 3, I don't see why
they'd want to go back except for a specific app.  It *is* a better
language than Python 2 or Python 1.  Such an app will have an
appropriate shebang or wrapper script.

That doesn't mean that it would be *bad* if they want to go back,
that's entirely up to them.  I just think it will be rare enough that
they can ask somebody how to create a symlink if they need to.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 7
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 6","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Greg Ewing)
   2. Re: Set literal (Greg Ewing)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   4. Re: Set literal (Stephen J. Turnbull)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Stephen J. Turnbull)
   6. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Stephen J. Turnbull)
   7. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Ron Adam)
   8. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Leif Walsh)
   9. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (skip@pobox.com)
  10. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Sun, 03 Feb 2008 11:59:47 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A4F5E3.7030609@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Stephen J. Turnbull wrote:
> Mac OS X's open command does something according to extension:
> 
> I don't know what, though.  The disk spun, I waited a second, and then
> the prompt returned. :-)

I just tried an experiment on my system, and it appears
to want to launch IDLE -- but IDLE seems to be broken for
me, so it doesn't work properly.

But MacOSX certainly *can* launch things based on filename
extension, so it would be possible to set it up to work
the way Windows does, I think.

Personally I never use it that way -- I launch all my
text-mode Python programs from a shell, and make application
bundles of anything I want to launch from the Finder.

--
Greg


------------------------------

Message: 2
Date: Sun, 03 Feb 2008 12:02:30 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org
Message-ID: <47A4F686.2050800@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Georg Brandl wrote:
> Hm, but wouldn't he then have removed list comprehensions
> by now using the time machine?

I seem to remember that LCs were being seriously considered
for removal in 3.x at one point. I'm not sure of all the
reasons why they were kept.

--
Greg


------------------------------

Message: 3
Date: Sun, 03 Feb 2008 00:58:10 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fo302i$m1s$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Leif Walsh wrote:
> It doesn't make any sense to me why we would want a different
> extension just because some code is the ""part to run first"".  Isn't it
> all the same code?

It makes perfectly sense for some OSes. On Windows there is already a
second file extension for Python scripts called ""pyw"".



------------------------------

Message: 4
Date: Sun, 03 Feb 2008 09:55:08 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Set literal
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <87tzkq97v7.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Greg Ewing writes:

 > But list(genexp) gives you very nearly the same thing [as a list
 > comprehension] -- so near that I find it hard to imagine anyone
 > would have thought to suggest a dedicated LC syntax if genexps had
 > already been present in the language.

Point taken, except that I find your faith in human nature
touching.<wink>  *Somebody* would have suggested it!


------------------------------

Message: 5
Date: Sun, 03 Feb 2008 10:05:01 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: skip@pobox.com
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <87sl0a97eq.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

skip@pobox.com writes:
 > 
 >     Stephen> FWIW, I can tell you that Skip will get pushback from me if he
 >     Stephen> proposes registering those extensions in XEmacs's
 >     Stephen> auto-mode-alist.  I won't absolutely veto it, but I'll
 >     Stephen> certainly suggest to the other reviewers that this is a bad
 >     Stephen> idea.
 > 
 > I would never ask for such a thing. ""xyz.py"" is fine by me for Python3
 > source files.

You personally wouldn't.  If users of Python-mode asked for it, you
would pass on the requests, though, I suppose.  And they will if those
extensions get registered in Windows as executable.

I've long thought what the Emacsen should do is learn to recognize
shebangs and other content-based file magic.  XEmacs *can*, I think
GNU can too, but we haven't worked out how to do it in a way that
interacts well with the extension recognition feature (which is what
Ye Olde Guard favors).




------------------------------

Message: 6
Date: Sun, 03 Feb 2008 10:24:31 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org, python-ideas@python.org
Message-ID: <87oday96i8.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Guido asked that this thread be moved to python-3000.  Reply-To set.

Greg Ewing writes:

 > Adam Olsen wrote:
 > > They also have often broken python code that depended on one or two
 > > small details, and we haven't needed a new extension before.
 > 
 > But we haven't had such major incompatibilities
 > between versions before.
 > 
 > At the least, I think the executable should only
 > be installed as ""python3"", and never just ""python""
 > (unless you know what you're doing and ask for it).

I don't see any need to shorten ""python3.0"" to ""python3"".

Also, another exception should be if there is no other Python
installed.  Then installing a link at ""python"" should be OK.



------------------------------

Message: 7
Date: Sat, 02 Feb 2008 19:38:27 -0600
From: Ron Adam <rrr@ronadam.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <47A51B13.4020500@ronadam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed



Christian Heimes wrote:
> Stephen J. Turnbull wrote:
>> Mac OS X's open command does something according to extension:
>>
>> chibi:tmp steve$ echo 'print ""hello, world""' >> hello.py
>> chibi:tmp steve$ python hello.py 
>> hello, world
>> chibi:tmp steve$ open hello.py 
>> chibi:tmp steve$ 
>>
>> I don't know what, though.  The disk spun, I waited a second, and then
>> the prompt returned. :-)
> 
> I don't know how Mac OS X's open wrapper works. It should open the same
> program as finder does when you clock on a file.
> 
>> How about a wrapper which (like the Unix shells) starts the
>> interpreter from the file named in the shebang if any, and provide a
>> tool for updating shebangs conveniently (for the user) and
>> automatically (for installers).
>>
>> Of course you need to make sure that this wrapper doesn't use any
>> Python 3000 features.<wink>
> 
> I'm not interested in writing a replacement for the shebang magic. It
> may lead to more problems than it's worth the additional work. The
> wrapper must be implemented in C.
> 
> Christian


Instead of a shebang which depends on the shell, maybe a version specifier 
of some sort could be used?

    # -*- pyversions: 2.5, 2.6 -*-

So if a python 3.x detects a too low a version, maybe it can try to restart 
the program with the highest installed version specified.  (Or some 
variation of this.)

Ron



------------------------------

Message: 8
Date: Sat, 2 Feb 2008 20:52:14 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: rrr@ronadam.com
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<cc7430500802021752s5ddd2917n1b438db23c4e1308@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 2, 2008 8:38 PM, Ron Adam <rrr@ronadam.com> wrote:
> Instead of a shebang which depends on the shell, maybe a version specifier
> of some sort could be used?
>
>     # -*- pyversions: 2.5, 2.6 -*-
>
> So if a python 3.x detects a too low a version, maybe it can try to restart
> the program with the highest installed version specified.  (Or some
> variation of this.)

There is already an idiom with other packages (pygtk etc.) that
suggests syntax like

try:
    python.require('3.1')
except:
    print('Some warning about version incompatibility')
    exit(1)

This concern seems better addressed within the language itself, rather
than in the shebang (which would make the decision depend on the shell
and the packaging involved).

-- 
Cheers,
Leif


------------------------------

Message: 9
Date: Sat, 2 Feb 2008 21:58:48 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <18341.15352.788886.98828@montanaro.dyndns.org>
Content-Type: text/plain; charset=us-ascii


    Leif> There is already an idiom with other packages (pygtk etc.) that
    Leif> suggests syntax like

    Leif> try:
    Leif>     python.require('3.1')
    Leif> except:
    Leif>     print('Some warning about version incompatibility')
    Leif>     exit(1)

It won't work in this case.  Compilation of the module might well fail
because of Python2/Python3 syntax differences.

Skip


------------------------------

Message: 10
Date: Sun, 03 Feb 2008 20:26:26 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A56CA2.1010701@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Stephen J. Turnbull wrote:

> I don't see any need to shorten ""python3.0"" to ""python3"".

I was thinking that ""python3"" would be the 3.x series
equivalent of what ""python"" is now, i.e. installation
of 3.0 would create links called ""python3.0"" and (unless
you're doing altinstall) also ""python3"".

> Also, another exception should be if there is no other Python
> installed.  Then installing a link at ""python"" should be OK.

Until you subsequently go to install one of the 2.x
versions.

--
Greg



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 6
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 5","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking	great	idea --
      let's do more of those! (Mike Meyer)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Stephen J. Turnbull)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   4. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   5. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Leif Walsh)
   6. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (skip@pobox.com)
   7. Re: Set literal (Greg Ewing)
   8. Re: Set literal (Georg Brandl)
   9. Re: [Python-ideas] Namespaces are one honking	great idea --
      let's do more of those! (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Sat, 2 Feb 2008 11:46:57 -0500
From: Mike Meyer <mwm@mired.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <20080202114657.60185e56@bhuda.mired.org>
Content-Type: text/plain; charset=US-ASCII

On Sat, 2 Feb 2008 08:55:10 -0600 skip@pobox.com wrote:
> Anybody who installed multiple versions of Python on their computer today -
> at least in the Unixoid world - already has to know about ""make altinstall""
> so they don't accidentally obliterate the python symlink.  I don't
> understand what all the fuss is.

And - at least in my experience - chances are good that nothing but
the simplest scripts will work on multiple versions anyway, because
they don't have the same set of third party - or possibly even builtin
- modules installed, unless someone took care to make sure that
exactly that happened, and even then the scripts generally only moved
one direction.

And it's not like backwards compatibility problems are unheard of,
either with Python and pretty much every other language community.  I
think the fuss is because the Python community has generally taken
more care with this than other languages, and in this case we're
explicitly ignoring it.

    <mike

-- 
Mike Meyer <mwm@mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.


------------------------------

Message: 2
Date: Sun, 03 Feb 2008 06:04:30 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Christian Heimes <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID: <87ve5783z5.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Christian Heimes writes:

 > > Having to type ""python3.0"" explicitly strikes me as unnecessarily verbose.
 > 
 > +1

It won't once python 3.1 is released.

 > > As for module file name extensions, what speaks against allowing (not
 > > mandating) ""py3"" for Python 3.x modules?

Namespace pollution, of various kinds.  Python 3.x modules will
already be placed in python3.x/site-packages anyway.

I know that in Emacs we have a registry for which mode should be used
by default for files with names matching a given regexp.  The initial
registry basically stabilized a few years back, because new
applications were bumping into extensions (the regexps are 95% of the
form ""\\.abc$"") previously claimed.

I think this is precisely analogous to recognizing which interpreter
should be used by extension, as well as being a practical case where
you're likely to get immediate pushback.

 > File extensions are only important on Windows. Or does anybody know a
 > system which starts scripts based on the extension like Windows does?

Mac OS X's open command does something according to extension:

chibi:tmp steve$ echo 'print ""hello, world""' >> hello.py
chibi:tmp steve$ python hello.py 
hello, world
chibi:tmp steve$ open hello.py 
chibi:tmp steve$ 

I don't know what, though.  The disk spun, I waited a second, and then
the prompt returned. :-)

 > I see two ways to solve the program for Windows:
 > 
 > *  register additional file extensions for each Python version
 >    like .py26, .pyw26 (for pythonw.exe), .py30 etc.

FWIW, I can tell you that Skip will get pushback from me if he
proposes registering those extensions in XEmacs's auto-mode-alist.  I
won't absolutely veto it, but I'll certainly suggest to the other
reviewers that this is a bad idea.

 > * Write a wrapper for Windows which inspects the first line of
 >   a script, searches for ""#! ... python2.6"" or ""#!python26"" and
 >   starts the right interpreter.

How about a wrapper which (like the Unix shells) starts the
interpreter from the file named in the shebang if any, and provide a
tool for updating shebangs conveniently (for the user) and
automatically (for installers).

Of course you need to make sure that this wrapper doesn't use any
Python 3000 features.<wink>


------------------------------

Message: 3
Date: Sat, 02 Feb 2008 22:15:59 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fo2mif$t4i$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Georg Brandl wrote:
> No, but Python looks for modules with the extension "".py"" and not "".py3"".

Python should still use the .py, .pyc and .pyo extensions for Python
3.0. I'm proposing a different extension for entry points to programs -
the Python file that starts a program and contains the if __name__ ==
""__main__"" magic.

Do you suggest to drop the py extension and use py3 for all python files?

Christian



------------------------------

Message: 4
Date: Sat, 02 Feb 2008 22:33:07 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: python-3000@python.org
Message-ID: <47A4E193.6090503@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Stephen J. Turnbull wrote:
> Mac OS X's open command does something according to extension:
> 
> chibi:tmp steve$ echo 'print ""hello, world""' >> hello.py
> chibi:tmp steve$ python hello.py 
> hello, world
> chibi:tmp steve$ open hello.py 
> chibi:tmp steve$ 
> 
> I don't know what, though.  The disk spun, I waited a second, and then
> the prompt returned. :-)

I don't know how Mac OS X's open wrapper works. It should open the same
program as finder does when you clock on a file.

> How about a wrapper which (like the Unix shells) starts the
> interpreter from the file named in the shebang if any, and provide a
> tool for updating shebangs conveniently (for the user) and
> automatically (for installers).
> 
> Of course you need to make sure that this wrapper doesn't use any
> Python 3000 features.<wink>

I'm not interested in writing a replacement for the shebang magic. It
may lead to more problems than it's worth the additional work. The
wrapper must be implemented in C.

Christian



------------------------------

Message: 5
Date: Sat, 2 Feb 2008 16:33:30 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<cc7430500802021333ub10daa7t288562c83902159c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 2, 2008 4:15 PM, Christian Heimes <lists@cheimes.de> wrote:
> Python should still use the .py, .pyc and .pyo extensions for Python
> 3.0. I'm proposing a different extension for entry points to programs -
> the Python file that starts a program and contains the if __name__ ==
> ""__main__"" magic.

-1

It doesn't make any sense to me why we would want a different
extension just because some code is the ""part to run first"".  Isn't it
all the same code?

--
Cheers,
Leif


------------------------------

Message: 6
Date: Sat, 2 Feb 2008 15:52:31 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <18340.58911.137440.123488@montanaro.dyndns.org>
Content-Type: text/plain; charset=us-ascii


    Stephen> FWIW, I can tell you that Skip will get pushback from me if he
    Stephen> proposes registering those extensions in XEmacs's
    Stephen> auto-mode-alist.  I won't absolutely veto it, but I'll
    Stephen> certainly suggest to the other reviewers that this is a bad
    Stephen> idea.

I would never ask for such a thing. ""xyz.py"" is fine by me for Python3
source files.

Skip


------------------------------

Message: 7
Date: Sun, 03 Feb 2008 11:10:25 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <47A4EA51.3050506@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Stephen J. Turnbull wrote:
> Greg Ewing writes:
> 
>  > Also, if generator expressions had come first, we
>  > would probably never have gotten list comprehensions.
> 
> I don't understand.  A list comprehension is for when you know you're
> going to want to work with the whole list.

But list(genexp) gives you very nearly the same thing --
so near that I find it hard to imagine anyone would have
thought to suggest a dedicated LC syntax if genexps had
already been present in the language.

And if anyone had, Guido would have said ""-1, too many
ways to do it"".

--
Greg


------------------------------

Message: 8
Date: Sat, 02 Feb 2008 23:27:02 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fo2qnh$98r$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Greg Ewing schrieb:
> Stephen J. Turnbull wrote:
>> Greg Ewing writes:
>> 
>>  > Also, if generator expressions had come first, we
>>  > would probably never have gotten list comprehensions.
>> 
>> I don't understand.  A list comprehension is for when you know you're
>> going to want to work with the whole list.
> 
> But list(genexp) gives you very nearly the same thing --
> so near that I find it hard to imagine anyone would have
> thought to suggest a dedicated LC syntax if genexps had
> already been present in the language.
> 
> And if anyone had, Guido would have said ""-1, too many
> ways to do it"".

Hm, but wouldn't he then have removed list comprehensions
by now using the time machine?

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 9
Date: Sun, 03 Feb 2008 11:45:38 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <47A4F292.6080707@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Mike Meyer wrote:

> And - at least in my experience - chances are good that nothing but
> the simplest scripts will work on multiple versions anyway, because
> they don't have the same set of third party - or possibly even builtin
> - modules installed, unless someone took care to make sure that
> exactly that happened, and even then the scripts generally only moved
> one direction.

But at least you *can* set things up and write scripts
so that the same code works across versions. It's
going to be impossible, or at least very difficult, to
write code that works unchanged in both 2.x and 3.x.

--
Greg




------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 5
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 4","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Guido van Rossum)
   2. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Georg Brandl)
   3. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (skip@pobox.com)
   4. Re: [Python-ideas] Namespaces are one honking great	idea --
      let's do more of those! (Guido van Rossum)
   5. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Christian Heimes)
   6. Re: [Python-ideas] Namespaces are one honking	greatidea --
      let's do more of those! (Robert Brewer)
   7. Re: [Python-ideas] Namespaces are one honking great idea --
      let's do more of those! (Georg Brandl)
   8. Re: Set literal (Andrew McNabb)
   9. Announcing the Python core sprint at PyCon 2008 (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Sat, 2 Feb 2008 03:48:57 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: ""Ralf W. Grosse-Kunstleve"" <rwgk@yahoo.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20802020348m2267f03ev7ebcc04c3a6ae0ec@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

This should be brought up on the python-3000 list; I'm moving it there
using a Bcc to python-ideas.

To some extent it is up to the vendors who distribute binaries -- they
decide what to call it.

Perhaps we should only install ""python3.0"" and not ""python"". That is a
valid choice already and always has been (python2.1, python2.2, etc.
are always installed by default, ""python"" is just a convenient alias).

I think that worries about Python becoming the laughingstock of the
language world are highly exaggerated. The post you refer to sounds to
me like the typical cynical one-liner from someone who doesn't really
care, not about a position of someone who is influential in the world
of language users.

--Guido

PS. Java is the VB of this decare.

On Feb 1, 2008 10:41 PM, Ralf W. Grosse-Kunstleve <rwgk@yahoo.com> wrote:
> This is regarding the transition to Python 3, and the confusion caused
> by using the same executable name for two incompatible interpreters.
> The consequences of this struck me today when I saw this message
> appear on an important bulletin board for the field I'm working in:
>
> http://www.jiscmail.ac.uk/cgi-bin/webadmin?A2=ind0802&L=ccp4bb&T=0&F=&S=&P=1562
>
> This posting is from a heavy-weight in the field (lookup his name with
> Google or better The Web of Science). Basically he's suggesting to forget
> about Python because it is an unreliable environment.
>
> There is also this reply calling the original posting ""alarmist"":
>
> http://www.jiscmail.ac.uk/cgi-bin/webadmin?A2=ind0802&L=ccp4bb&T=0&F=&S=&P=1464
>
> And this one making fun of the whole thing:
>
> http://www.jiscmail.ac.uk/cgi-bin/webadmin?A2=ind0802&L=ccp4bb&T=0&F=&S=&P=1675
>
> I interpret these messages as early signs of an imminent decade of confusion.
> Therefore my plea:
>
> PLEASE GIVE THE PYTHON 3 EXECUTABLE A DIFFERENT NAME AND THE SCRIPTS
> A DIFFERENT EXTENSION.
>
> It will be a terrible political setback otherwise. Many people don't
> *want* to understand even if they could. Mixing up two incompatible
> interpreters under one name will give them plenty of ammunition for
> cheap jokes and for defending their not-invented-here-or-before-I-was-16
> attitude.
>
> Ralf
>
> P.S.: My wife is from Hungary. It seems all men in Hungary have to
> have one of exactly three names: Andras, Laszlo, or Balazs. I never
> know whom she's talking about...
>
>
>
> _______________________________________________
> Python-ideas mailing list
> Python-ideas@python.org
> http://mail.python.org/mailman/listinfo/python-ideas
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Sat, 02 Feb 2008 14:42:44 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fo1s0g$emo$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum schrieb:
> This should be brought up on the python-3000 list; I'm moving it there
> using a Bcc to python-ideas.
> 
> To some extent it is up to the vendors who distribute binaries -- they
> decide what to call it.
> 
> Perhaps we should only install ""python3.0"" and not ""python"". That is a
> valid choice already and always has been (python2.1, python2.2, etc.
> are always installed by default, ""python"" is just a convenient alias).
> 
> I think that worries about Python becoming the laughingstock of the
> language world are highly exaggerated. The post you refer to sounds to
> me like the typical cynical one-liner from someone who doesn't really
> care, not about a position of someone who is influential in the world
> of language users.

I would prefer a ""python3"" alias analogous to the current ""python"" alias,
at least as long as Python 2.x is still in wide use.

Having to type ""python3.0"" explicitly strikes me as unnecessarily verbose.

As for module file name extensions, what speaks against allowing (not
mandating) ""py3"" for Python 3.x modules?

 > PS. Java is the VB of this decare.

Had a close encounter with Java recently? :)

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 3
Date: Sat, 2 Feb 2008 08:55:10 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org
Message-ID: <18340.33870.160673.135647@montanaro-dyndns-org.local>
Content-Type: text/plain; charset=us-ascii


    Georg> I would prefer a ""python3"" alias analogous to the current
    Georg> ""python"" alias, at least as long as Python 2.x is still in wide
    Georg> use.

So, ""make install"" would install a python3.0 executable and make python3 a
symlink.  Makes sense to me. ""make bdfl-install"" could also create a symlink
to python3 called ""python"". ;-)

Anybody who installed multiple versions of Python on their computer today -
at least in the Unixoid world - already has to know about ""make altinstall""
so they don't accidentally obliterate the python symlink.  I don't
understand what all the fuss is.

Skip



------------------------------

Message: 4
Date: Sat, 2 Feb 2008 08:08:46 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great	idea -- let's do more of those!
To: skip@pobox.com
Cc: Georg Brandl <g.brandl@gmx.net>, python-3000@python.org
Message-ID:
	<ca471dc20802020808s69222f2av33c0010930244f04@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 2, 2008 6:55 AM,  <skip@pobox.com> wrote:
>
>     Georg> I would prefer a ""python3"" alias analogous to the current
>     Georg> ""python"" alias, at least as long as Python 2.x is still in wide
>     Georg> use.
>
> So, ""make install"" would install a python3.0 executable and make python3 a
> symlink.  Makes sense to me. ""make bdfl-install"" could also create a symlink
> to python3 called ""python"". ;-)
>
> Anybody who installed multiple versions of Python on their computer today -
> at least in the Unixoid world - already has to know about ""make altinstall""
> so they don't accidentally obliterate the python symlink.  I don't
> understand what all the fuss is.

Me neither. If you don't want to type ""python3.0"" why not create a shell alias?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sat, 02 Feb 2008 17:31:41 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fo25te$ch8$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Georg Brandl wrote:
> I would prefer a ""python3"" alias analogous to the current ""python"" alias,
> at least as long as Python 2.x is still in wide use.
> 
> Having to type ""python3.0"" explicitly strikes me as unnecessarily verbose.

+1

> As for module file name extensions, what speaks against allowing (not
> mandating) ""py3"" for Python 3.x modules?

File extensions are only important on Windows. Or does anybody know a
system which starts scripts based on the extension like Windows does?

I see two ways to solve the program for Windows:

*  register additional file extensions for each Python version
   like .py26, .pyw26 (for pythonw.exe), .py30 etc.

* Write a wrapper for Windows which inspects the first line of
  a script, searches for ""#! ... python2.6"" or ""#!python26"" and
  starts the right interpreter.

Christian



------------------------------

Message: 6
Date: Sat, 2 Feb 2008 09:00:31 -0800
From: ""Robert Brewer"" <fumanchu@aminus.org>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	greatidea -- let's do more of those!
To: ""Guido van Rossum"" <guido@python.org>,	<skip@pobox.com>
Cc: Georg Brandl <g.brandl@gmx.net>, python-3000@python.org
Message-ID:
	<F1962646D3B64642B7C9A06068EE1E6401FC2D4C@ex10.hostedexchange.local>
Content-Type: text/plain;	charset=""us-ascii""

Guido van Rossum wrote:
> On Feb 2, 2008 6:55 AM,  <skip@pobox.com> wrote:
> >
> >     Georg> I would prefer a ""python3"" alias analogous to the current
> >     Georg> ""python"" alias, at least as long as Python 2.x is still
in
> >     Georg> wide use.
> >
> > So, ""make install"" would install a python3.0 executable and make
> > python3 a symlink.  Makes sense to me. ""make bdfl-install"" could
> > also create a symlink to python3 called ""python"". ;-)
> >
> > Anybody who installed multiple versions of Python on their computer
> > today - at least in the Unixoid world - already has to know about
> > ""make altinstall"" so they don't accidentally obliterate the python
> > symlink.  I don't understand what all the fuss is.
> 
> Me neither. If you don't want to type ""python3.0"" why not create a
> shell alias?

We just went through this with CherryPy 3, and I wish we had used
""cherrypy3"" as the package name. Granted, that's a library and not an
executable, so the biggest benefit (fewer import conflicts with a new
name) doesn't really apply to Python. But there are other benefits to
""python3"". You can read code examples and work with users much more
easily, saving a lot of emails in the cycle: ""what version are you
using?""; ""dunno--how do I find out?"". We're looking at several years of
people mistakenly trying to run 2.x code on 3.x and vice-versa. That
doesn't vanish completely; there will still be minor releases, but those
are supposed to be more backward-compatible.

I'd like to hear from e.g. the sqlite3 folks about similar experiences.


Robert Brewer
fumanchu@aminus.org



------------------------------

Message: 7
Date: Sat, 02 Feb 2008 18:52:11 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] [Python-ideas] Namespaces are one honking
	great idea -- let's do more of those!
To: python-3000@python.org
Message-ID: <fo2ak6$qet$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Christian Heimes schrieb:
> Georg Brandl wrote:
>> I would prefer a ""python3"" alias analogous to the current ""python"" alias,
>> at least as long as Python 2.x is still in wide use.
>> 
>> Having to type ""python3.0"" explicitly strikes me as unnecessarily verbose.
> 
> +1
> 
>> As for module file name extensions, what speaks against allowing (not
>> mandating) ""py3"" for Python 3.x modules?
> 
> File extensions are only important on Windows. Or does anybody know a
> system which starts scripts based on the extension like Windows does?

No, but Python looks for modules with the extension "".py"" and not "".py3"".

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 8
Date: Sat, 2 Feb 2008 10:36:38 -0700
From: Andrew McNabb <amcnabb@mcnabbs.org>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080202173638.GH2248@mcnabbs.org>
Content-Type: text/plain; charset=""us-ascii""

On Sat, Feb 02, 2008 at 11:16:16AM +0900, Stephen J. Turnbull wrote:
> Greg Ewing writes:
> 
>  > Also, if generator expressions had come first, we
>  > would probably never have gotten list comprehensions.
> 
> I don't understand.  A list comprehension is for when you know you're
> going to want to work with the whole list.  Similarly (even more so)
> for dictionary comprehensions.  List comprehension can be defined in
> terms of a genexp, of course, but ISTM it's a worthwhile addition to
> the language in its own right.

I think Greg was just pointing out that with generator expressions, you
can write:

>>> lst = list(x**2 for x in xrange(10))
>>>

which would make it less necessary to the equivalent syntax:

>>> lst = [x**2 for x in xrange(10)]
>>>


-- 
Andrew McNabb
http://www.mcnabbs.org/andrew/
PGP Fingerprint: 8A17 B57C 6879 1863 DE55  8012 AB4D 6098 8826 6868
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://mail.python.org/pipermail/python-3000/attachments/20080202/90433ca9/attachment-0001.pgp 

------------------------------

Message: 9
Date: Mon, 28 Jan 2008 17:20:09 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: [Python-3000] Announcing the Python core sprint at PyCon 2008
To: python-dev <python-dev@python.org>
Message-ID:
	<bbaeab100801281720k7d121e38tab01227b8f0fb791@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

As has occurred since the inception of PyCon, there will be a sprint
on the Python core at this year's conference!

If you will be attending PyCon (or will be in Chicago during the dates
of the sprints), attending the sprint is a great way to give back to
Python. Working on Python itself tends to deepens one knowledge of the
language and the standard library. Plus it is just plain fun getting
to sit around some tables with fellow Python programmers for several
days (the sprint will last four days, but you do not need to attend
all four days to participate).

The sprint is open to everyone of all skill levels. We can always use
help with things from updating documentation to preparing for the next
release of Python 3.0.

On Sunday evening of the conference there will not only be a sprint
intro session, but also a tutorial on how to develop for Python.
Details will be covered from where to look in the code base for things
to some best practices tips.

If you are interested enough to want to sign up to attend, please go
to http://wiki.python.org/moin/PyCon2008/SprintSignups/Python and add
your name and email address. If you have questions you may email me.

Please sign up for the sprint by the end of February as an email on
what you need to do beforehand will be sent at that time based on the
sprint sign-up page.

And if you are not attending PyCon, we will most likely have several
people in attendance on IRC, thus allowing even people not at PyCon to
participate!

-Brett Cannon
Python core sprint coach, PyCon 2008


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 4
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 3","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Comparing to None (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Fri, 1 Feb 2008 21:29:05 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Comparing to None
To: ""Guido van Rossum"" <guido@python.org>, ""Talin"" <talin@acm.org>
Cc: python-3000@python.org
Message-ID: <004201c8655c$87d6d860$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[GvR]
> I expect that, given the general trend that different types are not
> comparable, making an exception for None is more likely a source of
> errors than a source of joy.

That is reasonable.


Raymond


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 3
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 2","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Nicko van Someren)
   2. Comparing to None (Raymond Hettinger)
   3. Re: Set literal (Greg Ewing)
   4. Re: Comparing to None (Guido van Rossum)
   5. Re: Set literal (Guido van Rossum)
   6. Re: Comparing to None (Raymond Hettinger)
   7. Re: Comparing to None (Guido van Rossum)
   8. Re: Set literal (Stephen J. Turnbull)
   9. Re: Comparing to None (Talin)
  10. Re: Comparing to None (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Fri, 1 Feb 2008 15:26:10 +0000
From: Nicko van Someren <nicko@nicko.org>
Subject: Re: [Python-3000] Set literal
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <C2CFD6B1-4D50-41E9-A1D7-E4DBD5B0B346@nicko.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On 30 Jan 2008, at 23:17, Greg Ewing wrote:

> Nicko van Someren wrote:
>> Personally I'd like set comprehensions to give me mutable  sets,  
>> and so I feel set literals should do the same.
>
> Do you really want set comprehensions at all, given that
> set(genexp) exists?

Do we really want set literals at all, given that set(...) exists?

If we are going to have one then, it seems to make sense to have  
both.  If we are going to have both, I would rather that they generate  
the same type of set.  I appreciate that set literals can get  
optimised at compile time whereas comprehensions can not be optimised  
in the same way, and in the case of expressions in round brackets we  
get different types when we enclose lists vs. genexps that way, but I  
would rather we kept these things as consistent as possible.

	Nicko



------------------------------

Message: 2
Date: Fri,  1 Feb 2008 18:56:38 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Comparing to None
To: python-3000@python.org
Message-ID: <20080201185638.AGE12210@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

It was very convenient in Py2.x to have None comparable to other types and always rank less than any other type.

I would like to restore that ability.

One example, it helps with heaps to be able to turn an entry into None and have it sift to the top where the null entries can be popped-off.


Raymond


------------------------------

Message: 3
Date: Sat, 02 Feb 2008 13:07:26 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <47A3B43E.1060704@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Nicko van Someren wrote:

> Do we really want set literals at all, given that set(...) exists?
> 
> If we are going to have one then, it seems to make sense to have  both.

Not necessarily. We don't have dict comprehensions, and
I don't remember there being many complaints about that.

Also, if generator expressions had come first, we
would probably never have gotten list comprehensions.

--
Greg


------------------------------

Message: 4
Date: Fri, 1 Feb 2008 16:44:17 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Comparing to None
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802011644p3631a59bv6f43729a7d292a44@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

You should have been there when this was decided about two years ago.

I really don't want to be tweaking the language spec continuously
between now and the planned release date in ~August.

On Feb 1, 2008 3:56 PM, Raymond Hettinger <python@rcn.com> wrote:
> It was very convenient in Py2.x to have None comparable to other types and always rank less than any other type.
>
> I would like to restore that ability.
>
> One example, it helps with heaps to be able to turn an entry into None and have it sift to the top where the null entries can be popped-off.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Fri, 1 Feb 2008 16:45:33 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802011645t19e89272ld8aa906499bf1cbb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 1, 2008 4:07 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Not necessarily. We don't have dict comprehensions, and

We don't?

bash-3.2$ ./python.exe
Python 3.0a2+ (py3k:60207, Jan 22 2008, 16:58:59)
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> {x:x**2 for x in range(10)}
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
>>>

Where have you been? :-)


-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Fri,  1 Feb 2008 20:18:23 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Comparing to None
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org
Message-ID: <20080201201823.AGE21292@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> You should have been there when this was decided about two years ago.

IIRC, the decision was a general one about cross-type 
comparisons not being turned-on the default.  I do not 
recall a specific discussion about None.

Also, the list at the time was flooded with propositions
ranging from the reasonable to the insane. It was not always
possible to know what to respond to or the implications of each
choice. I sure wasn't aware that those conversations were to be
immediately frozen in stone. I had thought one of the purposes 
of the Py3.0 was so that we could download it and explore the 
implications of all of these choices.  I've done so and bumped
into the None comparability issue several times. If you no 
longer want feedback, that's fine. I can bring my 
experimentation with the 3.0 alpha to a close.

Raymond


------------------------------

Message: 7
Date: Fri, 1 Feb 2008 17:44:38 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Comparing to None
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20802011744s586f62a5o2ceec6a2662a617b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 1, 2008 5:18 PM, Raymond Hettinger <python@rcn.com> wrote:
> > You should have been there when this was decided about two years ago.
>
> IIRC, the decision was a general one about cross-type
> comparisons not being turned-on the default.  I do not
> recall a specific discussion about None.

I vaguely recall it was discussed but not considered an important
enough use case.

> Also, the list at the time was flooded with propositions
> ranging from the reasonable to the insane. It was not always
> possible to know what to respond to or the implications of each
> choice. I sure wasn't aware that those conversations were to be
> immediately frozen in stone.

Not immediately. But by now we've had two alpha release already. Some
stuff *does* change between alphas. But in general we need to stem the
flow of change proposals.

> I had thought one of the purposes
> of the Py3.0 was so that we could download it and explore the
> implications of all of these choices.  I've done so and bumped
> into the None comparability issue several times.

I think you need to provide a lot more motivation than a 5-line email
to change something this fundamental at this point.

> If you no
> longer want feedback, that's fine. I can bring my
> experimentation with the 3.0 alpha to a close.

To be brutally honest, your recent attempts to open up various closed
issues have wasted a lot of cycles everywhere. I'd rather focus on
moving forward with things like UserDict.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sat, 02 Feb 2008 11:16:16 +0900
From: ""Stephen J. Turnbull"" <stephen@xemacs.org>
Subject: Re: [Python-3000] Set literal
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <87d4rg9k7j.fsf@uwakimon.sk.tsukuba.ac.jp>
Content-Type: text/plain; charset=us-ascii

Greg Ewing writes:

 > Also, if generator expressions had come first, we
 > would probably never have gotten list comprehensions.

I don't understand.  A list comprehension is for when you know you're
going to want to work with the whole list.  Similarly (even more so)
for dictionary comprehensions.  List comprehension can be defined in
terms of a genexp, of course, but ISTM it's a worthwhile addition to
the language in its own right.



------------------------------

Message: 9
Date: Fri, 01 Feb 2008 18:04:18 -0800
From: Talin <talin@acm.org>
Subject: Re: [Python-3000] Comparing to None
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <47A3CFA2.4000704@acm.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

I would like to present an argument both for and against the proposal.

Against: I've never personally needed this capability.

For: In many languages, the 'null' value has a special polymorphic 
behavior in that it is considered a subtype of all reference types. Thus 
in C, you can assign NULL to a Foo * or a Bar * even though Foo and Bar 
aren't related.

So making NULL special seems in line with the general trend.

Raymond Hettinger wrote:
>> You should have been there when this was decided about two years ago.
> 
> IIRC, the decision was a general one about cross-type 
> comparisons not being turned-on the default.  I do not 
> recall a specific discussion about None.
> 
> Also, the list at the time was flooded with propositions
> ranging from the reasonable to the insane. It was not always
> possible to know what to respond to or the implications of each
> choice. I sure wasn't aware that those conversations were to be
> immediately frozen in stone. I had thought one of the purposes 
> of the Py3.0 was so that we could download it and explore the 
> implications of all of these choices.  I've done so and bumped
> into the None comparability issue several times. If you no 
> longer want feedback, that's fine. I can bring my 
> experimentation with the 3.0 alpha to a close.
> 
> Raymond
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/talin%40acm.org
> 


------------------------------

Message: 10
Date: Fri, 1 Feb 2008 21:21:34 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Comparing to None
To: Talin <talin@acm.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20802012121v6d0dcacdl46aa540bf4d27d77@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Feb 1, 2008 6:04 PM, Talin <talin@acm.org> wrote:
> I would like to present an argument both for and against the proposal.
>
> Against: I've never personally needed this capability.
>
> For: In many languages, the 'null' value has a special polymorphic
> behavior in that it is considered a subtype of all reference types. Thus
> in C, you can assign NULL to a Foo * or a Bar * even though Foo and Bar
> aren't related.
>
> So making NULL special seems in line with the general trend.

Hardly. In all languages I know of besides Python, doing *anything*
with such a NULL operand apart from passing it around or doing a
pointer equality comparison on it immediately causes a segfault or a
NullPointerException. In Python, you can already assign None to any
variable and do a pointer comparison ('is'); you can even do a value
equality ('==') without being punished, which is already better than
most languages.

Raymond is asking for *ordering* ('<', '<=' etc.) to be well-defined
when one of the arguments is None. Python 2 indeed did that, because
in Python 2 *all* values are orderable (well, *almost* all --
comparing str to unicode can sometimes raise an exception, complex
numbers can't be ordered, and there are a few other odd exceptions).
Python 3 does away with comparisons between heterogeneous types,
unless at least one of the types take special measures to be
comparable to the other -- this makes much more sense than the
arbitrary decisions in Python 2 about the relative ordering of e.g. ()
and [], or 0 and """". (Ironically, Raymond's pet type, set(), cannot be
compared to None even in Python 2.)

As long as you're comparing real numbers, negative infinity can
fulfill the role that Raymond is asking for. I suspect that for all
collection types, the ""empty"" value of that type is always naturally
the smallest value. If you really want to sort lists of completely
heterogeneous types, you can always use (tag, value) pairs where the
tags are small ints or strings representing type classifications (I
guess the type name would do in most cases).

I expect that, given the general trend that different types are not
comparable, making an exception for None is more likely a source of
errors than a source of joy.

--Guido

> Raymond Hettinger wrote:
> >> You should have been there when this was decided about two years ago.
> >
> > IIRC, the decision was a general one about cross-type
> > comparisons not being turned-on the default.  I do not
> > recall a specific discussion about None.
> >
> > Also, the list at the time was flooded with propositions
> > ranging from the reasonable to the insane. It was not always
> > possible to know what to respond to or the implications of each
> > choice. I sure wasn't aware that those conversations were to be
> > immediately frozen in stone. I had thought one of the purposes
> > of the Py3.0 was so that we could download it and explore the
> > implications of all of these choices.  I've done so and bumped
> > into the None comparability issue several times. If you no
> > longer want feedback, that's fine. I can bring my
> > experimentation with the 3.0 alpha to a close.
> >
> > Raymond
> > _______________________________________________
> > Python-3000 mailing list
> > Python-3000@python.org
> > http://mail.python.org/mailman/listinfo/python-3000
> > Unsubscribe: http://mail.python.org/mailman/options/python-3000/talin%40acm.org
> >
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 2
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 24, Issue 1","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. DEADLINE Feb 4: OSCON 2008 Call for Proposals (Aahz)


----------------------------------------------------------------------

Message: 1
Date: Thu, 31 Jan 2008 08:19:00 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: [Python-3000] DEADLINE Feb 4: OSCON 2008 Call for Proposals
To: python-dev@python.org, python-3000@python.org
Message-ID: <20080131161900.GA2002@panix.com>
Content-Type: text/plain; charset=us-ascii

The O'Reilly Open Source Convention (OSCON) is accepting proposals for
tutorials and presentations.  The submission period ends Feb 4.

OSCON 2008 will be in Portland, Oregon July 21-25.  For more information
and to submit a proposal, see

http://conferences.oreilly.com/oscon/
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 24, Issue 1
******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 45","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Greg Ewing)
   2. Re: Set literal (Greg Ewing)
   3. Re: Set literal (Thomas Wouters)
   4. Re: Set literal (Christian Heimes)
   5. Re: Set literal (Greg Ewing)
   6. Re: Set literal (Guido van Rossum)
   7. Re: Set literal (Terry Reedy)


----------------------------------------------------------------------

Message: 1
Date: Thu, 31 Jan 2008 12:11:28 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: Mike Klaas <mike.klaas@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47A10420.5080600@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Mike Klaas wrote:

> over 120k loc:
> 
> All uses of set():
> 
> $ pygrep '[^.a-z]set[(]' | grep -v unittest | wc
>      320    1583   24774
> 
> Empty set():
> 
> $ pygrep '[^.a-z]set[(][)]' | grep -v unittest | wc
>      114     478    7406

But that doesn't count uses of tuples that could be
turned into frozenset literals if such a thing existed.

> I think that 'set()' is a perfectly fine and readable empty set  
> ""literal"".

Are you talking only about empty sets? If so, then I
agree. I thought you were talking about all potential
uses of set literals.

--
Greg


------------------------------

Message: 2
Date: Thu, 31 Jan 2008 12:17:39 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: Nicko van Someren <nicko@nicko.org>
Cc: python-3000@python.org
Message-ID: <47A10593.7080805@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Nicko van Someren wrote:
> Personally I'd like set comprehensions to give me mutable  
> sets, and so I feel set literals should do the same.

Do you really want set comprehensions at all, given that
set(genexp) exists?

--
Greg


------------------------------

Message: 3
Date: Wed, 30 Jan 2008 15:40:42 -0800
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<9e804ac0801301540r46c92accgdafdb9ff260dba0b@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Jan 30, 2008 3:17 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:

> Nicko van Someren wrote:
> > Personally I'd like set comprehensions to give me mutable
> > sets, and so I feel set literals should do the same.
>
> Do you really want set comprehensions at all, given that
> set(genexp) exists?
>

Too late.

>>> {i for i in range(5) }
{0, 1, 2, 3, 4}
>>> {i: ""foo"" for i in range(5) }
{0: 'foo', 1: 'foo', 2: 'foo', 3: 'foo', 4: 'foo'}

Welcome-to-py3k-ly y'rs,

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080130/d9d37e6b/attachment-0001.htm 

------------------------------

Message: 4
Date: Thu, 31 Jan 2008 00:42:40 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fnr21h$6h5$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Greg Ewing wrote:
> Do you really want set comprehensions at all, given that
> set(genexp) exists?

For me comprehension are a means to optimize common patterns in the
sense of faster to execute, faster to read and faster to write. Do set
comprehensions occur so often that {item for item in sequence} makes
code both faster and more readable? Or is the speed benefit of a frozen
set literal larger?

Personally I'm more than happy to trade set comprehensions for optimized
frozen set literals. My code has more 'item in fixed_set' than sets. I
can't remember a project where I've used frozenset() instead of a tuple.
 The name is too long.

Christian



------------------------------

Message: 5
Date: Thu, 31 Jan 2008 13:01:58 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <47A10FF6.3000609@canterbury.ac.nz>
Content-Type: text/plain; charset=UTF-8; format=flowed

Thomas Wouters wrote:
> 
> On Jan 30, 2008 3:17 PM, Greg Ewing <greg.ewing@canterbury.ac.nz 
> <mailto:greg.ewing@canterbury.ac.nz>> wrote:
> 
>     Do you really want set comprehensions at all, given that
>     set(genexp) exists?
> 
> Too late.

I thought Guido said it wasn't too late to change this?

--
Greg



------------------------------

Message: 6
Date: Wed, 30 Jan 2008 16:09:37 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801301609x45344380sd65ebe7a1d919218@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 30, 2008 4:01 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Thomas Wouters wrote:
> >
> > On Jan 30, 2008 3:17 PM, Greg Ewing <greg.ewing@canterbury.ac.nz
> > <mailto:greg.ewing@canterbury.ac.nz>> wrote:
> >
> >     Do you really want set comprehensions at all, given that
> >     set(genexp) exists?
> >
> > Too late.
>
> I thought Guido said it wasn't too late to change this?

I don't recall saying this. The only aspect that I was almost okay
with changing was whether set displays (and by implication set
comprehensions; ""literals"" is really the wrong term given the example
{a, b}) could be changed to frozenset.

The more I think about it the less I like that alternative though. So
I think you're wasting your time (and mine :).

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Wed, 30 Jan 2008 22:04:54 -0500
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fnrdsm$3g3$1@ger.gmane.org>


""Christian Heimes"" <lists@cheimes.de> wrote in message 
news:fnr21h$6h5$1@ger.gmane.org...
| Greg Ewing wrote:
| | Personally I'm more than happy to trade set comprehensions for 
optimized
| frozen set literals. My code has more 'item in fixed_set' than sets. I
| can't remember a project where I've used frozenset() instead of a tuple.
| The name is too long.

I might have preferred 'fset' to 'frozenset'.  But I presume the name is 
frozen.
So I might put 'fset=frozenset' at the top of a file where is gets used 
alot. 





------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 45
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 44","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Jim Jewett)
   2. Re: Set literal (Greg Ewing)
   3. Re: Set literal (Mike Klaas)
   4. Re: Set literal (Jim Jewett)
   5. Re: Set literal (Nicko van Someren)


----------------------------------------------------------------------

Message: 1
Date: Tue, 29 Jan 2008 07:58:35 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<fb6fbf560801290458q6c453ff7h2ced4916f4cfd0ca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/28/08, Guido van Rossum <guido@python.org> wrote:
> Please don't reopen this. There are good reasons for 'set' to be the
> default set type and 'frozenset' to appear like a poor cousin. For
> one, their naming. This was all reasoned out long, long ago, in Python
> 2.3 with the sets module.

In general, mutable sets are more useful.

I don't think that applies to the more specific use case of already
having members available when you create the set.

To rephrase:

The majority of uses need a mutable set that starts empty.
The majority of uses that start non-empty do not require mutability.

In fairness, most of the non-empty cases don't require hashability
either, so a mutable set remains an acceptable substitute.  The
question is whether an explicit set( ) around it to indicate
mutability (and the loss of hashability) is desirable.  (Today, we
need the longer frozenset to indicate the opposite, but I'll agree
that we don't need it often.)

-jJ


------------------------------

Message: 2
Date: Wed, 30 Jan 2008 11:29:24 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <479FA8C4.2040204@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Jim Jewett wrote:

> The majority of uses need a mutable set that starts empty.

Does anyone have evidence to support that assertion?

Thinking about my own code, I probably do membership
tests on constant sets (represented as tuples) about as
often as I build up mutable sets (or some equivalent data
structure).

--
Greg


------------------------------

Message: 3
Date: Tue, 29 Jan 2008 16:18:39 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Set literal
To: Python 3000 <python-3000@python.org>
Message-ID: <AB2447EA-B1D1-463D-B947-4DBEF40091E0@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed


On 29-Jan-08, at 2:29 PM, Greg Ewing wrote:

> Jim Jewett wrote:
>
>> The majority of uses need a mutable set that starts empty.
>
> Does anyone have evidence to support that assertion?
>
> Thinking about my own code, I probably do membership
> tests on constant sets (represented as tuples) about as
> often as I build up mutable sets (or some equivalent data
> structure).

over 120k loc:

All uses of set():

$ pygrep '[^.a-z]set[(]' | grep -v unittest | wc
     320    1583   24774

Empty set():

$ pygrep '[^.a-z]set[(][)]' | grep -v unittest | wc
     114     478    7406

Some of the uses in the first group could be replaced with frozenset,  
of course.  Looking at the examples, though, I would say that most of  
the uses of sets start out using a set constructed using  
comprehension or set(<iterable>).

I think that 'set()' is a perfectly fine and readable empty set  
""literal"".

-Mike


------------------------------

Message: 4
Date: Tue, 29 Jan 2008 22:14:26 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Mike Klaas"" <mike.klaas@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<fb6fbf560801291914w44809feyf1caf8170a75d0f2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/29/08, Mike Klaas <mike.klaas@gmail.com> wrote:

> On 29-Jan-08, at 2:29 PM, Greg Ewing wrote:

> > Jim Jewett wrote:

> >> The majority of uses need a mutable set that starts empty.

> > Does anyone have evidence to support that assertion?

> $ pygrep '[^.a-z]set[(]' | grep -v unittest | wc
>      320    1583   24774

> Empty set():

> $ pygrep '[^.a-z]set[(][)]' | grep -v unittest | wc
>      114     478    7406

> Some of the uses in the first group could be replaced with frozenset,
> of course.  Looking at the examples, though, I would say that most of
> the uses of sets start out using a set constructed using
> comprehension or set(<iterable>).

Apparently you abstract your code better than I do.  Many of my
mutable sets could be done that way if the iterable were described
better; in practice, I just create the set as empty and add to it.

How often is that iterable a literal?  (For me, almost always, because
otherwise I usually either don't make the iterable explicit, or don't
bother turning it into a set.)

How often do you change the set again after the initial iterable is
exhausted?  (I don't, but I suspect that might be a style quirk.)

-jJ


------------------------------

Message: 5
Date: Wed, 30 Jan 2008 05:28:58 +0000
From: Nicko van Someren <nicko@nicko.org>
Subject: Re: [Python-3000] Set literal
To: Greg Ewing <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID: <53C77886-694D-409A-B3F9-713B5EF6CAAA@nicko.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On 28 Jan 2008, at 23:45, Greg Ewing wrote:
> Guido van Rossum wrote:
>>
...
>> Have a look at PEP 218.
>
> That PEP proposes that there be no set literal or comprehension
> syntax, and doesn't contain any discussion on whether such
> syntax should produce sets or frozensets if it were to exist.

It seems to me that this raises a critical question; would one want a  
set comprehension to produce frozen sets?  If the comprehension form  
{i for i in range(4)} should produce something mutable then I think it  
would be way too confusing for the form {0,1,2,3} to produce something  
different.  Personally I'd like set comprehensions to give me mutable  
sets, and so I feel set literals should do the same.

	Nicko



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 44
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 43","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Jim Jewett)
   2. Re: Set literal (Guido van Rossum)
   3. Re: Set literal (Greg Ewing)
   4. Re: Set literal (Guido van Rossum)
   5. Re: Set literal (Greg Ewing)
   6. Re: Set literal (Guido van Rossum)
   7. Re: Set literal (Greg Ewing)


----------------------------------------------------------------------

Message: 1
Date: Mon, 28 Jan 2008 09:42:04 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<fb6fbf560801280642w8dc60e0je9310fab7a3be87f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/28/08, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
> > On Jan 26, 2008 8:39 PM, Raymond Hettinger <python@rcn.com> wrote:

> >>However, my support for it has waned anyway.  The
> >> notation is also used for set comprehension
> >> and those should be mutable.

Set comprehensions don't appear yet in 2.5, so they aren't yet an
immovable constraint.

How often are set comprehensions needed, and how often must they be mutable?

In my own code, I already tend to treat even the results of a list
comprehension as immutable.  Normally, the result is already a
complete set, and when it isn't, the code is already awkward as I
digress to get the other members.

    res = tupleA + tupleB

wouldn't really be any worse than

    res.extend(listB)

and I would actually prefer

    res = setA.union(setB)

> Another possibility would be to drop set comprehension
> syntax and just require people to use set(genexp).

This looks fine to me, but again, I usually just iterate through it
once, so I typically use list even when a set would be more
semantically correct.

> Or have set comprehensions produce frozensets and require
> set(genexp) to get a mutable set.

Absolutely ... why are the default sets mutable?  When I want a
mutable set, I almost always start with an empty set.  Even when I
have initial members, they usually come from another container, and
turning them into a set is (mentally) more of a casting than a
comprehension.

-jJ


------------------------------

Message: 2
Date: Mon, 28 Jan 2008 08:02:24 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801280802s68875edck907008f797a4ccc5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Please don't reopen this. There are good reasons for 'set' to be the
default set type and 'frozenset' to appear like a poor cousin. For
one, their naming. This was all reasoned out long, long ago, in Python
2.3 with the sets module. If you insist I will try to write it up all
again, but I'd rather you believe that we weren't crazy back then.
Raymond's about-face suggests that there are plenty of dead alleys
that lead the traveler astray by appearing to be a shortcut to their
destination.

--Guido

On Jan 27, 2008 9:38 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
> > On Jan 26, 2008 8:39 PM, Raymond Hettinger <python@rcn.com> wrote:
> >
> >>However, my support for it has waned anyway.  The notation is also
> >>used for set comprehension and those should be mutable.
> >
> > Cool. That saves us a PEP. Vive le status quo.
>
> You're changing your mind back again just like that? That's
> disappointing -- I was fairly convinced there as well.
>
> Another possibility would be to drop set comprehension
> syntax and just require people to use set(genexp).
>
> Or have set comprehensions produce frozensets and require
> set(genexp) to get a mutable set.
>
> On the face of it, it's not clear to me that the result of
> a set comprehension should necessarily be mutable.
>
> When I think about how I have used list comprehensions,
> mutability of the resulting list isn't usually a requirement.
> I don't expect this would be different with sets.
>
> --
> Greg
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Tue, 29 Jan 2008 11:46:26 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <479E5B42.1010908@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> This was all reasoned out long, long ago, in Python
> 2.3 with the sets module. If you insist I will try to write it up all
> again, but I'd rather you believe that we weren't crazy back then.

Is there a PEP we can refer to for confirmation of
said non-craziness?

--
Greg


------------------------------

Message: 4
Date: Mon, 28 Jan 2008 15:03:58 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801281503n3f02344bx156502fb2ceaecde@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 28, 2008 2:46 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
> > This was all reasoned out long, long ago, in Python
> > 2.3 with the sets module. If you insist I will try to write it up all
> > again, but I'd rather you believe that we weren't crazy back then.
>
> Is there a PEP we can refer to for confirmation of
> said non-craziness?

Have a look at PEP 218.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Tue, 29 Jan 2008 12:45:26 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <479E6916.3050208@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Jan 28, 2008 2:46 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> 
>>Is there a PEP we can refer to for confirmation of
>>said non-craziness?
> 
> Have a look at PEP 218.

That PEP proposes that there be no set literal or comprehension
syntax, and doesn't contain any discussion on whether such
syntax should produce sets or frozensets if it were to exist.

Maybe there was discussion about that at the time, but it would
be good to have it summarised in a PEP somewhere.

--
Greg




------------------------------

Message: 6
Date: Mon, 28 Jan 2008 15:58:52 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Greg Ewing"" <greg.ewing@canterbury.ac.nz>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801281558i7c0ffa30mb847c68eaf2b32d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 28, 2008 3:45 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> Guido van Rossum wrote:
> > On Jan 28, 2008 2:46 PM, Greg Ewing <greg.ewing@canterbury.ac.nz> wrote:
> >
> >>Is there a PEP we can refer to for confirmation of
> >>said non-craziness?
> >
> > Have a look at PEP 218.
>
> That PEP proposes that there be no set literal or comprehension
> syntax, and doesn't contain any discussion on whether such
> syntax should produce sets or frozensets if it were to exist.
>
> Maybe there was discussion about that at the time, but it would
> be good to have it summarised in a PEP somewhere.

No, but it *does* make 'set' the ""default"" type, making you work
harder to get a frozenset. From this it follows that frozenset was
considered the lesser-useful type at the time. And I still feel that
way.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Tue, 29 Jan 2008 15:24:24 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <479E8E58.4040802@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:

> No, but it *does* make 'set' the ""default"" type, making you work
> harder to get a frozenset. From this it follows that frozenset was
> considered the lesser-useful type at the time.

That logic assumes that one of them necessarily has to be
harder to get than the other, therefore we have to pick
one to be the ""default"".

With no literal syntax there might be some truth in that,
but with a literal syntax it no longer holds. We can have
the literal syntax produce one and set() produce the
other.

What's more, the recent discussion has put forward what
seems like an excellent use for frozensets, i.e. making
'if x in {1, 2, 3}' highly optimisable.

The original PEP doesn't explicity address any of these
arguments. Even if they're rejected, they deserve to be
set out in a PEP along with the reasons for rejection,
I think, to stop them from recurring.

--
Greg


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 43
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 42","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-3000-checkins] r60376 - in python/branches/py3k:
      Lib/test/test_float.py Lib/test/test_long.py
      Objects/stringlib/formatter.h (Nick Coghlan)
   2. Re: [Python-3000-checkins] r60376 - in	python/branches/py3k:
      Lib/test/test_float.py	Lib/test/test_long.py
      Objects/stringlib/formatter.h (Guido van Rossum)
   3. Re: [Python-3000-checkins] r60376 - in	python/branches/py3k:
      Lib/test/test_float.py	Lib/test/test_long.py
      Objects/stringlib/formatter.h (Aahz)
   4. Re: r60376 - in	python/branches/py3k:	Lib/test/test_float.py
      Lib/test/test_long.py	Objects/stringlib/formatter.h (Nick Coghlan)
   5. Re: Ellipsis Literal (Greg Ewing)
   6. Rename re.sub and re.subn (hashcollision)
   7. Re: Set literal (Greg Ewing)
   8. Re: Ellipsis Literal (Greg Ewing)
   9. Re: [Python-3000-checkins] r60376 - in python/branches/py3k:
      Lib/test/test_float.py Lib/test/test_long.py
      Objects/stringlib/formatter.h (Eric Smith)


----------------------------------------------------------------------

Message: 1
Date: Mon, 28 Jan 2008 14:16:54 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] [Python-3000-checkins] r60376 - in
	python/branches/py3k:	Lib/test/test_float.py Lib/test/test_long.py
	Objects/stringlib/formatter.h
To: ""eric.smith"" <python-3000-checkins@python.org>, 	Python 3000
	<python-3000@python.org>
Message-ID: <479D5736.2030403@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

eric.smith wrote:
> Author: eric.smith
> Date: Sun Jan 27 22:07:59 2008
> New Revision: 60376
> 
> Modified:
>    python/branches/py3k/Lib/test/test_float.py
>    python/branches/py3k/Lib/test/test_long.py
>    python/branches/py3k/Objects/stringlib/formatter.h
> Log:
> Restrict format presentation types to those specified in the 'Standard Format Specifiers' section of PEP 3101.

I think this checkin goes too far in removing support for the floating 
point formatting codes from integers. Guido objected to %d working on 
floats last year, but expected %f and friends to continue to work on 
integers [1]. This makes sense when you consider that there is no data 
loss in displaying an integer as a floating point number, while there is 
a definite potential for data loss when going the other way.

Perhaps the PEP needs a tweak (referencing Guido's email) to state 
explicitly that the builtin integers understand the floating point 
formatting codes, but the builtin and standard library floating point 
types don't understand the integer codes? That area of the PEP is 
slightly problematic anyway where it suggests that integers could handle 
the floating point codes by delegating to float() - that isn't quite 
true, since the maximum precision on floats is less than the maximum 
precision on integers.

Cheers,
Nick.

[1]
http://mail.python.org/pipermail/python-3000/2007-August/009066.html


-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Sun, 27 Jan 2008 20:23:29 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-3000-checkins] r60376 - in
	python/branches/py3k: Lib/test/test_float.py	Lib/test/test_long.py
	Objects/stringlib/formatter.h
To: ""Nick Coghlan"" <ncoghlan@gmail.com>
Cc: ""eric.smith"" <python-3000-checkins@python.org>,	Python 3000
	<python-3000@python.org>
Message-ID:
	<ca471dc20801272023r1fe39d96o8c98fe2c2ec073dc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 27, 2008 8:16 PM, Nick Coghlan <ncoghlan@gmail.com> wrote:
> eric.smith wrote:
> > Author: eric.smith
> > Date: Sun Jan 27 22:07:59 2008
> > New Revision: 60376
> >
> > Modified:
> >    python/branches/py3k/Lib/test/test_float.py
> >    python/branches/py3k/Lib/test/test_long.py
> >    python/branches/py3k/Objects/stringlib/formatter.h
> > Log:
> > Restrict format presentation types to those specified in the 'Standard Format Specifiers' section of PEP 3101.
>
> I think this checkin goes too far in removing support for the floating
> point formatting codes from integers. Guido objected to %d working on
> floats last year, but expected %f and friends to continue to work on
> integers [1]. This makes sense when you consider that there is no data
> loss in displaying an integer as a floating point number, while there is
> a definite potential for data loss when going the other way.
>
> Perhaps the PEP needs a tweak (referencing Guido's email) to state
> explicitly that the builtin integers understand the floating point
> formatting codes, but the builtin and standard library floating point
> types don't understand the integer codes? That area of the PEP is
> slightly problematic anyway where it suggests that integers could handle
> the floating point codes by delegating to float() - that isn't quite
> true, since the maximum precision on floats is less than the maximum
> precision on integers.
>
> Cheers,
> Nick.
>
> [1]
> http://mail.python.org/pipermail/python-3000/2007-August/009066.html

Agreed with Nick -- in general, the idea is that ints should be
allowed whenever floats are expected -- just not the other way around!
Python 2.x broke this in one important place, division -- 2/3 and
2.0/3.0 had different meanings there. We are fixing this in 3.0.
Please maintain this rule for formatting!

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Sun, 27 Jan 2008 20:50:18 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] [Python-3000-checkins] r60376 - in
	python/branches/py3k:	Lib/test/test_float.py	Lib/test/test_long.py
	Objects/stringlib/formatter.h
To: Python 3000 <python-3000@python.org>
Message-ID: <20080128045018.GA23131@panix.com>
Content-Type: text/plain; charset=us-ascii

On Mon, Jan 28, 2008, Nick Coghlan wrote:
>
> I think this checkin goes too far in removing support for the floating 
> point formatting codes from integers. Guido objected to %d working on 
> floats last year, but expected %f and friends to continue to work on 
> integers [1]. This makes sense when you consider that there is no data 
> loss in displaying an integer as a floating point number, while there is 
> a definite potential for data loss when going the other way.

Not true:

>>> repr(float(1234567890123456789012345678901234567890123456789012345678901234567890))
'1.2345678901234567e+69'

Overall, I could care less what decision gets made, but I think it's
unfair to make the decision on an incorrect argument.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 4
Date: Mon, 28 Jan 2008 16:06:33 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] r60376 - in	python/branches/py3k:
	Lib/test/test_float.py Lib/test/test_long.py
	Objects/stringlib/formatter.h
To: Aahz <aahz@pythoncraft.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <479D70E9.8000601@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Aahz wrote:
> On Mon, Jan 28, 2008, Nick Coghlan wrote:
>> I think this checkin goes too far in removing support for the floating 
>> point formatting codes from integers. Guido objected to %d working on 
>> floats last year, but expected %f and friends to continue to work on 
>> integers [1]. This makes sense when you consider that there is no data 
>> loss in displaying an integer as a floating point number, while there is 
>> a definite potential for data loss when going the other way.
> 
> Not true:
> 
>>>> repr(float(1234567890123456789012345678901234567890123456789012345678901234567890))
> '1.2345678901234567e+69'

I remarked on that problem in the paragraph you cut out - the data loss 
in your example is caused by the conversion to the builtin float type, 
not by the act of displaying an integer as a floating point number. To 
get lossless display of integers in scientific notation, all you need to 
do is use the whole of the integer value as the mantissa (probably with 
any trailing zeroes stripped, as we're talking about display here rather 
than values intended for further processing).

That is, I think it should be possible to write something like the 
following:

 >>>format(1234567890123456789012345678901234567890123456789012345678900000000000, 
'f')
'1.23456789012345678901234567890123456789012345678901234567890e+69'

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 5
Date: Mon, 28 Jan 2008 19:13:25 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Ellipsis Literal
Cc: python-3000@python.org
Message-ID: <479D7285.7090000@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Gisle Aas wrote:
> I think it would be been nice if ""..."" raised an NotYetImplemented  
> exception if executed as a lone statement.

That's quite a clever idea! Not sure if it's actually desirable,
but it makes a Monty Pythonish sort of sense.

> BTW, Perl 6 also introduce the same feature and Larry calls it the  
> ""yadayadayada operator""[1].

We should call the exception YaddaYaddaError, then. :-)

--
Greg



------------------------------

Message: 6
Date: Mon, 28 Jan 2008 02:08:20 -0500
From: hashcollision <hashcollision@gmail.com>
Subject: [Python-3000] Rename re.sub and re.subn
To: python-3000@python.org
Message-ID:
	<37f76d50801272308p5349e51an8fca9c607dd463d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I have always thought that re's sub and subn are misnamed. I always
mis-remember them as 'replace'. Can they either be renamed to
""replace"" and ""replacen"" or at least the new functions added?


------------------------------

Message: 7
Date: Mon, 28 Jan 2008 18:38:13 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <479D6A45.6090607@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Jan 26, 2008 8:39 PM, Raymond Hettinger <python@rcn.com> wrote:
> 
>>However, my support for it has waned anyway.  The notation is also
>>used for set comprehension and those should be mutable.
> 
> Cool. That saves us a PEP. Vive le status quo.

You're changing your mind back again just like that? That's
disappointing -- I was fairly convinced there as well.

Another possibility would be to drop set comprehension
syntax and just require people to use set(genexp).

Or have set comprehensions produce frozensets and require
set(genexp) to get a mutable set.

On the face of it, it's not clear to me that the result of
a set comprehension should necessarily be mutable.

When I think about how I have used list comprehensions,
mutability of the resulting list isn't usually a requirement.
I don't expect this would be different with sets.

--
Greg


------------------------------

Message: 8
Date: Mon, 28 Jan 2008 21:35:40 +1300
From: Greg Ewing <greg.ewing@canterbury.ac.nz>
Subject: Re: [Python-3000] Ellipsis Literal
Cc: python-3000@python.org
Message-ID: <479D93DC.2030500@canterbury.ac.nz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> Some folks thought it would be cute to be able to write incomplete
> code like this:
> 
> class C:
>   def meth(self): ...
>   ...

I thought there were better reasons than that.
For example, the new print() function could be
arranged so that

   print(a, b, c, ...)

prints a line without a newline.

--
Greg


------------------------------

Message: 9
Date: Mon, 28 Jan 2008 05:30:14 -0500
From: Eric Smith <eric@trueblade.com>
Subject: Re: [Python-3000] [Python-3000-checkins] r60376 - in
	python/branches/py3k:	Lib/test/test_float.py Lib/test/test_long.py
	Objects/stringlib/formatter.h
To: Guido van Rossum <guido@python.org>
Cc: ""eric.smith"" <python-3000-checkins@python.org>,	Python 3000
	<python-3000@python.org>, Nick Coghlan <ncoghlan@gmail.com>
Message-ID: <479DAEB6.1040404@trueblade.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Jan 27, 2008 8:16 PM, Nick Coghlan <ncoghlan@gmail.com> wrote:
>> eric.smith wrote:
>>> Author: eric.smith
>>> Date: Sun Jan 27 22:07:59 2008
>>> New Revision: 60376
>>>
>>> Modified:
>>>    python/branches/py3k/Lib/test/test_float.py
>>>    python/branches/py3k/Lib/test/test_long.py
>>>    python/branches/py3k/Objects/stringlib/formatter.h
>>> Log:
>>> Restrict format presentation types to those specified in the 'Standard Format Specifiers' section of PEP 3101.
>> I think this checkin goes too far in removing support for the floating
>> point formatting codes from integers. Guido objected to %d working on
>> floats last year, but expected %f and friends to continue to work on
>> integers [1]. This makes sense when you consider that there is no data
>> loss in displaying an integer as a floating point number, while there is
>> a definite potential for data loss when going the other way.
>>
>> Perhaps the PEP needs a tweak (referencing Guido's email) to state
>> explicitly that the builtin integers understand the floating point
>> formatting codes, but the builtin and standard library floating point
>> types don't understand the integer codes? That area of the PEP is
>> slightly problematic anyway where it suggests that integers could handle
>> the floating point codes by delegating to float() - that isn't quite
>> true, since the maximum precision on floats is less than the maximum
>> precision on integers.
>>
>> Cheers,
>> Nick.
>>
>> [1]
>> http://mail.python.org/pipermail/python-3000/2007-August/009066.html
> 
> Agreed with Nick -- in general, the idea is that ints should be
> allowed whenever floats are expected -- just not the other way around!
> Python 2.x broke this in one important place, division -- 2/3 and
> 2.0/3.0 had different meanings there. We are fixing this in 3.0.
> Please maintain this rule for formatting!
> 

Okay, I'll restore ints understanding float formatting codes.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 42
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 41","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: plistlib module and test (Guido van Rossum)
   2. Re: plistlib module and test (Guido van Rossum)
   3. Re: Set literal (Leif Walsh)
   4. Re: plistlib module and test (Christian Heimes)
   5. Re: Set literal (Adam Olsen)
   6. Re: Set literal (Raymond Hettinger)
   7. Re: Set literal (Guido van Rossum)
   8. Re: Set literal (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Sat, 26 Jan 2008 14:13:44 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] plistlib module and test
To: ""Neal Norwitz"" <nnorwitz@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20801261413r6d71115w73283f0a3ffe1257@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I filed http://bugs.python.org/issue1942 about this.

On Jan 26, 2008 1:57 PM, Neal Norwitz <nnorwitz@gmail.com> wrote:
> I remember seeing a change which moved the plistlib module from
> Lib/plat-mac to Lib so all platforms can use it.  This change causes
> *all* the builds fail because the test has several problems.  For
> example, the test references functions/methods that don't exist (see
> below).  Can someone fix this?
>
>   File ""/home/pybot/buildarea/3.0.klose-debian-ia64/build/Lib/test/test_plistlib.py"",
> line 140, in test_appleformatting
>     pl = plistlib.readPlistFromBytes(TESTDATA)
> AttributeError: 'module' object has no attribute 'readPlistFromBytes'
>
>   File ""/home/pybot/buildarea/3.0.klose-debian-ia64/build/Lib/test/test_plistlib.py"",
> line 133, in test_bytes
>     data = plistlib.writePlistToBytes(pl)
> AttributeError: 'module' object has no attribute 'writePlistToBytes'
>
> There are 2 more errors I noticed.  Here's an example:
> http://www.python.org/dev/buildbot/all/ia64%20Ubuntu%203.0/builds/471/step-test/0
>
> n
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Sat, 26 Jan 2008 14:16:11 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] plistlib module and test
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801261416o6a8414c4gd93df0a55c31534f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 26, 2008 2:13 PM, Christian Heimes <lists@cheimes.de> wrote:
> Neal Norwitz wrote:
> > I remember seeing a change which moved the plistlib module from
> > Lib/plat-mac to Lib so all platforms can use it.  This change causes
> > *all* the builds fail because the test has several problems.  For
> > example, the test references functions/methods that don't exist (see
> > below).  Can someone fix this?
>
> I fixed it by copying plistlib.py from the py3k directory Lib/plat-mac/
> to Lib/.
>
> svn rm Lib/plistlib.py
> svn cp -r 60150
> svn+ssh://pythondev@svn.python.org/python/branches/py3k/Lib/plat-mac/plistlib.py
> Lib/
>
> svnmerge.py doesn't automatically do relative copies. It always copies
> the absolute path. In the case of a rename, move or copy one has to copy
> the right file manually.

Well that sucks. Can't it be fixed in svnmerge?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Sat, 26 Jan 2008 17:25:54 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: Georg Brandl <g.brandl@gmx.net>, python-3000@python.org
Message-ID:
	<cc7430500801261425l2c73c0f8sbbef761ce7503380@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 26, 2008 5:11 PM, Guido van Rossum <guido@python.org> wrote:
> But didn't we start by establishing that users are rarely going to
> create non-empty non-frozen sets anyway, because most algorithms
> involving mutable sets start with an empty one? Even if users
> occasionally write initialized sets, I find it hard to believe that
> this would occur in a performance-critical position.

+1

I can't imagine ever being annoyed that a non-empty mutable set that I
type in myself runs a little slower than it could.

--
Cheers,
Leif


------------------------------

Message: 4
Date: Sat, 26 Jan 2008 23:34:47 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] plistlib module and test
To: python-3000@python.org
Message-ID: <fngci7$g20$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> Well that sucks. Can't it be fixed in svnmerge?

I don't know. We could probably ask the author about it. His name is
Giovanni Bajo.



------------------------------

Message: 5
Date: Sat, 26 Jan 2008 20:50:36 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<aac2c7cb0801261950j31f804feg28fd523e0bafcaa2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 9:12 PM, Guido van Rossum <guido@python.org> wrote:
> For the record, I'm thinking Raymond has won this argument fair and
> square, and I'm withdrawing my opposition.
>
> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> while {1} creates an *immutable* frozenset. I still find this slightly
> inelegant. But the practicality of being able to treat set literals as
> compile-time constants wins me over.
>
> (I suspect for a 2-element set of ints or strings, translating ""x in
> {C1, C2}"" into ""x in (C1, C2)"" might actually be a slight win since
> probing a tuple must be much faster than probing a set; but that's a
> detail.)

Given that ""x in {1,2,3}"" can be optimized just as well with mutable
sets (can somebody think of an example that can't?), do you still
support immutable using the literal notation?


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 6
Date: Sat, 26 Jan 2008 20:39:36 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Set literal
To: ""Adam Olsen"" <rhamph@gmail.com>, ""Guido van Rossum""
	<guido@python.org>
Cc: python-3000@python.org
Message-ID: <00b501c8609e$9f5f95c0$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[Adam]
> Given that ""x in {1,2,3}"" can be optimized just as well with mutable
> sets (can somebody think of an example that can't?), do you still
> support immutable using the literal notation?

>From an optimization point of view, it is still best to have {...} as a frozenset.

However, my support for it has waned anyway.  The notation is also
used for set comprehension and those should be mutable.


Raymond


------------------------------

Message: 7
Date: Sat, 26 Jan 2008 21:20:23 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801262120h342069e6ye29cc7d7a2f7e8e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 26, 2008 8:39 PM, Raymond Hettinger <python@rcn.com> wrote:
> [Adam]
> > Given that ""x in {1,2,3}"" can be optimized just as well with mutable
> > sets (can somebody think of an example that can't?), do you still
> > support immutable using the literal notation?
>
> From an optimization point of view, it is still best to have {...} as a frozenset.
>
> However, my support for it has waned anyway.  The notation is also
> used for set comprehension and those should be mutable.

Cool. That saves us a PEP. Vive le status quo.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Sat, 26 Jan 2008 21:57:24 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <010101c860a9$7db56ac0$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

>> However, my support for it has waned anyway.  The notation is also
>> used for set comprehension and those should be mutable.
> 
> Cool. That saves us a PEP. Vive le status quo.

It just wasn't me to be.


Raymond


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 41
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 40","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Nick Coghlan)
   2. Re: Set literal (Ron Adam)
   3. Re: Set literal (Raymond Hettinger)
   4. Re: Set literal (Christian Heimes)
   5. Re: Set literal (Guido van Rossum)
   6. plistlib module and test (Neal Norwitz)
   7. Re: Set literal (Raymond Hettinger)
   8. Re: Set literal (Georg Brandl)
   9. Re: Set literal (Guido van Rossum)
  10. Re: plistlib module and test (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Sun, 27 Jan 2008 01:26:23 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Set literal
To: Terry Reedy <tjreedy@udel.edu>
Cc: python-3000@python.org
Message-ID: <479B511F.9040605@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Terry Reedy wrote:
> ""Nick Coghlan"" <ncoghlan@gmail.com> wrote in message 
> news:479A08BB.6010101@gmail.com...
> | More completely:
> |
> |      ()           # empty tuple
> |      (1,)        # 1 item tuple
> |      (1,2)      # 2 item tuple
> 
> 1,    # 1 item tuple, no parens needed, trailing comma mandatory
> 1,2  # 2 item tuple, no parens needed
> 1,2, # 2 item tuple with optional trailing comma

No parens needed, unless the comma would be interpreted as meaning 
something else if the parens were left out (function argument separator, 
name separator in a 2.x series except clause, item separator in a 
surrounding tuple/list/dict definition, etc), or if the first expression 
would be overinclusive without them (e.g. string formatting with %). A 
lot of the time I find it easier to just include the parentheses instead 
of worrying about it (they're kind of like yield expressions that way...).

Anyway, for the kind of stylistic comparison I was talking about in the 
previous post, I think it is useful to think of the parentheses as part 
of the tuple syntax (because that's the way they are often written), 
even though that isn't completely correct in terms of the language's 
grammar.

We've veered pretty far from the original topic now though, so it would 
probably be best to drop the mailing list from any further discussion :)

Cheers,
Nick.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 2
Date: Sat, 26 Jan 2008 14:48:04 -0600
From: Ron Adam <rrr@ronadam.com>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <479B9C84.1050605@ronadam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed



Raymond Hettinger wrote:
>> should the repr for a set be set({a, b, c}) 
>> instead of set([a, b, c])?
> 
> FWIW, running eval() on the repr is slower and less memory efficient with curly braces than with the square brackets.


This is what I get.


 >>> timeit.timeit(""eval('frozenset({1,2,3})')"")
48.011682987213135
 >>> timeit.timeit(""eval('frozenset([1,2,3])')"")
48.155133962631226
 >>> timeit.timeit(""eval('frozenset((1,2,3))')"")
48.062387943267822
 >>> timeit.timeit(""eval('set({1,2,3})')"")
46.738940000534058
 >>> timeit.timeit(""eval('set([1,2,3])')"")
47.597666025161743
 >>> timeit.timeit(""eval('set((1,2,3))')"")
47.087898969650269


It's all very close.  I think the frozenset({1,2,3}) example will get 
faster if {..} notation becomes a frozen set, and set({...}) example will 
slow down a bit.


> Also, it may be easily misread as meaning: set([frozenset([a, b, c])]).  If the latter is intended, then that would become set({{a, b, c}}) which I find hard to parse correctly.  Maybe the set([a, b, c]) form should live on.
> 
> Raymond

You added an extra level of nesting.  set(frozenset([a, b, c])) isn't any 
harder to parse (to me) than the equivalent tuple or list versions of the 
same forms: list(tuple([a, b, c]) and tuple(list([a, b, c]).


Ron



------------------------------

Message: 3
Date: Sat, 26 Jan 2008 13:45:45 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Set literal
To: <rrr@ronadam.com>
Cc: python-3000@python.org
Message-ID: <003301c86064$cf68d810$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=response

>>> should the repr for a set be set({a, b, c}) instead of set([a, b, c])?

[Raymond]
>> FWIW, running eval() on the repr is slower and less memory efficient with curly braces than with the square brackets.

[Ron]
> It's all very close.  I think the frozenset({1,2,3}) example will get faster if {..} notation becomes a frozen set, and set({...}) 
> example will slow down a bit.

Am strongly -1 on changing the repr for set to set({a, b, c}) .   Creating an innermost frozenset doubles the memory consumption. 
Also, it invisibly pushes the hashing inward one step which will lead to weird tracebacks with set subclasses (it should be the 
outermost that raises an exception, not the innermost).  I find the notation to be confusing.  I am strongly against this change and 
would like to see it reverted right away. As the caretaker of this code, hopefully my recommendation will carry some weight.  I'm 
not happy with this change.


Raymond 


------------------------------

Message: 4
Date: Sat, 26 Jan 2008 22:50:14 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fng9un$8td$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Ron Adam wrote:
> It's all very close.  I think the frozenset({1,2,3}) example will get 
> faster if {..} notation becomes a frozen set, and set({...}) example will 
> slow down a bit.

frozenset({1,2,3}) can be optimized and reduced to a simple return in
frozenset_new() just like str(""abc"") returns the same string object. I
assume set({...}) is going to be as fast or maybe faster than set([...]).

Christian



------------------------------

Message: 5
Date: Sat, 26 Jan 2008 13:50:37 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Raymond Hettinger"" <python@rcn.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801261350v21d84038g597030fcd9f8e6e6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 26, 2008 1:45 PM, Raymond Hettinger <python@rcn.com> wrote:
> Am strongly -1 on changing the repr for set to set({a, b, c}) .   Creating an innermost frozenset doubles the memory consumption.

Raymond, I think you're overestimating how often the repr() of a set
actually gets eval()'ed. I expect this happens approximately never. I
certainly haven't used it myself, and most certainly not in a
performance-critical context.

The reason that repr() returns an eval()'able expression isn't that
the expression is likely to be eval()'ed -- it is that the programmer
is already familiar with the notation and can thus immediately
understand what it means.

>From an understandability POV, set({...}) is simpler than set([...])
because the list is just a distraction.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Sat, 26 Jan 2008 13:57:53 -0800
From: ""Neal Norwitz"" <nnorwitz@gmail.com>
Subject: [Python-3000] plistlib module and test
To: ""Python 3000"" <python-3000@python.org>
Message-ID:
	<ee2a432c0801261357i2f5fa475k4606d943bf28fb24@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I remember seeing a change which moved the plistlib module from
Lib/plat-mac to Lib so all platforms can use it.  This change causes
*all* the builds fail because the test has several problems.  For
example, the test references functions/methods that don't exist (see
below).  Can someone fix this?

  File ""/home/pybot/buildarea/3.0.klose-debian-ia64/build/Lib/test/test_plistlib.py"",
line 140, in test_appleformatting
    pl = plistlib.readPlistFromBytes(TESTDATA)
AttributeError: 'module' object has no attribute 'readPlistFromBytes'

  File ""/home/pybot/buildarea/3.0.klose-debian-ia64/build/Lib/test/test_plistlib.py"",
line 133, in test_bytes
    data = plistlib.writePlistToBytes(pl)
AttributeError: 'module' object has no attribute 'writePlistToBytes'

There are 2 more errors I noticed.  Here's an example:
http://www.python.org/dev/buildbot/all/ia64%20Ubuntu%203.0/builds/471/step-test/0

n


------------------------------

Message: 7
Date: Sat, 26 Jan 2008 14:01:06 -0800
From: ""Raymond Hettinger"" <python@rcn.com>
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID: <004401c86066$f3f305a0$6800a8c0@RaymondLaptop1>
Content-Type: text/plain; format=flowed; charset=""iso-8859-1"";
	reply-type=original

[GvR]
> Raymond, I think you're overestimating how often the repr() of a set
> actually gets eval()'ed. 

The repr is the model for how we enter things by hand.
If the repr is set([1,2,3]), the that's how we will learn
to type them into our programs.  It's not the eval(repr(s))
round trip that's at issue, it is a question of the preferred
way to write code.


> From an understandability POV, set({...}) is simpler than set([...])

I'm at a loss for words to explain the reasons for my strong
aversion to the syntax.  All I can say is that I think it's a mistake
and hope you let me switch back to the Py2.6 way.


Raymond


------------------------------

Message: 8
Date: Sat, 26 Jan 2008 23:02:25 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fngalj$a73$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum schrieb:
> On Jan 26, 2008 1:45 PM, Raymond Hettinger <python@rcn.com> wrote:
>> Am strongly -1 on changing the repr for set to set({a, b, c}) .   Creating an innermost frozenset doubles the memory consumption.
> 
> Raymond, I think you're overestimating how often the repr() of a set
> actually gets eval()'ed. I expect this happens approximately never. I
> certainly haven't used it myself, and most certainly not in a
> performance-critical context.
> 
> The reason that repr() returns an eval()'able expression isn't that
> the expression is likely to be eval()'ed -- it is that the programmer
> is already familiar with the notation and can thus immediately
> understand what it means.

Which means of course that users will pick up that idiom when they're
creating nonempty sets in their own code, thus causing the issues
Raymond mentioned.

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 9
Date: Sat, 26 Jan 2008 14:11:43 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Georg Brandl"" <g.brandl@gmx.net>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801261411w6d942981hb247ca4ad6220c17@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 26, 2008 2:02 PM, Georg Brandl <g.brandl@gmx.net> wrote:
> Guido van Rossum schrieb:
> > On Jan 26, 2008 1:45 PM, Raymond Hettinger <python@rcn.com> wrote:
> >> Am strongly -1 on changing the repr for set to set({a, b, c}) .   Creating an innermost frozenset doubles the memory consumption.
> >
> > Raymond, I think you're overestimating how often the repr() of a set
> > actually gets eval()'ed. I expect this happens approximately never. I
> > certainly haven't used it myself, and most certainly not in a
> > performance-critical context.
> >
> > The reason that repr() returns an eval()'able expression isn't that
> > the expression is likely to be eval()'ed -- it is that the programmer
> > is already familiar with the notation and can thus immediately
> > understand what it means.
>
> Which means of course that users will pick up that idiom when they're
> creating nonempty sets in their own code, thus causing the issues
> Raymond mentioned.

But didn't we start by establishing that users are rarely going to
create non-empty non-frozen sets anyway, because most algorithms
involving mutable sets start with an empty one? Even if users
occasionally write initialized sets, I find it hard to believe that
this would occur in a performance-critical position.

I think Raymond has been focusing on performance for so long that he
sees performance issues *everywhere*. It reminds me of the ugly idioms
that were common in Zope (long ago, it's probably changed) because
they boosted performance -- unfortunately they were used everywhere,
not just in performance-critical code, making the code harder to read
and maintain.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 10
Date: Sat, 26 Jan 2008 23:13:10 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] plistlib module and test
To: python-3000@python.org
Message-ID: <fngb9n$c1k$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Neal Norwitz wrote:
> I remember seeing a change which moved the plistlib module from
> Lib/plat-mac to Lib so all platforms can use it.  This change causes
> *all* the builds fail because the test has several problems.  For
> example, the test references functions/methods that don't exist (see
> below).  Can someone fix this?

I fixed it by copying plistlib.py from the py3k directory Lib/plat-mac/
to Lib/.

svn rm Lib/plistlib.py
svn cp -r 60150
svn+ssh://pythondev@svn.python.org/python/branches/py3k/Lib/plat-mac/plistlib.py
Lib/

svnmerge.py doesn't automatically do relative copies. It always copies
the absolute path. In the case of a rename, move or copy one has to copy
the right file manually.

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 40
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 39","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Steven Bethard)
   2. Re: Set literal (Adam Olsen)
   3. Re: Set literal (Ron Adam)
   4. Re: Set literal (Guido van Rossum)
   5. Re: Set literal (Raymond Hettinger)
   6. Re: Set literal (Nick Coghlan)
   7. Re: Set literal (Terry Reedy)


----------------------------------------------------------------------

Message: 1
Date: Fri, 25 Jan 2008 13:41:36 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""J. Cliff Dyer"" <jcd@sdf.lonestar.org>
Cc: python-3000@python.org
Message-ID:
	<d11dcfba0801251241u3be7f2cbl65a59e17ffd54e6e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 25, 2008 1:31 PM, J. Cliff Dyer <jcd@sdf.lonestar.org> wrote:
>
>  I'm a -0.9 on this one.  I really like that Python is powerful, but also a
> great pedagogical language.
>
>  I don't like that whereas before you could teach someone {} creates a dict,
> but now you have to say {} creates a dict, if there are colons inside, or
> it's empty, but otherwise creates a frozenset.  I also don't like that it
> will be easy (especially coming from Certain Other Languages) to make the
> following error:
>
>  my_dict = {
>      'a', 'b',
>      'c', 'd',
>      'e', 'f'
>  }
>
>  Moreover, I don't like that once you've done that, you'll be able to do
>
>  if 'c' in my_dict:
>      ...
>
>  and have it evaluate as true even though you aren't dealing with a dict.

You're a little late for this discussion.  Python 3.0 already has this
behavior::

    Python 3.0a2+ (py3k:60260, Jan 25 2008, 13:40:11)
    [MSC v.1500 32 bit (Intel)] on win32
    Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
    >>> my_dict = {
    ...     'a', 'b',
    ...     'c', 'd',
    ...     'e', 'f',
    ... }
    >>> 'c' in my_dict
    True

This discussion is about whether the set literal should be a set() or
a frozenset().

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 2
Date: Fri, 25 Jan 2008 13:54:55 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Collin Winter"" <collinw@gmail.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<aac2c7cb0801251254t5ca1b437ka950816f04c6a949@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 12:52 PM, Collin Winter <collinw@gmail.com> wrote:
>
> On Jan 24, 2008 10:40 PM, Adam Olsen <rhamph@gmail.com> wrote:
> > On Jan 24, 2008 5:12 PM, Raymond Hettinger <python@rcn.com> wrote:
> > > > Looking over the code base, frozensets are used rarely.
> > > > So I don't think this is warranted.
> > >
> > > There is no shortage for perfect use cases in the form:
> > >
> > >    if urlext in {'html', 'xml', 'php'}:
> > >          . . .
> > >
> > >
> > > If the curly braces are taken to mean a frozenset,
> > > then the peepholer can code the whole thing as a
> > > compile time constant.  It is fast and clean.
> > > You need not even be aware that you're using a
> > > frozenset.
> >
> > Is there any reason preventing it from being optimized even with a
> > mutable set?  urlext only interacts with the items in the set, and
> > doesn't get to see the set itself, so I don't see why the ""in""
> > operator couldn't trigger transforming it into a constant.
> >
> > The same argument applies to list literals.  The only limitation I see
> > is whether or not calling hash() on urlext is considered an essential
> > part of the semantics - and I'm inclined to say ""no"".
>
> You're asking if it would be possible to automatically turn ""x in [a,
> b, c]"" into ""x in {a, b, c}""? If so, the answer is no: x may be
> unhashable.

That's not what I'm asking.  I'm asking about changing ""x in set([a,
b, c])"" into ""x into frozenset([a, b, c])"".

The second part about changing ""x in set([a, b, c])"" into ""x in (a, b,
c)"".  This removes the hashability requirement, rather than adding it.
 However, it seems moot given the benchmarks others have provided.


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 3
Date: Fri, 25 Jan 2008 18:58:33 -0600
From: Ron Adam <rrr@ronadam.com>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <479A85B9.4080906@ronadam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed



Raymond Hettinger wrote:

> P.S.  A small side-benefit is it may put an end for interminable requests for a {:} or {/} notation for empty sets.  There's not much need for a literal for a empty frozenset (use ""not s"" instead).


How about also removing the {} as an empty dictionary?  Then both
dictionary and set literals will require at least one item to be valid.  No 
  confusion, and {} is not allowed because it's ambiguous (to users) as to 
weather it's a set or dictionary.



Would set({a, b, c}) be valid?

If so, should the repr for a set be set({a, b, c}) instead of
set([a, b, c])?


Ron






------------------------------

Message: 4
Date: Fri, 25 Jan 2008 18:23:55 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: rrr@ronadam.com
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20801251823h20f19da7tdde2400431471d7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 4:58 PM, Ron Adam <rrr@ronadam.com> wrote:
> How about also removing the {} as an empty dictionary?  Then both
> dictionary and set literals will require at least one item to be valid.No
>   confusion, and {} is not allowed because it's ambiguous (to users) as to
> weather it's a set or dictionary.

That sounds like punishing the dict type for something it didn't do.

> Would set({a, b, c}) be valid?

Can't see how it couldn't be. :-)

> If so, should the repr for a set be set({a, b, c}) instead of
> set([a, b, c])?

Of course. In current 3.0 the frozenset() repr() already does this:

>>> frozenset([1,2,3])
frozenset({1, 2, 3})
>>>

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Fri, 25 Jan 2008 22:03:58 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Set literal
To: rrr@ronadam.com
Cc: python-3000@python.org
Message-ID: <20080125220358.AFT02821@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> should the repr for a set be set({a, b, c}) 
> instead of set([a, b, c])?

FWIW, running eval() on the repr is slower and less memory efficient with curly braces than with the square brackets.

Also, it may be easily misread as meaning: set([frozenset([a, b, c])]).  If the latter is intended, then that would become set({{a, b, c}}) which I find hard to parse correctly.  Maybe the set([a, b, c]) form should live on.

Raymond


------------------------------

Message: 6
Date: Sat, 26 Jan 2008 15:03:42 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Set literal
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID: <479ABF2E.9070007@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Guido van Rossum wrote:
> On Jan 25, 2008 10:01 AM, Leif Walsh <adlaiff6@gmail.com> wrote:
>> On Jan 25, 2008 12:37 PM, Christian Heimes <lists@cheimes.de> wrote:
>>> The pipe char is ambiguous because is no direction. It was suggested and
>>> rejected last year.
>> Out of almost-pure devil's advocacy, has <> been considered?  My first
>> instinct is that it would be ambiguous with less-than/greater-than,
>> but if someone can convince me otherwise, might it work?  After all,
>> it's the only other balanced pair of punctuation I see on my keyboard.
> 
> No, there are too many syntactic situations where this would make the
> grammar ambiguous or tortuous. We don't want to move beyond LL(1).
> (Apart from parsing indentation and nested parentheses, of course --
> which actually reminds me or another issue with using <> as brackets:
> the lexer can't know whether a particular < or > is used as a bracket
> or not, so it can't keep track of nesting like it does for (), [] and
> {}. So <> would always remain a second-class citizen.)
> 

Hmm, I guess both of those objections apply to using | as the delimiter 
as well. Ah well.

If anyone has a bit of free time to play with, it will probably be worth 
creating a retrospective PEP for the set literal syntax to capture the 
rationale for the various design decisions like:
   - why not || or <> as the delimeters?
   - why {} continues as the empty dict
   - why {1, 2, 3} is immutable, while {1:2} is not

Cheers,
Nick.


-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 7
Date: Sat, 26 Jan 2008 03:21:53 -0500
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fneqis$70a$1@ger.gmane.org>


""Nick Coghlan"" <ncoghlan@gmail.com> wrote in message 
news:479A08BB.6010101@gmail.com...
| More completely:
|
|      ()           # empty tuple
|      (1,)        # 1 item tuple
|      (1,2)      # 2 item tuple

1,    # 1 item tuple, no parens needed, trailing comma mandatory
1,2  # 2 item tuple, no parens needed
1,2, # 2 item tuple with optional trailing comma

The anomaly is the need for parens to denote an empty tuple since
it is otherwise hard to tell a tuple nothing from a nothing nothing.  The 
alternative would have been to use a bare trailing , ... but I guess Guido 
thought 'a = ,' and 'a == ,' would look odder than the current form, 
although it would have avoided the implication that parens rather than 
commas make tuples (other than the empty one).

| - 1-tuples require a trailing comma to differentiate them from the use
| of parentheses for mere expression grouping.

1-tuples require the trailing comma in order to have at least one around to 
differentiate them from bare expressions.  Except for empty tuples, parens 
only need be added if they are indeed needed for expression grouping (which 
they often are because of precedence).

tjr





------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 39
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 38","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Guido van Rossum)
   2. Re: Set literal (Christian Heimes)
   3. Re: Set literal (Thomas Wouters)
   4. Re: Set literal (Thomas Wouters)
   5. Re: Set literal (Charles Merriam)
   6. Re: Set literal (Collin Winter)
   7. Re: Set literal (J. Cliff Dyer)


----------------------------------------------------------------------

Message: 1
Date: Fri, 25 Jan 2008 10:23:20 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""nathan binkert"" <nate@binkert.org>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<ca471dc20801251023p10004288tb72ea9a35da4a00d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 10:15 AM, nathan binkert <nate@binkert.org> wrote:
> > No, there are too many syntactic situations where this would make the
> > grammar ambiguous or tortuous. We don't want to move beyond LL(1).
> > (Apart from parsing indentation and nested parentheses, of course --
> > which actually reminds me or another issue with using <> as brackets:
> > the lexer can't know whether a particular < or > is used as a bracket
> > or not, so it can't keep track of nesting like it does for (), [] and
> > {}. So <> would always remain a second-class citizen.)
>
> What about a single character prefix like we have with r'' and u''?
> We could have f{} and s{}.
> I'm not particularly enamored by the idea, but the parser should be
> able to handle it, no?

It's not the same -- r""..."" is a single token to the lexer, but r{...}
is multiple tokens. It would also rule out a possible future syntactic
extension (present in some other languages) where, in analogy of
foo(...) and foo[...] you can also write foo{...}.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Fri, 25 Jan 2008 19:32:32 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fnda00$68l$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Leif Walsh wrote:
> Out of almost-pure devil's advocacy, has <> been considered?  My first
> instinct is that it would be ambiguous with less-than/greater-than,
> but if someone can convince me otherwise, might it work?  After all,
> it's the only other balanced pair of punctuation I see on my keyboard.

There are also ? and ?, << and >> for those w/o UTF-8 support in their
mail client. On my keyboard the characters are available under [alt gr]
+ y and x.

Christian



------------------------------

Message: 3
Date: Fri, 25 Jan 2008 10:39:44 -0800
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<9e804ac0801251039y46eced3eofc4f6d62231866ee@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Jan 25, 2008 10:01 AM, Leif Walsh <adlaiff6@gmail.com> wrote:

> On Jan 25, 2008 12:37 PM, Christian Heimes <lists@cheimes.de> wrote:
> > The pipe char is ambiguous because is no direction. It was suggested and
> > rejected last year.
>
> Out of almost-pure devil's advocacy, has <> been considered?  My first
> instinct is that it would be ambiguous with less-than/greater-than,
> but if someone can convince me otherwise, might it work?  After all,
> it's the only other balanced pair of punctuation I see on my keyboard.
>

Yes. And yes, even if the idea wasn't rejected, the parser wouldn't be able
to handle it. The same goes for |, too. The syntax would be ambiguous, and
Python's parser would not be able to ever 'close' a set, because the closing
character would be eaten by the expression inside the set.

 set([1, 2, 1|2]) -> |1, 2, 1|2|
 set([1>0, 2, 3]) -> <1>0, 2, 3>

For some situations, a more clever parser would be able to figure it out,
but there would still be purely ambiguous cases. And Guido has repeatedly
stated he wants Python to remain parseable by a simple parser, even if we
were to make CPython's parser more powerful. Weirder balanced-pairs have
also been suggested, and rejected (both because they don't improve the
readability and parsing situation, and because they just look absurd :)

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080125/02e62bcb/attachment-0001.htm 

------------------------------

Message: 4
Date: Fri, 25 Jan 2008 10:43:04 -0800
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<9e804ac0801251043r2f16029ai2b7c81330eadd5a3@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Jan 25, 2008 10:32 AM, Christian Heimes <lists@cheimes.de> wrote:

> Leif Walsh wrote:
> > Out of almost-pure devil's advocacy, has <> been considered?  My first
> > instinct is that it would be ambiguous with less-than/greater-than,
> > but if someone can convince me otherwise, might it work?  After all,
> > it's the only other balanced pair of punctuation I see on my keyboard.
>
> There are also ? and ?, << and >> for those w/o UTF-8 support in their
> mail client. On my keyboard the characters are available under [alt gr]
> + y and x.
>

They aren't available on my keyboard, nor on most US keyboards I would
reckon. You can still type them if you know how (and I happen to know how in
any of my environments) but it would limit the set literals to a particular
set of source encodings (most notably, not ASCII.) I find this an extremely
disturbing idea.

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080125/f67a6967/attachment-0001.htm 

------------------------------

Message: 5
Date: Fri, 25 Jan 2008 10:47:23 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801251047v6d769453nce3ab7a42bb86f9e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

> There are also ? and ?, << and >> for those w/o UTF-8 support in their
> mail client. On my keyboard the characters are available under [alt gr]
> + y and x.

Not elegant.  It should look pretty.  Code should look the same in all
character encodings unless alternate codings for used for identifiers.

Seriously, people just want to code in Python without odd little nooks of lore.
Over 99.9% of programmers will not care about a minor performance hit
for no compile-time frozen sets.

Cheers,

Charles


------------------------------

Message: 6
Date: Fri, 25 Jan 2008 11:52:49 -0800
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Adam Olsen"" <rhamph@gmail.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<43aa6ff70801251152rd47fd0dr8957675ab75c6c5c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 10:40 PM, Adam Olsen <rhamph@gmail.com> wrote:
> On Jan 24, 2008 5:12 PM, Raymond Hettinger <python@rcn.com> wrote:
> > > Looking over the code base, frozensets are used rarely.
> > > So I don't think this is warranted.
> >
> > There is no shortage for perfect use cases in the form:
> >
> >    if urlext in {'html', 'xml', 'php'}:
> >          . . .
> >
> >
> > If the curly braces are taken to mean a frozenset,
> > then the peepholer can code the whole thing as a
> > compile time constant.  It is fast and clean.
> > You need not even be aware that you're using a
> > frozenset.
>
> Is there any reason preventing it from being optimized even with a
> mutable set?  urlext only interacts with the items in the set, and
> doesn't get to see the set itself, so I don't see why the ""in""
> operator couldn't trigger transforming it into a constant.
>
> The same argument applies to list literals.  The only limitation I see
> is whether or not calling hash() on urlext is considered an essential
> part of the semantics - and I'm inclined to say ""no"".

You're asking if it would be possible to automatically turn ""x in [a,
b, c]"" into ""x in {a, b, c}""? If so, the answer is no: x may be
unhashable.

Collin Winter


------------------------------

Message: 7
Date: Fri, 25 Jan 2008 15:31:03 -0500
From: ""J. Cliff Dyer"" <jcd@sdf.lonestar.org>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Cc: python@rcn.com
Message-ID: <479A4707.5030408@sdf.lonestar.org>
Content-Type: text/plain; charset=""us-ascii""

I'm a -0.9 on this one. I really like that Python is powerful, but also
a great pedagogical language.

I don't like that whereas before you could teach someone {} creates a
dict, but now you have to say {} creates a dict, if there are colons
inside, or it's empty, but otherwise creates a frozenset. I also don't
like that it will be easy (especially coming from Certain Other
Languages) to make the following error:

my_dict = {
'a', 'b',
'c', 'd',
'e', 'f'
}

Moreover, I don't like that once you've done that, you'll be able to do

if 'c' in my_dict:
...

and have it evaluate as true even though you aren't dealing with a dict.
Those are ugly gotchas for something so basic to the language. Newcomers
will run into it a lot.

As a half-baked alternative thought, what about using {{ 'a', 'b', 'c'
}} for the syntax. It's visually clearer, and still syntactically
unambiguous, because a dict can't have another dict as a key, and a
(frozen)set can't have a dict inside it. Thinking about possible
issues--what if you come across a construct with three opening braces at
the start? ({{{)

* It can't be a dict within a dict within a dict, because a dict is not
hashable, so can't be a key.
* It can't be a dict within a frozenset, because a dict is not hashable.
* It can (and must) be a frozenset within a dict, because a frozenset is
hashable, and hence a valid dict key.

Four braces? ({{{{)
* I think this has to be a frozen set within a frozen set.

More?
* The outer one is a dict if an odd number of braces, everything else is
a frozen set.

Obviously, the more complex cases get less visually clear, but (1) they
are not common cases, and (2) they are still unambigous, and will often
be made clearer by (a) the placement of closing brackets, and (b) decent
syntax highlighting.

Any major holes in this idea?

Cheers,
Cliff





Nick Coghlan wrote:
> Mark Summerfield wrote:
>   
>> On 2008-01-25, Guido van Rossum wrote:
>>     
>>> For the record, I'm thinking Raymond has won this argument fair and
>>> square, and I'm withdrawing my opposition.
>>>
>>> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
>>> while {1} creates an *immutable* frozenset. I still find this slightly
>>> inelegant. But the practicality of being able to treat set literals as
>>> compile-time constants wins me over.
>>>       
>> So this will produce:
>>
>>     frozenset()	# empty frozen set
>>     {1}	    	# 1 item frozen set
>>     {1, 2}  	# 2 item frozen set
>>     {}	    	# empty dict
>>     {1:1}   	# 1 item dict
>>     {1:1, 2:2}	# 2 item dict
>>     
>
> More completely:
>
>       ()           # empty tuple
>       (1,)         # 1 item tuple
>       (1, 2)       # 2 item tuple
>       []           # empty list
>       [1]          # 1 item list
>       [1, 2]       # 2 item list
>       {}           # empty dict
>       {1:1}        # 1 item dict
>       {1:1, 2:2}	  # 2 item dict
>       frozenset()  # empty frozen set
>       {1}          # 1 item frozen set
>       {1, 2}       # 2 item frozen set
>       set()        # empty mutable set
>       set({1})     # 1 item mutable set
>       set({1, 2})  # 2 item mutable set
>
> So with Raymond's proposal we will have syntax for two immutable 
> literals (tuples, frozensets) and two mutable container displays (lists, 
> dicts).
>
> Yes, there will be a few anomalies to learn in this list:
>    - 1-tuples require a trailing comma
>    - {} is a dict rather than a frozen set
>    - frozen sets are immutable while dicts are mutable
>
> Do these anomalies make this area of the language syntax harder to 
> learn? Almost certainly - the 1-tuple anomaly has been tripping people 
> up for years. Despite any reservation, are there valid reasons for 
> having these anomalies in Py3k? As far as I am concerned, yes there 
> are*, and I believe that is Guido's view as well.
>
> Cheers,
> Nick.
>
> *Taking them from the top:
> - 1-tuples require a trailing comma to differentiate them from the use 
> of parentheses for mere expression grouping. Expression grouping is kind 
> of important, and this anomaly in the syntax is a small price to pay for 
> making that work intuitively.
> - {} is used extensively in existing code (both operational code and 
> code in documentation and other examples). Py3k may lower the bar for 
> 'acceptable breakage' in the realm of backwards compatibility, but it 
> doesn't get rid of it altogether - and changing the meaning of {} fails 
> to clear even that lowered hurdle. Also, as Marcin pointed out, an empty 
> frozenset() is pretty useless, while an empty dict() is common.
> - making set literals immutable provides excellent optimisation 
> opportunities, which is important because it is a concern for speed 
> which is likely to lead to the use of a set in the first place. It is 
> also convenient in that set() is a lot easier to type than frozenset(), 
> so going from an immutable literal to a mutable container is easier than 
> going the other way would have been.
>
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080125/af956f86/attachment.htm 

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 38
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 37","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Gustavo Niemeyer)
   2. Re: Set literal (Aahz)
   3. Re: Ellipsis Literal (Gisle Aas)
   4. Re: Set literal (Nick Coghlan)
   5. Re: Set literal (Christian Heimes)
   6. Re: Set literal (Dj Gilcrease)
   7. Re: Set literal (Christian Heimes)
   8. Re: Ellipsis Literal (Guido van Rossum)
   9. Re: Set literal (Leif Walsh)
  10. Re: Set literal (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Fri, 25 Jan 2008 11:41:31 -0200
From: Gustavo Niemeyer <gustavo@niemeyer.net>
Subject: Re: [Python-3000] Set literal
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <4799E70B.4090406@niemeyer.net>
Content-Type: text/plain; charset=ISO-8859-1


> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> while {1} creates an *immutable* frozenset. I still find this slightly
> inelegant. But the practicality of being able to treat set literals as
> compile-time constants wins me over.

Another point in favor of Raymond's suggestion is that problems created
by getting it wrong in the first try are more easily solved when going
frozenset => set than the opposite way.

-- 
Gustavo Niemeyer
http://niemeyer.net


------------------------------

Message: 2
Date: Fri, 25 Jan 2008 07:18:48 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080125151848.GA22087@panix.com>
Content-Type: text/plain; charset=us-ascii

On Fri, Jan 25, 2008, Mark Summerfield wrote:
>
> Python 3 is going to break compatibility anyway. I thought one of the
> purposes of having a new major release was to allow for such changes.
> 
> In 2 or 3 years from now Python 3 will be ""Python"" for most people, and
> confusing inconsistencies won't be seen to have any rationale.

You are exceedingly optimistic.  My company was using Python 2.2 until a
few months ago, and getting rid of 2.3 is many months away.  Some people
still support Python 1.5.2 (ever hear of Fredrik Lundh?).  As other
people pointed out, there are trade-offs with every breakage, and some
changes are deemed just too radical.

More to the point: the focus on breakage is removing old idioms that are
considered language cruft even in Python 2.x.  {} as a dict literal is
not cruft.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 3
Date: Fri, 25 Jan 2008 16:47:13 +0100
From: Gisle Aas <gisle@activestate.com>
Subject: Re: [Python-3000] Ellipsis Literal
To: Guido van Rossum <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <261F2224-7CBA-4E68-A2DE-8FCB64B2D794@activestate.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On Jan 24, 2008, at 20:32, Guido van Rossum wrote:

> Some folks thought it would be cute to be able to write incomplete
> code like this:
>
> class C:
>   def meth(self): ...
>   ...
>
> and have it be syntactically correct.

I think it would be been nice if ""..."" raised an NotYetImplemented  
exception if executed as a lone statement.  Is that desirable and  
doable?

BTW, Perl 6 also introduce the same feature and Larry calls it the  
""yadayadayada operator""[1].

Regards,
Gisle

>
> PEP 3100 has the reference:
> * ``...`` to become a general expression element [16]_ [done]
> .. [16] python-3000 email
>    http://mail.python.org/pipermail/python-3000/2006-April/000996.html

[1] http://dev.perl.org/perl6/doc/design/syn/S06.html


------------------------------

Message: 4
Date: Sat, 26 Jan 2008 02:05:15 +1000
From: Nick Coghlan <ncoghlan@gmail.com>
Subject: Re: [Python-3000] Set literal
To: Mark Summerfield <mark@qtrac.eu>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <479A08BB.6010101@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Mark Summerfield wrote:
> On 2008-01-25, Guido van Rossum wrote:
>> For the record, I'm thinking Raymond has won this argument fair and
>> square, and I'm withdrawing my opposition.
>>
>> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
>> while {1} creates an *immutable* frozenset. I still find this slightly
>> inelegant. But the practicality of being able to treat set literals as
>> compile-time constants wins me over.
> 
> So this will produce:
> 
>     frozenset()	# empty frozen set
>     {1}	    	# 1 item frozen set
>     {1, 2}  	# 2 item frozen set
>     {}	    	# empty dict
>     {1:1}   	# 1 item dict
>     {1:1, 2:2}	# 2 item dict

More completely:

      ()           # empty tuple
      (1,)         # 1 item tuple
      (1, 2)       # 2 item tuple
      []           # empty list
      [1]          # 1 item list
      [1, 2]       # 2 item list
      {}           # empty dict
      {1:1}        # 1 item dict
      {1:1, 2:2}	  # 2 item dict
      frozenset()  # empty frozen set
      {1}          # 1 item frozen set
      {1, 2}       # 2 item frozen set
      set()        # empty mutable set
      set({1})     # 1 item mutable set
      set({1, 2})  # 2 item mutable set

So with Raymond's proposal we will have syntax for two immutable 
literals (tuples, frozensets) and two mutable container displays (lists, 
dicts).

Yes, there will be a few anomalies to learn in this list:
   - 1-tuples require a trailing comma
   - {} is a dict rather than a frozen set
   - frozen sets are immutable while dicts are mutable

Do these anomalies make this area of the language syntax harder to 
learn? Almost certainly - the 1-tuple anomaly has been tripping people 
up for years. Despite any reservation, are there valid reasons for 
having these anomalies in Py3k? As far as I am concerned, yes there 
are*, and I believe that is Guido's view as well.

Cheers,
Nick.

*Taking them from the top:
- 1-tuples require a trailing comma to differentiate them from the use 
of parentheses for mere expression grouping. Expression grouping is kind 
of important, and this anomaly in the syntax is a small price to pay for 
making that work intuitively.
- {} is used extensively in existing code (both operational code and 
code in documentation and other examples). Py3k may lower the bar for 
'acceptable breakage' in the realm of backwards compatibility, but it 
doesn't get rid of it altogether - and changing the meaning of {} fails 
to clear even that lowered hurdle. Also, as Marcin pointed out, an empty 
frozenset() is pretty useless, while an empty dict() is common.
- making set literals immutable provides excellent optimisation 
opportunities, which is important because it is a concern for speed 
which is likely to lead to the use of a set in the first place. It is 
also convenient in that set() is a lot easier to type than frozenset(), 
so going from an immutable literal to a mutable container is easier than 
going the other way would have been.

-- 
Nick Coghlan   |   ncoghlan@gmail.com   |   Brisbane, Australia
---------------------------------------------------------------
             http://www.boredomandlaziness.org


------------------------------

Message: 5
Date: Fri, 25 Jan 2008 17:25:30 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fnd2hq$8ja$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Raymond Hettinger wrote:
> I think it would be more useful for the {e1, e2, e3} literal to be a frozenset instead of a set.

+1 from me

Christian



------------------------------

Message: 6
Date: Fri, 25 Jan 2008 10:06:53 -0700
From: ""Dj Gilcrease"" <digitalxero@gmail.com>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com, python-3000@python.org
Message-ID:
	<e9764b730801250906i219b24e7tfa3f15e64399a7fe@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 8:12 PM, Guido van Rossum <guido@python.org> wrote:
> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> while {1} creates an *immutable* frozenset. I still find this slightly
> inelegant. But the practicality of being able to treat set literals as
> compile-time constants wins me over.

This probably will not go over well, but why not use the pipe
character to define a frozenset?

if urltxt in |'html', 'xml', 'php'|:

No way to confuse it with a dict, and as far as I know the pipe isnt
used for anything else that would conflict or confuse the issue.

Also on Raymonds point about repr being hard to read

 {frozenset([0, 1]): frozenset([frozenset([0]),
                               frozenset([1]),
                               frozenset([0, 1, 2])]),
 frozenset([0, 1, 2]): frozenset([frozenset([1, 2]),
                                  frozenset([0, 2]),
                                  frozenset([0, 1])])}


would become:

 {|0, 1|: ||0|,
          |1|,
          |0, 1, 2||,
 |0, 1, 2|: ||1, 2|,
            |0, 2|,
            |0, 1||}


------------------------------

Message: 7
Date: Fri, 25 Jan 2008 18:37:05 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fnd6o1$p2a$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Dj Gilcrease wrote:
> This probably will not go over well, but why not use the pipe
> character to define a frozenset?
> 
> if urltxt in |'html', 'xml', 'php'|:

The pipe char is ambiguous because is no direction. It was suggested and
rejected last year.

Christian



------------------------------

Message: 8
Date: Fri, 25 Jan 2008 09:56:13 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Ellipsis Literal
To: ""Gisle Aas"" <gisle@activestate.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<ca471dc20801250956w26cc5598lceaf9e0b0cba0c80@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 7:47 AM, Gisle Aas <gisle@activestate.com> wrote:
> On Jan 24, 2008, at 20:32, Guido van Rossum wrote:
>
> > Some folks thought it would be cute to be able to write incomplete
> > code like this:
> >
> > class C:
> >   def meth(self): ...
> >   ...
> >
> > and have it be syntactically correct.
>
> I think it would be been nice if ""..."" raised an NotYetImplemented
> exception if executed as a lone statement.  Is that desirable and
> doable?

That wouldn't work, because in slice syntax it's always been allowed
and meant to return the Ellipsis object. Changing this in some
contexts but not others would be confusing.

> BTW, Perl 6 also introduce the same feature and Larry calls it the
> ""yadayadayada operator""[1].

Blah, bah. :-)

> Regards,
> Gisle
>
> >
> > PEP 3100 has the reference:
> > * ``...`` to become a general expression element [16]_ [done]
> > .. [16] python-3000 email
> >    http://mail.python.org/pipermail/python-3000/2006-April/000996.html
>
> [1] http://dev.perl.org/perl6/doc/design/syn/S06.html

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Fri, 25 Jan 2008 13:01:11 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<cc7430500801251001h112998fejb3e320f40da42e4b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 12:37 PM, Christian Heimes <lists@cheimes.de> wrote:
> The pipe char is ambiguous because is no direction. It was suggested and
> rejected last year.

Out of almost-pure devil's advocacy, has <> been considered?  My first
instinct is that it would be ambiguous with less-than/greater-than,
but if someone can convince me otherwise, might it work?  After all,
it's the only other balanced pair of punctuation I see on my keyboard.

--
Cheers,
Leif


------------------------------

Message: 10
Date: Fri, 25 Jan 2008 10:08:29 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<ca471dc20801251008g70327756r66df690a3edd9e9f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 25, 2008 10:01 AM, Leif Walsh <adlaiff6@gmail.com> wrote:
> On Jan 25, 2008 12:37 PM, Christian Heimes <lists@cheimes.de> wrote:
> > The pipe char is ambiguous because is no direction. It was suggested and
> > rejected last year.
>
> Out of almost-pure devil's advocacy, has <> been considered?  My first
> instinct is that it would be ambiguous with less-than/greater-than,
> but if someone can convince me otherwise, might it work?  After all,
> it's the only other balanced pair of punctuation I see on my keyboard.

No, there are too many syntactic situations where this would make the
grammar ambiguous or tortuous. We don't want to move beyond LL(1).
(Apart from parsing indentation and nested parentheses, of course --
which actually reminds me or another issue with using <> as brackets:
the lexer can't know whether a particular < or > is used as a bracket
or not, so it can't keep track of nesting like it does for (), [] and
{}. So <> would always remain a second-class citizen.)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 37
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 36","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Martin v. L?wis)
   2. Re: Set literal (Adam Olsen)
   3. Re: Set literal (John Barham)
   4. Re: Set literal (Mark Summerfield)
   5. Re: Set literal (Steven Bethard)
   6. Re: Set literal (Mark Summerfield)
   7. Re: Set literal (Oleg Broytmann)
   8. Re: Set literal (Marcin ?Qrczak? Kowalczyk)
   9. Re: Set literal (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Fri, 25 Jan 2008 07:25:36 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Set literal
To: John Barham <jbarham@gmail.com>
Cc: python-3000@python.org
Message-ID: <479980E0.8040803@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1

> But getting back to the original issue, what does using frozensets
> gain you over using a tuple:
> 
> if urlext in ('html', 'xml', 'php'):
> 
> Given that tuples are also immutable, couldn't the peepholer also
> optimize the tuple as a compile time constant?

py> def f():
...   if urlext in ('html','xml','php'):return 3
...
py> dis.dis(f)
  2           0 LOAD_GLOBAL              0 (urlext)
              3 LOAD_CONST               5 (('html', 'xml', 'php'))
              6 COMPARE_OP               6 (in)
              9 JUMP_IF_FALSE            8 (to 20)
             12 POP_TOP
             13 LOAD_CONST               4 (3)
             16 RETURN_VALUE
             17 JUMP_FORWARD             1 (to 21)
        >>   20 POP_TOP
        >>   21 LOAD_CONST               0 (None)
             24 RETURN_VALUE


> Since this idiom is
> usually used as a shortcut for:
> 
> if urlext == 'html' or urlext == 'xml' or urlext == 'php':
> 
> the semantics of using a frozenset are subtly different since with the
> equivalent tuple you know the search is linear and short circuits on
> success, but using a frozenset the search order is undefined.  Of
> course if you had a largish search set, frozenset would probably be
> quicker than using a tuple, but I think it's safe to say the search
> set is small for the typical case.

Are you implying that the search is faster for a tuple if the set is
small?

Regards,
Martin


------------------------------

Message: 2
Date: Thu, 24 Jan 2008 23:40:12 -0700
From: ""Adam Olsen"" <rhamph@gmail.com>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<aac2c7cb0801242240n3540d895i290d05b624954656@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 5:12 PM, Raymond Hettinger <python@rcn.com> wrote:
> > Looking over the code base, frozensets are used rarely.
> > So I don't think this is warranted.
>
> There is no shortage for perfect use cases in the form:
>
>    if urlext in {'html', 'xml', 'php'}:
>          . . .
>
>
> If the curly braces are taken to mean a frozenset,
> then the peepholer can code the whole thing as a
> compile time constant.  It is fast and clean.
> You need not even be aware that you're using a
> frozenset.

Is there any reason preventing it from being optimized even with a
mutable set?  urlext only interacts with the items in the set, and
doesn't get to see the set itself, so I don't see why the ""in""
operator couldn't trigger transforming it into a constant.

The same argument applies to list literals.  The only limitation I see
is whether or not calling hash() on urlext is considered an essential
part of the semantics - and I'm inclined to say ""no"".


-- 
Adam Olsen, aka Rhamphoryncus


------------------------------

Message: 3
Date: Thu, 24 Jan 2008 22:55:05 -0800
From: ""John Barham"" <jbarham@gmail.com>
Subject: Re: [Python-3000] Set literal
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: python-3000@python.org
Message-ID:
	<4f34febc0801242255v2e068e57i75abfff3a59fbc9f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Martin v. L?wis"" wrote:

> Are you implying that the search is faster for a tuple if the set is
> small?

That was my intuition but the measurements say otherwise. ;)  Even for
sets as small as two or three elements, searches in frozensets are
faster than within tuples.  See my tuple vs. frozenset timeit results
and Guido's confirmation in a parallel thread.

  John


------------------------------

Message: 4
Date: Fri, 25 Jan 2008 07:18:23 +0000
From: Mark Summerfield <mark@qtrac.eu>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Cc: python@rcn.com
Message-ID: <200801250718.23840.mark@qtrac.eu>
Content-Type: text/plain;  charset=""iso-8859-1""

On 2008-01-25, Guido van Rossum wrote:
> For the record, I'm thinking Raymond has won this argument fair and
> square, and I'm withdrawing my opposition.
>
> I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> while {1} creates an *immutable* frozenset. I still find this slightly
> inelegant. But the practicality of being able to treat set literals as
> compile-time constants wins me over.

So this will produce:

    frozenset()	# empty frozen set
    {1}	    	# 1 item frozen set
    {1, 2}  	# 2 item frozen set
    {}	    	# empty dict
    {1:1}   	# 1 item dict
    {1:1, 2:2}	# 2 item dict

I think this is confusing and messy, especially for new Python programmers.

If you're going to make the change, why not make things consistent:

    {}		# empty frozen set
    {1}	    	# 1 item frozen set
    {1, 2}  	# 2 item frozen set
    {:}	    	# empty dict
    {1:1}   	# 1 item dict
    {1:1, 2:2}  # 2 item dict

-- 
Mark Summerfield, Qtrac Ltd., www.qtrac.eu



------------------------------

Message: 5
Date: Fri, 25 Jan 2008 00:33:44 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Mark Summerfield"" <mark@qtrac.eu>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<d11dcfba0801242333o33a93f54h607fb7cd738fd9e8@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 25, 2008 12:18 AM, Mark Summerfield <mark@qtrac.eu> wrote:
> On 2008-01-25, Guido van Rossum wrote:
> > For the record, I'm thinking Raymond has won this argument fair and
> > square, and I'm withdrawing my opposition.
> >
> > I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> > while {1} creates an *immutable* frozenset. I still find this slightly
> > inelegant. But the practicality of being able to treat set literals as
> > compile-time constants wins me over.
>
> So this will produce:
>
>     frozenset() # empty frozen set
>     {1}         # 1 item frozen set
>     {1, 2}      # 2 item frozen set
>     {}          # empty dict
>     {1:1}       # 1 item dict
>     {1:1, 2:2}  # 2 item dict
>
> I think this is confusing and messy, especially for new Python programmers.
>
> If you're going to make the change, why not make things consistent:
>
>     {}          # empty frozen set
>     {1}         # 1 item frozen set
>     {1, 2}      # 2 item frozen set
>     {:}         # empty dict
>     {1:1}       # 1 item dict
>     {1:1, 2:2}  # 2 item dict

This has been discussed and rejected as it would break too much code.
Check the archives during the set literals discussions.

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 6
Date: Fri, 25 Jan 2008 09:29:49 +0000
From: Mark Summerfield <mark@qtrac.eu>
Subject: Re: [Python-3000] Set literal
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <200801250929.49286.mark@qtrac.eu>
Content-Type: text/plain;  charset=""utf-8""

On 2008-01-25, Steven Bethard wrote:
> On Jan 25, 2008 12:18 AM, Mark Summerfield <mark@qtrac.eu> wrote:
> > On 2008-01-25, Guido van Rossum wrote:
> > > For the record, I'm thinking Raymond has won this argument fair and
> > > square, and I'm withdrawing my opposition.
> > >
> > > I hope it isn't too confusing that {1: 1} creates a *mutable* dict
> > > while {1} creates an *immutable* frozenset. I still find this slightly
> > > inelegant. But the practicality of being able to treat set literals as
> > > compile-time constants wins me over.
> >
> > So this will produce:
> >
> >     frozenset() # empty frozen set
> >     {1}         # 1 item frozen set
> >     {1, 2}      # 2 item frozen set
> >     {}          # empty dict
> >     {1:1}       # 1 item dict
> >     {1:1, 2:2}  # 2 item dict
> >
> > I think this is confusing and messy, especially for new Python
> > programmers.
> >
> > If you're going to make the change, why not make things consistent:
> >
> >     {}          # empty frozen set
> >     {1}         # 1 item frozen set
> >     {1, 2}      # 2 item frozen set
> >     {:}         # empty dict
> >     {1:1}       # 1 item dict
> >     {1:1, 2:2}  # 2 item dict
>
> This has been discussed and rejected as it would break too much code.
> Check the archives during the set literals discussions.
>
> STeVe

Python 3 is going to break compatibility anyway. I thought one of the
purposes of having a new major release was to allow for such changes.

In 2 or 3 years from now Python 3 will be ""Python"" for most people, and
confusing inconsistencies won't be seen to have any rationale.

-- 
Mark Summerfield, Qtrac Ltd., www.qtrac.eu



------------------------------

Message: 7
Date: Fri, 25 Jan 2008 12:42:48 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080125094248.GC1246@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Fri, Jan 25, 2008 at 09:29:49AM +0000, Mark Summerfield wrote:
> In 2 or 3 years from now Python 3 will be ""Python"" for most people

   It depends on how much it breaks. If Python 3 breaks too much people may
find it is a completely new language and decide to switch to another
language instead of new Python.

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 8
Date: Fri, 25 Jan 2008 10:52:45 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <1201254765.15568.3.camel@qrnik>
Content-Type: text/plain

Dnia 25-01-2008, Pt o godzinie 07:18 +0000, Mark Summerfield pisze:

> If you're going to make the change, why not make things consistent:

How often do you need the empty frozenset (which will stay as such),
compared to an empty dict (which will probably get filled later)?

The real inconsistency is that there is no frozendict.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 9
Date: Fri, 25 Jan 2008 11:02:19 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <fncc3d$m10$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Mark Summerfield wrote:
> Python 3 is going to break compatibility anyway. I thought one of the
> purposes of having a new major release was to allow for such changes.

Please stop the discussion! Guido already voted against it. I assume
most of the remaining core developers agree with me that three character
literals suck.

Guido seems to be under lots of tension lately. Please don't make him
more cranky and peevish. Orlijn needs his father and we need him as our
beloved and benevolent dictator.

Christian

PS: {:} is hard to type on a German keyboard, too. It's press [alt gr],
press 7, release [alt gr], press [shift], press ., release [shift],
press [alt gr], press 0, release [alt gr].



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 36
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 35","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  inst_persistent_id (Alexandre Vassalotti)
   2. Re: [Python-Dev]  inst_persistent_id (Alexandre Vassalotti)
   3. Re: Set literal (Brett Cannon)
   4. Re: Set literal (Jim Jewett)
   5. Set literal (Raymond Hettinger)
   6. Re: Set literal (Guido van Rossum)
   7. Re: [Python-Dev]  inst_persistent_id (Aahz)
   8. Re: [Python-Dev] inst_persistent_id (Guido van Rossum)
   9. Re: Set literal (John Barham)
  10. Re: Set literal (Guido van Rossum)


----------------------------------------------------------------------

Message: 1
Date: Thu, 24 Jan 2008 21:25:08 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<acd65fa20801241825g54dc8232h5bc4721426a7bb4d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 9:47 AM, Jim Fulton <jim@zope.com> wrote:
>
> On Jan 23, 2008, at 4:30 PM, Alexandre Vassalotti wrote:
> > I am not sure what you mean by ""cPickle.Pickler and cPickle.Unpickler
> > subclassible in the same way as the pickle classes."" It is possible to
> > subclass the C implementation. However, the C implementation does not
> > expose pickle ""private"" methods, such as Pickler.save_int and
> > Unpickler.load_tuple. This is fine because these were never documented
> > as part of the interface of pickle.
>
> That doesn't mean that they aren't overridden.  I've overridden them
> in specialized applications.  I suspect that others have as well.
>

Well even in pickle.py, you can't override the save_* and load_*
methods (at least, directly), since they are called via a dispatch
dictionary.

> > Only Pickler.dump,
> > Pickler.clear_memo and Unpickler.load are supported by the Python
> > implementation. All these are supported by the C implementation as
> > well.
>
> How about find_class?  I actually prefer cPickle's way of handling this.
>

I haven't thought much about these -- i.e., methods overrided via
__setattr__ -- yet. But, you are right -- they should be supported
too.

> > So, what kind of ""extensibility"" are you looking for the C
> > implementation of pickle?
>
> I'm not really looking for anything that isn't there already.  The
> python pickle version is more extensible that cPickle and I find that
> valuable.  I don't want to make cPickle more flexible.  I'd willing to
> trade off speed and flexibility depending on the application.  I don't
> want to lose either in the interest of unification.

How much of cPickle is really speed critical? Personally, I think
built-in types pickling should be optimized as much as possible and
other things, such as user-defined classes and extension types
pickling, could be done in Python.

> > Quick note, one of the original motives for making the C
> > implementation of pickle transparent was to make it more ""friendly""
> > for alternate implementations of Python (e.g., Jython, IronPython,
> > etc).
>
> I don't know what that means.  I don't know that Jython or IronPython
> need to support cPickle.

Maybe, but it make it slightly harder for people to write code accross
these implementations. Interestingly, IronPython's team actually
reimplemented cPickle in C#:

http://www.codeplex.com/IronPython/SourceControl/FileView.aspx?itemId=296271&changeSetId=29832

> Having said that, I would agree that there are certain aspects of
> their external APIs that ought to be unified.  A good example is
> handling of globals.

Could you elaborate about this, please; how the handling of globals by
cPickle is different from pickle?

-- Alexandre


------------------------------

Message: 2
Date: Thu, 24 Jan 2008 21:33:33 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<acd65fa20801241833keb53bd7vdfef2e45227bba71@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 9:25 PM, Alexandre Vassalotti <alexandre@peadrop.com> wrote:
> Maybe, but it make it slightly harder for people to write code accross
> these implementations. Interestingly, IronPython's team actually
> reimplemented cPickle in C#:
>
> http://www.codeplex.com/IronPython/SourceControl/FileView.aspx?itemId=296271&changeSetId=29832
>

Oh, Jython also got their implementation too.

https://jython.svn.sourceforge.net/svnroot/jython/trunk/jython/src/org/python/modules/cPickle.java

-- Alexandre


------------------------------

Message: 3
Date: Thu, 24 Jan 2008 19:15:44 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Set literal
To: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Cc: python@rcn.com, python-3000@python.org
Message-ID:
	<bbaeab100801241915w315363cfhb667550f8968a3f4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 5:38 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> On Jan 24, 2008 4:13 PM,  <skip@pobox.com> wrote:
> >
> >     Guido> Looking over the code base, frozensets are used rarely. So I
> >     Guido> don't think this is warranted.
> >
> > I kind of like the idea.  Raymond's arguments make sense to me.  Most of the
> > time if I bother to create a set literal it would be to use it as a
> > constant.
>
> Agreed. I suspect that ""frozenset"" is just too long to type often,
> even if people are usually creating sets they don't intend to modify.

I never thought of that, but that is a good point. There is also a
greater chance people will look for 'set' at the interpreter, find it,
and just not come across frozenset. Luckily the docs mention both
side-by-side, so reading the docs makes this explanation a little less
plausible.

-Brett


------------------------------

Message: 4
Date: Thu, 24 Jan 2008 22:20:12 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<fb6fbf560801241920x53e5f9e0h3df54176406d99b3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/24/08, Raymond Hettinger <python@rcn.com> wrote:
> [John Barham]
> > But getting back to the original issue, what does using
> > frozensets gain you over using a tuple:
> >
> > if urlext in ('html', 'xml', 'php'):
>
> With sets, the search is O(1).
> With tuples, it is O(n).
> Sets win on inputs longer than 1.

I thought you tried changing those tuples to frozensets (because it
was semantically better), and found that it didn't actually win for
tuples of length 2 or 3.

-jJ


------------------------------

Message: 5
Date: Thu, 24 Jan 2008 22:56:36 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080124225636.AFR34133@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Jim Jewett]
> I thought you tried changing those tuples to frozensets
>(because it was semantically better), and found that it 
> didn't actually win for tuples of length 2 or 3.

The sets were faster.  The automatic transformation didn't
go in because it changed semantics -- the searched for item
would need to be hashable -- the tuple search only requires
an equality test.


Raymond


------------------------------

Message: 6
Date: Thu, 24 Jan 2008 20:12:05 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801242012t3abffa0fy27bba39bc980e982@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

For the record, I'm thinking Raymond has won this argument fair and
square, and I'm withdrawing my opposition.

I hope it isn't too confusing that {1: 1} creates a *mutable* dict
while {1} creates an *immutable* frozenset. I still find this slightly
inelegant. But the practicality of being able to treat set literals as
compile-time constants wins me over.

(I suspect for a 2-element set of ints or strings, translating ""x in
{C1, C2}"" into ""x in (C1, C2)"" might actually be a slight win since
probing a tuple must be much faster than probing a set; but that's a
detail.)

--Guido

On Jan 24, 2008 7:56 PM, Raymond Hettinger <python@rcn.com> wrote:
> [Jim Jewett]
> > I thought you tried changing those tuples to frozensets
> >(because it was semantically better), and found that it
> > didn't actually win for tuples of length 2 or 3.
>
> The sets were faster.  The automatic transformation didn't
> go in because it changed semantics -- the searched for item
> would need to be hashable -- the tuple search only requires
> an equality test.
>
>
> Raymond
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Thu, 24 Jan 2008 20:59:06 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Python 3000 <python-3000@python.org>
Message-ID: <20080125045906.GA21722@panix.com>
Content-Type: text/plain; charset=us-ascii

On Thu, Jan 24, 2008, Jim Fulton wrote:
>
> I don't know what that means.  I don't know that Jython or IronPython  
> need to support cPickle. Honestly, I'd be happy to see a *much*  
> smaller standard library and, IMO, the standard library doesn't need  
> to include pickle or cPickle.

While it's easy enough to work around, my company would be unhappy if
pickle were removed, and so would my previous company.
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

Message: 8
Date: Thu, 24 Jan 2008 21:07:42 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] inst_persistent_id
To: Aahz <aahz@pythoncraft.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20801242107x262bdcb0y9990df77a61a7a39@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 8:59 PM, Aahz <aahz@pythoncraft.com> wrote:
> On Thu, Jan 24, 2008, Jim Fulton wrote:
> >
> > I don't know what that means.  I don't know that Jython or IronPython
> > need to support cPickle. Honestly, I'd be happy to see a *much*
> > smaller standard library and, IMO, the standard library doesn't need
> > to include pickle or cPickle.
>
> While it's easy enough to work around, my company would be unhappy if
> pickle were removed, and so would my previous company.

I don't know why Jim is saying this (*), but it's not going to happen.
pickle is here to stay. cPickle is a different story; 99% of programs
shouldn't be bothered with the choice between the two.

(*) I can only speculate that it's because Jim, whose ZODB is probably
pickle's most intensive user, would like to ""own"" it and would like to
evolve it much faster than the nearly frozen version in the standard
library. I would like to suggest that Jim can evolve pickle without
removing it from the standard library -- he could just include a fork
in the Zope package. As long as the Zope version were to use a
different magic number this would be a fine approach.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Thu, 24 Jan 2008 21:09:03 -0800
From: ""John Barham"" <jbarham@gmail.com>
Subject: Re: [Python-3000] Set literal
To: python-3000@python.org
Message-ID:
	<4f34febc0801242109m302b6b06t5f9ef24f9f3ccfb7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Guido wrote:

> (I suspect for a 2-element set of ints or strings, translating ""x in
> {C1, C2}"" into ""x in (C1, C2)"" might actually be a slight win since
> probing a tuple must be much faster than probing a set; but that's a
> detail.)

A trivial but hopefully fairly representative benchmark:

ActivePython 2.5.1.1 (ActiveState Software Inc.) based on
Python 2.5.1 (r251:54863, May  1 2007, 17:47:05) [MSC v.1310 32 bit (Intel)] on
win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> import timeit
>>> timeit.Timer(""3 in (1,2,3)"").timeit()
0.20900340099335493
>>> timeit.Timer(""3 in frozenset((1,2,3))"").timeit()
0.72151788129635008
>>> timeit.Timer(""3 in choices"", setup=""choices = (1,2,3)"").timeit()
0.21716441294536537
>>> timeit.Timer(""3 in choices"", setup=""choices = frozenset((1,2,3))"").timeit()
0.16064769736693307

This demonstrates that constructing a frozen set obviously takes
longer, but suggests that searching even within a 3-element set (the
construction time for which could presumably be amortized away by the
compiler) is quicker than in a tuple, which is heartening.  So the
only overhead for using frozen sets is slightly more memory...

  John


------------------------------

Message: 10
Date: Thu, 24 Jan 2008 21:17:38 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: ""John Barham"" <jbarham@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801242117j39f6d1e4ob6ea2286ad9591d3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Thanks! I tried it again with a 2-element tuple and frozenset, and
with hits on the first and second item, and with a miss. I am
convinced. Even for a 2-element set, the frozenset comes out ahead
except compared to a hit on the first tuple item. So let's leave this
alone -- if the user writes a tuple, we use a tuple (because the
semantics are different), if the user writes a frozenset literal, we
use that.

--Guido

On Jan 24, 2008 9:09 PM, John Barham <jbarham@gmail.com> wrote:
> Guido wrote:
>
> > (I suspect for a 2-element set of ints or strings, translating ""x in
> > {C1, C2}"" into ""x in (C1, C2)"" might actually be a slight win since
> > probing a tuple must be much faster than probing a set; but that's a
> > detail.)
>
> A trivial but hopefully fairly representative benchmark:
>
> ActivePython 2.5.1.1 (ActiveState Software Inc.) based on
> Python 2.5.1 (r251:54863, May  1 2007, 17:47:05) [MSC v.1310 32 bit (Intel)] on
> win32
> Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
> >>> import timeit
> >>> timeit.Timer(""3 in (1,2,3)"").timeit()
> 0.20900340099335493
> >>> timeit.Timer(""3 in frozenset((1,2,3))"").timeit()
> 0.72151788129635008
> >>> timeit.Timer(""3 in choices"", setup=""choices = (1,2,3)"").timeit()
> 0.21716441294536537
> >>> timeit.Timer(""3 in choices"", setup=""choices = frozenset((1,2,3))"").timeit()
> 0.16064769736693307
>
> This demonstrates that constructing a frozen set obviously takes
> longer, but suggests that searching even within a 3-element set (the
> construction time for which could presumably be amortized away by the
> compiler) is quicker than in a tuple, which is heartening.  So the
> only overhead for using frozen sets is slightly more memory...
>
>   John
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 35
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 34","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Set literal (Guido van Rossum)
   2. Re: Ellipsis (James Thiele)
   3. Re: Ellipsis (Thomas Wouters)
   4. Set literal (Raymond Hettinger)
   5. Re: Set literal (skip@pobox.com)
   6. Re: Set literal (Barry Warsaw)
   7. Re: Set literal (John Barham)
   8. Set literal (Raymond Hettinger)
   9. Re: Set literal (Steven Bethard)
  10. Re: Set literal (Jeffrey Yasskin)


----------------------------------------------------------------------

Message: 1
Date: Thu, 24 Jan 2008 15:22:55 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <ca471dc20801241522l517afdet69539df2af565@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Looking over the code base, frozensets are used rarely. So I don't
think this is warranted.

On Jan 24, 2008 2:32 PM, Raymond Hettinger <python@rcn.com> wrote:
> I think it would be more useful for the {e1, e2, e3} literal to be a frozenset instead of a set.
>
> In expressions like ""x in {'html', 'xml', 'php'}"" the compiler could optimize away the set construction and treat it as a constant.
>
> In cases where we want to build-up mutable sets, we need to start with set() anyway:
>
>     s = set()
>     for elem in source:
>         s.add(elem)
>
> I don't think it would be typical to start with a partially filled-out set and then build-t up further:
>
>    s = {'a', 'b', 'c'}   # rare use-case
>    for elem in source:
>        s.add(elem)
>
> One of the primary use cases for frozensets is to be members of other sets or to be keys in a dict (esp. for graph representations).  The repr's of those nested structures are annoying to read because the word ""frozenset"" gets spelled-out over and over again.  Here's a few lines from the pprint() output for a graph of a cube:
>
>   {frozenset([0, 1]): frozenset([frozenset([0]),
>                                  frozenset([1]),
>                                  frozenset([0, 1, 2])]),
>    frozenset([0, 1, 2]): frozenset([frozenset([1, 2]),
>                                     frozenset([0, 2]),
>                                     frozenset([0, 1])])}
>
>
> This would read *much* better with the new notation:
>
>   {{0, 1}: {{0},
>             {1},
>             {0, 1, 2}},
>   {0, 1, 2}: {{1, 2},
>               {0, 2},
>               {0, 1}}}
>
> If you want to see how extremely bad the current repr's can get, see the repr for David Eppstein's cuboctahedron in the tests for pprint:  http://mail.python.org/pipermail/python-checkins/2008-January/065099.html
>
> In short, I think we would be much better served by using the {} literal notation for frozensets.
>
> Raymond
>
>
> P.S.  A small side-benefit is it may put an end for interminable requests for a {:} or {/} notation for empty sets.  There's not much need for a literal for a empty frozenset (use ""not s"" instead).
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Thu, 24 Jan 2008 15:25:39 -0800
From: ""James Thiele"" <python3now@gmail.com>
Subject: Re: [Python-3000] Ellipsis
To: ""Christian Heimes"" <lists@cheimes.de>
Cc: python-3000@python.org
Message-ID:
	<8f01efd00801241525x4208a36aq17d6f3fe4e211e1a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 1:14 PM, Christian Heimes <lists@cheimes.de> wrote:


> Indeed! It's one character shorter than ""pass"", it requires much less
> finger movement and it even looks cool. I like it
>
> However ... can lead to strange looking code, too:
>
> >>> ....__class__.__name__
> 'ellipsis'

So ellipsis is a class?

Can it be subclassed as in:

class myclass(...):
    pass


------------------------------

Message: 3
Date: Thu, 24 Jan 2008 15:38:29 -0800
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Ellipsis
To: ""James Thiele"" <python3now@gmail.com>
Cc: python-3000@python.org, Christian Heimes <lists@cheimes.de>
Message-ID:
	<9e804ac0801241538p52345714p77c8a19021a5ea22@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Jan 24, 2008 3:25 PM, James Thiele <python3now@gmail.com> wrote:

> On Jan 24, 2008 1:14 PM, Christian Heimes <lists@cheimes.de> wrote:
>
>
> > Indeed! It's one character shorter than ""pass"", it requires much less
> > finger movement and it even looks cool. I like it
> >
> > However ... can lead to strange looking code, too:
> >
> > >>> ....__class__.__name__
> > 'ellipsis'
>
> So ellipsis is a class?
>
> Can it be subclassed as in:
>
> class myclass(...):
>    pass


No, Ellipsis is a singleton, like None. ellipsis is Ellipsis's type, and you
can't subclass it:

>>> ...
Ellipsis

>>> Ellipsis
Ellipsis

>>> type(...)
<type 'ellipsis'>

>>> class Spam(...): pass
...
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
TypeError: cannot create 'ellipsis' instances

>>> class Spam(type(...)): pass
...
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
TypeError: type 'ellipsis' is not an acceptable base type

 Compare with None:

>>> type(None)
<type 'NoneType'>

>>> class Spam(None): pass
...
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
TypeError: cannot create 'NoneType' instances

>>> class Spam(type(None)): pass
...
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
TypeError: type 'NoneType' is not an acceptable base type

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080124/285518a0/attachment-0001.htm 

------------------------------

Message: 4
Date: Thu, 24 Jan 2008 19:12:47 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080124191247.AFR08858@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> Looking over the code base, frozensets are used rarely. 
> So I don't think this is warranted.

There is no shortage for perfect use cases in the form:

   if urlext in {'html', 'xml', 'php'}:
         . . .


If the curly braces are taken to mean a frozenset,
then the peepholer can code the whole thing as a 
compile time constant.  It is fast and clean.
You need not even be aware that you're using a
frozenset.

The use cases for set literals lean *heavily* toward
situtations where the set doesn't get mutated. It
would be nice if all that code got optimized down
to a compile time constant.

The cases for literals differ quite a bit from
general, dynamically formed sets.  I see little
advantage for {'html', 'xml', 'php'} being mutable.


Raymond


------------------------------

Message: 5
Date: Thu, 24 Jan 2008 18:13:42 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Set literal
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID: <18329.10678.273241.241537@montanaro.dyndns.org>
Content-Type: text/plain; charset=us-ascii


    Guido> Looking over the code base, frozensets are used rarely. So I
    Guido> don't think this is warranted.

I kind of like the idea.  Raymond's arguments make sense to me.  Most of the
time if I bother to create a set literal it would be to use it as a
constant.

Skip


------------------------------

Message: 6
Date: Thu, 24 Jan 2008 19:23:57 -0500
From: Barry Warsaw <barry@python.org>
Subject: Re: [Python-3000] Set literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <6E7362E6-CECC-4F6A-8F99-07E0665CDAC4@python.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Jan 24, 2008, at 7:12 PM, Raymond Hettinger wrote:

>> Looking over the code base, frozensets are used rarely.
>> So I don't think this is warranted.
>
> There is no shortage for perfect use cases in the form:
>
>   if urlext in {'html', 'xml', 'php'}:

It's interesting that you point this out because I've had debates with  
people about the difference between:

     if urlext in ['html', 'xml', 'php']:

and

     if urlext in ('html', 'xml', 'php'):

I generally prefer the latter but I know folks who prefer the former.   
What's interesting is that in both cases we're trying to ask if the  
key is a member of a literal set, and to me, it makes no sense for  
that literal to be mutable.  So I also think Raymond's idea has merit.

- -Barry

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (Darwin)

iQCVAwUBR5ksHnEjvBPtnXfVAQJkCAP9Fe/3gp9Ar6bKmCEq9f6uwUdxjwvfpRdI
7hOhwU7u2/bCTfVv/bxYi6SYIs54xzBPruHxiQ5qNwduRPMTeDHcKfSw1XrByVip
uNvjzF4ul+hplYeetKYylDDJbBxUqHXRT27psHRluNRorr9dkcqjI73zxj4FdM9M
BCwXJfW/9hI=
=dYZQ
-----END PGP SIGNATURE-----


------------------------------

Message: 7
Date: Thu, 24 Jan 2008 16:32:48 -0800
From: ""John Barham"" <jbarham@gmail.com>
Subject: Re: [Python-3000] Set literal
To: ""Barry Warsaw"" <barry@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<4f34febc0801241632h3a7c9693tf6c8c8bd77ca4e9b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 4:23 PM, Barry Warsaw wrote:

> On Jan 24, 2008, at 7:12 PM, Raymond Hettinger wrote:
>
> >> Looking over the code base, frozensets are used rarely.
> >> So I don't think this is warranted.
> >
> > There is no shortage for perfect use cases in the form:
> >
> >   if urlext in {'html', 'xml', 'php'}:
>
> It's interesting that you point this out because I've had debates with
> people about the difference between:
>
>      if urlext in ['html', 'xml', 'php']:
>
> and
>
>      if urlext in ('html', 'xml', 'php'):
>
> I generally prefer the latter but I know folks who prefer the former.
> What's interesting is that in both cases we're trying to ask if the
> key is a member of a literal set, and to me, it makes no sense for
> that literal to be mutable.  So I also think Raymond's idea has merit.

Well I've measured the time difference and, at least in CPython on my
machine, constructing small tuples is quicker than constructing small
lists, although not enough to make any significant runtime difference.

But getting back to the original issue, what does using frozensets
gain you over using a tuple:

if urlext in ('html', 'xml', 'php'):

Given that tuples are also immutable, couldn't the peepholer also
optimize the tuple as a compile time constant?  Since this idiom is
usually used as a shortcut for:

if urlext == 'html' or urlext == 'xml' or urlext == 'php':

the semantics of using a frozenset are subtly different since with the
equivalent tuple you know the search is linear and short circuits on
success, but using a frozenset the search order is undefined.  Of
course if you had a largish search set, frozenset would probably be
quicker than using a tuple, but I think it's safe to say the search
set is small for the typical case.

  John


------------------------------

Message: 8
Date: Thu, 24 Jan 2008 19:46:37 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080124194637.AFR12976@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[John Barham]
> But getting back to the original issue, what does using
> frozensets gain you over using a tuple:
>
> if urlext in ('html', 'xml', 'php'):

With sets, the search is O(1).
With tuples, it is O(n).
Sets win on inputs longer than 1.


Raymond


------------------------------

Message: 9
Date: Thu, 24 Jan 2008 17:52:18 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Set literal
To: skip@pobox.com
Cc: python@rcn.com, python-3000@python.org
Message-ID:
	<d11dcfba0801241652l6095bc61i1fa8df2b970b008b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 5:13 PM,  <skip@pobox.com> wrote:
>
>     Guido> Looking over the code base, frozensets are used rarely. So I
>     Guido> don't think this is warranted.
>
> I kind of like the idea.  Raymond's arguments make sense to me.  Most of the
> time if I bother to create a set literal it would be to use it as a
> constant.

Likewise.  I just took a look at my own code, and over 95% of the time
when I've written something like ``set([...])``, the set was never
modified.  (I found only one instance where it was, out of 47
instances.)

STeVe
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 10
Date: Thu, 24 Jan 2008 17:38:49 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] Set literal
To: skip@pobox.com
Cc: python@rcn.com, python-3000@python.org
Message-ID:
	<5d44f72f0801241738j16bc0e5av93d683a5fd079f1a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 24, 2008 4:13 PM,  <skip@pobox.com> wrote:
>
>     Guido> Looking over the code base, frozensets are used rarely. So I
>     Guido> don't think this is warranted.
>
> I kind of like the idea.  Raymond's arguments make sense to me.  Most of the
> time if I bother to create a set literal it would be to use it as a
> constant.

Agreed. I suspect that ""frozenset"" is just too long to type often,
even if people are usually creating sets they don't intend to modify.

-- 
Namast?,
Jeffrey Yasskin

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 34
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 33","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  inst_persistent_id (Jim Fulton)
   2. Re: [Python-Dev]  inst_persistent_id (Christian Heimes)
   3. Ellipsis Literal (Raymond Hettinger)
   4. Re: Ellipsis Literal (Guido van Rossum)
   5. Ellipsis (Raymond Hettinger)
   6. Re: Ellipsis (Charles Merriam)
   7. Re: Ellipsis (Thomas Wouters)
   8. Re: Ellipsis (Christian Heimes)
   9. Set literal (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Thu, 24 Jan 2008 09:47:58 -0500
From: Jim Fulton <jim@zope.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Alexandre Vassalotti <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <19ECF92A-31C8-48EE-AFEB-62055157EF96@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Jan 23, 2008, at 4:30 PM, Alexandre Vassalotti wrote:

> On Jan 22, 2008 10:30 AM, Jim Fulton <jim@zope.com> wrote:
>>
>> On Jan 20, 2008, at 10:39 PM, Alexandre Vassalotti wrote:
>>
>>> On Jan 20, 2008 4:14 PM, Jim Fulton <jim@zope.com> wrote:
>>>>
>>>> Interesting. Does that mean that cPickle can be extended through
>>>> inheritance?
>>>>
>>>
>>> Well, Pickler and Unpickler can be subclassed. I am not sure they  
>>> can
>>> be really ""extended,"" since, unlike the Python version, the C  
>>> version
>>> of Pickler and Unpickler only exposes a minimal API.
>>
>> Then I don't understand what you mean by:
>>
>> ""I removed the differences between the Python and C implementation of
>> pickle, and thus allowing the C version to be transparently used,
>> instead of the Python one, when it is available.""
>>
>> People *do* routinely subclass pickle.Pickler and pickle.Unpickler  
>> and
>> if this isn't possible with cPickle, then it can't be substituted for
>> pickle.  If making cPickle.Pickler and cPickle.Unpickler subclassible
>> in the same way as the pickle classes makes cPickle much slower, then
>> I don't think the ""transparency"" is worth the tradeoff.
>>
>
> I am not sure what you mean by ""cPickle.Pickler and cPickle.Unpickler
> subclassible in the same way as the pickle classes."" It is possible to
> subclass the C implementation. However, the C implementation does not
> expose pickle ""private"" methods, such as Pickler.save_int and
> Unpickler.load_tuple. This is fine because these were never documented
> as part of the interface of pickle.

That doesn't mean that they aren't overridden.  I've overridden them  
in specialized applications.  I suspect that others have as well.


> Only Pickler.dump,
> Pickler.clear_memo and Unpickler.load are supported by the Python
> implementation. All these are supported by the C implementation as
> well.

How about find_class?  I actually prefer cPickle's way of handling this.

> So, what kind of ""extensibility"" are you looking for the C
> implementation of pickle?

I'm not really looking for anything that isn't there already.  The  
python pickle version is more extensible that cPickle and I find that  
valuable.  I don't want to make cPickle more flexible.  I'd willing to  
trade off speed and flexibility depending on the application.  I don't  
want to lose either in the interest of unification.

> Quick note, one of the original motives for making the C
> implementation of pickle transparent was to make it more ""friendly""
> for alternate implementations of Python (e.g., Jython, IronPython,
> etc).

I don't know what that means.  I don't know that Jython or IronPython  
need to support cPickle. Honestly, I'd be happy to see a *much*  
smaller standard library and, IMO, the standard library doesn't need  
to include pickle or cPickle.

Having said that, I would agree that there are certain aspects of  
their external APIs that ought to be unified.  A good example is  
handling of globals.


>>> Well, I haven't changed cPickle much to make it subclassable. So,  
>>> the
>>> impact is minimal. Currently, the only performance change is due the
>>> removal of the special-cases for PyFile and cStringIO ""buffers.""
>>
>> What is the benefit of removing this special casing? What is the  
>> cost?
>>
>
> As far as know, most of PyFile is gone in Py3k -- i.e., it been
> castrated beyond recognition [1]. Therefore, the special case for
> PyFile didn't improve the performance (in fact, it probably made
> things go slower).

I'll have to skeptically take your work for it.  I take this to mean  
that there is no C API to write to file objects or their underlying  
files.  If there is a C API, then I'd be surprised if it wasn't faster  
than going though a Python API.  My initial skepticism of this change  
was along the lines of ""if it aint broke, don't fix it"".  It sounds  
like it was broke, so it makes sense to rip it out and only re- 
implement it if it makes sense later.

> I removed the special case for cStringIO for
> similiar reason -- i.e., cStringIO will be replaced by the respective
> C implementations of io.BytesIO and io.StringIO. I also did it because
> it allowed me to keep the part of pickle that aren't speed critical
> written in Python, thus cleaning out almost 1000 lines of code. The
> performance cost of this is minimal and constant.


OK, for the same reasons.

Jim

--
Jim Fulton
Zope Corporation




------------------------------

Message: 2
Date: Thu, 24 Jan 2008 17:04:11 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: python-3000@python.org
Message-ID: <fnactr$era$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Jim Fulton wrote:
> I'll have to skeptically take your work for it.  I take this to mean  
> that there is no C API to write to file objects or their underlying  
> files.  If there is a C API, then I'd be surprised if it wasn't faster  
> than going though a Python API.  My initial skepticism of this change  
> was along the lines of ""if it aint broke, don't fix it"".  It sounds  
> like it was broke, so it makes sense to rip it out and only re- 
> implement it if it makes sense later.

Most parts of the C API for file object was rewritten in Python. Only
small parts are written in C (_fileio module). The C API still has some
convenient methods to write to a file object.

Alex is working on an optimized C implementation.


http://svn.python.org/view/python/branches/py3k/Modules/_fileio.c?rev=59565&view=auto
http://svn.python.org/view/python/branches/py3k/Include/fileobject.h?rev=59311&view=auto



------------------------------

Message: 3
Date: Thu, 24 Jan 2008 14:16:33 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Ellipsis Literal
To: python-3000@python.org
Message-ID: <20080124141633.AFQ57054@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Raymond Hettinger]
>> I missed the conversation on this one.
>> Was there a use case or a reason to add this?

[Robert Kern]
> It was added for Numeric a long time ago.

The ellipsis syntax has been around for a while.
What is new is the Ellipsis literal in Py3.0.
See snippets below.

Raymond


------------------------------------
Python 2.6a0 (trunk:59985:59987, Jan 15 2008, 12:54:09) [GCC 4.1.1 (Gentoo 4.1.1)] on linux2
>>> ...
 File ""<stdin>"", line 1
   ...
   ^
SyntaxError: invalid syntax

------------------------------------
Python 3.0a2+ (py3k:60204M, Jan 22 2008, 14:50:12) [GCC 4.1.1 (Gentoo 4.1.1)] on linux2
>>> ...
Ellipsis 


------------------------------

Message: 4
Date: Thu, 24 Jan 2008 11:32:24 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Ellipsis Literal
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801241132q6d6df78ej845f4b637d1d5ea3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 24, 2008 11:16 AM, Raymond Hettinger <python@rcn.com> wrote:
> [Raymond Hettinger]
> >> I missed the conversation on this one.
> >> Was there a use case or a reason to add this?
>
> [Robert Kern]
> > It was added for Numeric a long time ago.
>
> The ellipsis syntax has been around for a while.
> What is new is the Ellipsis literal in Py3.0.
> See snippets below.
>
> Raymond
>
>
> ------------------------------------
> Python 2.6a0 (trunk:59985:59987, Jan 15 2008, 12:54:09) [GCC 4.1.1 (Gentoo 4.1.1)] on linux2
> >>> ...
>  File ""<stdin>"", line 1
>    ...
>    ^
> SyntaxError: invalid syntax
>
> ------------------------------------
> Python 3.0a2+ (py3k:60204M, Jan 22 2008, 14:50:12) [GCC 4.1.1 (Gentoo 4.1.1)] on linux2
> >>> ...
> Ellipsis

Some folks thought it would be cute to be able to write incomplete
code like this:

class C:
  def meth(self): ...
  ...

and have it be syntactically correct.

PEP 3100 has the reference:
* ``...`` to become a general expression element [16]_ [done]
.. [16] python-3000 email
   http://mail.python.org/pipermail/python-3000/2006-April/000996.html


-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Thu, 24 Jan 2008 15:04:00 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Ellipsis
To: python-3000@python.org
Message-ID: <20080124150400.AFQ66279@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> Some folks thought it would be cute to be able to 
> write incomplete code like this:
>
> class C:
>   def meth(self): ...
>   ...
>
> and have it be syntactically correct.

Hmm, that *is* cute :-)

Raymond


------------------------------

Message: 6
Date: Thu, 24 Jan 2008 12:12:34 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] Ellipsis
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801241212m4167c43fmbd9c940f0d8402e7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

OK, I'll admit this is confusing to me.

Is ""..."" == pass?

So, does a line with tokens after the ""..."" get an error like
""characters after an elipses (...).  Did you cut and paste from IDLE?""


On Jan 24, 2008 12:04 PM, Raymond Hettinger <python@rcn.com> wrote:
> > Some folks thought it would be cute to be able to
> > write incomplete code like this:
> >
> > class C:
> >   def meth(self): ...
> >   ...
> >
> > and have it be syntactically correct.
>
> Hmm, that *is* cute :-)
>
> Raymond
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/charles.merriam%40gmail.com
>


------------------------------

Message: 7
Date: Thu, 24 Jan 2008 12:16:45 -0800
From: ""Thomas Wouters"" <thomas@python.org>
Subject: Re: [Python-3000] Ellipsis
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<9e804ac0801241216m339d4e69ia20ff7cf3633ab4d@mail.gmail.com>
Content-Type: text/plain; charset=""utf-8""

On Jan 24, 2008 12:12 PM, Charles Merriam <charles.merriam@gmail.com> wrote:

> OK, I'll admit this is confusing to me.
>
> Is ""..."" == pass?


No, ... == Ellipsis.


> So, does a line with tokens after the ""..."" get an error like
> ""characters after an elipses (...).  Did you cut and paste from IDLE?""
>

No, it'll get an error like ""IndentationError: expected an indented block"".
In other words, the exact same thing as before :)

-- 
Thomas Wouters <thomas@python.org>

Hi! I'm a .signature virus! copy me into your .signature file to help me
spread!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080124/10502bd8/attachment-0001.htm 

------------------------------

Message: 8
Date: Thu, 24 Jan 2008 22:14:09 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Ellipsis
To: python-3000@python.org
Message-ID: <fnav31$krr$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Raymond Hettinger wrote:
>> Some folks thought it would be cute to be able to 
>> write incomplete code like this:
>>
>> class C:
>>   def meth(self): ...
>>   ...
>>
>> and have it be syntactically correct.
> 
> Hmm, that *is* cute :-)

Indeed! It's one character shorter than ""pass"", it requires much less
finger movement and it even looks cool. I like it

However ... can lead to strange looking code, too:

>>> ....__class__.__name__
'ellipsis'

Christian



------------------------------

Message: 9
Date: Thu, 24 Jan 2008 17:32:02 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Set literal
To: python-3000@python.org
Message-ID: <20080124173202.AFQ93921@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

I think it would be more useful for the {e1, e2, e3} literal to be a frozenset instead of a set.

In expressions like ""x in {'html', 'xml', 'php'}"" the compiler could optimize away the set construction and treat it as a constant.

In cases where we want to build-up mutable sets, we need to start with set() anyway:

    s = set()
    for elem in source:
        s.add(elem)

I don't think it would be typical to start with a partially filled-out set and then build-t up further:

   s = {'a', 'b', 'c'}   # rare use-case
   for elem in source:
       s.add(elem)

One of the primary use cases for frozensets is to be members of other sets or to be keys in a dict (esp. for graph representations).  The repr's of those nested structures are annoying to read because the word ""frozenset"" gets spelled-out over and over again.  Here's a few lines from the pprint() output for a graph of a cube:

  {frozenset([0, 1]): frozenset([frozenset([0]),
                                 frozenset([1]),
                                 frozenset([0, 1, 2])]),
   frozenset([0, 1, 2]): frozenset([frozenset([1, 2]),
                                    frozenset([0, 2]),
                                    frozenset([0, 1])])}


This would read *much* better with the new notation:

  {{0, 1}: {{0},
            {1},
            {0, 1, 2}},
  {0, 1, 2}: {{1, 2},
              {0, 2},
              {0, 1}}}

If you want to see how extremely bad the current repr's can get, see the repr for David Eppstein's cuboctahedron in the tests for pprint:  http://mail.python.org/pipermail/python-checkins/2008-January/065099.html

In short, I think we would be much better served by using the {} literal notation for frozensets.

Raymond


P.S.  A small side-benefit is it may put an end for interminable requests for a {:} or {/} notation for empty sets.  There's not much need for a literal for a empty frozenset (use ""not s"" instead).



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 33
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 32","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Fwd: [Python-Dev] misbehaving __contains__ (Christian Heimes)
   2. Re: Ellipsis Literal (Jim Jewett)
   3. Re: [Python-Dev]  inst_persistent_id (Alexandre Vassalotti)
   4. REMINDER: OSCON 2008 Call for Proposals (Aahz)


----------------------------------------------------------------------

Message: 1
Date: Wed, 23 Jan 2008 14:29:47 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Fwd: [Python-Dev] misbehaving __contains__
To: python-3000@python.org
Message-ID: <fn7fgb$ujr$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Nicko van Someren wrote:
> I don't know if your patch will be accepted but two salient questions  
> you should address are:
> 	a) Will the change break much existing code?
> 	b) Will the change substantially impact performance?
> 
> It seems to me that the answer should be 'no' to both questions, which  
> is a good start!

I don't agree with you. I believe the answer to both questions is yes.
It will break every C code and it may slow down existing C code unless
you implement and optimize a fast path for Py_True and Py_False.

Christian



------------------------------

Message: 2
Date: Wed, 23 Jan 2008 10:54:36 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] Ellipsis Literal
To: ""Robert Kern"" <robert.kern@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<fb6fbf560801230754h797b357gc6b3ddb860599a7a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/23/08, Robert Kern <robert.kern@gmail.com> wrote:
> Raymond Hettinger wrote:
>  > I ask because the spelling has an unfortunate
>  > overlap with the sys.ps2 prompt:

>  >>>> def f(x):
>  > ...     return x+1
>  >
>  > I don't know if this is a problem.  Just thought I would bring it up.

> I've never encountered a problem with this ambiguity. At least, not in software.
> I don't know if affects newbie-comprehension of code snippets.

It did cause me some grief at one time, because I would try to
cut-and-paste examples (including docstrings).  Obviously, a block cut
(or copy) would have been better, at least in IDLE.  There might also
be room to improve the error messages, but I'm not entirely sure how.

-jJ


------------------------------

Message: 3
Date: Wed, 23 Jan 2008 16:30:00 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<acd65fa20801231330r3fc24b24sbad1c62579a42a29@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 22, 2008 10:30 AM, Jim Fulton <jim@zope.com> wrote:
>
> On Jan 20, 2008, at 10:39 PM, Alexandre Vassalotti wrote:
>
> > On Jan 20, 2008 4:14 PM, Jim Fulton <jim@zope.com> wrote:
> >>
> >> Interesting. Does that mean that cPickle can be extended through
> >> inheritance?
> >>
> >
> > Well, Pickler and Unpickler can be subclassed. I am not sure they can
> > be really ""extended,"" since, unlike the Python version, the C version
> > of Pickler and Unpickler only exposes a minimal API.
>
> Then I don't understand what you mean by:
>
> ""I removed the differences between the Python and C implementation of
> pickle, and thus allowing the C version to be transparently used,
> instead of the Python one, when it is available.""
>
> People *do* routinely subclass pickle.Pickler and pickle.Unpickler and
> if this isn't possible with cPickle, then it can't be substituted for
> pickle.  If making cPickle.Pickler and cPickle.Unpickler subclassible
> in the same way as the pickle classes makes cPickle much slower, then
> I don't think the ""transparency"" is worth the tradeoff.
>

I am not sure what you mean by ""cPickle.Pickler and cPickle.Unpickler
subclassible in the same way as the pickle classes."" It is possible to
subclass the C implementation. However, the C implementation does not
expose pickle ""private"" methods, such as Pickler.save_int and
Unpickler.load_tuple. This is fine because these were never documented
as part of the interface of pickle. Only Pickler.dump,
Pickler.clear_memo and Unpickler.load are supported by the Python
implementation. All these are supported by the C implementation as
well.

So, what kind of ""extensibility"" are you looking for the C
implementation of pickle?

Quick note, one of the original motives for making the C
implementation of pickle transparent was to make it more ""friendly""
for alternate implementations of Python (e.g., Jython, IronPython,
etc).

>
> > Well, I haven't changed cPickle much to make it subclassable. So, the
> > impact is minimal. Currently, the only performance change is due the
> > removal of the special-cases for PyFile and cStringIO ""buffers.""
>
> What is the benefit of removing this special casing? What is the cost?
>

As far as know, most of PyFile is gone in Py3k -- i.e., it been
castrated beyond recognition [1]. Therefore, the special case for
PyFile didn't improve the performance (in fact, it probably made
things go slower). I removed the special case for cStringIO for
similiar reason -- i.e., cStringIO will be replaced by the respective
C implementations of io.BytesIO and io.StringIO. I also did it because
it allowed me to keep the part of pickle that aren't speed critical
written in Python, thus cleaning out almost 1000 lines of code. The
performance cost of this is minimal and constant.

-- Alexandre

.. [1] http://svn.python.org/view/python/branches/py3k/Objects/fileobject.c?rev=59311&view=markup


------------------------------

Message: 4
Date: Wed, 23 Jan 2008 16:49:39 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: [Python-3000] REMINDER: OSCON 2008 Call for Proposals
To: python-dev@python.org, python-3000@python.org,
	pycon-organizers@python.org
Message-ID: <20080124004939.GA6387@panix.com>
Content-Type: text/plain; charset=us-ascii

The O'Reilly Open Source Convention (OSCON) is accepting proposals for
tutorials and presentations.  The submission period ends Feb 4.

OSCON 2008 will be in Portland, Oregon July 21-25.  For more information
and to submit a proposal, see

http://conferences.oreilly.com/oscon/
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

""All problems in computer science can be solved by another level of     
indirection.""  --Butler Lampson


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 32
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 31","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev] misbehaving __contains__ (Guido van Rossum)
   2. Re: Fwd: [Python-Dev] misbehaving __contains__ (Nicko van Someren)
   3. Ellipsis Literal (Raymond Hettinger)
   4. Re: Ellipsis Literal (Robert Kern)


----------------------------------------------------------------------

Message: 1
Date: Tue, 22 Jan 2008 13:36:33 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] misbehaving __contains__
To: ""tomer filiba"" <tomerfiliba@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801221336u7c0994f3o3e99d745737d09b2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

I can't promise a patch is accepted before I see it. :-)

But the idea is sound, so don't worry about it being rejected on the
basis of being an undesirable feature.

--Guido

On Jan 22, 2008 12:36 PM, tomer filiba <tomerfiliba@gmail.com> wrote:
> i can work on a patch, but before i start, i want to make sure it's
> accepted. the change will require sq_contains to return a PyObject,
> as well as some minor tweaks to cmp_outcome().
>
>
> -tomer
>
> ---------- Forwarded message ----------
> From: Guido van Rossum <guido@python.org>
> Date: Jan 22, 2008 9:55 PM
> Subject: Re: [Python-Dev] misbehaving __contains__
> To: tomer filiba <tomerfiliba@gmail.com>
> Cc: python-dev@python.org
>
>
> The issue is that the sq_contains slot is defined as returning an int,
> while the tp_richcompare slot is defined as returning a PyObject *.
>
> Your first opportunity for changing this will be Py3k. Please submit a patch!
>
>
>
> On Jan 22, 2008 11:26 AM, tomer filiba <tomerfiliba@gmail.com> wrote:
> > i'm using python to create expression objects, for more intuitive
> > usage as
> > predicates, for instance:
> >     x = (Arg(0) > 17) & (Arg(1).foo == ""bar"")
> > instead of
> >     x = And(Gt(Arg(0), 17), Eq(GetAttr(Arg(1), ""foo""), ""bar""))
> >
> > so now i can use x.eval(18, ""spam"") and get the result of the
> > expression.
> >
> > i'm doing it by overriding all the operators to return expression
> > objects, instead of evaluating the result immediately. it works
> > fine, but i encountered a problem with making
> > __contains__ behave so.
> >
> > it turns out __contains__ coerces the return value into a bool.
> > this might seem logical at first, but is not consistent with
> > the rest of the language.
> >
> > consider the following code:
> >
> > >>> class Foo(object):
> > ...     def __contains__(self, key):
> > ...             return 17
> > ...     def __eq__(self, other):
> > ...             return 19
> > ...
> > >>>
> > >>> f=Foo()
> > >>> f == 8
> > 19
> > >>> 8 in f
> > True
> >
> > as you can see, __eq__ does not coerces the result to bool, so why
> > should __contains__ do that?
> >
> > i've looked at PySequence_Contains in objects/abstract.c, but i can't
> > quite understand where the coercion is made. is because the
> > function is typed as int? if so, i believe it should either be
> > changed to PyObject, or have cmp_outcome (in ceval.c) not use this
> > API directly, and rather return the result, as it is returned
> > from __contains__.
> >
> > i see no reason it should behave differently than __eq__ and the rest
> > of comparison operators.
> >
> >
> > -tomer
>
> --
>
> --Guido van Rossum (home page: http://www.python.org/~guido/)
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Tue, 22 Jan 2008 20:48:25 +0000
From: Nicko van Someren <nicko@nicko.org>
Subject: Re: [Python-3000] Fwd: [Python-Dev] misbehaving __contains__
To: ""tomer filiba"" <tomerfiliba@gmail.com>
Cc: python-3000@python.org
Message-ID: <478D8E02-DF65-40C0-AA55-8A8382742228@nicko.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On 22 Jan 2008, at 20:36, tomer filiba wrote:

> i can work on a patch, but before i start, i want to make sure it's
> accepted. the change will require sq_contains to return a PyObject,
> as well as some minor tweaks to cmp_outcome().

I don't know if your patch will be accepted but two salient questions  
you should address are:
	a) Will the change break much existing code?
	b) Will the change substantially impact performance?

It seems to me that the answer should be 'no' to both questions, which  
is a good start!

	Nicko


> ---------- Forwarded message ----------
> From: Guido van Rossum <guido@python.org>
> Date: Jan 22, 2008 9:55 PM
> Subject: Re: [Python-Dev] misbehaving __contains__
> To: tomer filiba <tomerfiliba@gmail.com>
> Cc: python-dev@python.org
>
>
> The issue is that the sq_contains slot is defined as returning an int,
> while the tp_richcompare slot is defined as returning a PyObject *.
>
> Your first opportunity for changing this will be Py3k. Please submit  
> a patch!



------------------------------

Message: 3
Date: Tue, 22 Jan 2008 16:47:50 -0800
From: Raymond Hettinger <rhettinger@fattoc.com>
Subject: [Python-3000] Ellipsis Literal
To: python-3000@python.org
Message-ID: <47968EB6.9010503@fattoc.com>
Content-Type: text/plain; charset=ISO-8859-1

I missed the conversation on this one.
Was there a use case or a reason to add this?
I ask because the spelling has an unfortunate
overlap with the sys.ps2 prompt:

>>> def f(x):
...     return x+1

I don't know if this is a problem.  Just thought I would bring it up.


Raymond


------------------------------

Message: 4
Date: Wed, 23 Jan 2008 01:37:40 -0600
From: Robert Kern <robert.kern@gmail.com>
Subject: Re: [Python-3000] Ellipsis Literal
To: python-3000@python.org
Message-ID: <fn6qs4$qf6$1@ger.gmane.org>
Content-Type: text/plain; charset=UTF-8; format=flowed

Raymond Hettinger wrote:
> I missed the conversation on this one.
> Was there a use case or a reason to add this?

It was added for Numeric a long time ago. We use it in multidimensional indices 
to specify slice(None, None, None) for all of the omitted dimensions. For example:


In [25]: from numpy import *

In [26]: a = arange(2*3*4).reshape([2,3,4])

In [27]: a
Out[27]:
array([[[ 0,  1,  2,  3],
         [ 4,  5,  6,  7],
         [ 8,  9, 10, 11]],

        [[12, 13, 14, 15],
         [16, 17, 18, 19],
         [20, 21, 22, 23]]])

In [28]: a[...,0]
Out[28]:
array([[ 0,  4,  8],
        [12, 16, 20]])

In [29]: a[:,:,0]
Out[29]:
array([[ 0,  4,  8],
        [12, 16, 20]])

In [30]: a[1,...]
Out[30]:
array([[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]])

In [31]: a[1,:,:]
Out[31]:
array([[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]])

In [32]: a[1,...,0]
Out[32]: array([12, 16, 20])

In [33]: a[1,:,0]
Out[33]: array([12, 16, 20])


 > I ask because the spelling has an unfortunate
 > overlap with the sys.ps2 prompt:
 >
 >>>> def f(x):
 > ...     return x+1
 >
 > I don't know if this is a problem.  Just thought I would bring it up.

I've never encountered a problem with this ambiguity. At least, not in software. 
I don't know if affects newbie-comprehension of code snippets.

-- 
Robert Kern

""I have come to believe that the whole world is an enigma, a harmless enigma
  that is made terrible by our own mad attempt to interpret it as though it had
  an underlying truth.""
   -- Umberto Eco



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 31
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 30","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  inst_persistent_id (Jim Fulton)
   2. Re: exception-swallowing behaviour of hasattr (Guido van Rossum)
   3. Re: exception-swallowing behaviour of hasattr (Chris Mellon)
   4. Re: exception-swallowing behaviour of hasattr (Guido van Rossum)
   5. Re: exception-swallowing behaviour of hasattr (Chris Mellon)
   6. Re: exception-swallowing behaviour of hasattr (Guido van Rossum)
   7. Fwd: [Python-Dev] misbehaving __contains__ (tomer filiba)
   8. Re: Fwd: [Python-Dev] misbehaving __contains__ (tomer filiba)


----------------------------------------------------------------------

Message: 1
Date: Tue, 22 Jan 2008 10:30:27 -0500
From: Jim Fulton <jim@zope.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Alexandre Vassalotti <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <A862A59F-7C37-4E09-A9FF-D5B8C32965B3@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Jan 20, 2008, at 10:39 PM, Alexandre Vassalotti wrote:

> On Jan 20, 2008 4:14 PM, Jim Fulton <jim@zope.com> wrote:
>>
>> On Jan 12, 2008, at 7:33 PM, Alexandre Vassalotti wrote:
>>> By the way, you might be interested to look at my work on pickle [1]
>>> for Python 3K. As part of last year Summer of Code, I removed the
>>> differences between the Python and C implementation of pickle, and
>>> thus allowing the C version to be transparently used, instead of the
>>> Python one, when it is available.
>>
>> Interesting. Does that mean that cPickle can be extended through
>> inheritance?
>>
>
> Well, Pickler and Unpickler can be subclassed. I am not sure they can
> be really ""extended,"" since, unlike the Python version, the C version
> of Pickler and Unpickler only exposes a minimal API.

Then I don't understand what you mean by:

""I removed the differences between the Python and C implementation of  
pickle, and thus allowing the C version to be transparently used,  
instead of the Python one, when it is available.""

People *do* routinely subclass pickle.Pickler and pickle.Unpickler and  
if this isn't possible with cPickle, then it can't be substituted for  
pickle.  If making cPickle.Pickler and cPickle.Unpickler subclassible  
in the same way as the pickle classes makes cPickle much slower, then  
I don't think the ""transparency"" is worth the tradeoff.

...

> Well, I haven't changed cPickle much to make it subclassable. So, the
> impact is minimal. Currently, the only performance change is due the
> removal of the special-cases for PyFile and cStringIO ""buffers.""

What is the benefit of removing this special casing? What is the cost?

Jim

--
Jim Fulton
Zope Corporation




------------------------------

Message: 2
Date: Tue, 22 Jan 2008 07:36:12 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: ""Dwayne C. Litzenberger"" <dlitz@dlitz.net>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801220736j54f31197wfd7ba28150a40278@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

IMO (1) or (2) are both acceptable, but I'd prefer (2): swallow
'Exception'. There's a reason why hasattr() is different from
getattr() with a default value; it's too early for me to explain it
clearly, but I know it was discussed and argued at length when
hasattr() was introduced.

I don't see why AssertionError ought to be treated differently than
TypeError or any other ""regular"" error. The key goal here is to avoid
swallowing KeyboardInterrupt, and to a lesser extend SystemExit.

--Guido

On Jan 21, 2008 10:47 PM, Dwayne C. Litzenberger <dlitz@dlitz.net> wrote:
> This issue has been raised before, but Guido thought that changing things
> in 2.x would break too much code.  See:
>
>      http://mail.python.org/pipermail/python-dev/2005-February/051770.html
>      http://mail.python.org/pipermail/python-dev/2005-December/058498.html
>      http://bugs.python.org/issue504714
>
> I'm bringing this up again because the arguments I've seen in favour of
> fixing hasattr have been fairly weak, and I'd like to raise some stronger
> ones.  Also, I haven't seen this issue considered specifically in the
> context of Python 3000.
>
> The problem is that hasattr behaves just like the following code:
>
>      def hasattr(obj, name):
>          try:
>              getattr(obj, name)
>              return True
>          except:
>              return False
>
> In Python 3000, all exceptions inherit from BaseException, so this is
> equivalent to:
>
>      def hasattr(obj, name):
>          try:
>              getattr(obj, name)
>              return True
>          except BaseException:
>              return False
>
> There are three major things that are broken by this behaviour, which I
> don't think have been explicitly mentioned:
>
>      1. If the Python interpreter receives SIGINT (usually triggered by
>         Ctrl-C) while executing obj.__getattr__ (or anything it calls),
>         hasattr silently returns False and the program continues running.
>
>         Cause: KeyboardInterrupt is swallowed.
>
>      2. If sys.exit is called within obj.__getattr__, hasattr silently
>         returns False and the program continues running.
>
>         Cause: SystemExit is swallowed.
>
>      3. If an assert statement fails within obj.__getattr__, hasattr
>         silently returns False and the program continues running.
>
>         Cause: AssertionError is swallowed.
>
> Also, because getattr(x,y,z) swallows only AttributeError, users naturally
> expect hasattr to behave the same way.  (This argument has been raised
> before.)
>
> I propose a few alternate behaviours for hasattr (and their consequences):
>
>      1. Swallow only AttributeError.
>
>          - KeyboardInterrupt, SystemExit, and AssertionError are all passed
>            through, solving all three of the above problems.
>
>          - The behaviour of hasattr is made consistent with getattr(x,y,z).
>
>      2. Swallow only Exception.
>
>          - KeyboardInterrupt and SystemExit are passed through, but
>            AssertionError is still swallowed.
>
>          - Breaks less code than the previous option.
>
>      3. Swallow Exception unless it's an AssertionError.
>
>          - KeyboardInterrupt, SystemExit, and AssertionError are all passed
>            through, solving all three of the above problems.
>
>          - Kind of ugly.
>
>      4. Swallow everything except KeyboardInterrupt and SystemExit.
>
>          - AssertionError is still swallowed, but the other problems are
>            fixed and this probably won't break any existing code.
>
> I looked at bltinmodule.c, and any of these would be trivial to implement.
>
> Ideally, I would like to see the first option implemented in Python 3000
> and one of the other options implemented in 2.x.
>
> --
> Dwayne C. Litzenberger <dlitz@dlitz.net>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/guido%40python.org
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Tue, 22 Jan 2008 11:31:03 -0600
From: ""Chris Mellon"" <arkanes@gmail.com>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: python-3000@python.org
Message-ID:
	<4866bea60801220931s687b18eh91a9ec7a508e851d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 22, 2008 9:36 AM, Guido van Rossum <guido@python.org> wrote:
> IMO (1) or (2) are both acceptable, but I'd prefer (2): swallow
> 'Exception'. There's a reason why hasattr() is different from
> getattr() with a default value; it's too early for me to explain it
> clearly, but I know it was discussed and argued at length when
> hasattr() was introduced.
>
> I don't see why AssertionError ought to be treated differently than
> TypeError or any other ""regular"" error. The key goal here is to avoid
> swallowing KeyboardInterrupt, and to a lesser extend SystemExit.
>
> --Guido
>

A particularly nasty case is that it swallows RecursionLimitExceededError.


------------------------------

Message: 4
Date: Tue, 22 Jan 2008 09:36:39 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: ""Chris Mellon"" <arkanes@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801220936n6e70695dhcfbdf550203ea61e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 22, 2008 9:31 AM, Chris Mellon <arkanes@gmail.com> wrote:
> On Jan 22, 2008 9:36 AM, Guido van Rossum <guido@python.org> wrote:
> > IMO (1) or (2) are both acceptable, but I'd prefer (2): swallow
> > 'Exception'. There's a reason why hasattr() is different from
> > getattr() with a default value; it's too early for me to explain it
> > clearly, but I know it was discussed and argued at length when
> > hasattr() was introduced.
> >
> > I don't see why AssertionError ought to be treated differently than
> > TypeError or any other ""regular"" error. The key goal here is to avoid
> > swallowing KeyboardInterrupt, and to a lesser extend SystemExit.
> >
> > --Guido
> >
>
> A particularly nasty case is that it swallows RecursionLimitExceededError.

Why is that nastier than other bugs?

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Tue, 22 Jan 2008 11:39:25 -0600
From: ""Chris Mellon"" <arkanes@gmail.com>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: python-3000@python.org
Message-ID:
	<4866bea60801220939y438cfe7bh8f13cb18e506de2c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 22, 2008 11:36 AM, Guido van Rossum <guido@python.org> wrote:
>
> On Jan 22, 2008 9:31 AM, Chris Mellon <arkanes@gmail.com> wrote:
> > On Jan 22, 2008 9:36 AM, Guido van Rossum <guido@python.org> wrote:
> > > IMO (1) or (2) are both acceptable, but I'd prefer (2): swallow
> > > 'Exception'. There's a reason why hasattr() is different from
> > > getattr() with a default value; it's too early for me to explain it
> > > clearly, but I know it was discussed and argued at length when
> > > hasattr() was introduced.
> > >
> > > I don't see why AssertionError ought to be treated differently than
> > > TypeError or any other ""regular"" error. The key goal here is to avoid
> > > swallowing KeyboardInterrupt, and to a lesser extend SystemExit.
> > >
> > > --Guido
> > >
> >
> > A particularly nasty case is that it swallows RecursionLimitExceededError.
>
> Why is that nastier than other bugs?
>
>

Because when you mess up your hooks and end up with recursion through
hasattr, you get a hang followed by a segfault instead of an
exception. MemoryError might have similar effects.

(And of course I meant RuntimeError, not whatever thing I said)


------------------------------

Message: 6
Date: Tue, 22 Jan 2008 09:59:18 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: ""Chris Mellon"" <arkanes@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801220959n517c99acnc75eb32faa830d9d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 22, 2008 9:39 AM, Chris Mellon <arkanes@gmail.com> wrote:
>
> On Jan 22, 2008 11:36 AM, Guido van Rossum <guido@python.org> wrote:
> >
> > On Jan 22, 2008 9:31 AM, Chris Mellon <arkanes@gmail.com> wrote:
> > > On Jan 22, 2008 9:36 AM, Guido van Rossum <guido@python.org> wrote:
> > > > IMO (1) or (2) are both acceptable, but I'd prefer (2): swallow
> > > > 'Exception'. There's a reason why hasattr() is different from
> > > > getattr() with a default value; it's too early for me to explain it
> > > > clearly, but I know it was discussed and argued at length when
> > > > hasattr() was introduced.
> > > >
> > > > I don't see why AssertionError ought to be treated differently than
> > > > TypeError or any other ""regular"" error. The key goal here is to avoid
> > > > swallowing KeyboardInterrupt, and to a lesser extend SystemExit.
> > > >
> > > > --Guido
> > > >
> > >
> > > A particularly nasty case is that it swallows RecursionLimitExceededError.
> >
> > Why is that nastier than other bugs?
> >
> >
>
> Because when you mess up your hooks and end up with recursion through
> hasattr, you get a hang followed by a segfault instead of an
> exception. MemoryError might have similar effects.
>
> (And of course I meant RuntimeError, not whatever thing I said)

Sorry, you are talking a language I don't understand.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Tue, 22 Jan 2008 22:36:11 +0200
From: ""tomer filiba"" <tomerfiliba@gmail.com>
Subject: [Python-3000] Fwd: [Python-Dev] misbehaving __contains__
To: python-3000@python.org, ""Guido van Rossum"" <guido@python.org>
Message-ID:
	<1d85506f0801221236m13fb50a0x39800c4eb508ed31@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

i can work on a patch, but before i start, i want to make sure it's
accepted. the change will require sq_contains to return a PyObject,
as well as some minor tweaks to cmp_outcome().


-tomer

---------- Forwarded message ----------
From: Guido van Rossum <guido@python.org>
Date: Jan 22, 2008 9:55 PM
Subject: Re: [Python-Dev] misbehaving __contains__
To: tomer filiba <tomerfiliba@gmail.com>
Cc: python-dev@python.org


The issue is that the sq_contains slot is defined as returning an int,
while the tp_richcompare slot is defined as returning a PyObject *.

Your first opportunity for changing this will be Py3k. Please submit a patch!



On Jan 22, 2008 11:26 AM, tomer filiba <tomerfiliba@gmail.com> wrote:
> i'm using python to create expression objects, for more intuitive
> usage as
> predicates, for instance:
>     x = (Arg(0) > 17) & (Arg(1).foo == ""bar"")
> instead of
>     x = And(Gt(Arg(0), 17), Eq(GetAttr(Arg(1), ""foo""), ""bar""))
>
> so now i can use x.eval(18, ""spam"") and get the result of the
> expression.
>
> i'm doing it by overriding all the operators to return expression
> objects, instead of evaluating the result immediately. it works
> fine, but i encountered a problem with making
> __contains__ behave so.
>
> it turns out __contains__ coerces the return value into a bool.
> this might seem logical at first, but is not consistent with
> the rest of the language.
>
> consider the following code:
>
> >>> class Foo(object):
> ...     def __contains__(self, key):
> ...             return 17
> ...     def __eq__(self, other):
> ...             return 19
> ...
> >>>
> >>> f=Foo()
> >>> f == 8
> 19
> >>> 8 in f
> True
>
> as you can see, __eq__ does not coerces the result to bool, so why
> should __contains__ do that?
>
> i've looked at PySequence_Contains in objects/abstract.c, but i can't
> quite understand where the coercion is made. is because the
> function is typed as int? if so, i believe it should either be
> changed to PyObject, or have cmp_outcome (in ceval.c) not use this
> API directly, and rather return the result, as it is returned
> from __contains__.
>
> i see no reason it should behave differently than __eq__ and the rest
> of comparison operators.
>
>
> -tomer

--
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 8
Date: Tue, 22 Jan 2008 22:55:14 +0200
From: ""tomer filiba"" <tomerfiliba@gmail.com>
Subject: Re: [Python-3000] Fwd: [Python-Dev] misbehaving __contains__
To: ""Nicko van Someren"" <nicko@nicko.org>
Cc: python-3000@python.org
Message-ID:
	<1d85506f0801221255i1390b7cfw934cbc74637ff845@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 22, 2008 10:48 PM, Nicko van Someren <nicko@nicko.org> wrote:
> I don't know if your patch will be accepted but two salient questions
> you should address are:
>         a) Will the change break much existing code?
>         b) Will the change substantially impact performance?

well, i will take care of all the places in the core that define a
sq_contains method (not many), and i don't believe many extension
types implement it themselves, so the impact is expected to
be marginal.

as for the tweak in cmp_outcome, it's outside the eval-loop, so
there's no reason for a performance penalty.

-tomer


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 30
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 29","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. exception-swallowing behaviour of hasattr (Dwayne C. Litzenberger)
   2. Re: exception-swallowing behaviour of hasattr (Christian Heimes)
   3. Re: exception-swallowing behaviour of hasattr (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Tue, 22 Jan 2008 00:47:03 -0600
From: ""Dwayne C. Litzenberger"" <dlitz@dlitz.net>
Subject: [Python-3000] exception-swallowing behaviour of hasattr
To: python-3000@python.org
Message-ID: <20080122064703.GA24619@rivest.dlitz.net>
Content-Type: text/plain; charset=us-ascii; format=flowed

This issue has been raised before, but Guido thought that changing things 
in 2.x would break too much code.  See:

     http://mail.python.org/pipermail/python-dev/2005-February/051770.html
     http://mail.python.org/pipermail/python-dev/2005-December/058498.html
     http://bugs.python.org/issue504714

I'm bringing this up again because the arguments I've seen in favour of 
fixing hasattr have been fairly weak, and I'd like to raise some stronger 
ones.  Also, I haven't seen this issue considered specifically in the 
context of Python 3000.

The problem is that hasattr behaves just like the following code:

     def hasattr(obj, name):
         try:
             getattr(obj, name)
             return True
         except:
             return False

In Python 3000, all exceptions inherit from BaseException, so this is 
equivalent to:

     def hasattr(obj, name):
         try:
             getattr(obj, name)
             return True
         except BaseException:
             return False

There are three major things that are broken by this behaviour, which I 
don't think have been explicitly mentioned:

     1. If the Python interpreter receives SIGINT (usually triggered by 
        Ctrl-C) while executing obj.__getattr__ (or anything it calls), 
        hasattr silently returns False and the program continues running.

        Cause: KeyboardInterrupt is swallowed.

     2. If sys.exit is called within obj.__getattr__, hasattr silently 
        returns False and the program continues running.

        Cause: SystemExit is swallowed.

     3. If an assert statement fails within obj.__getattr__, hasattr 
        silently returns False and the program continues running.

        Cause: AssertionError is swallowed.

Also, because getattr(x,y,z) swallows only AttributeError, users naturally 
expect hasattr to behave the same way.  (This argument has been raised 
before.)

I propose a few alternate behaviours for hasattr (and their consequences):

     1. Swallow only AttributeError.

         - KeyboardInterrupt, SystemExit, and AssertionError are all passed 
           through, solving all three of the above problems.

         - The behaviour of hasattr is made consistent with getattr(x,y,z).

     2. Swallow only Exception.

         - KeyboardInterrupt and SystemExit are passed through, but 
           AssertionError is still swallowed.

         - Breaks less code than the previous option.

     3. Swallow Exception unless it's an AssertionError.

         - KeyboardInterrupt, SystemExit, and AssertionError are all passed 
           through, solving all three of the above problems.

         - Kind of ugly.

     4. Swallow everything except KeyboardInterrupt and SystemExit.

         - AssertionError is still swallowed, but the other problems are 
           fixed and this probably won't break any existing code.

I looked at bltinmodule.c, and any of these would be trivial to implement.

Ideally, I would like to see the first option implemented in Python 3000 
and one of the other options implemented in 2.x.

-- 
Dwayne C. Litzenberger <dlitz@dlitz.net>


------------------------------

Message: 2
Date: Tue, 22 Jan 2008 08:14:20 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: ""Dwayne C. Litzenberger"" <dlitz@dlitz.net>
Cc: python-3000@python.org
Message-ID: <479597CC.4050903@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Dwayne C. Litzenberger wrote:
> I'm bringing this up again because the arguments I've seen in favour of 
> fixing hasattr have been fairly weak, and I'd like to raise some stronger 
> ones.  Also, I haven't seen this issue considered specifically in the 
> context of Python 3000.

The behavior of hasattr and (IIRC) isinstance and issubclass has been a
problem for several applications. For instance Zope requires code to
re-raise ConflictErrors. ZODB conflict errors must bubble through the
program flow until it hits the ZODB transaction system so it can re-roll
the transaction.

> I propose a few alternate behaviours for hasattr (and their consequences):
> 
>      1. Swallow only AttributeError.
> 
>          - KeyboardInterrupt, SystemExit, and AssertionError are all passed 
>            through, solving all three of the above problems.
> 
>          - The behaviour of hasattr is made consistent with getattr(x,y,z).

I prefer 1) for Python 3.0

>      2. Swallow only Exception.
> 
>          - KeyboardInterrupt and SystemExit are passed through, but 
>            AssertionError is still swallowed.
> 
>          - Breaks less code than the previous option.

I think it's a sensible solution for Python 2.6.

Christian


------------------------------

Message: 3
Date: Tue, 22 Jan 2008 08:14:20 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] exception-swallowing behaviour of hasattr
To: python-3000@python.org
Cc: python-3000@python.org
Message-ID: <479597CC.4050903@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Dwayne C. Litzenberger wrote:
> I'm bringing this up again because the arguments I've seen in favour of 
> fixing hasattr have been fairly weak, and I'd like to raise some stronger 
> ones.  Also, I haven't seen this issue considered specifically in the 
> context of Python 3000.

The behavior of hasattr and (IIRC) isinstance and issubclass has been a
problem for several applications. For instance Zope requires code to
re-raise ConflictErrors. ZODB conflict errors must bubble through the
program flow until it hits the ZODB transaction system so it can re-roll
the transaction.

> I propose a few alternate behaviours for hasattr (and their consequences):
> 
>      1. Swallow only AttributeError.
> 
>          - KeyboardInterrupt, SystemExit, and AssertionError are all passed 
>            through, solving all three of the above problems.
> 
>          - The behaviour of hasattr is made consistent with getattr(x,y,z).

I prefer 1) for Python 3.0

>      2. Swallow only Exception.
> 
>          - KeyboardInterrupt and SystemExit are passed through, but 
>            AssertionError is still swallowed.
> 
>          - Breaks less code than the previous option.

I think it's a sensible solution for Python 2.6.

Christian



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 29
*******************************************
??","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 28","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  inst_persistent_id (Jim Fulton)
   2. Re: [Python-Dev]  inst_persistent_id (Alexandre Vassalotti)


----------------------------------------------------------------------

Message: 1
Date: Sun, 20 Jan 2008 16:14:11 -0500
From: Jim Fulton <jim@zope.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Alexandre Vassalotti <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <EFB69A57-3547-4F53-AFA0-871ED571764F@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


On Jan 12, 2008, at 7:33 PM, Alexandre Vassalotti wrote:
> By the way, you might be interested to look at my work on pickle [1]
> for Python 3K. As part of last year Summer of Code, I removed the
> differences between the Python and C implementation of pickle, and
> thus allowing the C version to be transparently used, instead of the
> Python one, when it is available.

Interesting. Does that mean that cPickle can be extended through  
inheritance?

> Currently, I am polishing the code
> for inclusion into the main branch.

Are you doing any benchmarking?

(I'm worried by the performance impact of allowing extending through  
inheritance. :)

> I also started to work on the next
> version of the pickle protocol, that will make it more suitable for
> Python 3K. If you are interested to help out, just send me an email
> and I will explain you what needs to be done.


I'm interested, but I don't think I have time. :(

Jim

--
Jim Fulton
Zope Corporation




------------------------------

Message: 2
Date: Sun, 20 Jan 2008 22:39:15 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<acd65fa20801201939m191b7d95s7b4ae7dae617ada4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 20, 2008 4:14 PM, Jim Fulton <jim@zope.com> wrote:
>
> On Jan 12, 2008, at 7:33 PM, Alexandre Vassalotti wrote:
> > By the way, you might be interested to look at my work on pickle [1]
> > for Python 3K. As part of last year Summer of Code, I removed the
> > differences between the Python and C implementation of pickle, and
> > thus allowing the C version to be transparently used, instead of the
> > Python one, when it is available.
>
> Interesting. Does that mean that cPickle can be extended through
> inheritance?
>

Well, Pickler and Unpickler can be subclassed. I am not sure they can
be really ""extended,"" since, unlike the Python version, the C version
of Pickler and Unpickler only exposes a minimal API.

> > Currently, I am polishing the code
> > for inclusion into the main branch.
>
> Are you doing any benchmarking?
>

Yes.

> (I'm worried by the performance impact of allowing extending through
> inheritance. :)

Well, I haven't changed cPickle much to make it subclassable. So, the
impact is minimal. Currently, the only performance change is due the
removal of the special-cases for PyFile and cStringIO ""buffers.""

> > I also started to work on the next
> > version of the pickle protocol, that will make it more suitable for
> > Python 3K. If you are interested to help out, just send me an email
> > and I will explain you what needs to be done.
>
>
> I'm interested, but I don't think I have time. :(
>

I am short of time, too. :-)

-- Alexandre


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 28
*******************************************
??????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 27","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Need closure on __cmp__ removal (Lars Immisch)
   2. Re: Need closure on __cmp__ removal (Mike Klaas)
   3. Re: Need closure on __cmp__ removal (Lars Immisch)


----------------------------------------------------------------------

Message: 1
Date: Fri, 18 Jan 2008 22:37:25 +0100
From: Lars Immisch <lars@ibp.de>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Message-ID: <47911C15.6040000@ibp.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

David A. Wheeler wrote:
> Bill Janssen:
>> I'm a bit baffled here; I find cmp() fairly handy in writing sort routines...
>> Is there a better / newer / official way of doing this? If not, isn't
>> ""cmp()"" still useful to have around?
> 
> I agree with you - I find cmp() useful, and I notice that some others do too.
> E.G., Adam Olson said ""It's clear to me that the opposition to
> removing __cmp__ comes down to ""make the common things easy and
> the rare things possible"".  Removing __cmp__ means one of the
> common things (total ordering) becomes hard.""

I like cmp, too. I've looked through my code, and I've only used it in 
script-ish circumstances, but here is an example that sorts a list of 
files by modification date:

def cmp_mtime(f, g):
     """"""Too much for a lambda for my tastes.""""""
     return cmp(os.stat(f).st_mtime, os.stat(g).st_mtime)

files = os.listdir('.')
files.sort(cmp_mtime)

- Lars


------------------------------

Message: 2
Date: Fri, 18 Jan 2008 14:24:01 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: Lars Immisch <lars@ibp.de>
Cc: python-3000@python.org
Message-ID: <393B5AFD-B064-4B2B-9B4C-F9C5D7096893@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On 18-Jan-08, at 1:37 PM, Lars Immisch wrote:
>
> I like cmp, too. I've looked through my code, and I've only used it in
> script-ish circumstances, but here is an example that sorts a list of
> files by modification date:
>
> def cmp_mtime(f, g):
>      """"""Too much for a lambda for my tastes.""""""
>      return cmp(os.stat(f).st_mtime, os.stat(g).st_mtime)
>
> files = os.listdir('.')
> files.sort(cmp_mtime)

The use case of sort-function delegating to cmp() of part of an  
object is covered by the key= parameter, which is faster and more  
succinct:

files = os.listdir('.')
files.sort(key=lambda f: os.stat(f).st_mtime)

Grepping though my team's codebase, I see some uses similar to yours  
above, but all can be replaced with key=.  Personally, I don't see  
the attraction of writing sort functions this way: I fell in love  
with key= the moment I discovered it.

The relative frequency is 84 key-based sorts to 9 cmp()-based sorts  
(admittedly that is more due to my influence than to a natural  
distribution).

-Mike


------------------------------

Message: 3
Date: Fri, 18 Jan 2008 23:54:32 +0100
From: Lars Immisch <lars@ibp.de>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: Mike Klaas <mike.klaas@gmail.com>
Cc: python-3000@python.org
Message-ID: <47912E28.8010208@ibp.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Mike Klaas wrote:
> On 18-Jan-08, at 1:37 PM, Lars Immisch wrote:
>>
>> I like cmp, too. I've looked through my code, and I've only used it in
>> script-ish circumstances, but here is an example that sorts a list of
>> files by modification date:
>>
>> def cmp_mtime(f, g):
>>      """"""Too much for a lambda for my tastes.""""""
>>      return cmp(os.stat(f).st_mtime, os.stat(g).st_mtime)
>>
>> files = os.listdir('.')
>> files.sort(cmp_mtime)
> 
> The use case of sort-function delegating to cmp() of part of an object 
> is covered by the key= parameter, which is faster and more succinct:
> 
> files = os.listdir('.')
> files.sort(key=lambda f: os.stat(f).st_mtime)

You are right.

> Grepping though my team's codebase, I see some uses similar to yours 
> above, but all can be replaced with key=.  Personally, I don't see the 
> attraction of writing sort functions this way: I fell in love with key= 
> the moment I discovered it.
> 
> The relative frequency is 84 key-based sorts to 9 cmp()-based sorts 
> (admittedly that is more due to my influence than to a natural 
> distribution).

I know off hand how cmp should look like, but with 'key' I think 
'attribute access', even if it isn't. My head is stuck with 2.3, it seems.

- Lars


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 27
*******************************************
?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 26","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: [Python-Dev]  inst_persistent_id (Armin Rigo)


----------------------------------------------------------------------

Message: 1
Date: Mon, 14 Jan 2008 18:59:43 +0100
From: Armin Rigo <arigo@tunes.org>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: Alexandre Vassalotti <alexandre@peadrop.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID: <20080114175943.GA26431@code0.codespeak.net>
Content-Type: text/plain; charset=us-ascii

Hi,

On Sat, Jan 12, 2008 at 07:33:38PM -0500, Alexandre Vassalotti wrote:
> Well, in Python 3K, inst_persistent_id() won't be usable, since
> PyInstance_Type was removed.

Looking at the code, inst_persistent_id() is just a confusing name.  It
has got nothing to do with PyInstance_Type; it's called for any object
type that cPickle.c doesn't know how to handle.  In fact, it seems that
cPickle.c never calls inst_persistent_id() for objects of type
PyInstance_Type...


A bientot,

Armin.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 26
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 25","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Useless methods in Queue module (Facundo Batista)
   2. Re: Useless methods in Queue module (Guido van Rossum)
   3. Re: Is pickle's persistent_id worth keeping? (Jesus Cea)
   4. Re: Is pickle's persistent_id worth keeping? (Guido van Rossum)
   5. Re: Is pickle's persistent_id worth keeping? (Jesus Cea)
   6. Re: Is pickle's persistent_id worth keeping? (Guido van Rossum)
   7. Re: Is pickle's persistent_id worth keeping? (Jesus Cea)
   8. Re: Need closure on __cmp__ removal (David A. Wheeler)


----------------------------------------------------------------------

Message: 1
Date: Tue, 15 Jan 2008 09:24:44 -0200
From: ""Facundo Batista"" <facundobatista@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<e04bdf310801150324k5f49d7a6yf61098c080f989d4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

2008/1/14, Raymond Hettinger <python@rcn.com>:

> I do recommend we dump q.empty() and q.full().  The right way is to trap the Empty and Full exceptions.  If needed qsize() is available to make your own less reliable checks.

+1

-- 
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/


------------------------------

Message: 2
Date: Tue, 15 Jan 2008 09:39:08 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Useless methods in Queue module
To: "" Martin v. L?wis "" <martin@v.loewis.de>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<ca471dc20801150939i3d82a8c0u37a5f59d08e27941@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

> > No, you're wrong.
>
> As Mike explains: he is right, you are wrong.

Folks, can we please maintain a minimal level of decency? It would
make reading the thread easier not to have to deal with the mental
image of heads butting.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Tue, 15 Jan 2008 19:13:10 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID: <478CF7B6.8020001@argo.es>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Guido van Rossum wrote:
| On Jan 10, 2008 4:52 AM, Jesus Cea <jcea@argo.es> wrote:
|> I'm very dependent of bsddb support in python. I'm very sorry also of
|> the maintainer support of it: he is slow and doesn't implement python
|> bindings for berkeleydb features deployed five years ago :-(. Could be a
|> bit rude, but maybe a maintaner change would be in order. I would rather
|> prefer to talk to current maintainer, but I rather apply for maintaner
|> position than dropping bsddb from the python stdlib!!.
|
| Hi Jesus,
|
| I don't know if there *is* a current maintainer. There are a few
| people who sometimes fix things in the current code base, but I think
| development has stopped. If you're serious about wanting to take over
| maintenance, (or even just contributing) that would be great!

I would do, *if* Greg agrees. Or if he is Missing In Action.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
~                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR4z3tZlgi5GaxT1NAQLpZwP/fjkMH9n8+CTmZr6hLiCxuVd9MS/KVP+8
kCltZgIA0SA7g3lyYakg46rasfrvX4BfCHwIL+UmxxJ18uKO5NTV7NafrycBm5Yd
k77dlx7ShWq6RKCh9KKLjiKN/WOVSnOLOjWpI1LFHX7rsRCegW2vUlr+VEI69K0z
Hewv+F39KOg=
=6H06
-----END PGP SIGNATURE-----


------------------------------

Message: 4
Date: Tue, 15 Jan 2008 10:15:33 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: ""Jesus Cea"" <jcea@argo.es>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID:
	<ca471dc20801151015q47c1805cm55087ae155b99da1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 15, 2008 10:13 AM, Jesus Cea <jcea@argo.es> wrote:
> | On Jan 10, 2008 4:52 AM, Jesus Cea <jcea@argo.es> wrote:
> |> I'm very dependent of bsddb support in python. I'm very sorry also of
> |> the maintainer support of it: he is slow and doesn't implement python
> |> bindings for berkeleydb features deployed five years ago :-(. Could be a
> |> bit rude, but maybe a maintaner change would be in order. I would rather
> |> prefer to talk to current maintainer, but I rather apply for maintaner
> |> position than dropping bsddb from the python stdlib!!.
> |
> | Hi Jesus,
> |
> | I don't know if there *is* a current maintainer. There are a few
> | people who sometimes fix things in the current code base, but I think
> | development has stopped. If you're serious about wanting to take over
> | maintenance, (or even just contributing) that would be great!
>
> I would do, *if* Greg agrees. Or if he is Missing In Action.

""""""
Looks like you missed Greg's response a few days ago:

I consider myself the maintainer because I at least make sure it keeps
working with new berkeleydb releases and such and am one of the most
familiar with the _bsddb.c code internals (both the good and the bad).

But theres a caveat to me having that job: I have -zero- use for the
bsddb module myself today. Whenever I update it it really is a
donation of my time since I don't personally need the changes.  A
maintainer that has a vested interest in using the module would be a
great thing.  There are a couple crashing bugs that need fixing and a
few more recent API additions that could be wrapped for sure.

Volunteering Jesus? :)
""""""

Sounds like he's all for you taking over!

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Tue, 15 Jan 2008 19:31:08 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID: <478CFBEC.2000806@argo.es>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Guido van Rossum wrote:
| Looks like you missed Greg's response a few days ago:
[...]
| Sounds like he's all for you taking over!

Yes, catching old email after Christmas :-). 6119 emails to go :-(

I would like to take over bsddb maintenance. Yes. But I need to know
about python commit procedures, roadmaps, etc. That is, knowing the
implications aside keeping bssdb code updated. Mailing list traffic is
overhelming to me, currently, for example. I'm a fairly busy guy these days.

And I'm unable to compile code for MS Windows or MacOS platforms.

But I need bsddb and I would really like to see ""old"" BerkeleyDB
features accesible from Python, like replication. So would volunteer if
there is nobody else to take the gauntlet and ""somebody"" could tell me
what *exactly* would be my demanded responsabilities and communication
level.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
~                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR4z77Jlgi5GaxT1NAQKyxQP/QWUkqLv2CNhs26wfOltJs78oe0tmsv/t
ddUSkvzidWUJmXT/XLv+cZeHCCzXmPO6hHGUX00xaqrX0YL09KZiGBHADeN6OX1c
UBimr4km5kJqx4SFdLpe3s4Sc4tLhsFFLwcRLvoNv0WTqcMksXsWV5w/7sTh2FQb
SGMs2RocUFk=
=FTGJ
-----END PGP SIGNATURE-----


------------------------------

Message: 6
Date: Tue, 15 Jan 2008 10:36:47 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: ""Jesus Cea"" <jcea@argo.es>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID:
	<ca471dc20801151036r2fe18698yebde58eef754f876@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 15, 2008 10:31 AM, Jesus Cea <jcea@argo.es> wrote:
> I would like to take over bsddb maintenance. Yes. But I need to know
> about python commit procedures, roadmaps, etc. That is, knowing the
> implications aside keeping bssdb code updated. Mailing list traffic is
> overhelming to me, currently, for example. I'm a fairly busy guy these days.
>
> And I'm unable to compile code for MS Windows or MacOS platforms.
>
> But I need bsddb and I would really like to see ""old"" BerkeleyDB
> features accesible from Python, like replication. So would volunteer if
> there is nobody else to take the gauntlet and ""somebody"" could tell me
> what *exactly* would be my demanded responsabilities and communication
> level.

Hopefully Greg can mentor you some. You'll have to start by submitting
patches and getting someone to review and apply them -- Greg should be
able to help out there. When Greg is tired of approving first-time
perfect patches he'll recommend you apply for developer status. :-)

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 7
Date: Tue, 15 Jan 2008 19:50:10 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: Guido van Rossum <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID: <478D0062.8090806@argo.es>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Guido van Rossum wrote:
| Hopefully Greg can mentor you some. You'll have to start by submitting
| patches and getting someone to review and apply them -- Greg should be
| able to help out there. When Greg is tired of approving first-time
| perfect patches he'll recommend you apply for developer status. :-)

So, first step would be to take over bsddb library development, as a
separate project, and *THEN* fight to update the version distributed by
python itself.

Seems doable.

Greg, how can we manage the transition?. I would need current source
code, a brief status report and a ""public"" maintenance transfer ack in
the pybsddb mailing list. We could keep co-maintenance status both of
us. I would like to benefice from your experience. If you rather prefer
to forget about pybsddb, then we need to talk about sourceforge access
and such.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
~                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR40AYplgi5GaxT1NAQIS5AP/TBpRVWsG8PdNb2TlJwnDNO6QudlXS792
en8ZqtxKvaw1vJZU4+6+nZo3BPDhNLqZwAOYeRWxdBxQ5SRZgQ6nJ/fF0RdpF7p8
UsfSluZqzMh38Xh5ul3d+oSn9hDYEgiESNvEppU8WI3QMnLRV9ro6LmjNfTbiqFy
Ke9Z7an0/Ss=
=fEmH
-----END PGP SIGNATURE-----


------------------------------

Message: 8
Date: Tue, 15 Jan 2008 18:07:07 -0500 (EST)
From: ""David A. Wheeler"" <dwheeler@dwheeler.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Message-ID: <E1JEus7-0004OT-66@fenris.runbox.com>
Content-Type: text/plain; charset=""iso-8859-15""

Bill Janssen:
>I'm a bit baffled here; I find cmp() fairly handy in writing sort routines...
>Is there a better / newer / official way of doing this? If not, isn't
>""cmp()"" still useful to have around?

I agree with you - I find cmp() useful, and I notice that some others do too.
E.G., Adam Olson said ""It's clear to me that the opposition to
removing __cmp__ comes down to ""make the common things easy and
the rare things possible"".  Removing __cmp__ means one of the
common things (total ordering) becomes hard.""

hashcollision:
> On Jan 5, 2008 10:40 PM, hashcollision <hashcollision@gmail.com> wrote:
> > David A. Wheeler has already written a draft PEP, which can be found here:
> > http://www.dwheeler.com/misc/pep-cmp.txt.

You can blame me for that :-).


Guido van Rossum:
> Thanks, I'd missed that.
> 
> But alas, it's a bit short on the motivation for rich comparisons. For
> example it fails to notice that quite a few object types need to be
> comparable for equality but need not be orderable. Comparison for
> equality only is often much faster than a full three-way-compare,
> since there is likely some quick test that decides two instances
> cannot possibly be equal (e.g. lists of different lengths).

A fair comment.  But if you really only want to know 'equal/not-equal',
I think it's reasonable to presume that the user will just use == or !=,
instead of __cmp__ directly.  I don't propose removing == or !=, because
they're still needed for the asymmetric cases.  In those cases, I'd expect
that the user would write == or !=, which would then invoke __eq__ or
__ne__, which would make the decision.  If there's a performance difference,
for the basic types I'd expect Python to just implement == or != in the ""faster""
way directly - so __cmp__ wouldn't matter in such cases.

I'll try to modify the draft PEP to cover that.

> It also misses the use case of overloading < and <= as set inclusion
> operators.

Okay.  Well, I can add this:
    Note that < and <= will continue to be overloaded as 
    set inclusion operators.

But I think there's more behind this comment that I don't understand.
Can you help me understand why that's a serious problem for __cmp__?

> But the biggest thing missing is precise semantics. Saying ""exactly
> the same semantics as with Python 2.5"" doesn't cut it (those semantics
> are incredibly hairy and sometimes surprising, and their
> implementation was a nightmare -- I've rarely been as relieved as when
> I was able to cut those out of the implementation).

Okay.  I made a stab, it's almost certainly wrong, suggestions welcome.
It should be _simple_, returning +1,0, or -1.

> A PEP should specify exactly what happens when both __cmp__ and one or
> more of the __xx__ operators are defined on the same class;

I think the goal should be ""not surprising"". IE: When you use a specific relationship like ""<"",
it calls __lt__(); the implementation of __lt__ may call __cmp__.

> it should
> specify what it means to override one or the other in a subclass;

Fair enough.  Hopefully that follows from the above.

> and
> it should define Python and C APIs for invoking __cmp__

I suggest using the 2.5 interfaces - is there a reason that must change?

> (and what it
> should do if __cmp__ isn't defined).

I'd expect it to do the same thing as calling __foo__ if __foo__ isn't defined.
Indeed, anything else would be surprising.

> I also notice that, because not-equal can often be decided more
> quickly than a full ordering, the argument (which I brought up
> myself!) that not having __cmp__ would slow down list comparisons may
> be wrong or at least weak. E.g., for the sake of argument, let's
> assume that __eq__ is just 10% faster than __cmp__, and __lt__ is as
> fast as __eq__. Then comparing two lists using __cmp__ on successive
> element pairs would be slower than using __eq__ plus one final __lt__
> if the deciding element is beyond the 9th index. If __eq__ is twice as
> fast as __cmp__ and __lt__ is the same speed as __cmp__, using __cmp__
> would be slower beyond the 2nd index.

True, but if that's true for a particular comparison, then the
implementation of __cmp__ could ITSELF implement the comparison that way.
Besides, if I understand you correctly, that presumes that the
user is keeping track of all the subelements through the comparison.
That's a pain; I'd rather say ""compare these items"", let the structures
do all the tracking, and get just the final answer.

Anyway, I hope this helps.

--- David A. Wheeler


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 25
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 24","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Useless methods in Queue module (Mike Klaas)
   2. Re: Useless methods in Queue module (skip@pobox.com)
   3. Re: Useless methods in Queue module (Martin v. L?wis)
   4. Re: Useless methods in Queue module (Jeffrey Yasskin)


----------------------------------------------------------------------

Message: 1
Date: Mon, 14 Jan 2008 18:31:08 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: Jeffrey Yasskin <jyasskin@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <A8D828D1-B673-4ED8-9DCF-2467AA28E679@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On 14-Jan-08, at 5:49 PM, Jeffrey Yasskin wrote:

> On Jan 14, 2008 2:55 PM, Mike Klaas <mike.klaas@gmail.com> wrote:

>> This is a misleading name.  The number returned from qsize() [not  
>> size
>> ()] is perfectly reliable, in the sense that it is the exact size of
>> the queue at some instant in time.
>
> No, you're wrong. In CPython's implementation, it's likely that qsize
> is implemented by locking the structure and reading a size field,

It isn't likely, it is.  It is also implemented as such in all  
mainstream python interpreters (ironpython, jython), since they use  
CPython's pure-python implementation.

I grant that it is theoretically possible to implement Queue.Queue's  
full interface with a data structure in which qsize() is never a  
consistent length of the index at a given time, even if such a  
structure may not yet exist.

> Furthermore, it's misleading to think of even a locked
> implementation's result as reliable. Ignoring problems with
> simultaneity in the presence of threads, the ""true"" value could easily
> have changed by the time qsize returns. And if it returns a value
> that's not accurate, that can hardly be described as reliable. It
> really is returning an estimate of the size, suitable only for use in
> performance optimizations where you're prepared to handle it sometimes
> being wildly wrong.

In some usage patterns it is thread-unsafe.  Whether this means that  
the method itself is ""unreliable"" is a battle likely not worth  
getting in to.

Thanks for the interesting reference,
-Mike


------------------------------

Message: 2
Date: Mon, 14 Jan 2008 21:42:27 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Useless methods in Queue module
To: Mike Klaas <mike.klaas@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <18316.11171.59886.209223@montanaro.dyndns.org>
Content-Type: text/plain; charset=us-ascii


    Mike> The real concern is that qsize() > 0 doesn't guarantee that a
    Mike> subsequent .get() will not block, nor that qsize() < maxsize
    Mike> guarantee that .put() will not block.  Incidentally, I find this
    Mike> warning much less confusion than the vague ""Because of
    Mike> multithreading semantics, this number is not reliable.""  in the
    Mike> docs.

I checked in similar change to the trunk version of queue.rst for all three
methods.  The qsize() description almost completely matches your text above.
The other two are a bit more cumbersome, but I didn't worry too much about
that since a future merge to the 3.0 branch will delete them anyway.

Thanks for the suggestion.

Skip



------------------------------

Message: 3
Date: Tue, 15 Jan 2008 06:54:20 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] Useless methods in Queue module
To: Jeffrey Yasskin <jyasskin@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <478C4A8C.5010400@v.loewis.de>
Content-Type: text/plain; charset=UTF-8

>> This is a misleading name.  The number returned from qsize() [not size
>> ()] is perfectly reliable, in the sense that it is the exact size of
>> the queue at some instant in time.
> 
> No, you're wrong.

As Mike explains: he is right, you are wrong.

> In CPython's implementation, it's likely that qsize
> is implemented by locking the structure and reading a size field

    def qsize(self):
        """"""Return the approximate size of the queue (not reliable!).""""""
        self.mutex.acquire()
        n = self._qsize()
        self.mutex.release()
        return n
    def _qsize(self):
        return len(self.queue)


> but there are other, more highly concurrent implementations, like Java's
> ConcurrentLinkedQueue
> (http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)
> [1], that have to traverse the structure to read its size.

Still, with the Queue.Queue API, such an implementation would hold the
queue lock while computing the size.

For the base class, Mike's statement would be true even without explicit
acquisition of the queue lock: the len() operation is atomic in the
sense that it yields some historical value of the deque object that is
being used:

static Py_ssize_t
deque_len(dequeobject *deque)
{
	return deque->len;
}

Most processors guarantee that a read operation of a Py_ssize_t
field is atomic, plus that read operation is protected by the GIL.

> Furthermore, it's misleading to think of even a locked
> implementation's result as reliable. Ignoring problems with
> simultaneity in the presence of threads, the ""true"" value could easily
> have changed by the time qsize returns. And if it returns a value
> that's not accurate, that can hardly be described as reliable. It
> really is returning an estimate of the size, suitable only for use in
> performance optimizations where you're prepared to handle it sometimes
> being wildly wrong.

Nonsense. In typical Queue applications, you either have multiple
readers and one writer, or multiple writers and one reader (*). For
the end of the queue that doesn't have contention, empty() resp.
full() are completely reliable (i.e. if you are the only reader,
and you see that empty() is False, you know for sure that it won't
suddenly become True).

(*) in many cases, you have exactly one reader and exactly one writer.

> Nevertheless, it would be a bad idea to assume such
> data structures will never be designed.

It also is a bad idea to make project assumptions into interfaces
which aren't actually part of the interface. That often leads to
bad code which elaborately deals with cases that can never occur.

Regards,
Martin



------------------------------

Message: 4
Date: Mon, 14 Jan 2008 22:30:35 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Mike Klaas"" <mike.klaas@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<5d44f72f0801142230k3b16d202x3c3dbbbed8a71a8@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 6:31 PM, Mike Klaas <mike.klaas@gmail.com> wrote:
> On 14-Jan-08, at 5:49 PM, Jeffrey Yasskin wrote:
>
> > On Jan 14, 2008 2:55 PM, Mike Klaas <mike.klaas@gmail.com> wrote:
>
> >> This is a misleading name.  The number returned from qsize() [not
> >> size
> >> ()] is perfectly reliable, in the sense that it is the exact size of
> >> the queue at some instant in time.
> >
> > No, you're wrong. In CPython's implementation, it's likely that qsize
> > is implemented by locking the structure and reading a size field,
>
> It isn't likely, it is.  It is also implemented as such in all
> mainstream python interpreters (ironpython, jython), since they use
> CPython's pure-python implementation.

Yes, I was thinking solely about the API, while everyone else is
thinking (correctly) about the implementations we actually have. Sorry
for being needlessly confrontational.

> I grant that it is theoretically possible to implement Queue.Queue's
> full interface with a data structure in which qsize() is never a
> consistent length of the index at a given time, even if such a
> structure may not yet exist.
>
> > Furthermore, it's misleading to think of even a locked
> > implementation's result as reliable. Ignoring problems with
> > simultaneity in the presence of threads, the ""true"" value could easily
> > have changed by the time qsize returns. And if it returns a value
> > that's not accurate, that can hardly be described as reliable. It
> > really is returning an estimate of the size, suitable only for use in
> > performance optimizations where you're prepared to handle it sometimes
> > being wildly wrong.
>
> In some usage patterns it is thread-unsafe.  Whether this means that
> the method itself is ""unreliable"" is a battle likely not worth
> getting in to.
>
> Thanks for the interesting reference,
> -Mike
>



-- 
Namast?,
Jeffrey Yasskin
http://jeffrey.yasskin.info/

""Religion is an improper response to the Divine."" ? ""Skinny Legs and
All"", by Tom Robbins

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 24
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 23","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Useless methods in Queue module (Guido van Rossum)
   2. Re: Useless methods in Queue module (Charles Merriam)
   3. Re: Useless methods in Queue module (skip@pobox.com)
   4. Re: Useless methods in Queue module (Leif Walsh)
   5. Re: Useless methods in Queue module (Brett Cannon)
   6. Re: Useless methods in Queue module (Raymond Hettinger)
   7. Re: Useless methods in Queue module (Mike Klaas)
   8. Re: [Python-Dev]  inst_persistent_id (Alexandre Vassalotti)
   9. Re: Useless methods in Queue module (Jeffrey Yasskin)


----------------------------------------------------------------------

Message: 1
Date: Mon, 14 Jan 2008 11:59:15 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801141159y13bbca80i2f648d98d51092a8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Sounds like we have all-round agreement. Go for it.

On Jan 14, 2008 11:55 AM, Raymond Hettinger <python@rcn.com> wrote:
> > I'm not sure people who ignore the big ""Because of
> > multithreading semantics, this is not reliable"" warnings
> > should be catered to. Since others have contributed use-cases
> > for qsize()'s advisory information, it should probably stay around.
>
> I concur.
>
> I do recommend we dump q.empty() and q.full().  The right way is to trap the Empty and Full exceptions.  If needed qsize() is available to make your own less reliable checks.
>
> More than just simplifying the API, the improvement makes it easier to roll your own Queue (like a priority queue style).  Currently, we require that six methods get overridden (_init, _empty, _full, _qsize, _put, and _get).  It would be nice to lower the burden to just the basic four.
>
>
> Raymond
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Mon, 14 Jan 2008 13:32:13 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<b8c6f6c40801141332k113ce80ck4fc1ab242ce251e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Not to be pedantic, but the major concern others are voicing is that
is that queue size is not reliable and is therefore a potential source
of hard to find threading bugs by naive users.   Why not just rename
q.size() to the unweildy name of q.est_size()?


On Jan 14, 2008 11:59 AM, Guido van Rossum <guido@python.org> wrote:
> Sounds like we have all-round agreement. Go for it.
>
> On Jan 14, 2008 11:55 AM, Raymond Hettinger <python@rcn.com> wrote:
> > > I'm not sure people who ignore the big ""Because of
> > > multithreading semantics, this is not reliable"" warnings
> > > should be catered to. Since others have contributed use-cases
> > > for qsize()'s advisory information, it should probably stay around.
> >
> > I concur.
> >
> > I do recommend we dump q.empty() and q.full().  The right way is to trap the Empty and Full exceptions.  If needed qsize() is available to make your own less reliable checks.
> >
> > More than just simplifying the API, the improvement makes it easier to roll your own Queue (like a priority queue style).  Currently, we require that six methods get overridden (_init, _empty, _full, _qsize, _put, and _get).  It would be nice to lower the burden to just the basic four.
> >
> >
> > Raymond
> >
>
>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/)
> _______________________________________________
>
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/charles.merriam%40gmail.com
>


------------------------------

Message: 3
Date: Mon, 14 Jan 2008 15:54:42 -0600
From: skip@pobox.com
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python@rcn.com, python-3000@python.org
Message-ID: <18315.55842.877143.320957@montanaro.dyndns.org>
Content-Type: text/plain; charset=us-ascii


    Leif> I think the point is that, with multiple threads, those methods
    Leif> are not guaranteed to be correct, whereas trapping the exceptions
    Leif> apparently are, and therefore, leaving those methods in is
    Leif> confusing to new programmers who might assume they work and use
    Leif> them without a second thought.

For the guy who said he wanted to maintain an average qsize (not too small,
not too big), empty() and full() don't help.  He'll have to implement a
qsize() function or monkey patch (or subclass) the Queue class.  I agree
with Guido that empty() and full() can go with no great consequence.
qsize() should stay though.  In my old threading code (stuff I no longer
use) qsize() was the only one of the three I ever used.

That said, I don't understand why things can't just be left as-is.  I can't
see that they are hurting anything.  All three have long been documented as
not reliable.  It's not like it should be a surprise to anyone that

    if not q.qsize():
        print q.qsize()

might print something besides 0.  And if it is a surprise, they should
probably not be programming with threads. <0.5-even-rounded wink>

Skip


------------------------------

Message: 4
Date: Mon, 14 Jan 2008 17:04:29 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: skip@pobox.com
Cc: python@rcn.com, python-3000@python.org
Message-ID:
	<11b6d2f60801141404r7d8a18f2xdaa2992803b29c9d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 4:54 PM,  <skip@pobox.com> wrote:
> For the guy who said he wanted to maintain an average qsize (not too small,
> not too big), empty() and full() don't help.  He'll have to implement a
> qsize() function or monkey patch (or subclass) the Queue class.  I agree
> with Guido that empty() and full() can go with no great consequence.
> qsize() should stay though.  In my old threading code (stuff I no longer
> use) qsize() was the only one of the three I ever used.

Yes, qsize() is useful (and I think Charles' suggestion to change the
name is a good one), yes empty() and full() should go.  I was saying
qsize()==0 should probably not be suggested as a replacement.

-- 
Cheers,
Leif


------------------------------

Message: 5
Date: Mon, 14 Jan 2008 14:10:30 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Useless methods in Queue module
To: skip@pobox.com
Cc: python-3000@python.org
Message-ID:
	<bbaeab100801141410p8cc1d5dle171d9337b71285f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 1:54 PM,  <skip@pobox.com> wrote:
>
>     Leif> I think the point is that, with multiple threads, those methods
>     Leif> are not guaranteed to be correct, whereas trapping the exceptions
>     Leif> apparently are, and therefore, leaving those methods in is
>     Leif> confusing to new programmers who might assume they work and use
>     Leif> them without a second thought.
>
> For the guy who said he wanted to maintain an average qsize (not too small,
> not too big), empty() and full() don't help.  He'll have to implement a
> qsize() function or monkey patch (or subclass) the Queue class.  I agree
> with Guido that empty() and full() can go with no great consequence.
> qsize() should stay though.  In my old threading code (stuff I no longer
> use) qsize() was the only one of the three I ever used.
>
> That said, I don't understand why things can't just be left as-is.  I can't
> see that they are hurting anything.  All three have long been documented as
> not reliable.  It's not like it should be a surprise to anyone that
>
>     if not q.qsize():
>         print q.qsize()
>
> might print something besides 0.  And if it is a surprise, they should
> probably not be programming with threads. <0.5-even-rounded wink>

As Raymond pointed out, if you subclass you then have to make sure
full() and empty() are properly supported.

It is also just more code and more documentation to maintain, keep
modernized, etc. That means there is that much more of a chance of
having an issue get reported that has to deal with it, etc. If Raymond
is willing to put the time and effort in to remove it I say let him
and save all of us the possible trouble of having bug reports on the
code in the future.

-Brett


------------------------------

Message: 6
Date: Mon, 14 Jan 2008 17:19:59 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: skip@pobox.com, Leif Walsh <adlaiff6@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080114171959.AFA19932@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

[Skip]
>     if not q.qsize():
>        print q.qsize()
> might print something besides 0.  And if it is a surprise,
> they should probably not be programming with threads. 
> 0.5-even-rounded wink>

I concur. Let's leave qsize() alone.  Even renaming it would cause unnecessary breakage.

FWIW, the removal of empty() and full() are checked-in.  Looks nice and clean now.


Raymond


------------------------------

Message: 7
Date: Mon, 14 Jan 2008 14:55:56 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: Charles Merriam <charles.merriam@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID: <9D02E804-3B7B-47CC-89A3-3922A4A168D0@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On 14-Jan-08, at 1:32 PM, Charles Merriam wrote:

> Not to be pedantic, but the major concern others are voicing is that
> is that queue size is not reliable and is therefore a potential source
> of hard to find threading bugs by naive users.   Why not just rename
> q.size() to the unweildy name of q.est_size()?

This is a misleading name.  The number returned from qsize() [not size 
()] is perfectly reliable, in the sense that it is the exact size of  
the queue at some instant in time.  The real concern is that qsize()  
 > 0 doesn't guarantee that a subsequent .get() will not block, nor  
that qsize() < maxsize guarantee that .put() will not block.   
Incidentally, I find this warning much less confusion than the vague  
""Because of multithreading semantics, this number is not reliable.""  
in the docs.

-Mike


------------------------------

Message: 8
Date: Mon, 14 Jan 2008 18:04:06 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] [Python-Dev]  inst_persistent_id
To: ""Armin Rigo"" <arigo@tunes.org>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<acd65fa20801141504j5f496a06t133fab8f727609d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

Oh, you are right. I thought that save_inst() used inst_persistent_id,
but that isn't the case. Now, I have checked more thoroughly and found
the relevant piece of code:

	if (!pers_save && self->inst_pers_func) {
		if ((tmp = save_pers(self, args, self->inst_pers_func)) != 0) {
			res = tmp;
			goto finally;
		}
	}

which is indeed called only when the object is not ""supported"" by pickle.

I guess my original argument doesn't hold anymore, thus I don't have
anything against supporting this feature officially.

Thanks for correcting me!
-- Alexandre


On Jan 14, 2008 12:59 PM, Armin Rigo <arigo@tunes.org> wrote:
> Hi,
>
> On Sat, Jan 12, 2008 at 07:33:38PM -0500, Alexandre Vassalotti wrote:
> > Well, in Python 3K, inst_persistent_id() won't be usable, since
> > PyInstance_Type was removed.
>
> Looking at the code, inst_persistent_id() is just a confusing name.  It
> has got nothing to do with PyInstance_Type; it's called for any object
> type that cPickle.c doesn't know how to handle.  In fact, it seems that
> cPickle.c never calls inst_persistent_id() for objects of type
> PyInstance_Type...
>
>
> A bientot,
>
> Armin.
>


------------------------------

Message: 9
Date: Mon, 14 Jan 2008 17:49:26 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Mike Klaas"" <mike.klaas@gmail.com>
Cc: Python 3000 <python-3000@python.org>
Message-ID:
	<5d44f72f0801141749r7aea9e0cj181272ee17c94a6e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 2:55 PM, Mike Klaas <mike.klaas@gmail.com> wrote:
> On 14-Jan-08, at 1:32 PM, Charles Merriam wrote:
>
> > Not to be pedantic, but the major concern others are voicing is that
> > is that queue size is not reliable and is therefore a potential source
> > of hard to find threading bugs by naive users.   Why not just rename
> > q.size() to the unweildy name of q.est_size()?
>
> This is a misleading name.  The number returned from qsize() [not size
> ()] is perfectly reliable, in the sense that it is the exact size of
> the queue at some instant in time.

No, you're wrong. In CPython's implementation, it's likely that qsize
is implemented by locking the structure and reading a size field, but
there are other, more highly concurrent implementations, like Java's
ConcurrentLinkedQueue
(http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)
[1], that have to traverse the structure to read its size.  Then the
returned value can be higher than the number ever ""simultaneously""
contained in the queue, if some were added and some were removed
during the traversal.

Furthermore, it's misleading to think of even a locked
implementation's result as reliable. Ignoring problems with
simultaneity in the presence of threads, the ""true"" value could easily
have changed by the time qsize returns. And if it returns a value
that's not accurate, that can hardly be described as reliable. It
really is returning an estimate of the size, suitable only for use in
performance optimizations where you're prepared to handle it sometimes
being wildly wrong.

That said, I'm +1 on the current decision to keep it around, with its
current name. Users already have to look it up (since it's not spelled
len(q)), so they'll hit the warning.


[1]: ConcurrentLinkedQueue can't actually implement Queue in its
current form because it can't block. Something more like the data
structures described at
http://www.cs.rochester.edu/research/synchronization/pseudocode/duals.html
looks like it could, but I haven't examined the implementation well
enough to be sure. Nevertheless, it would be a bad idea to assume such
data structures will never be designed.

-- 
Namast?,
Jeffrey Yasskin

------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 23
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 22","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Useless methods in Queue module (Miguel Branco)
   2. Re: [Python-Dev] Rounding Decimals (Jim Jewett)
   3. Re: Useless methods in Queue module (Guido van Rossum)
   4. Re: [Python-Dev] Rounding Decimals (Guido van Rossum)
   5. Re: Useless methods in Queue module (Leif Walsh)
   6. Re: Useless methods in Queue module (Leif Walsh)
   7. Re: Useless methods in Queue module (Collin Winter)
   8. Re: Useless methods in Queue module (Raymond Hettinger)


----------------------------------------------------------------------

Message: 1
Date: Mon, 14 Jan 2008 14:24:44 +0100
From: Miguel Branco <miguel.branco@cern.ch>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <6297740F-C0FE-4380-BD83-2F8A94355F92@cern.ch>
Content-Type: text/plain; charset=""iso-8859-1""

-1 if I may.

I use qsize() to sustain an average queue size (unreliably) but not  
allowing the queue to be full. Certainly, this could be done in some  
other way, but the existence of the method remains very useful.

cheers


On Jan 11, 2008, at 8:13 PM, Raymond Hettinger wrote:

> I proposed to remove three methods from the queue module, qsize(),  
> empty(), and full().  These are not reliable.  The RightWay (tm) is  
> to trap the Empty and Full exceptions or use the .join() approach.
>
> Raymond
>
>
> --- From the docs ---
>
> Queue.qsize()?
>    Return the approximate size of the queue. Because of  
> multithreading semantics, this number is not reliable.
>
> Queue.empty()?
>    Return True if the queue is empty, False otherwise. Because of  
> multithreading semantics, this is not reliable.
>
> Queue.full()?
>    Return True if the queue is full, False otherwise. Because of  
> multithreading semantics, this is not reliable.
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/miguel.branco%40cern.ch

--
Miguel Branco, CERN - ATLAS Computing Group
MSN: msbranco@hotmail.com
   +41 22 76 71268 - http://cern.ch/mbranco/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080114/9fc18c03/attachment-0001.htm 

------------------------------

Message: 2
Date: Mon, 14 Jan 2008 08:48:06 -0500
From: ""Jim Jewett"" <jimjjewett@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<fb6fbf560801140548v2faa4f78l41eb3de9cc4dd0d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On 1/12/08, Guido van Rossum <guido@python.org> wrote:
> On Jan 12, 2008 5:09 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> > During the discussion about the new Rational implementation
> > (http://bugs.python.org/issue1682), Guido and Raymond decided that
> > Decimal should not implement the new Real ABC from PEP 3141. So I've
> > closed http://bugs.python.org/issue1623 and won't be pursuing any of
> > the extra rounding methods mentioned on this thread.

> Well, I didn't really decide anything. I suggested that if the
> developers of Decimal preferred it, it might be better if Decimal did
> not implement the Real ABC, and Raymond said he indeed preferred it.

I read his objections slightly differently.

He is very clear that Decimal itself should be restricted to the
standard, and therefore should not natively implement the extensions.
But he also said that it might be reasonable for another package to
subset or superset it in a friendlier way.

numbers.py is a different module, which must be explicitly imported.

If the objection is that

    >>> decimal.Decimal(""43.2"").imag

would work (instead of throwing an exception) only when numbers.py has
already been imported, then ... well, that confusion is inherent in
the abstract classes.

Or is the problem that it *still* wouldn't work, without help from the
decimal module itself?  In that case, 3rd party registration is fairly
limited, and this might be a good candidate for trying to figure out
ABCs and adapters *should* work together.

-jJ


------------------------------

Message: 3
Date: Mon, 14 Jan 2008 10:21:37 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python@rcn.com
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801141021n139ad3d0meb150ad7acf8291d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

How about dropping empty() and full(), but keeping qsize()? empty() is
trivially rephrased as qsize()==0; I haven't heard any use cases for
full().


-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Mon, 14 Jan 2008 10:39:00 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Jim Jewett"" <jimjjewett@gmail.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<ca471dc20801141039j43c59407l306c014fd1106965@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 14, 2008 5:48 AM, Jim Jewett <jimjjewett@gmail.com> wrote:
> On 1/12/08, Guido van Rossum <guido@python.org> wrote:
> > On Jan 12, 2008 5:09 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> > > During the discussion about the new Rational implementation
> > > (http://bugs.python.org/issue1682), Guido and Raymond decided that
> > > Decimal should not implement the new Real ABC from PEP 3141. So I've
> > > closed http://bugs.python.org/issue1623 and won't be pursuing any of
> > > the extra rounding methods mentioned on this thread.
>
> > Well, I didn't really decide anything. I suggested that if the
> > developers of Decimal preferred it, it might be better if Decimal did
> > not implement the Real ABC, and Raymond said he indeed preferred it.
>
> I read his objections slightly differently.
>
> He is very clear that Decimal itself should be restricted to the
> standard, and therefore should not natively implement the extensions.

Well, to me that sounds like idolizing the standard. The standard
exists so as to ensure that decimal numbers have well-understood
semantics that are implemented correctly. I don't think the standard
was ever meant to exclude optimal interaction with the rest of a
language. I'd like to see if ReXX implements numeric features over and
above the standard.

> But he also said that it might be reasonable for another package to
> subset or superset it in a friendlier way.

>From a user's perspective, it might make more sense to move the
strictly standard-conforming code into a module ""decimal_standard"" and
make the friendlier-named ""decimal"" module be that friendly superset.

> numbers.py is a different module, which must be explicitly imported.
>
> If the objection is that
>
>     >>> decimal.Decimal(""43.2"").imag
>
> would work (instead of throwing an exception) only when numbers.py has
> already been imported, then ... well, that confusion is inherent in
> the abstract classes.

Fortunately, the confusion is in your mind only, because that's not
how ABCs work according to PEP 3119. While as a side effect of
importing the numbers module, the Decimal class might become a virtual
subclass of numbers.Real, that doesn't mean that implementation
features are automatically added. The registration that might take
place inside numbers.py *only* affects the outcome of isinstance() and
issubclass() checks -- it doesn't magically add missing attributes or
methods to the class.

> Or is the problem that it *still* wouldn't work, without help from the
> decimal module itself?

Right.

> In that case, 3rd party registration is fairly
> limited, and this might be a good candidate for trying to figure out
> ABCs and adapters *should* work together.

Of course 3rd party registration is limited -- there's no way that you
could automatically define the right semantics, since the ABCs don't
have a way to express semantics.

PEP 3119 is meant as a *first step* towards adopting ABCs as a core
feature. The changes added to collections.py and numbers.py are best
considered as minimal examples. The main achievement of the PEP is
probably the hooks that allow you to override isinstance() and
issubclass(), plus the decision (which was discussed at length) to use
ABCs (with virtual inheritance), not interfaces, to model similarities
between class APIs.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Mon, 14 Jan 2008 14:15:08 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<11b6d2f60801141115p46afb166v9768e41cfd5f13bd@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 1:21 PM, Guido van Rossum <guido@python.org> wrote:
> How about dropping empty() and full(), but keeping qsize()? empty() is
> trivially rephrased as qsize()==0; I haven't heard any use cases for
> full().

I think the point is that, with multiple threads, those methods are
not guaranteed to be correct, whereas trapping the exceptions
apparently are, and therefore, leaving those methods in is confusing
to new programmers who might assume they work and use them without a
second thought.

-- 
Cheers,
Leif


------------------------------

Message: 6
Date: Mon, 14 Jan 2008 14:16:20 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org, python@rcn.com
Message-ID:
	<11b6d2f60801141116v4cdb6d8bid8a28e0e0326b2f9@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 14, 2008 2:15 PM, Leif Walsh <adlaiff6@gmail.com> wrote:
> On Jan 14, 2008 1:21 PM, Guido van Rossum <guido@python.org> wrote:
> > How about dropping empty() and full(), but keeping qsize()? empty() is
> > trivially rephrased as qsize()==0; I haven't heard any use cases for
> > full().
>
> I think the point is that, with multiple threads, those methods are
> not guaranteed to be correct, whereas trapping the exceptions
> apparently are, and therefore, leaving those methods in is confusing
> to new programmers who might assume they work and use them without a
> second thought.

Err, what I mean is, qsize()==0 really isn't a satisfactory replacement.


------------------------------

Message: 7
Date: Mon, 14 Jan 2008 11:33:12 -0800
From: ""Collin Winter"" <collinw@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: python@rcn.com, python-3000@python.org
Message-ID:
	<43aa6ff70801141133x5065152an993fa5f35b88b6a7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 14, 2008 11:15 AM, Leif Walsh <adlaiff6@gmail.com> wrote:
> On Jan 14, 2008 1:21 PM, Guido van Rossum <guido@python.org> wrote:
> > How about dropping empty() and full(), but keeping qsize()? empty() is
> > trivially rephrased as qsize()==0; I haven't heard any use cases for
> > full().
>
> I think the point is that, with multiple threads, those methods are
> not guaranteed to be correct, whereas trapping the exceptions
> apparently are, and therefore, leaving those methods in is confusing
> to new programmers who might assume they work and use them without a
> second thought.

I'm not sure people who ignore the big ""Because of multithreading
semantics, this is not reliable"" warnings should be catered to. Since
others have contributed use-cases for qsize()'s advisory information,
it should probably stay around.

Collin Winter


------------------------------

Message: 8
Date: Mon, 14 Jan 2008 14:55:35 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: Collin Winter <collinw@gmail.com>, Leif Walsh <adlaiff6@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080114145535.AEZ95753@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=us-ascii

> I'm not sure people who ignore the big ""Because of 
> multithreading semantics, this is not reliable"" warnings 
> should be catered to. Since others have contributed use-cases
> for qsize()'s advisory information, it should probably stay around.

I concur.

I do recommend we dump q.empty() and q.full().  The right way is to trap the Empty and Full exceptions.  If needed qsize() is available to make your own less reliable checks.

More than just simplifying the API, the improvement makes it easier to roll your own Queue (like a priority queue style).  Currently, we require that six methods get overridden (_init, _empty, _full, _qsize, _put, and _get).  It would be nice to lower the burden to just the basic four.


Raymond


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 22
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 21","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Charles Merriam)
   2. Re: PEP 3115: Actual use cases for odd metaclasses? Alternate
      syntax. (Phillip J. Eby)
   3. Re: [Python-Dev] Rounding Decimals (Jeffrey Yasskin)
   4. Re: [Python-Dev] Rounding Decimals (Leif Walsh)
   5. Re: [Python-Dev] Rounding Decimals (Jeffrey Yasskin)
   6. Re: [Python-Dev] Rounding Decimals (Leif Walsh)
   7. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Michele Simionato)


----------------------------------------------------------------------

Message: 1
Date: Sun, 13 Jan 2008 12:35:57 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801131235k3baf1413lf910cfe64875d490@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Sigh..  Yes mix-ins are about mixing classes.  No I didn't miss it.
No I'm not explaining it.  You can type 100 words to my one and not
add much.  I'm dropping metaclass changes.

Have a nice day,

Charles
On Jan 13, 2008 12:27 PM, Phillip J. Eby <pje@telecommunity.com> wrote:
> At 10:55 AM 1/13/2008 -0800, Charles Merriam wrote:
> >You have a legitimate counter-argument that grouping the
> >implementations of __add__ in the metaclass is cleaner than having
> >them stand alone and be referenced in.
>
> You've misunderstood Michele's example code.  __add__ in the
> metaclass lets you add two *record classes* together, not two records.
>
> Your proposal didn't support this behavior, nor *any other use case*
> for actually having a metaclass (as opposed to class decoration).
>
> You might find this metaclass tutorial enlightening, especially the
> section I've linked to:
>
> http://www.ibm.com/developerworks/linux/library/l-pymeta2/#h4
>
> Understanding this will show you why your original proposal is
> completely broken for non-decorator use cases.
>
>


------------------------------

Message: 2
Date: Sun, 13 Jan 2008 16:49:45 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses? Alternate syntax.
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080113215003.886833A4077@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 12:35 PM 1/13/2008 -0800, Charles Merriam wrote:
>Sigh..  Yes mix-ins are about mixing classes.  No I didn't miss it.

Yes, you did miss it, and are still missing it.

Otherwise you'd know why your original proposal was never viable in 
the first place, and why mixins have nothing to do with it.



------------------------------

Message: 3
Date: Sun, 13 Jan 2008 15:12:56 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<5d44f72f0801131512r7273c014ta4cf2583b8f73f6f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 12, 2008 8:21 PM, Guido van Rossum <guido@python.org> wrote:
>
> On Jan 12, 2008 5:09 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> > During the discussion about the new Rational implementation
> > (http://bugs.python.org/issue1682), Guido and Raymond decided that
> > Decimal should not implement the new Real ABC from PEP 3141. So I've
> > closed http://bugs.python.org/issue1623 and won't be pursuing any of
> > the extra rounding methods mentioned on this thread.
>
> Well, I didn't really decide anything. I suggested that if the
> developers of Decimal preferred it, it might be better if Decimal did
> not implement the Real ABC, and Raymond said he indeed preferred it.
>
> Since this reduces the usefulness of numeric.Real, I'm somewhat
> disappointed in this outcome (as I imagine you are). However, Decimal
> has very little of my own sweat in it, and a lot of Raymond, Facundo
> (and others, including Mark), and the ABC thing is still somewhat
> experimental, so it wouldn't make sense for me to impose my ideas onto
> Decimal unilaterally, and I'm sure Raymond etc. have their reasons.

Sorry for misrepresenting you. I am a little disappointed, but if
we're right that numbers.Real is a good idea, then users will ask for
Decimal to implement it, and the Decimal developers can change their
minds in 3.1. Since I'm not one of those users, I'm not the right
person to argue for this anyway. :)

-- 
Namast?,
Jeffrey Yasskin

------------------------------

Message: 4
Date: Sun, 13 Jan 2008 18:41:50 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<11b6d2f60801131541t5c0853f1l39da084a733c03a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 13, 2008 6:12 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> On Jan 12, 2008 8:21 PM, Guido van Rossum <guido@python.org> wrote:
> >
> > On Jan 12, 2008 5:09 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> > > During the discussion about the new Rational implementation
> > > (http://bugs.python.org/issue1682), Guido and Raymond decided that
> > > Decimal should not implement the new Real ABC from PEP 3141. So I've
> > > closed http://bugs.python.org/issue1623 and won't be pursuing any of
> > > the extra rounding methods mentioned on this thread.
> >
> > Well, I didn't really decide anything. I suggested that if the
> > developers of Decimal preferred it, it might be better if Decimal did
> > not implement the Real ABC, and Raymond said he indeed preferred it.
> >
> > Since this reduces the usefulness of numeric.Real, I'm somewhat
> > disappointed in this outcome (as I imagine you are). However, Decimal
> > has very little of my own sweat in it, and a lot of Raymond, Facundo
> > (and others, including Mark), and the ABC thing is still somewhat
> > experimental, so it wouldn't make sense for me to impose my ideas onto
> > Decimal unilaterally, and I'm sure Raymond etc. have their reasons.
>
> Sorry for misrepresenting you. I am a little disappointed, but if
> we're right that numbers.Real is a good idea, then users will ask for
> Decimal to implement it, and the Decimal developers can change their
> minds in 3.1. Since I'm not one of those users, I'm not the right
> person to argue for this anyway. :)

I haven't been watching the python-dev list for very long, so maybe
this has already been discussed ad nauseam (in which case, sorry),
but, from the devil's advocate-ish mathematics side of things, unless
numbers.Decimal is planned to be implemented with infinite precision
(which I doubt, but could not confirm with an admittedly small amount
of research), shouldn't it implement numbers.Rational instead?  Was
this ever discussed, or was it just assumed that numbers.Real was the
right decision?

Cheers,
Leif


------------------------------

Message: 5
Date: Sun, 13 Jan 2008 16:26:34 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Leif Walsh"" <adlaiff6@gmail.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<5d44f72f0801131626w780aac5axd505ce1335961377@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 13, 2008 3:41 PM, Leif Walsh <adlaiff6@gmail.com> wrote:
> I haven't been watching the python-dev list for very long, so maybe
> this has already been discussed ad nauseam (in which case, sorry),
> but, from the devil's advocate-ish mathematics side of things, unless
> numbers.Decimal is planned to be implemented with infinite precision
> (which I doubt, but could not confirm with an admittedly small amount
> of research), shouldn't it implement numbers.Rational instead?  Was
> this ever discussed, or was it just assumed that numbers.Real was the
> right decision?

Guido mentioned the possibility briefly at
http://mail.python.org/pipermail/python-3000/2007-April/007015.html
(""One could argue that float and Decimal are <:Q, but I'm not sure if
that makes things better pragmatically"") but never really discussed as
far as I can find (although I did think about it :). I prefer having
float not implement Rational (Decimal's off the table) because
developers usually think of them as approximations to arbitrary,
possibly-irrational, real numbers, rather than as rational numbers
with some odd constraints on their denominators. That is, to me, the
ABCs a type implements are more about how developers should think
about the type than the implementation of the type.

[ A new thread is probably appropriate if anyone wants to discuss the
philosophy, but I probably won't participate... ]

-- 
Namast?,
Jeffrey Yasskin

------------------------------

Message: 6
Date: Sun, 13 Jan 2008 19:37:46 -0500
From: ""Leif Walsh"" <adlaiff6@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<11b6d2f60801131637n50ed3b31s5fe151c66b5f23b6@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 13, 2008 7:26 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> Guido mentioned the possibility briefly at
> http://mail.python.org/pipermail/python-3000/2007-April/007015.html
> (""One could argue that float and Decimal are <:Q, but I'm not sure if
> that makes things better pragmatically"") but never really discussed as
> far as I can find (although I did think about it :).

Well, if nothing else, I'm certainly satisfied that my concerns about
accuracy are being addressed.  I will have to go read more of that
discussion.

> I prefer having
> float not implement Rational (Decimal's off the table) because
> developers usually think of them as approximations to arbitrary,
> possibly-irrational, real numbers, rather than as rational numbers
> with some odd constraints on their denominators. That is, to me, the
> ABCs a type implements are more about how developers should think
> about the type than the implementation of the type.

I see where you're coming from.  My personal stance is that developers
_shouldn't_ think that way, but I know that's an unpopular opinion,
and isn't really worth discussion here.

> [ A new thread is probably appropriate if anyone wants to discuss the
> philosophy, but I probably won't participate... ]

I don't feel any pressing need to continue this here and now.

Thanks!

-- 
Cheers,
Leif


------------------------------

Message: 7
Date: Mon, 14 Jan 2008 06:17:21 +0100
From: ""Michele Simionato"" <michele.simionato@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<4edc17eb0801132117g485296acn80f04186dc643ecb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 13, 2008 7:55 PM, Charles Merriam <charles.merriam@gmail.com> wrote:
> Sorry, if my Italian is non-existent.  Code is code however.
>
> Could you verify that the article covers:
>
> 1.   Complaints that __metaclass__ will be silently ignored in PEP 3115.
>
> My understanding from the last line of the Rational section is that
> this is undecided.

I dunno, in Python 3.0a2 the __metaclass__ hook is silently ignored.
In Python 3.0 final there could be a warning, or the warning  could be
at the level of the 2to3 code convention tool. In any case Python 3.0
is expected to break with the past, I am not complaining much here.

> 2.  Complaints that, without _prepare_, the __new__ operation will not
> know which order the items were declared, and that everyone will write
> ordered hash implementations.

Ordered dictionaries are useful for a variety of purposes, and there are already
lots of implementations out there. The use case for them in __prepare__
is very *very* minor. My complaint about the lack of an ordered dictionary
in the standard library stands on its own, independently of metaclasses.

> You have a legitimate counter-argument that grouping the
> implementations of __add__ in the metaclass is cleaner than having
> them stand alone and be referenced in.   Is this your argument?

I am not sure if I understand you correctly.
In the paper I have a metaclass definining the methods
__new__, __eq__, __call__, __add__ and __repr__ in the class body.
In Python, the ability to define methods in the class body is purely
syntactic sugar. One
could just define the methods externally and attach them to the class
dictionary later on.
Or one could just have a single __new__ method taking a dictionary as argument
(even for ordinary classes) and setting all the methods, possibly with
a memoization mechanism,
since you don't want to reset all the methods at each instantiation.
However, everybody basically agrees that it is nicer to define the
methods in the class body
for ordinary classes, so why it should be different in metaclasses?
Special cases are not
special enough.

 Michele Simionato


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 21
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 20","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: compiler module (Thomas Lee)
   2. Failure building docs of py3k r30a2 (Eric Hanchrow)
   3. Re: Failure building docs of py3k r30a2 (Georg Brandl)
   4. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Charles Merriam)
   5. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Charles Merriam)
   6. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Michele Simionato)
   7. Re: PEP 3115: Actual use cases for odd metaclasses?	Alternate
      syntax. (Charles Merriam)
   8. Re: PEP 3115: Actual use cases for odd metaclasses? Alternate
      syntax. (Phillip J. Eby)
   9. Re: PEP 3115: Actual use cases for odd metaclasses? Alternate
      syntax. (Phillip J. Eby)


----------------------------------------------------------------------

Message: 1
Date: Fri, 11 Jan 2008 15:38:13 +1100
From: Thomas Lee <tom@vector-seven.com>
Subject: Re: [Python-3000] compiler module
To: Brett Cannon <brett@python.org>
Cc: python-3000@python.org
Message-ID: <4786F2B5.2040402@vector-seven.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon wrote:
> On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
>   
>> My apologies if this has been asked before, but are there any plans to
>> add the compiler module back in to py3k?  If so, any idea on a
>> timeline?  If help is needed I may be able to put in some time on
>> this.  I've already back ported some of the py3k grammar (function
>> parameter annotations) to python 2.5.1 so I can use this with the
>> compiler module, but I think it would be sweet to just use py3k
>> directly.
>>     
>
> As Guido said, it is not going back. But we would appreciate help in
> writing a function that takes Python's actual AST represesntation (as
> returned by compile()) and generated the proper bytecode from it.
>
>   
Sorry, I should have been paying more attention to this thread:

I started on this a few months back at Neal's recommendation. I have a 
patch that is mostly working, but seems to be crashing out for a 
particular case (trying to compile functions, IIRC). I was never quite 
able to work out where it was going wrong. I'll upload my current patch 
to the tracker later tonight - I'd love some help trying to figure out 
why it's crashing out.

Using the patch it's possible to convert between the PyObject AST 
representation and the AST representation used internally by the 
compiler (thus it's possible to compile() an AST down to bytecode).

The patch is against current HEAD, not Py3k, but it should be a good 
starting point.

Cheers,
Tom



------------------------------

Message: 2
Date: Sat, 12 Jan 2008 09:00:39 -0800
From: Eric Hanchrow <offby1@blarg.net>
Subject: [Python-3000] Failure building docs of py3k r30a2
To: python-3000@python.org
Message-ID: <87bq7rvv0o.fsf@offby1.atm01.sea.blarg.net>
Content-Type: text/plain; charset=us-ascii

On Ubuntu 7.10 ""Gutsy Gibbon"":

Unfortunately I don't really know python, so am unable to debug this.

I checked out by doing

        svn co http://svn.python.org/projects/python/tags/r30a2 py3k

Then I built python itself with no apparent trouble.  But building the docs fails:

    make -k html
    mkdir -p build/html build/doctrees
    python2.5 tools/sphinx-build.py -bhtml -dbuild/doctrees  . build/html
    1mtrying to load pickled env...;49;00m done
    1mbuilding [html]:;49;00m targets for 0 source files that are out of date
    1mreading, updating environment:;49;00m 0 added, 0 changed, 0 removed 1m;49;00m
    1mcreating index...;49;00m
    1mwriting output...;49;00m
    ;01mcontents.rst;49;00m
    1mfinishing...;49;00m
    1mwriting additional files...;49;00m
    Traceback (most recent call last):
      File ""tools/sphinx-build.py"", line 23, in <module>
        sys.exit(main(sys.argv))
      File ""/usr/local/src/py3k/Doc/tools/sphinx/__init__.py"", line 145, in main
        builderobj.build_update()
      File ""/usr/local/src/py3k/Doc/tools/sphinx/builder.py"", line 208, in build_update
        'out of date' % len(to_build))
      File ""/usr/local/src/py3k/Doc/tools/sphinx/builder.py"", line 244, in build
        self.finish()
      File ""/usr/local/src/py3k/Doc/tools/sphinx/builder.py"", line 459, in finish
        download_base_url = self.config['html_download_base_url'],
    KeyError: 'html_download_base_url'
    make: *** [build] Error 1
    make: Target `html' not remade because of errors.

    Compilation exited abnormally with code 2 at Sat Jan 12 08:46:15

-- 
When there's not many discoveries being made, there's nothing left to
do all day but witch-hunt the heretics.
        -- Eliezer Yudkowsky


------------------------------

Message: 3
Date: Sun, 13 Jan 2008 17:21:00 +0000
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] Failure building docs of py3k r30a2
To: python-3000@python.org
Message-ID: <fmdh9s$oup$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Eric Hanchrow schrieb:
> On Ubuntu 7.10 ""Gutsy Gibbon"":
> 
> Unfortunately I don't really know python, so am unable to debug this.
> 
> I checked out by doing
> 
>         svn co http://svn.python.org/projects/python/tags/r30a2 py3k
> 
> Then I built python itself with no apparent trouble.  But building the docs fails:

[traceback]

I worked on the toolchain since 3.0a2 came out -- the specified config value is
not present yet in 3.0a2's config file.

I have a major update to the doctools in my local sandbox, before I check it in
I'll make sure it works with 3.0a2. As a workaround, you can either use the
3.0 branch HEAD docs, or add ""html_download_base_url = ''"" to Doc/conf.py.

cheers,
Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 4
Date: Sun, 13 Jan 2008 09:37:05 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801130937o39f0f604rd897215747fa931f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Well, I'm explicitly dropping this.   So far no one has pointed out
any use cases that are not equivalent to intercepting an array of the
namespace in the __init__() of a  subclass of type, then calling
type's __init__() on the modified namespace.   Still, I do get a level
of snarky insults that leads me to believe this would involve dealing
with people who like the metaclass definition syntax to be hairy.

Good luck!

Charles


------------------------------

Message: 5
Date: Sun, 13 Jan 2008 09:40:56 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Phillip J. Eby"" <pje@telecommunity.com>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801130940p33c18837g5e86cc3dc769b390@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

sorry, I meant __new__() not __init__().  For this crowd, I thought
I'd put in the obvious correction. :)


On Jan 13, 2008 9:37 AM, Charles Merriam <charles.merriam@gmail.com> wrote:
> Well, I'm explicitly dropping this.   So far no one has pointed out
> any use cases that are not equivalent to intercepting an array of the
> namespace in the __init__() of a  subclass of type, then calling
> type's __init__() on the modified namespace.   Still, I do get a level
> of snarky insults that leads me to believe this would involve dealing
> with people who like the metaclass definition syntax to be hairy.
>
> Good luck!
>
> Charles
>


------------------------------

Message: 6
Date: Sun, 13 Jan 2008 18:58:57 +0100
From: ""Michele Simionato"" <michele.simionato@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<4edc17eb0801130958m4c85c023oab0bf7a07965545b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

> On Jan 13, 2008 9:37 AM, Charles Merriam <charles.merriam@gmail.com> wrote:
> > Well, I'm explicitly dropping this.   So far no one has pointed out
> > any use cases that are not equivalent to intercepting an array of the
> > namespace in the __init__() of a  subclass of type, then calling
> > type's __init__() on the modified namespace.

There are many use cases. For instance in
http://stacktrace.it/articoli/2008/01/metaclassi-python-3000/
I discuss operator overloading on records. The paper is in Italian,
but you can  just look at
the code and at the examples.

    Michele Simionato


------------------------------

Message: 7
Date: Sun, 13 Jan 2008 10:55:00 -0800
From: ""Charles Merriam"" <charles.merriam@gmail.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses?	Alternate syntax.
To: ""Michele Simionato"" <michele.simionato@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<b8c6f6c40801131055m5806130dp9eff35d170c0660a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Sorry, if my Italian is non-existent.  Code is code however.

Could you verify that the article covers:

1.   Complaints that __metaclass__ will be silently ignored in PEP 3115.

My understanding from the last line of the Rational section is that
this is undecided.

2.  Complaints that, without _prepare_, the __new__ operation will not
know which order the items were declared, and that everyone will write
ordered hash implementations.

Though I propose that an array exist for the time analogous to the
current __new__ redirect.  One can look at the array as a hash with
very poor performance characteristics.  This should be acceptable for
the analogue.   After type.__init__() is actually called, only a hash
would survive.

3.  The metaclass can add additional class functions to support class
addition for on the fly creation of mixed in classes.

Though one could simply add these functions into the namespace during
the __new__ analogue.  My understanding is that type.__new__() will
not add new implementations if they exist in the namespace.  I may
well be wrong about type.__new__(), so please verify this yourself.

You have a legitimate counter-argument that grouping the
implementations of __add__ in the metaclass is cleaner than having
them stand alone and be referenced in.   Is this your argument?

Lost,

Charles






On Jan 13, 2008 9:58 AM, Michele Simionato <michele.simionato@gmail.com> wrote:
> > On Jan 13, 2008 9:37 AM, Charles Merriam <charles.merriam@gmail.com> wrote:
> > > Well, I'm explicitly dropping this.   So far no one has pointed out
> > > any use cases that are not equivalent to intercepting an array of the
> > > namespace in the __init__() of a  subclass of type, then calling
> > > type's __init__() on the modified namespace.
>
> There are many use cases. For instance in
> http://stacktrace.it/articoli/2008/01/metaclassi-python-3000/
> I discuss operator overloading on records. The paper is in Italian,
> but you can  just look at
> the code and at the examples.
>
>     Michele Simionato
>


------------------------------

Message: 8
Date: Sun, 13 Jan 2008 15:15:20 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses? Alternate syntax.
To: ""Charles Merriam"" <charles.merriam@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080113201522.4231C3A4077@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 09:37 AM 1/13/2008 -0800, Charles Merriam wrote:
>Well, I'm explicitly dropping this.   So far no one has pointed out
>any use cases that are not equivalent to intercepting an array of the
>namespace in the __init__() of a  subclass of type, then calling
>type's __init__() on the modified namespace.

As I've previously mentioned, see PEP 3115, ""Rationale"", paragraph 6 
for at least one such use case.

Also, you've still not shown how your proposal can support *any* 
metaclass use case that involves metaclass methods other than 
__init__ or __new__.  Without that, your previous proposal was dead 
in the water, with or without other use cases.



------------------------------

Message: 9
Date: Sun, 13 Jan 2008 15:27:51 -0500
From: ""Phillip J. Eby"" <pje@telecommunity.com>
Subject: Re: [Python-3000] PEP 3115: Actual use cases for odd
	metaclasses? Alternate syntax.
To: ""Charles Merriam"" <charles.merriam@gmail.com>,	""Michele Simionato""
	<michele.simionato@gmail.com>
Cc: python-3000@python.org
Message-ID: <20080113202752.EE5923A4077@sparrow.telecommunity.com>
Content-Type: text/plain; charset=""us-ascii""; format=flowed

At 10:55 AM 1/13/2008 -0800, Charles Merriam wrote:
>You have a legitimate counter-argument that grouping the
>implementations of __add__ in the metaclass is cleaner than having
>them stand alone and be referenced in.

You've misunderstood Michele's example code.  __add__ in the 
metaclass lets you add two *record classes* together, not two records.

Your proposal didn't support this behavior, nor *any other use case* 
for actually having a metaclass (as opposed to class decoration).

You might find this metaclass tutorial enlightening, especially the 
section I've linked to:

http://www.ibm.com/developerworks/linux/library/l-pymeta2/#h4

Understanding this will show you why your original proposal is 
completely broken for non-decorator use cases.



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 20
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 19","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. inst_persistent_id (Jim Fulton)
   2. Re: inst_persistent_id (Alexandre Vassalotti)
   3. Re: [Python-Dev] Rounding Decimals (Jeffrey Yasskin)
   4. Re: [Python-Dev] Rounding Decimals (Guido van Rossum)
   5. OSCON 2008 Call for Proposals (Aahz)


----------------------------------------------------------------------

Message: 1
Date: Sat, 12 Jan 2008 12:25:00 -0500
From: Jim Fulton <jim@zope.com>
Subject: [Python-3000] inst_persistent_id
To: python-dev@python.org
Cc: Python 3000 <python-3000@python.org>
Message-ID: <A2A6D220-45A7-4C04-8D4E-CBBB919D55E1@zope.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes


Recently, I reviewed the documentation source for pickle and came  
across the following comment:

    BAW: Both pickle and cPickle support something called  
inst_persistent_id()
    which appears to give unknown types a second shot at producing a  
persistent
    id.  Since Jim Fulton can't remember why it was added or what it's  
for, I'm
    leaving it undocumented.

I couldn't remember this and decided to dig into it and realized that  
this was a very useful experimental feature I added way back when  
cPickle was in its infancy.  This is a fairly useful optimization that  
I never got around to evaluating.  (Yeah, I know.) It is a hook, like  
the persistent_id hook that is called with objects to determine if  
they should be pickled by persistent reference.  Unlike persistent_id,  
it isn't called for built-in types (really types for which pickle has  
specific handlers), like strings, numbers, lists, tuples and so on. It  
is only called for ""instances"" (types for which pickle doesn't have  
specific handlers).  This vastly reduces the number of calls to the  
hook.  Some tests with ZODB indicated significant improvements in  
pickling speed when a hook is used.

If there are no objections, I'll update the Python 2 documentation to  
describe this and add a test.  The comment above suggests that this  
hook is in pickle and cPickle.  It is in cPickle, but was removed from  
pickle.  I propose to add it back to pickle -- mainly for consistency  
with cPickle.  I'll need to double check how this interacts with the  
type dispatching in pickle protocol 2.

Any objections?

Jim

--
Jim Fulton
Zope Corporation




------------------------------

Message: 2
Date: Sat, 12 Jan 2008 19:33:38 -0500
From: ""Alexandre Vassalotti"" <alexandre@peadrop.com>
Subject: Re: [Python-3000] inst_persistent_id
To: ""Jim Fulton"" <jim@zope.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<acd65fa20801121633l2ae5202j8a7d75d7933ce91e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 12, 2008 12:25 PM, Jim Fulton <jim@zope.com> wrote:
> If there are no objections, I'll update the Python 2 documentation to
> describe this and add a test.  The comment above suggests that this
> hook is in pickle and cPickle.  It is in cPickle, but was removed from
> pickle.  I propose to add it back to pickle -- mainly for consistency
> with cPickle.  I'll need to double check how this interacts with the
> type dispatching in pickle protocol 2.
>
> Any objections?
>

Well, in Python 3K, inst_persistent_id() won't be usable, since
PyInstance_Type was removed. Adding (actually supporting) this feature
in Python 2.x will make it slightly harder to port code. So, I think
it would probably best to leave it as it is right now -- i.e.,
undocumented and unsupported.

By the way, you might be interested to look at my work on pickle [1]
for Python 3K. As part of last year Summer of Code, I removed the
differences between the Python and C implementation of pickle, and
thus allowing the C version to be transparently used, instead of the
Python one, when it is available. Currently, I am polishing the code
for inclusion into the main branch. I also started to work on the next
version of the pickle protocol, that will make it more suitable for
Python 3K. If you are interested to help out, just send me an email
and I will explain you what needs to be done.


-- Alexandre

.. [1] http://peadrop.com/alex-py3k/?file/91639e5487dc/Modules/_picklemodule.c


------------------------------

Message: 3
Date: Sat, 12 Jan 2008 17:09:00 -0800
From: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Python 3000"" <python-3000@python.org>, python-dev@python.org
Cc: Raymond Hettinger <python@rcn.com>
Message-ID:
	<5d44f72f0801121709x7c25efbcvfa13e29864b5b577@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

During the discussion about the new Rational implementation
(http://bugs.python.org/issue1682), Guido and Raymond decided that
Decimal should not implement the new Real ABC from PEP 3141. So I've
closed http://bugs.python.org/issue1623 and won't be pursuing any of
the extra rounding methods mentioned on this thread.

-- 
Namast?,
Jeffrey Yasskin

------------------------------

Message: 4
Date: Sat, 12 Jan 2008 20:21:40 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] [Python-Dev] Rounding Decimals
To: ""Jeffrey Yasskin"" <jyasskin@gmail.com>
Cc: Python 3000 <python-3000@python.org>, python-dev@python.org
Message-ID:
	<ca471dc20801122021p38570b6s8fecf48e0ca37db6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 12, 2008 5:09 PM, Jeffrey Yasskin <jyasskin@gmail.com> wrote:
> During the discussion about the new Rational implementation
> (http://bugs.python.org/issue1682), Guido and Raymond decided that
> Decimal should not implement the new Real ABC from PEP 3141. So I've
> closed http://bugs.python.org/issue1623 and won't be pursuing any of
> the extra rounding methods mentioned on this thread.

Well, I didn't really decide anything. I suggested that if the
developers of Decimal preferred it, it might be better if Decimal did
not implement the Real ABC, and Raymond said he indeed preferred it.

Since this reduces the usefulness of numeric.Real, I'm somewhat
disappointed in this outcome (as I imagine you are). However, Decimal
has very little of my own sweat in it, and a lot of Raymond, Facundo
(and others, including Mark), and the ABC thing is still somewhat
experimental, so it wouldn't make sense for me to impose my ideas onto
Decimal unilaterally, and I'm sure Raymond etc. have their reasons.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Sat, 12 Jan 2008 20:58:02 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: [Python-3000] OSCON 2008 Call for Proposals
To: python-dev@python.org, python-3000@python.org
Message-ID: <20080113045802.GA19791@panix.com>
Content-Type: text/plain; charset=us-ascii

The O'Reilly Open Source Convention (OSCON) is accepting proposals for
tutorials and presentations.  The submission period ends Feb 4.

OSCON 2008 will be in Portland, Oregon July 21-25.  For more information
and to submit a proposal, see

http://conferences.oreilly.com/oscon/
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

Weinberg's Second Law: If builders built buildings the way programmers wrote 
programs, then the first woodpecker that came along would destroy civilization.


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 19
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 18","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: compiler module (Thomas Lee)


----------------------------------------------------------------------

Message: 1
Date: Sat, 12 Jan 2008 11:05:40 +1100
From: Thomas Lee <tom@vector-seven.com>
Subject: Re: [Python-3000] compiler module
To: Brett Cannon <brett@python.org>
Cc: python-3000@python.org
Message-ID: <47880454.6010501@vector-seven.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon wrote:
> On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
>   
>> My apologies if this has been asked before, but are there any plans to
>> add the compiler module back in to py3k?  If so, any idea on a
>> timeline?  If help is needed I may be able to put in some time on
>> this.  I've already back ported some of the py3k grammar (function
>> parameter annotations) to python 2.5.1 so I can use this with the
>> compiler module, but I think it would be sweet to just use py3k
>> directly.
>>     
>
> As Guido said, it is not going back. But we would appreciate help in
> writing a function that takes Python's actual AST represesntation (as
> returned by compile()) and generated the proper bytecode from it.
>
>   
I sent an e-mail regarding this earlier under another e-mail address but 
it doesn't seem to have gone through due to security restrictions on the 
Python mailing list:

I've been working on this for a while now at Neal's request and have a 
(mostly working) patch, it's probably long overdue that I ask for some help:

http://bugs.python.org/issue1810

Effectively, it seems to work great for simple statements but it 
segfaults when trying to compile a function. I wasn't able to figure out 
why - the crash seems to occur while the code is being executed.

I also uploaded code to reproduce the crash I'm seeing with the patch 
applied. Can anybody help me out with this?

Cheers,
Tom



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 18
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 17","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. parser/compiler interface [was Re: compiler module] (Georg Brandl)
   2. Re: parser/compiler interface [was Re: compiler	module]
      (Martin v. L?wis)
   3. Re: parser/compiler interface [was Re: compiler	module]
      (Fred Drake)
   4. Re: parser/compiler interface [was Re: compiler module]
      (Jean-Paul Calderone)
   5. Re: parser/compiler interface [was Re: compiler	module]
      (Georg Brandl)
   6. Useless methods in Queue module (Raymond Hettinger)
   7. Re: Useless methods in Queue module (Aahz)
   8. Re: Useless methods in Queue module (Mike Klaas)
   9. Re: Useless methods in Queue module (John Barham)
  10. Re: Useless methods in Queue module (Thomas Heller)


----------------------------------------------------------------------

Message: 1
Date: Fri, 11 Jan 2008 16:02:53 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: [Python-3000] parser/compiler interface [was Re: compiler
	module]
To: python-3000@python.org
Message-ID: <fm80fg$1gt$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Brett Cannon schrieb:
> On Jan 10, 2008 2:08 PM, Joe Angell <joe.d.angell@gmail.com> wrote:
>> Oh I see... forgive my ignorance but could you point me at some
>> documentation or a project that uses the c AST as you mentioned?  Is
>> that done through some part of the C-API?  I cannot find that in the
>> documentation at the moment.
>>
> 
> http://docs.python.org/dev/library/_ast.html

That's also something I wanted to suggest for a cleanup:

Python's code parsing/compiling interface is currently very cluttered:
* you can parse things with parser.suite(), but not create an AST from
   the parse result
* you can create an AST with an undocumented flag to compile(), but not
   compile the resulting AST
* there are too many modules that have to do with parsing and compiling:
   token, symbol, parser, _ast, symtable

I'd suggest a single package to unify all this functionality and an API
that makes it easy to go from every compiling stage to the next, or to
the final code object.

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 2
Date: Fri, 11 Jan 2008 16:22:28 +0100
From: ""Martin v. L?wis"" <martin@v.loewis.de>
Subject: Re: [Python-3000] parser/compiler interface [was Re: compiler
	module]
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org
Message-ID: <478789B4.4050901@v.loewis.de>
Content-Type: text/plain; charset=ISO-8859-1

> * you can parse things with parser.suite(), but not create an AST from
>    the parse result
> * you can create an AST with an undocumented flag to compile(), but not
>    compile the resulting AST

The flag is documented, in the document referred to.

There are good reasons for why things are that way. In proceeding, it
is always important to remember these reasons.

> * there are too many modules that have to do with parsing and compiling:
>    token, symbol, parser, _ast, symtable

I fail to see that as a problem. token and symbol are just collections
of symbolic constants - what's wrong with that?

> I'd suggest a single package to unify all this functionality and an API
> that makes it easy to go from every compiling stage to the next, or to
> the final code object.

Unifying might be a good thing, but I don't see how it helps to solve
the problems you report (except for the last one, perhaps - but then,
you might end up with a single package with too many modules). To go
from one step to the next, you first have to implement the code to make
that possible. Only then it becomes relevant whether that code all
should live in a single package.

Regards,
Martin


------------------------------

Message: 3
Date: Fri, 11 Jan 2008 11:06:53 -0500
From: Fred Drake <fdrake@acm.org>
Subject: Re: [Python-3000] parser/compiler interface [was Re: compiler
	module]
To: Georg Brandl <g.brandl@gmx.net>
Cc: python-3000@python.org
Message-ID: <29855921-E970-4154-AE05-09AFE5BAB81E@acm.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes

On Jan 11, 2008, at 10:02 AM, Georg Brandl wrote:
> I'd suggest a single package to unify all this functionality and an  
> API
> that makes it easy to go from every compiling stage to the next, or to
> the final code object.


+1


   -Fred

-- 
Fred Drake   <fdrake at acm.org>






------------------------------

Message: 4
Date: Fri, 11 Jan 2008 11:12:38 -0500
From: Jean-Paul Calderone <exarkun@divmod.com>
Subject: Re: [Python-3000] parser/compiler interface [was Re: compiler
	module]
To: python-3000@python.org
Message-ID: <20080111161238.31425.873187738.divmod.quotient.3446@ohm>
Content-Type: text/plain; format=flowed

On Fri, 11 Jan 2008 16:02:53 +0100, Georg Brandl <g.brandl@gmx.net> wrote:
>
>Python's code parsing/compiling interface is currently very cluttered:
>* you can parse things with parser.suite(), but not create an AST from
>   the parse result
>* you can create an AST with an undocumented flag to compile(), but not
>   compile the resulting AST
>* there are too many modules that have to do with parsing and compiling:
>   token, symbol, parser, _ast, symtable
>
>I'd suggest a single package to unify all this functionality and an API
>that makes it easy to go from every compiling stage to the next, or to
>the final code object.

+alot

Jean-Paul


------------------------------

Message: 5
Date: Fri, 11 Jan 2008 17:50:57 +0100
From: Georg Brandl <g.brandl@gmx.net>
Subject: Re: [Python-3000] parser/compiler interface [was Re: compiler
	module]
To: python-3000@python.org
Message-ID: <fm86q3$prl$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Martin v. L?wis schrieb:
>> * you can parse things with parser.suite(), but not create an AST from
>>    the parse result
>> * you can create an AST with an undocumented flag to compile(), but not
>>    compile the resulting AST
> 
> The flag is documented, in the document referred to.
> 
> There are good reasons for why things are that way. In proceeding, it
> is always important to remember these reasons.

I think I am aware of the reasons, and I'm not accusing anyone that
things went that way. It's just that a programmer would want a different
situation, especially with the compiler package gone.

>> * there are too many modules that have to do with parsing and compiling:
>>    token, symbol, parser, _ast, symtable
> 
> I fail to see that as a problem. token and symbol are just collections
> of symbolic constants - what's wrong with that?

Nothing per se, but if we are grouping things for Py3k, this is a
strong candidate.

>> I'd suggest a single package to unify all this functionality and an API
>> that makes it easy to go from every compiling stage to the next, or to
>> the final code object.
> 
> Unifying might be a good thing, but I don't see how it helps to solve
> the problems you report (except for the last one, perhaps - but then,
> you might end up with a single package with too many modules). To go
> from one step to the next, you first have to implement the code to make
> that possible.  Only then it becomes relevant whether that code all
> should live in a single package.

Of course, I intend to implement the missing pieces, as well as the
unification.

Georg

-- 
Thus spake the Lord: Thou shalt indent with four spaces. No more, no less.
Four shall be the number of spaces thou shalt indent, and the number of thy
indenting shall be four. Eight shalt thou not indent, nor either indent thou
two, excepting that thou then proceed to four. Tabs are right out.



------------------------------

Message: 6
Date: Fri, 11 Jan 2008 14:13:21 -0500 (EST)
From: Raymond Hettinger <python@rcn.com>
Subject: [Python-3000] Useless methods in Queue module
To: python-3000@python.org
Message-ID: <20080111141321.AEW71195@ms19.lnh.mail.rcn.net>
Content-Type: text/plain; charset=iso-8859-1

I proposed to remove three methods from the queue module, qsize(), empty(), and full().  These are not reliable.  The RightWay (tm) is to trap the Empty and Full exceptions or use the .join() approach.

Raymond


--- From the docs ---

Queue.qsize()?
    Return the approximate size of the queue. Because of multithreading semantics, this number is not reliable.

Queue.empty()?
    Return True if the queue is empty, False otherwise. Because of multithreading semantics, this is not reliable.

Queue.full()?
    Return True if the queue is full, False otherwise. Because of multithreading semantics, this is not reliable.


------------------------------

Message: 7
Date: Fri, 11 Jan 2008 11:16:01 -0800
From: Aahz <aahz@pythoncraft.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python-3000@python.org
Message-ID: <20080111191601.GA15354@panix.com>
Content-Type: text/plain; charset=us-ascii

On Fri, Jan 11, 2008, Raymond Hettinger wrote:
>
> I proposed to remove three methods from the queue module, qsize(),
> empty(), and full().  These are not reliable.  The RightWay (tm) is to
> trap the Empty and Full exceptions or use the .join() approach.

Although I'm not going to advocate for retaining them, I see them as
mildly useful for logging purposes (especially qsize()).
-- 
Aahz (aahz@pythoncraft.com)           <*>         http://www.pythoncraft.com/

Weinberg's Second Law: If builders built buildings the way programmers wrote 
programs, then the first woodpecker that came along would destroy civilization.


------------------------------

Message: 8
Date: Fri, 11 Jan 2008 11:32:03 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python@rcn.com
Cc: python-3000@python.org
Message-ID: <CCB40FC8-52CD-4B5C-918B-8CB607C32CD9@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On 11-Jan-08, at 11:13 AM, Raymond Hettinger wrote:

> I proposed to remove three methods from the queue module, qsize(),  
> empty(), and full().  These are not reliable.  The RightWay (tm) is  
> to trap the Empty and Full exceptions or use the .join() approach.

-1.  There are several ""advisory"" use cases for these methods where  
the reliability of the answer when .get/.put is not important.

For instance, as Aahz mentioned, being able to log the size of the  
queue is extremely useful (also, for unittesting).  Another, more  
substantive use case is as follows: I have an asyncore.dispatcher  
implementation that reads output from a Queue.Queue to put on the  
wire.  It is necessary here to implement .writable(), which should  
return True if there is a possibility that there is data to be  
written (so asyncore can poll for writability in the select() loop).   
""return not queue.empty()"" does the trick.  Of course, when it comes  
time to write to the socket, it is still necessary to catch Empty  
exceptions, and do nothing in that case.

-Mike



------------------------------

Message: 9
Date: Fri, 11 Jan 2008 11:43:34 -0800
From: ""John Barham"" <jbarham@gmail.com>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python-3000@python.org
Message-ID:
	<4f34febc0801111143i5aef5ebu5b61976055e64c9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 11, 2008 11:16 AM, Aahz <aahz@pythoncraft.com> wrote:

> On Fri, Jan 11, 2008, Raymond Hettinger wrote:
> >
> > I proposed to remove three methods from the queue module, qsize(),
> > empty(), and full().  These are not reliable.  The RightWay (tm) is to
> > trap the Empty and Full exceptions or use the .join() approach.
>
> Although I'm not going to advocate for retaining them, I see them as
> mildly useful for logging purposes (especially qsize()).

I've personally found qsize() to be useful, even essential, as if it
was over some threshold it indicated my program was deadlocked. ;)
Knowing when that condition occurred, and logging it, was crucial to
fixing the bug.  I didn't care so much about the exact value as that
it was far too big.  So qsize() IMHO should stay, empty() and full()
can go.

  John


------------------------------

Message: 10
Date: Fri, 11 Jan 2008 21:01:31 +0100
From: Thomas Heller <theller@ctypes.org>
Subject: Re: [Python-3000] Useless methods in Queue module
To: python-3000@python.org
Message-ID: <fm8hun$1nf$1@ger.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1

Raymond Hettinger schrieb:
> I proposed to remove three methods from the queue module, qsize(),
> empty(), and full().  These are not reliable.  The RightWay (tm) is
> to trap the Empty and Full exceptions or use the .join() approach.

I am actively using empty().  This code example receives and processes requests
into a database, and does a commit when there is nothing to do.  It can
certainly be written in a different way, but I'm happy with it:

            while 1:
                if self.queue.empty():
                    database.commit()
                request = self.queue.get()
                database.process(request)


Please keep them.

Thomas



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 17
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 16","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: pep 3119 question (ABC) (Guido van Rossum)
   2. Re: compiler module (Brett Cannon)
   3. Re: compiler module (Joe Angell)
   4. Re: compiler module (Brett Cannon)
   5. Re: compiler module (Joe Angell)
   6. Re: compiler module (Brett Cannon)


----------------------------------------------------------------------

Message: 1
Date: Thu, 10 Jan 2008 11:59:18 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] pep 3119 question (ABC)
To: ""Neal Becker"" <ndbecker2@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801101159r3a3de279n66ed29c8731dfb76@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 10, 2008 11:54 AM, Neal Becker <ndbecker2@gmail.com> wrote:
>
> Guido van Rossum wrote:
>
> > On Jan 10, 2008 11:20 AM, Neal Becker <ndbecker2@gmail.com> wrote:
> >> On reading this pep, I was not clear on one issue.
> >>
> >> In some interface proposals (zope?), as well as in c++0x concept
> >> proposal, there is a mechanism to specify how to adapt a given class to
> >> satisfy given interface requirements.
> >>
> >> For example, suppose container ABC requires a 'size'.  Suppose I have a
> >> container-like class C, but it's size is called 'len'.  The idea is to be
> >> able to specify, _outside of the class C_, that the size requirement is
> >> met, and it's called 'len'.
> >>
> >> Does pep 3119 offer that functionality?
> >
> > No.
> >
>
> Isn't that rather limiting then?  It's all well and good to design a
> monolithic library with a uniform use of concepts.  But the motivation for
> adaptation is that you want to mix libraries from different sources that
> might not have coordinated in their design.
>
> Is this because python classes are always open, and so I can always
> add/modify their properties to conform to any interface, even without
> touching the library source code, and therefore I don't really need any
> other mechanism to adapt interfaces?

It's because nobody contributed a requirement for this feature to the
PEP discussion when it was being discussed. I wouldn't want to rely on
monkeypatching if it was a valid requirement.

You should be able to subclass the metaclass though to add this
feature if you want it. If you do it cleanly enough it could even be
added to the PEP (or rather a new PEP) and to the standard abc.py
module.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 2
Date: Thu, 10 Jan 2008 12:25:03 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] compiler module
To: ""Joe Angell"" <joe.d.angell@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100801101225k35c5676g47d5030e1d5998fa@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> My apologies if this has been asked before, but are there any plans to
> add the compiler module back in to py3k?  If so, any idea on a
> timeline?  If help is needed I may be able to put in some time on
> this.  I've already back ported some of the py3k grammar (function
> parameter annotations) to python 2.5.1 so I can use this with the
> compiler module, but I think it would be sweet to just use py3k
> directly.

As Guido said, it is not going back. But we would appreciate help in
writing a function that takes Python's actual AST represesntation (as
returned by compile()) and generated the proper bytecode from it.

-Brett


------------------------------

Message: 3
Date: Thu, 10 Jan 2008 14:50:19 -0700
From: ""Joe Angell"" <joe.d.angell@gmail.com>
Subject: Re: [Python-3000] compiler module
To: ""Guido van Rossum"" <guido@python.org>
Cc: python-3000@python.org
Message-ID:
	<9fc959f40801101350r4ff4dfcbsed6a40522f2b3d16@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

How do you plan on letting third party tools utilize the new grammar?
Will they have to write their own parser then, or is there some kind
of plugin architecture?

Thanks,

joe

On Jan 10, 2008 10:34 AM, Guido van Rossum <guido@python.org> wrote:
>
> On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > My apologies if this has been asked before, but are there any plans to
> > add the compiler module back in to py3k?  If so, any idea on a
> > timeline?  If help is needed I may be able to put in some time on
> > this.  I've already back ported some of the py3k grammar (function
> > parameter annotations) to python 2.5.1 so I can use this with the
> > compiler module, but I think it would be sweet to just use py3k
> > directly.
>
> AFAIK there are no such plans; maintaining two versions of the
> compiler (one in Python and one in C) has turned out to be a
> nightmare, with the Python version always running behind and having
> bugs because it wasn't used much for real work.
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/)
>


------------------------------

Message: 4
Date: Thu, 10 Jan 2008 13:56:08 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] compiler module
To: ""Joe Angell"" <joe.d.angell@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100801101356j1f5d8ae4vf24190778adef20b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 10, 2008 1:50 PM, Joe Angell <joe.d.angell@gmail.com> wrote:
> How do you plan on letting third party tools utilize the new grammar?

Don't need to plan anything; people are already using the AST that
Python's compiler uses since 2.5 came out.

> Will they have to write their own parser then, or is there some kind
> of plugin architecture?

No parser is required; Python's parser already handles the parsing.

-Brett



>
> Thanks,
>
> joe
>
>
> On Jan 10, 2008 10:34 AM, Guido van Rossum <guido@python.org> wrote:
> >
> > On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > > My apologies if this has been asked before, but are there any plans to
> > > add the compiler module back in to py3k?  If so, any idea on a
> > > timeline?  If help is needed I may be able to put in some time on
> > > this.  I've already back ported some of the py3k grammar (function
> > > parameter annotations) to python 2.5.1 so I can use this with the
> > > compiler module, but I think it would be sweet to just use py3k
> > > directly.
> >
> > AFAIK there are no such plans; maintaining two versions of the
> > compiler (one in Python and one in C) has turned out to be a
> > nightmare, with the Python version always running behind and having
> > bugs because it wasn't used much for real work.
> >
> > --
> > --Guido van Rossum (home page: http://www.python.org/~guido/)
> >
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/brett%40python.org
>


------------------------------

Message: 5
Date: Thu, 10 Jan 2008 15:08:15 -0700
From: ""Joe Angell"" <joe.d.angell@gmail.com>
Subject: Re: [Python-3000] compiler module
To: ""Brett Cannon"" <brett@python.org>
Cc: python-3000@python.org
Message-ID:
	<9fc959f40801101408o37dbe33ev7a4a0e6424ce239d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Oh I see... forgive my ignorance but could you point me at some
documentation or a project that uses the c AST as you mentioned?  Is
that done through some part of the C-API?  I cannot find that in the
documentation at the moment.

Thank you,

joe

On Jan 10, 2008 2:56 PM, Brett Cannon <brett@python.org> wrote:
> On Jan 10, 2008 1:50 PM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > How do you plan on letting third party tools utilize the new grammar?
>
> Don't need to plan anything; people are already using the AST that
> Python's compiler uses since 2.5 came out.
>
> > Will they have to write their own parser then, or is there some kind
> > of plugin architecture?
>
> No parser is required; Python's parser already handles the parsing.
>
> -Brett
>
>
>
> >
> > Thanks,
> >
> > joe
> >
> >
> > On Jan 10, 2008 10:34 AM, Guido van Rossum <guido@python.org> wrote:
> > >
> > > On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > > > My apologies if this has been asked before, but are there any plans to
> > > > add the compiler module back in to py3k?  If so, any idea on a
> > > > timeline?  If help is needed I may be able to put in some time on
> > > > this.  I've already back ported some of the py3k grammar (function
> > > > parameter annotations) to python 2.5.1 so I can use this with the
> > > > compiler module, but I think it would be sweet to just use py3k
> > > > directly.
> > >
> > > AFAIK there are no such plans; maintaining two versions of the
> > > compiler (one in Python and one in C) has turned out to be a
> > > nightmare, with the Python version always running behind and having
> > > bugs because it wasn't used much for real work.
> > >
> > > --
> > > --Guido van Rossum (home page: http://www.python.org/~guido/)
> > >
> > _______________________________________________
> > Python-3000 mailing list
> > Python-3000@python.org
> > http://mail.python.org/mailman/listinfo/python-3000
> > Unsubscribe: http://mail.python.org/mailman/options/python-3000/brett%40python.org
> >
>


------------------------------

Message: 6
Date: Thu, 10 Jan 2008 14:22:30 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] compiler module
To: ""Joe Angell"" <joe.d.angell@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<bbaeab100801101422j5ecefafcy376becc055314e79@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 10, 2008 2:08 PM, Joe Angell <joe.d.angell@gmail.com> wrote:
> Oh I see... forgive my ignorance but could you point me at some
> documentation or a project that uses the c AST as you mentioned?  Is
> that done through some part of the C-API?  I cannot find that in the
> documentation at the moment.
>

http://docs.python.org/dev/library/_ast.html


> Thank you,
>
> joe
>
>
> On Jan 10, 2008 2:56 PM, Brett Cannon <brett@python.org> wrote:
> > On Jan 10, 2008 1:50 PM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > > How do you plan on letting third party tools utilize the new grammar?
> >
> > Don't need to plan anything; people are already using the AST that
> > Python's compiler uses since 2.5 came out.
> >
> > > Will they have to write their own parser then, or is there some kind
> > > of plugin architecture?
> >
> > No parser is required; Python's parser already handles the parsing.
> >
> > -Brett
> >
> >
> >
> > >
> > > Thanks,
> > >
> > > joe
> > >
> > >
> > > On Jan 10, 2008 10:34 AM, Guido van Rossum <guido@python.org> wrote:
> > > >
> > > > On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> > > > > My apologies if this has been asked before, but are there any plans to
> > > > > add the compiler module back in to py3k?  If so, any idea on a
> > > > > timeline?  If help is needed I may be able to put in some time on
> > > > > this.  I've already back ported some of the py3k grammar (function
> > > > > parameter annotations) to python 2.5.1 so I can use this with the
> > > > > compiler module, but I think it would be sweet to just use py3k
> > > > > directly.
> > > >
> > > > AFAIK there are no such plans; maintaining two versions of the
> > > > compiler (one in Python and one in C) has turned out to be a
> > > > nightmare, with the Python version always running behind and having
> > > > bugs because it wasn't used much for real work.
> > > >
> > > > --
> > > > --Guido van Rossum (home page: http://www.python.org/~guido/)
> > > >
> > > _______________________________________________
> > > Python-3000 mailing list
> > > Python-3000@python.org
> > > http://mail.python.org/mailman/listinfo/python-3000
> > > Unsubscribe: http://mail.python.org/mailman/options/python-3000/brett%40python.org
> > >
> >
>


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 16
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 15","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Is pickle's persistent_id worth keeping? (Jesus Cea)
   2. Re: Is pickle's persistent_id worth keeping? (Jesus Cea)
   3. Re: Is pickle's persistent_id worth keeping? (Guido van Rossum)
   4. compiler module (Joe Angell)
   5. Re: compiler module (Guido van Rossum)
   6. Re: Is pickle's persistent_id worth keeping? (Gregory P. Smith)
   7. pep 3119 question (ABC) (Neal Becker)
   8. Re: pep 3119 question (ABC) (Guido van Rossum)
   9. Re: pep 3119 question (ABC) (Neal Becker)


----------------------------------------------------------------------

Message: 1
Date: Thu, 10 Jan 2008 13:52:55 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
Cc: Python 3000 <python-3000@python.org>
Message-ID: <47861527.7020904@argo.es>
Content-Type: text/plain; charset=ISO-8859-15

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Guido van Rossum wrote:
> pickle should definitely remain part of the core; it is timed in lots
> of ways to core datatypes. It is also something that I expect nobody
> would be thrilled to maintain if it was separate. And there is a lot
> to say for having a ""universal"" serialization format; e.g. there have
> been RPC systems built on top of pickling.

Notably, the wonderful Pyro :-)

> For things like bsddb I think the argument of release cycles is
> stronger. In particular bsddb support in the core is painful, the
> tests often fail, they take a long time to run, and I don't see that
> many users.

I'm very dependent of bsddb support in python. I'm very sorry also of
the maintainer support of it: he is slow and doesn't implement python
bindings for berkeleydb features deployed five years ago :-(. Could be a
bit rude, but maybe a maintaner change would be in order. I would rather
prefer to talk to current maintainer, but I rather apply for maintaner
position than dropping bsddb from the python stdlib!!.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR4YVJ5lgi5GaxT1NAQIwqQP+L8lUsU4O2NxykHVLIuONjwqGFfE7+La6
01eKXft06L6sHTJ11qZq2XN9vltrXv39W4DH8Ak+yOD7fJANfTPc2XvYNt2vyiQh
4Hqa5/V8FjErlpebO3/b0ostPNfd422Oijtv5pc8xZqlQX4o9gBL2aNqCKbmLPPI
ht/Ei8MBgfA=
=yQak
-----END PGP SIGNATURE-----


------------------------------

Message: 2
Date: Thu, 10 Jan 2008 13:43:12 +0100
From: Jesus Cea <jcea@argo.es>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
Cc: Python 3000 <python-3000@python.org>
Message-ID: <478612E0.10704@argo.es>
Content-Type: text/plain; charset=ISO-8859-15

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jim Fulton wrote:
> Pickle always memoized objects.  persistent_id is useful for  
> separating data over multiple pickles as is done in a database.  IOW,  
> as its name implies, it is primarily useful for persistence systems.   
> I don't think that ZODB is the only persistence system built on  
> pickle, but perhaps I'm wrong.
> 
> I  suspect ZODB is also the primary user of the pickle module.

Durus, another (excellent) persistence system for Python also uses this
method.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea@argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea@jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
""Things are not so easy""      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
""My name is Dump, Core Dump""   _/_/_/        _/_/_/      _/_/  _/_/
""El amor es poner tu felicidad en la felicidad de otro"" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBR4YS4Jlgi5GaxT1NAQInxgQAlzoD5d9srVS5X+h86CXzPtk1S/R9VRLX
r8374kqLLla3wjKKuJXt+dksiKvMbtwpLEYIGJf9EP2NsSm4Xnq4iMtqXxR9r+mZ
4Vr57p2Rqf168r1qMO7frndjxR1YHkVkap0sTE7s0euJOuTjNTtljwko/Fo8TjY6
9ICMujOLaYM=
=uAL6
-----END PGP SIGNATURE-----


------------------------------

Message: 3
Date: Thu, 10 Jan 2008 08:08:55 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: ""Jesus Cea"" <jcea@argo.es>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID:
	<ca471dc20801100808p419b5481sed2f8075191503da@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 10, 2008 4:52 AM, Jesus Cea <jcea@argo.es> wrote:
> I'm very dependent of bsddb support in python. I'm very sorry also of
> the maintainer support of it: he is slow and doesn't implement python
> bindings for berkeleydb features deployed five years ago :-(. Could be a
> bit rude, but maybe a maintaner change would be in order. I would rather
> prefer to talk to current maintainer, but I rather apply for maintaner
> position than dropping bsddb from the python stdlib!!.

Hi Jesus,

I don't know if there *is* a current maintainer. There are a few
people who sometimes fix things in the current code base, but I think
development has stopped. If you're serious about wanting to take over
maintenance, (or even just contributing) that would be great!

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 4
Date: Thu, 10 Jan 2008 09:39:02 -0700
From: ""Joe Angell"" <joe.d.angell@gmail.com>
Subject: [Python-3000] compiler module
To: python-3000@python.org
Message-ID:
	<9fc959f40801100839wfe202ber43a01d551f418eeb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

My apologies if this has been asked before, but are there any plans to
add the compiler module back in to py3k?  If so, any idea on a
timeline?  If help is needed I may be able to put in some time on
this.  I've already back ported some of the py3k grammar (function
parameter annotations) to python 2.5.1 so I can use this with the
compiler module, but I think it would be sweet to just use py3k
directly.

Thanks,

Joe Angell


------------------------------

Message: 5
Date: Thu, 10 Jan 2008 09:34:52 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] compiler module
To: ""Joe Angell"" <joe.d.angell@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801100934g1dd1f247h128ba18c44569f42@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 10, 2008 8:39 AM, Joe Angell <joe.d.angell@gmail.com> wrote:
> My apologies if this has been asked before, but are there any plans to
> add the compiler module back in to py3k?  If so, any idea on a
> timeline?  If help is needed I may be able to put in some time on
> this.  I've already back ported some of the py3k grammar (function
> parameter annotations) to python 2.5.1 so I can use this with the
> compiler module, but I think it would be sweet to just use py3k
> directly.

AFAIK there are no such plans; maintaining two versions of the
compiler (one in Python and one in C) has turned out to be a
nightmare, with the Python version always running behind and having
bugs because it wasn't used much for real work.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 6
Date: Thu, 10 Jan 2008 10:58:27 -0800
From: ""Gregory P. Smith"" <greg@krypto.org>
Subject: Re: [Python-3000] Is pickle's persistent_id worth keeping?
To: ""Guido van Rossum"" <guido@python.org>
Cc: Python 3000 <python-3000@python.org>, Barry Warsaw
	<warsaw@gmail.com>
Message-ID:
	<52dc1c820801101058k43e24a25x6ff9955b294896fb@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

On 1/10/08, Guido van Rossum <guido@python.org> wrote:
>
> On Jan 10, 2008 4:52 AM, Jesus Cea <jcea@argo.es> wrote:
> > I'm very dependent of bsddb support in python. I'm very sorry also of
> > the maintainer support of it: he is slow and doesn't implement python
> > bindings for berkeleydb features deployed five years ago :-(. Could be a
> > bit rude, but maybe a maintaner change would be in order. I would rather
> > prefer to talk to current maintainer, but I rather apply for maintaner
> > position than dropping bsddb from the python stdlib!!.
>
> Hi Jesus,
>
> I don't know if there *is* a current maintainer. There are a few
> people who sometimes fix things in the current code base, but I think
> development has stopped. If you're serious about wanting to take over
> maintenance, (or even just contributing) that would be great!


I consider myself the maintainer because I at least make sure it keeps
working with new berkeleydb releases and such and am one of the most
familiar with the _bsddb.c code internals (both the good and the bad).

But theres a caveat to me having that job: I have -zero- use for the bsddb
module myself today. Whenever I update it it really is a donation of my time
since I don't personally need the changes.  A maintainer that has a vested
interest in using the module would be a great thing.  There are a couple
crashing bugs that need fixing and a few more recent API additions that
could be wrapped for sure.

Volunteering Jesus? :)

-gps
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080110/82b62041/attachment-0001.htm 

------------------------------

Message: 7
Date: Thu, 10 Jan 2008 14:20:15 -0500
From: Neal Becker <ndbecker2@gmail.com>
Subject: [Python-3000] pep 3119 question (ABC)
To: python-3000@python.org
Message-ID: <fm5r5f$j01$1@ger.gmane.org>
Content-Type: text/plain; charset=us-ascii

On reading this pep, I was not clear on one issue.

In some interface proposals (zope?), as well as in c++0x concept proposal,
there is a mechanism to specify how to adapt a given class to satisfy given
interface requirements.

For example, suppose container ABC requires a 'size'.  Suppose I have a
container-like class C, but it's size is called 'len'.  The idea is to be
able to specify, _outside of the class C_, that the size requirement is
met, and it's called 'len'.

Does pep 3119 offer that functionality?



------------------------------

Message: 8
Date: Thu, 10 Jan 2008 11:36:38 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] pep 3119 question (ABC)
To: ""Neal Becker"" <ndbecker2@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801101136g371e3488u219300ad44beb9eb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 10, 2008 11:20 AM, Neal Becker <ndbecker2@gmail.com> wrote:
> On reading this pep, I was not clear on one issue.
>
> In some interface proposals (zope?), as well as in c++0x concept proposal,
> there is a mechanism to specify how to adapt a given class to satisfy given
> interface requirements.
>
> For example, suppose container ABC requires a 'size'.  Suppose I have a
> container-like class C, but it's size is called 'len'.  The idea is to be
> able to specify, _outside of the class C_, that the size requirement is
> met, and it's called 'len'.
>
> Does pep 3119 offer that functionality?

No.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 9
Date: Thu, 10 Jan 2008 14:54:07 -0500
From: Neal Becker <ndbecker2@gmail.com>
Subject: Re: [Python-3000] pep 3119 question (ABC)
To: python-3000@python.org
Message-ID: <fm5t50$r93$1@ger.gmane.org>
Content-Type: text/plain; charset=us-ascii

Guido van Rossum wrote:

> On Jan 10, 2008 11:20 AM, Neal Becker <ndbecker2@gmail.com> wrote:
>> On reading this pep, I was not clear on one issue.
>>
>> In some interface proposals (zope?), as well as in c++0x concept
>> proposal, there is a mechanism to specify how to adapt a given class to
>> satisfy given interface requirements.
>>
>> For example, suppose container ABC requires a 'size'.  Suppose I have a
>> container-like class C, but it's size is called 'len'.  The idea is to be
>> able to specify, _outside of the class C_, that the size requirement is
>> met, and it's called 'len'.
>>
>> Does pep 3119 offer that functionality?
> 
> No.
> 

Isn't that rather limiting then?  It's all well and good to design a
monolithic library with a uniform use of concepts.  But the motivation for
adaptation is that you want to mix libraries from different sources that
might not have coordinated in their design.

Is this because python classes are always open, and so I can always
add/modify their properties to conform to any interface, even without
touching the library source code, and therefore I don't really need any
other mechanism to adapt interfaces?



------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 15
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 14","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Need closure on __cmp__ removal (Marcin ?Qrczak? Kowalczyk)
   2. Re: Need closure on __cmp__ removal (Guido van Rossum)
   3. Re: Need closure on __cmp__ removal (Bill Janssen)
   4. Re: Need closure on __cmp__ removal (Oleg Broytmann)
   5. Re: Need closure on __cmp__ removal (Brett Cannon)
   6. Re: Need closure on __cmp__ removal (Oleg Broytmann)
   7. Re: Need closure on __cmp__ removal (Mike Klaas)
   8. PEP 3116 question (hashcollision)
   9. Re: PEP 3116 question (Christian Heimes)


----------------------------------------------------------------------

Message: 1
Date: Wed, 09 Jan 2008 18:16:54 +0100
From: Marcin ?Qrczak? Kowalczyk <qrczak@knm.org.pl>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Message-ID: <1199899014.23874.14.camel@qrnik>
Content-Type: text/plain; charset=ISO-8859-2

Dnia 09-01-2008, ?r o godzinie 01:49 +0100, Christian Heimes pisze:

> You could write and implement a PEP about exposing the tp_richcompare
> slot to Python code.

How is it better than separate __eq__, __lt__ etc.? In most cases the
rich comparison starts with dispatching on the operation and treats each
one independently; I suppose only rarely it is forwarded to another
object without looking at the operation. So usually it is less
convenient and slower than separate methods.

-- 
   __(""<         Marcin Kowalczyk
   \__/       qrczak@knm.org.pl
    ^^     http://qrnik.knm.org.pl/~qrczak/



------------------------------

Message: 2
Date: Wed, 9 Jan 2008 11:08:29 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Mark Summerfield"" <mark@qtrac.eu>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801091108r7c0a77bdxace227e8d1c2e094@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

On Jan 9, 2008 12:04 AM, Mark Summerfield <mark@qtrac.eu> wrote:
> I'm using this as a class decorator that fills in ""missing"" comparisons:
>
> def complete_comparisons(cls):
>     class CompleteComparisonsError(Exception): pass
>
>     if hasattr(cls.__lt__, ""__objclass__""): # i.e. < inherited from object
>         raise CompleteComparisonsError(""{0} must define < and ""
>                 ""ideally =="".format(cls.__name__))
>     if hasattr(cls.__eq__, ""__objclass__""): # i.e. == inherited from object
>         cls.__eq__ = lambda self, other: not (
>                 cls.__lt__(self, other) or cls.__lt__(other, self))
>     cls.__ne__ = lambda self, other: not cls.__eq__(self, other)
>     cls.__gt__ = lambda self, other: cls.__lt__(other, self)
>     cls.__le__ = lambda self, other: (cls.__lt__(self, other) or
>                                       cls.__eq__(self, other))
>     cls.__ge__ = lambda self, other: (cls.__lt__(other, self) or
>                                       cls.__eq__(self, other))
>     return cls
>
>
> The reason for the ugly hasattr() calls is that object itself defines
> the comparison operators (in Python 3.0a2).

That's due to object's implementation of __eq__ and __ne__; this is
done by having a tp_richcompare slot and then the wrapper generator
adds wrappers for all six operators to the class dict. This is not
easy to fix.

-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 3
Date: Wed, 9 Jan 2008 11:26:52 PST
From: Bill Janssen <janssen@parc.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: hashcollision <hashcollision@gmail.com>, python-3000@python.org
Message-ID: <08Jan9.112655pst.""58696""@synergy1.parc.xerox.com>

Steve Bethard writes:
> On Jan 8, 2008 3:55 PM, Brett Cannon <brett@python.org> wrote:
> > On Jan 8, 2008 2:41 PM, Guido van Rossum <guido@python.org> wrote:
> > > list.sort() and built-in sorted() are the least of our problems: even
> > > though the API uses cmp, the implementation actually only ever uses
> > > '<'; and the preferred API is to use the 'key' argument instead of
> > > passing a compare function; that's much more efficient.
> > >
> > > Maybe we should retire the compare function completely in 3.0?
> > >
> >
> > +1 from me. I personally have always hated the whole, -1, 0, 1 style
> > of comparison anyway.
> 
> +1 from here too.  I've found it frustrating that the first argument
> to sort() and sorted() is the least useful. ;-)

I'm a bit baffled here; I find cmp() fairly handy in writing sort
routines:

   newlist = oldlist.sort(lambda v1, v2: cmp(v1.attr_x, v2.attr_x))

Is there a better / newer / official way of doing this?  If not, isn't
""cmp()"" still useful to have around?

(Bear in mind that I still use the 2.3.5 dialect of Python as much as
possible, due to the continued widespread deployment of Mac OS X 10.4.
So my style may be out-of-date.)

Bill


------------------------------

Message: 4
Date: Wed, 9 Jan 2008 22:34:28 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Message-ID: <20080109193428.GA19182@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Jan 09, 2008 at 11:26:52AM -0800, Bill Janssen wrote:
> I'm a bit baffled here; I find cmp() fairly handy in writing sort
> routines:
> 
>    newlist = oldlist.sort(lambda v1, v2: cmp(v1.attr_x, v2.attr_x))
> 
> Is there a better / newer / official way of doing this?

   newlist = oldlist.sort(key=lambda v: v.attr_x)

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 5
Date: Wed, 9 Jan 2008 11:34:59 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Oleg Broytmann"" <phd@phd.pp.ru>, python-3000@python.org
Message-ID:
	<bbaeab100801091134l2383ddf6pbb2b6584c127c299@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 9, 2008 11:34 AM, Oleg Broytmann <phd@phd.pp.ru> wrote:
> On Wed, Jan 09, 2008 at 11:26:52AM -0800, Bill Janssen wrote:
> > I'm a bit baffled here; I find cmp() fairly handy in writing sort
> > routines:
> >
> >    newlist = oldlist.sort(lambda v1, v2: cmp(v1.attr_x, v2.attr_x))
> >
> > Is there a better / newer / official way of doing this?
>
>    newlist = oldlist.sort(key=lambda v: v.attr_x)

And don't forget about operator.attrgetter().

-Brett


------------------------------

Message: 6
Date: Wed, 9 Jan 2008 22:41:29 +0300
From: Oleg Broytmann <phd@phd.pp.ru>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Message-ID: <20080109194129.GB19182@phd.pp.ru>
Content-Type: text/plain; charset=us-ascii

On Wed, Jan 09, 2008 at 11:34:59AM -0800, Brett Cannon wrote:
> On Jan 9, 2008 11:34 AM, Oleg Broytmann <phd@phd.pp.ru> wrote:
> >    newlist = oldlist.sort(key=lambda v: v.attr_x)
> 
> And don't forget about operator.attrgetter().

   I don't like it for the task. To use I need to import operator, and
I don't know is it faster or slower than lambda; I suspect it's slower but
I am too lazy to test. Using lambda to get a simple attribute seems much
simpler to me.

Oleg.
-- 
     Oleg Broytmann            http://phd.pp.ru/            phd@phd.pp.ru
           Programmers don't die, they just GOSUB without RETURN.


------------------------------

Message: 7
Date: Wed, 9 Jan 2008 12:10:34 -0800
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: Oleg Broytmann <phd@phd.pp.ru>
Cc: python-3000@python.org
Message-ID: <1DB580AE-244A-4E00-AA20-47402018FD6F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed

On 9-Jan-08, at 11:41 AM, Oleg Broytmann wrote:

> On Wed, Jan 09, 2008 at 11:34:59AM -0800, Brett Cannon wrote:
>> On Jan 9, 2008 11:34 AM, Oleg Broytmann <phd@phd.pp.ru> wrote:
>>>    newlist = oldlist.sort(key=lambda v: v.attr_x)
>>
>> And don't forget about operator.attrgetter().
>
>    I don't like it for the task. To use I need to import operator, and
> I don't know is it faster or slower than lambda; I suspect it's  
> slower but
> I am too lazy to test. Using lambda to get a simple attribute seems  
> much
> simpler to me.

lambda's are always slower than the equivalent coded in c:

[worio@domU-12-31-38-00-59-81 frontend]$ python -m 'timeit' 'import  
operator; f=operator.attrgetter(""open""); import os' 'f(os)'
100000 loops, best of 3: 5.71 usec per loop
[worio@domU-12-31-38-00-59-81 frontend]$ python -m 'timeit' 'f=lambda  
x: x.open; import os' 'f(os)'

100000 loops, best of 3: 6.06 usec per loop

-Mike


------------------------------

Message: 8
Date: Wed, 9 Jan 2008 22:03:47 -0500
From: hashcollision <hashcollision@gmail.com>
Subject: [Python-3000] PEP 3116 question
To: python-3000@python.org
Message-ID:
	<37f76d50801091903x2b6f848fue68b6ebeea38a2b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

>From PEP 3116: ""BufferedRandom implementation is for all random-access
objects, whether they are read-only, write-only, or *read-write*.""
(emphasis mine) However, from the pseudo-code for open(),
""if reading + writing + appending > 1:
    raise ValueError(""can't have read/write/append mode at once"")""
dosn't this contradict each other? Why isn't read + write allowed when
BufferedRandom does allow it? Java's RandomAccessFile allows the mode
""rw"". Is there a way to do something like it in Python?


------------------------------

Message: 9
Date: Thu, 10 Jan 2008 04:45:29 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] PEP 3116 question
To: hashcollision <hashcollision@gmail.com>
Cc: python-3000@python.org
Message-ID: <478594D9.7010509@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

hashcollision wrote:
>>From PEP 3116: ""BufferedRandom implementation is for all random-access
> objects, whether they are read-only, write-only, or *read-write*.""
> (emphasis mine) However, from the pseudo-code for open(),
> ""if reading + writing + appending > 1:
>     raise ValueError(""can't have read/write/append mode at once"")""
> dosn't this contradict each other? Why isn't read + write allowed when
> BufferedRandom does allow it? Java's RandomAccessFile allows the mode
> ""rw"". Is there a way to do something like it in Python?

In Python we have ""r+"" or ""w+"". r+ opens a file for reading but also
allows writing. w+ creates or truncates a file and allows reading and
writing. In the open function it's called ""updating"".

Christian


------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 14
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
"Python-3000 Digest, Vol 23, Issue 13","Send Python-3000 mailing list submissions to
	python-3000@python.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://mail.python.org/mailman/listinfo/python-3000
or, via email, send a message with subject or body 'help' to
	python-3000-request@python.org

You can reach the person managing the list at
	python-3000-owner@python.org

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Python-3000 digest...""


Today's Topics:

   1. Re: Need closure on __cmp__ removal (Brett Cannon)
   2. Re: Need closure on __cmp__ removal (Steven Bethard)
   3. Re: Need closure on __cmp__ removal (hashcollision)
   4. Re: Need closure on __cmp__ removal (Guido van Rossum)
   5. What does the ""+"" mode do? (hashcollision)
   6. Re: What does the ""+"" mode do? (Terry Reedy)
   7. Re: Need closure on __cmp__ removal (Christian Heimes)
   8. Re: Need closure on __cmp__ removal (Mark Summerfield)


----------------------------------------------------------------------

Message: 1
Date: Tue, 8 Jan 2008 14:55:02 -0800
From: ""Brett Cannon"" <brett@python.org>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Guido van Rossum"" <guido@python.org>
Cc: hashcollision <hashcollision@gmail.com>, python-3000@python.org
Message-ID:
	<bbaeab100801081455m69384e82ia481fac83a4d71ae@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 8, 2008 2:41 PM, Guido van Rossum <guido@python.org> wrote:
> list.sort() and built-in sorted() are the least of our problems: even
> though the API uses cmp, the implementation actually only ever uses
> '<'; and the preferred API is to use the 'key' argument instead of
> passing a compare function; that's much more efficient.
>
> Maybe we should retire the compare function completely in 3.0?
>

+1 from me. I personally have always hated the whole, -1, 0, 1 style
of comparison anyway.

-Brett

>
> On Jan 8, 2008 2:34 PM, hashcollision <hashcollision@gmail.com> wrote:
> > Ok, I do see your point, but how would one pass in a custom comparison
> > function to sorted?
> >
> >
> >
> >
> > On Jan 7, 2008 11:55 PM, Guido van Rossum <guido@python.org> wrote:
> >
> > >
> > >
> > >
> > > On Jan 7, 2008 8:48 PM, hashcollision <hashcollision@gmail.com> wrote:
> > > >
> > > >
> > > > > But the biggest thing missing is precise semantics. Saying ""exactly
> > > > > the same semantics as with Python 2.5"" doesn't cut it (those semantics
> > > > > are incredibly hairy and sometimes surprising, and their
> > > > > implementation was a nightmare -- I've rarely been as relieved as when
> > > > > I was able to cut those out of the implementation).
> > > >
> > > >
> > > > Why is that so? I might be being naive, but what is wrong with something
> > > > like this:
> > > >
> > > > def cmp(a, b):
> > > >     if hasattr(a, '__cmp__'):
> > > >         return a.__cmp__(b)
> > > >     elif hasattr(b, '__cmp__'):
> > > >         return -1 * b.__cmp__(a)
> > > >     elif hasattr(a, '__le__') and hasattr(a, '__ge__'):
> > > >         x = a <= b
> > > >         y = a >= b
> > > >         if x and y:
> > > >             return 0
> > > >         elif x:
> > > >             return -1
> > > >         elif y:
> > > >             return 1
> > > >     elif hasattr(b, '__le__') and hasattr(b, '__ge__'):
> > > >         x = b <= a
> > > >         y = b >= a
> > > >         if x and y:
> > > >             return 0
> > > >         elif x:
> > > >             return 1
> > > >         elif y:
> > > >             return -1
> > > >     elif hasattr(a, '__eq__'):
> > > >         if a == b:
> > > >             return 0
> > > >         if hasattr(a, '__lt__'):
> > > >             if a < b:
> > > >                 return -1
> > > >             else:
> > > >                 return 1
> > > >         elif hasattr(a, '__gt__'):
> > > >             if a > b:
> > > >                 return 1
> > > >             else:
> > > >                 return -1
> > > >         else:
> > > >             raise NotImplemented()
> > > >     elif hasattr(b, '__eq__'):
> > > >         if a == b:
> > > >             return 0
> > > >         if hasattr(b, '__lt__'):
> > > >             if b < a:
> > > >                 return 1
> > > >             else:
> > > >                 return -1
> > > >         elif hasattr(b, '__gt__'):
> > > >              if b > a:
> > > >                 return -1
> > > >             else:
> > > >                 return 1
> > > >         else:
> > > >             raise NotImplemented()
> > > >     else:
> > > >         raise NotImplemented()
> > >
> > > You don't call that hairy? :-)
> > >
> > > Anyway, one of the additional complications is that it is supposed to
> > > be implemented in C, and there is one C slot for all six comparisons
> > > together (which of the six is an argument). The 2.x rules are also
> > > further complicated in that sometimes the RHS is tried before the LHS
> > > (in case the RHS is an instance of a subclass of the class of the
> > > LHS).
> > >
> > > And I think you've ignored the possibility that a.__cmp__(b) might
> > > return NotImplemented.
> > >
> > > Just believe me, it's hairy.
> > >
> > >
> > >
> > >
> > > --
> > > --Guido van Rossum (home page: http://www.python.org/~guido/)
> > >
> >
> >
>
>
>
> --
> --Guido van Rossum (home page: http://www.python.org/~guido/)
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe: http://mail.python.org/mailman/options/python-3000/brett%40python.org
>


------------------------------

Message: 2
Date: Tue, 8 Jan 2008 17:12:47 -0700
From: ""Steven Bethard"" <steven.bethard@gmail.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Brett Cannon"" <brett@python.org>
Cc: hashcollision <hashcollision@gmail.com>, python-3000@python.org
Message-ID:
	<d11dcfba0801081612s18c3eb06y5da665a0a3291623@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

On Jan 8, 2008 3:55 PM, Brett Cannon <brett@python.org> wrote:
> On Jan 8, 2008 2:41 PM, Guido van Rossum <guido@python.org> wrote:
> > list.sort() and built-in sorted() are the least of our problems: even
> > though the API uses cmp, the implementation actually only ever uses
> > '<'; and the preferred API is to use the 'key' argument instead of
> > passing a compare function; that's much more efficient.
> >
> > Maybe we should retire the compare function completely in 3.0?
> >
>
> +1 from me. I personally have always hated the whole, -1, 0, 1 style
> of comparison anyway.

+1 from here too.  I've found it frustrating that the first argument
to sort() and sorted() is the least useful. ;-)

Steve
-- 
I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
tiny blip on the distant coast of sanity.
        --- Bucky Katt, Get Fuzzy


------------------------------

Message: 3
Date: Tue, 8 Jan 2008 19:23:26 -0500
From: hashcollision <hashcollision@gmail.com>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: ""Steven Bethard"" <steven.bethard@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<37f76d50801081623k66311bb3k759336c87b4f6be5@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

+1 from me too if you only need to define __lt__ and __eq__ and __le__ and
__gt__, etc, will default to that. If it dosn't default to those, I feel
that one would need to write too many functions.

On Jan 8, 2008 7:12 PM, Steven Bethard <steven.bethard@gmail.com> wrote:

> On Jan 8, 2008 3:55 PM, Brett Cannon <brett@python.org> wrote:
> > On Jan 8, 2008 2:41 PM, Guido van Rossum <guido@python.org> wrote:
> > > list.sort() and built-in sorted() are the least of our problems: even
> > > though the API uses cmp, the implementation actually only ever uses
> > > '<'; and the preferred API is to use the 'key' argument instead of
> > > passing a compare function; that's much more efficient.
> > >
> > > Maybe we should retire the compare function completely in 3.0?
> > >
> >
> > +1 from me. I personally have always hated the whole, -1, 0, 1 style
> > of comparison anyway.
>
> +1 from here too.  I've found it frustrating that the first argument
> to sort() and sorted() is the least useful. ;-)
>
> Steve
> --
> I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
> tiny blip on the distant coast of sanity.
>        --- Bucky Katt, Get Fuzzy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080108/7b0ab80f/attachment-0001.htm 

------------------------------

Message: 4
Date: Tue, 8 Jan 2008 16:35:25 -0800
From: ""Guido van Rossum"" <guido@python.org>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: hashcollision <hashcollision@gmail.com>
Cc: python-3000@python.org
Message-ID:
	<ca471dc20801081635s48fdd481lc7de78d1d3b18ac@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

That's a different issue altogether (and your wish is not likely going
to be granted unless you write a PEP).

On Jan 8, 2008 4:23 PM, hashcollision <hashcollision@gmail.com> wrote:
> +1 from me too if you only need to define __lt__ and __eq__ and __le__ and
> __gt__, etc, will default to that. If it dosn't default to those, I feel
> that one would need to write too many functions.
>
>
>
>
> On Jan 8, 2008 7:12 PM, Steven Bethard <steven.bethard@gmail.com> wrote:
>
> >
> > On Jan 8, 2008 3:55 PM, Brett Cannon <brett@python.org> wrote:
> > > On Jan 8, 2008 2:41 PM, Guido van Rossum <guido@python.org > wrote:
> > > > list.sort() and built-in sorted() are the least of our problems: even
> > > > though the API uses cmp, the implementation actually only ever uses
> > > > '<'; and the preferred API is to use the 'key' argument instead of
> > > > passing a compare function; that's much more efficient.
> > > >
> > > > Maybe we should retire the compare function completely in 3.0?
> > > >
> > >
> > > +1 from me. I personally have always hated the whole, -1, 0, 1 style
> > > of comparison anyway.
> >
> > +1 from here too.  I've found it frustrating that the first argument
> > to sort() and sorted() is the least useful. ;-)
> >
> >
> >
> >
> > Steve
> > --
> > I'm not *in*-sane. Indeed, I am so far *out* of sane that you appear a
> > tiny blip on the distant coast of sanity.
> >        --- Bucky Katt, Get Fuzzy
> >
>
>
> _______________________________________________
> Python-3000 mailing list
> Python-3000@python.org
> http://mail.python.org/mailman/listinfo/python-3000
> Unsubscribe:
> http://mail.python.org/mailman/options/python-3000/guido%40python.org
>
>



-- 
--Guido van Rossum (home page: http://www.python.org/~guido/)


------------------------------

Message: 5
Date: Tue, 8 Jan 2008 19:43:44 -0500
From: hashcollision <hashcollision@gmail.com>
Subject: [Python-3000] What does the ""+"" mode do?
To: python-3000@python.org
Message-ID:
	<37f76d50801081643g15df4f04o42052bdf8b4fb30b@mail.gmail.com>
Content-Type: text/plain; charset=""iso-8859-1""

A quick question:
What does the ""+"" mode do? I couldn't find much on google (except that it is
called ""updating"").
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://mail.python.org/pipermail/python-3000/attachments/20080108/000e040e/attachment-0001.htm 

------------------------------

Message: 6
Date: Tue, 8 Jan 2008 19:49:03 -0500
From: ""Terry Reedy"" <tjreedy@udel.edu>
Subject: Re: [Python-3000] What does the ""+"" mode do?
To: python-3000@python.org
Message-ID: <fm15lu$t5j$1@ger.gmane.org>


""hashcollision"" <hashcollision@gmail.com> wrote in message 
news:37f76d50801081643g15df4f04o42052bdf8b4fb30b@mail.gmail.com...
|A quick question:
| What does the ""+"" mode do? I couldn't find much on google (except that it 
is
| called ""updating"").

This is a question for comp.lang.python, not the developers' lists. 





------------------------------

Message: 7
Date: Wed, 09 Jan 2008 01:49:44 +0100
From: Christian Heimes <lists@cheimes.de>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: Guido van Rossum <guido@python.org>
Cc: hashcollision <hashcollision@gmail.com>, python-3000@python.org
Message-ID: <47841A28.9040501@cheimes.de>
Content-Type: text/plain; charset=ISO-8859-1

Guido van Rossum wrote:
> That's a different issue altogether (and your wish is not likely going
> to be granted unless you write a PEP).

You could write and implement a PEP about exposing the tp_richcompare
slot to Python code.

import sys

class Example:
    def __richcmp__(self, other: object, op: int) -> bool:
        if op == sys.CMP_EQ:
            return self.value == other.value
        ...

Christian


------------------------------

Message: 8
Date: Wed, 9 Jan 2008 08:04:50 +0000
From: Mark Summerfield <mark@qtrac.eu>
Subject: Re: [Python-3000] Need closure on __cmp__ removal
To: python-3000@python.org
Cc: hashcollision <hashcollision@gmail.com>,	Christian Heimes
	<lists@cheimes.de>
Message-ID: <200801090804.51141.mark@qtrac.eu>
Content-Type: text/plain;  charset=""iso-8859-1""

On 2008-01-09, Christian Heimes wrote:
> Guido van Rossum wrote:
> > That's a different issue altogether (and your wish is not likely going
> > to be granted unless you write a PEP).
>
> You could write and implement a PEP about exposing the tp_richcompare
> slot to Python code.
>
> import sys
>
> class Example:
>     def __richcmp__(self, other: object, op: int) -> bool:
>         if op == sys.CMP_EQ:
>             return self.value == other.value
>         ...

I'm using this as a class decorator that fills in ""missing"" comparisons:

def complete_comparisons(cls):
    class CompleteComparisonsError(Exception): pass

    if hasattr(cls.__lt__, ""__objclass__""): # i.e. < inherited from object
        raise CompleteComparisonsError(""{0} must define < and ""
                ""ideally =="".format(cls.__name__))
    if hasattr(cls.__eq__, ""__objclass__""): # i.e. == inherited from object
        cls.__eq__ = lambda self, other: not (
                cls.__lt__(self, other) or cls.__lt__(other, self))
    cls.__ne__ = lambda self, other: not cls.__eq__(self, other)
    cls.__gt__ = lambda self, other: cls.__lt__(other, self)
    cls.__le__ = lambda self, other: (cls.__lt__(self, other) or
                                      cls.__eq__(self, other))
    cls.__ge__ = lambda self, other: (cls.__lt__(other, self) or
                                      cls.__eq__(self, other))
    return cls


The reason for the ugly hasattr() calls is that object itself defines
the comparison operators (in Python 3.0a2).


-- 
Mark Summerfield, Qtrac Ltd., www.qtrac.eu




------------------------------

_______________________________________________
Python-3000 mailing list
Python-3000@python.org
http://mail.python.org/mailman/listinfo/python-3000


End of Python-3000 Digest, Vol 23, Issue 13
*******************************************
","python-3000-bounces+raychorn=hotmail.com@python.org","python-3000-bounces+raychorn=hotmail.com@python.org","SMTP","python-3000@python.org","python-3000@python.org","SMTP",,,,,,,,,"Normal"
